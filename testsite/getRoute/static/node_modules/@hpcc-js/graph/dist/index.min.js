!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@hpcc-js/common"),require("@hpcc-js/api")):"function"==typeof define&&define.amd?define(["exports","@hpcc-js/common","@hpcc-js/api"],e):e((t=t||self)["@hpcc-js/graph"]={},t["@hpcc-js/common"],t["@hpcc-js/api"])}(this,function(t,e,n){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Math.PI,a=2*o,u=a-1e-6;function s(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function c(){return new s}function h(t){return function(){return t}}s.prototype=c.prototype={constructor:s,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,u=this._y1,s=n-t,c=r-e,h=a-t,l=u-e,f=h*h+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*s-c*h)>1e-6&&i){var d=n-a,p=r-u,g=s*s+c*c,v=d*d+p*p,_=Math.sqrt(g),y=Math.sqrt(f),m=i*Math.tan((o-Math.acos((g+f-v)/(2*_*y)))/2),x=m/y,w=m/_;Math.abs(x-1)>1e-6&&(this._+="L"+(t+x*h)+","+(e+x*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>h*p)+","+(this._x1=t+w*s)+","+(this._y1=e+w*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,s){t=+t,e=+e;var c=(n=+n)*Math.cos(r),h=n*Math.sin(r),l=t+c,f=e+h,d=1^s,p=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+f:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+l+","+f),n&&(p<0&&(p=p%a+a),p>u?this._+="A"+n+","+n+",0,1,"+d+","+(t-c)+","+(e-h)+"A"+n+","+n+",0,1,"+d+","+(this._x1=l)+","+(this._y1=f):p>1e-6&&(this._+="A"+n+","+n+",0,"+ +(p>=o)+","+d+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var l=1e-12;Math.PI;function f(t){this._context=t}function d(t){return new f(t)}function p(t){return t[0]}function g(t){return t[1]}f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var v=Array.prototype.slice;function _(t){return t.source}function y(t){return t.target}function m(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}function x(){return function(t){var e=_,n=y,r=p,i=g,o=null;function a(){var a,u=v.call(arguments),s=e.apply(this,u),h=n.apply(this,u);if(o||(o=a=c()),t(o,+r.apply(this,(u[0]=s,u)),+i.apply(this,u),+r.apply(this,(u[0]=h,u)),+i.apply(this,u)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(t){return arguments.length?(n=t,a):n},a.x=function(t){return arguments.length?(r="function"==typeof t?t:h(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:h(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}(m)}function w(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function b(t){this._context=t}function E(t,e){this._basis=new b(t),this._beta=e}b.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:w(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:w(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},E.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,u=e[n]-o,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+r*a),this._beta*e[s]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(t){return 1===e?new b(t):new E(t,e)}return n.beta=function(e){return t(+e)},n})(.85);function k(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function N(t,e){this._context=t,this._k=(1-e)/6}N.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:k(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:k(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return new N(t,e)}return n.tension=function(e){return t(+e)},n})(0);function M(t,e){this._context=t,this._alpha=e}M.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>l){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>l){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/h,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(t){return e?new M(t,e):new N(t,0)}return n.alpha=function(e){return t(+e)},n})(.5);function j(t){return t<0?-1:1}function S(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(j(o)+j(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function D(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function A(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*e,o-u,a-u*n,o,a)}function C(t){this._context=t}function O(t){this._context=t}function P(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:A(this,this._t0,D(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,A(this,D(this,n=S(this,t,e)),n);break;default:A(this,this._t0,n=S(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new O(t)}.prototype=Object.create(C.prototype)).point=function(t,e){C.prototype.point.call(this,e,t)},O.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};P(".graph_Edge{fill:none;stroke:#656565;stroke-width:1px}.graph_Edge .common_TextBox .common_Text{fill:#000;stroke:none}.graph_Edge .common_TextBox .common_Shape{fill:#fff;stroke:none}.graph_Edge.selected{stroke:red!important}.graph_Edge.selected .common_Text{fill:red!important}");var T=function(t){return new b(t)},I=function(t){function n(){var n=t.call(this)||this;return n._points=[],n._weight=100,n._strokeDasharray=null,n._hidden=!1,n._textBox=(new e.TextBox).padding(0),n}return i(n,t),n.prototype.graphID=function(t){return arguments.length?(this._graphID=t,this):this._graphID},n.prototype.sourceVertex=function(t){return arguments.length?(this._sourceVertex=t,this):this._sourceVertex},n.prototype.targetVertex=function(t){return arguments.length?(this._targetVertex=t,this):this._targetVertex},n.prototype.weight=function(t){return arguments.length?(this._weight=t,this):this._weight},n.prototype.points=function(t,e,n){return arguments.length?(this._points=t,this._elementPath&&this.update(null,this._element,e,n),this):this._points},n.prototype.hidden=function(t){return arguments.length?(this._hidden=t,this):this._hidden},n.prototype.text=function(t){return arguments.length?(this._textBox.text(t),this):this._textBox.text()},n.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._elementPath=n.append("path"),this._textBox.text()&&this._textBox.target(e).tooltip(this.tooltip()).render()},n.prototype.update=function(n,r,i,o){t.prototype.update.call(this,n,r);var a=this;e.Platform.svgMarkerGlitch&&!o&&r.transition().duration((i||0)+100).on("start",function(){a._pushMarkers(r)}).on("end",function(){a._popMarkers(r)});var u=a._calculateEdgePoints(this._sourceVertex,this._targetVertex,this._points),s=r.selectAll(".point2").data(this.showControlPoints()?u:[]);s.enter().append("circle").attr("class","point2").style("stroke","red").merge(s).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",1),s.exit().remove();var l=function(){var t=p,e=g,n=h(!0),r=null,i=d,o=null;function a(a){var u,s,h,l=a.length,f=!1;for(null==r&&(o=i(h=c())),u=0;u<=l;++u)!(u<l&&n(s=a[u],u,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(s,u,a),+e(s,u,a));if(h)return o=null,h+""||null}return a.x=function(e){return arguments.length?(t="function"==typeof e?e:h(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:h(+t),a):e},a.defined=function(t){return arguments.length?(n="function"==typeof t?t:h(!!t),a):n},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}().x(function(t){return t.x}).y(function(t){return t.y}).curve(T)(u),f=this._elementPath;i&&(f=f.transition().duration(i)),f.attr("opacity",this._hidden?0:1).attr("marker-start",e.Platform.svgMarkerGlitch&&o||!this.sourceMarker_exists()?null:"url(#"+this._graphID+"_"+this.sourceMarker()+"Foot)").attr("marker-end",e.Platform.svgMarkerGlitch&&o||!this.targetMarker_exists()?null:"url(#"+this._graphID+"_"+this.targetMarker()+"Head)").attr("stroke",this.strokeColor_exists()?this.strokeColor():null).attr("stroke-dasharray",this.strokeDasharray_exists()?this.strokeDasharray():null).attr("d",l),this._textBox.text()&&this._textBox.tooltip(this.tooltip()).move(this._findMidPoint(u),i)},n.prototype.exit=function(e,n){this._textBox&&this._textBox.target(null),t.prototype.exit.call(this,e,n)},n.prototype._findMidPoint=function(t){var e=t.length/2;if(t.length%2)return t[Math.floor(e)];if(t.length){var n=t[e-1],r=t[e];return{x:(n.x+r.x)/2,y:(n.y+r.y)/2}}return{x:0,y:0}},n.prototype._calculateEdgePoints=function(t,e,n){if(!t||!e)return[{x:0,y:0},{x:0,y:0}];var r=n?n.filter(function(n){return!t.contains(n)&&!e.contains(n)}):[],i=0===r.length?e.pos():r[0],o=0===r.length?t.pos():r[r.length-1];if(r.unshift(t.intersection(t._pos,i)),r.push(e.intersection(e._pos,o)),r[0]||(r[0]=t._pos),r[r.length-1]||(r[r.length-1]=e._pos),(!n||0===n.length)&&2===r.length&&r[0]&&r[1]){var a=r[0].x-r[1].x,u=r[0].y-r[1].y;if(Math.sqrt(a*a+u*u))if(this.showArc()){var s=(r[0].x+r[1].x)/2-u*this.arcDepth()/100,c=(r[0].y+r[1].y)/2+a*this.arcDepth()/100;r=[{x:r[0].x,y:r[0].y},{x:s,y:c},{x:r[1].x,y:r[1].y}]}else r=[{x:r[0].x,y:r[0].y},{x:r[1].x,y:r[1].y}]}return r},n}(e.SVGWidget);I.prototype._class+=" graph_Edge",I.prototype.publish("arcDepth",16,"number","Arc Depth",null,{tags:["Basic"]}),I.prototype.publish("showControlPoints",!1,"boolean","Show/Hide Control Points",null,{tags:["Basic"]}),I.prototype.publish("showArc",!0,"boolean","Show/Hide Arc",null,{tags:["Basic"]}),I.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),I.prototype.publish("sourceMarker","circle","set","Source Marker",["none","circle"],{optional:!0}),I.prototype.publish("targetMarker","arrow","set","Source Marker",["none","arrow","circle"],{optional:!0}),I.prototype.publish("strokeDasharray",null,"string","Stroke Dash Array",null,{optional:!0}),I.prototype.publish("strokeColor",null,"html-color","Stroke Color",null,{optional:!0}),I.prototype.publish("textColor",null,"html-color","Text Color",null,{optional:!0}),I.prototype.publishProxy("text_shape_colorFill","_textBox","shape_colorFill"),I.prototype.publishProxy("text_shape_colorStroke","_textBox","shape_colorStroke"),I.prototype.publishProxy("text_text_colorFill","_textBox","text_colorFill");var B={value:function(){}};function L(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new V(r)}function V(t){this._=t}function F(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function z(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=B,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}V.prototype=L.prototype={constructor:V,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,u=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<u;)if(n=(t=o[a]).type)i[n]=z(i[n],t.name,e);else if(null==e)for(n in i)i[n]=z(i[n],t.name,null);return this}for(;++a<u;)if((n=(t=o[a]).type)&&(n=F(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new V(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var R="http://www.w3.org/1999/xhtml",G={svg:"http://www.w3.org/2000/svg",xhtml:R,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function q(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),G.hasOwnProperty(e)?{space:G[e],local:t}:t}function U(t){var e=q(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===R&&e.documentElement.namespaceURI===R?e.createElement(t):e.createElementNS(n,t)}})(e)}function W(){}function H(t){return null==t?W:function(){return this.querySelector(t)}}function $(){return[]}function Y(t){return null==t?$:function(){return this.querySelectorAll(t)}}function X(t){return function(){return this.matches(t)}}function J(t){return new Array(t.length)}function K(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}K.prototype={constructor:K,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Z="$";function Q(t,e,n,r,i,o){for(var a,u=0,s=e.length,c=o.length;u<c;++u)(a=e[u])?(a.__data__=o[u],r[u]=a):n[u]=new K(t,o[u]);for(;u<s;++u)(a=e[u])&&(i[u]=a)}function tt(t,e,n,r,i,o,a){var u,s,c,h={},l=e.length,f=o.length,d=new Array(l);for(u=0;u<l;++u)(s=e[u])&&(d[u]=c=Z+a.call(s,s.__data__,u,e),c in h?i[u]=s:h[c]=s);for(u=0;u<f;++u)(s=h[c=Z+a.call(t,o[u],u,o)])?(r[u]=s,s.__data__=o[u],h[c]=null):n[u]=new K(t,o[u]);for(u=0;u<l;++u)(s=e[u])&&h[d[u]]===s&&(i[u]=s)}function et(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function nt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function rt(t,e){return t.style.getPropertyValue(e)||nt(t).getComputedStyle(t,null).getPropertyValue(e)}function it(t){return t.trim().split(/^|\s+/)}function ot(t){return t.classList||new at(t)}function at(t){this._node=t,this._names=it(t.getAttribute("class")||"")}function ut(t,e){for(var n=ot(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function st(t,e){for(var n=ot(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ct(){this.textContent=""}function ht(){this.innerHTML=""}function lt(){this.nextSibling&&this.parentNode.appendChild(this)}function ft(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dt(){return null}function pt(){var t=this.parentNode;t&&t.removeChild(this)}function gt(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function vt(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}at.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var _t={},yt=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(_t={mouseenter:"mouseover",mouseleave:"mouseout"}));function mt(t,e,n){return t=xt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function xt(t,e,n){return function(r){var i=yt;yt=r;try{t.call(this,this.__data__,e,n)}finally{yt=i}}}function wt(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function bt(t,e,n){var r=_t.hasOwnProperty(t.type)?mt:xt;return function(i,o,a){var u,s=this.__on,c=r(e,o,a);if(s)for(var h=0,l=s.length;h<l;++h)if((u=s[h]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=c,u.capture=n),void(u.value=e);this.addEventListener(t.type,c,n),u={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(u):this.__on=[u]}}function Et(t,e,n,r){var i=yt;t.sourceEvent=yt,yt=t;try{return e.apply(n,r)}finally{yt=i}}function kt(t,e,n){var r=nt(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var Nt=[null];function Mt(t,e){this._groups=t,this._parents=e}function jt(){return new Mt([[document.documentElement]],Nt)}function St(t){return"string"==typeof t?new Mt([[document.querySelector(t)]],[document.documentElement]):new Mt([[t]],Nt)}function Dt(){for(var t,e=yt;t=e.sourceEvent;)e=t;return e}function At(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function Ct(t){var e=Dt();return e.changedTouches&&(e=e.changedTouches[0]),At(t,e)}function Ot(t,e,n){arguments.length<3&&(n=e,e=Dt().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return At(t,r);return null}function Pt(){yt.stopImmediatePropagation()}function Tt(){yt.preventDefault(),yt.stopImmediatePropagation()}function It(t){return function(){return t}}function Bt(t,e,n,r,i,o,a,u,s,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=s,this._=c}function Lt(){return!yt.button}function Vt(){return this.parentNode}function Ft(t){return null==t?{x:yt.x,y:yt.y}:t}function zt(){return"ontouchstart"in this}function Rt(){var t,e,n,r,i=Lt,o=Vt,a=Ft,u=zt,s={},c=L("start","drag","end"),h=0,l=0;function f(t){t.on("mousedown.drag",d).filter(u).on("touchstart.drag",v).on("touchmove.drag",_).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&i.apply(this,arguments)){var a=m("mouse",o.apply(this,arguments),Ct,this,arguments);a&&(St(yt.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),function(t){var e=t.document.documentElement,n=St(t).on("dragstart.drag",Tt,!0);"onselectstart"in e?n.on("selectstart.drag",Tt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(yt.view),Pt(),n=!1,t=yt.clientX,e=yt.clientY,a("start"))}}function p(){if(Tt(),!n){var r=yt.clientX-t,i=yt.clientY-e;n=r*r+i*i>l}s.mouse("drag")}function g(){St(yt.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,r=St(t).on("dragstart.drag",null);e&&(r.on("click.drag",Tt,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(yt.view,n),Tt(),s.mouse("end")}function v(){if(i.apply(this,arguments)){var t,e,n=yt.changedTouches,r=o.apply(this,arguments),a=n.length;for(t=0;t<a;++t)(e=m(n[t].identifier,r,Ot,this,arguments))&&(Pt(),e("start"))}}function _(){var t,e,n=yt.changedTouches,r=n.length;for(t=0;t<r;++t)(e=s[n[t].identifier])&&(Tt(),e("drag"))}function y(){var t,e,n=yt.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(e=s[n[t].identifier])&&(Pt(),e("end"))}function m(t,e,n,r,i){var o,u,l,d=n(e,t),p=c.copy();if(Et(new Bt(f,"beforestart",o,t,h,d[0],d[1],0,0,p),function(){return null!=(yt.subject=o=a.apply(r,i))&&(u=o.x-d[0]||0,l=o.y-d[1]||0,!0)}))return function a(c){var g,v=d;switch(c){case"start":s[t]=a,g=h++;break;case"end":delete s[t],--h;case"drag":d=n(e,t),g=h}Et(new Bt(f,c,o,t,g,d[0]+u,d[1]+l,d[0]-v[0],d[1]-v[1],p),p.apply,p,[c,r,i])}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:It(!!t),f):i},f.container=function(t){return arguments.length?(o="function"==typeof t?t:It(t),f):o},f.subject=function(t){return arguments.length?(a="function"==typeof t?t:It(t),f):a},f.touchable=function(t){return arguments.length?(u="function"==typeof t?t:It(!!t),f):u},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,f):Math.sqrt(l)},f}Mt.prototype=jt.prototype={constructor:Mt,select:function(t){"function"!=typeof t&&(t=H(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,u=e[i],s=u.length,c=r[i]=new Array(s),h=0;h<s;++h)(o=u[h])&&(a=t.call(o,o.__data__,h,u))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new Mt(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Y(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,u=e[o],s=u.length,c=0;c<s;++c)(a=u[c])&&(r.push(t.call(a,a.__data__,c,u)),i.push(a));return new Mt(r,i)},filter:function(t){"function"!=typeof t&&(t=X(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,s=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new Mt(r,this._parents)},data:function(t,e){if(!t)return d=new Array(this.size()),c=-1,this.each(function(t){d[++c]=t}),d;var n=e?tt:Q,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),u=new Array(o),s=new Array(o),c=0;c<o;++c){var h=r[c],l=i[c],f=l.length,d=t.call(h,h&&h.__data__,c,r),p=d.length,g=u[c]=new Array(p),v=a[c]=new Array(p);n(h,l,g,v,s[c]=new Array(f),d,e);for(var _,y,m=0,x=0;m<p;++m)if(_=g[m]){for(m>=x&&(x=m+1);!(y=v[x])&&++x<p;);_._next=y||null}}return(a=new Mt(a,r))._enter=u,a._exit=s,a},enter:function(){return new Mt(this._enter||this._groups.map(J),this._parents)},exit:function(){return new Mt(this._exit||this._groups.map(J),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=e[u],h=n[u],l=c.length,f=a[u]=new Array(l),d=0;d<l;++d)(s=c[d]||h[d])&&(f[d]=s);for(;u<r;++u)a[u]=e[u];return new Mt(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=et);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,u=n[o],s=u.length,c=i[o]=new Array(s),h=0;h<s;++h)(a=u[h])&&(c[h]=a);c.sort(e)}return new Mt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=q(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):rt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=it(t+"");if(arguments.length<2){for(var r=ot(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?ut:st)(this,t)}}:e?function(t){return function(){ut(this,t)}}:function(t){return function(){st(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?ct:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ht:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(lt)},lower:function(){return this.each(ft)},append:function(t){var e="function"==typeof t?t:U(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:U(t),r=null==e?dt:"function"==typeof e?e:H(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(pt)},clone:function(t){return this.select(t?vt:gt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(u=e?bt:wt,null==n&&(n=!1),r=0;r<a;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var s,c=0,h=u.length;c<h;++c)for(r=0,s=u[c];r<a;++r)if((i=o[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return kt(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return kt(this,t,e)}})(t,e))}},Bt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Gt,qt,Ut=0,Wt=0,Ht=0,$t=1e3,Yt=0,Xt=0,Jt=0,Kt="object"==typeof performance&&performance.now?performance:Date,Zt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qt(){return Xt||(Zt(te),Xt=Kt.now()+Jt)}function te(){Xt=0}function ee(){this._call=this._time=this._next=null}function ne(t,e,n){var r=new ee;return r.restart(t,e,n),r}function re(){Xt=(Yt=Kt.now())+Jt,Ut=Wt=0;try{!function(){Qt(),++Ut;for(var t,e=Gt;e;)(t=Xt-e._time)>=0&&e._call.call(null,t),e=e._next;--Ut}()}finally{Ut=0,function(){var t,e,n=Gt,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Gt=e);qt=t,oe(r)}(),Xt=0}}function ie(){var t=Kt.now(),e=t-Yt;e>$t&&(Jt-=e,Yt=t)}function oe(t){if(!Ut){Wt&&(Wt=clearTimeout(Wt));var e=t-Xt;e>24?(t<1/0&&(Wt=setTimeout(re,e)),Ht&&(Ht=clearInterval(Ht))):(Ht||(Yt=Xt,Ht=setInterval(ie,$t)),Ut=1,Zt(re))}}function ae(t,e,n){var r=new ee;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r}ee.prototype=ne.prototype={constructor:ee,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Qt():+n)+(null==e?0:+e),this._next||qt===this||(qt?qt._next=this:Gt=this,qt=this),this._call=t,this._time=n,oe()},stop:function(){this._call&&(this._call=null,this._time=1/0,oe())}};var ue=L("start","end","cancel","interrupt"),se=[],ce=0,he=1,le=2,fe=3,de=4,pe=5,ge=6;function ve(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(s){var c,h,l,f;if(n.state!==he)return u();for(c in i)if((f=i[c]).name===n.name){if(f.state===fe)return ae(o);f.state===de?(f.state=ge,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=ge,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(ae(function(){n.state===fe&&(n.state=de,n.timer.restart(a,n.delay,n.time),a(s))}),n.state=le,n.on.call("start",t,t.__data__,n.index,n.group),n.state===le){for(n.state=fe,r=new Array(l=n.tween.length),c=0,h=-1;c<l;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=f);r.length=h+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(u),n.state=pe,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);n.state===pe&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){for(var r in n.state=ge,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=ne(function(t){n.state=he,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:ue,tween:se,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ce})}function _e(t,e){var n=me(t,e);if(n.state>ce)throw new Error("too late; already scheduled");return n}function ye(t,e){var n=me(t,e);if(n.state>fe)throw new Error("too late; already running");return n}function me(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function xe(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function we(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function be(){}var Ee="\\s*([+-]?\\d+)\\s*",ke="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ne="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Me=/^#([0-9a-f]{3})$/,je=/^#([0-9a-f]{6})$/,Se=new RegExp("^rgb\\("+[Ee,Ee,Ee]+"\\)$"),De=new RegExp("^rgb\\("+[Ne,Ne,Ne]+"\\)$"),Ae=new RegExp("^rgba\\("+[Ee,Ee,Ee,ke]+"\\)$"),Ce=new RegExp("^rgba\\("+[Ne,Ne,Ne,ke]+"\\)$"),Oe=new RegExp("^hsl\\("+[ke,Ne,Ne]+"\\)$"),Pe=new RegExp("^hsla\\("+[ke,Ne,Ne,ke]+"\\)$"),Te={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ie(t){var e;return t=(t+"").trim().toLowerCase(),(e=Me.exec(t))?new ze((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=je.exec(t))?Be(parseInt(e[1],16)):(e=Se.exec(t))?new ze(e[1],e[2],e[3],1):(e=De.exec(t))?new ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ae.exec(t))?Le(e[1],e[2],e[3],e[4]):(e=Ce.exec(t))?Le(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Oe.exec(t))?Ge(e[1],e[2]/100,e[3]/100,1):(e=Pe.exec(t))?Ge(e[1],e[2]/100,e[3]/100,e[4]):Te.hasOwnProperty(t)?Be(Te[t]):"transparent"===t?new ze(NaN,NaN,NaN,0):null}function Be(t){return new ze(t>>16&255,t>>8&255,255&t,1)}function Le(t,e,n,r){return r<=0&&(t=e=n=NaN),new ze(t,e,n,r)}function Ve(t){return t instanceof be||(t=Ie(t)),t?new ze((t=t.rgb()).r,t.g,t.b,t.opacity):new ze}function Fe(t,e,n,r){return 1===arguments.length?Ve(t):new ze(t,e,n,null==r?1:r)}function ze(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Re(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ge(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qe(t,e,n,r)}function qe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ue(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}xe(be,Ie,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),xe(ze,Fe,we(be,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ze(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ze(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+Re(this.r)+Re(this.g)+Re(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),xe(qe,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof qe)return new qe(t.h,t.s,t.l,t.opacity);if(t instanceof be||(t=Ie(t)),!t)return new qe;if(t instanceof qe)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,u=o-i,s=(o+i)/2;return u?(a=e===o?(n-r)/u+6*(n<r):n===o?(r-e)/u+2:(e-n)/u+4,u/=s<.5?o+i:2-o-i,a*=60):u=s>0&&s<1?0:a,new qe(a,u,s,t.opacity)}(t):new qe(t,e,n,null==r?1:r)},we(be,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new qe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new qe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ze(Ue(t>=240?t-240:t+120,i,r),Ue(t,i,r),Ue(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var We=Math.PI/180,He=180/Math.PI,$e=.96422,Ye=1,Xe=.82521,Je=4/29,Ke=6/29,Ze=3*Ke*Ke,Qe=Ke*Ke*Ke;function tn(t){if(t instanceof en)return new en(t.l,t.a,t.b,t.opacity);if(t instanceof un){if(isNaN(t.h))return new en(t.l,0,0,t.opacity);var e=t.h*We;return new en(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof ze||(t=Ve(t));var n,r,i=an(t.r),o=an(t.g),a=an(t.b),u=nn((.2225045*i+.7168786*o+.0606169*a)/Ye);return i===o&&o===a?n=r=u:(n=nn((.4360747*i+.3850649*o+.1430804*a)/$e),r=nn((.0139322*i+.0971045*o+.7141733*a)/Xe)),new en(116*u-16,500*(n-u),200*(u-r),t.opacity)}function en(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function nn(t){return t>Qe?Math.pow(t,1/3):t/Ze+Je}function rn(t){return t>Ke?t*t*t:Ze*(t-Je)}function on(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function an(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function un(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}xe(en,function(t,e,n,r){return 1===arguments.length?tn(t):new en(t,e,n,null==r?1:r)},we(be,{brighter:function(t){return new en(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new en(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new ze(on(3.1338561*(e=$e*rn(e))-1.6168667*(t=Ye*rn(t))-.4906146*(n=Xe*rn(n))),on(-.9787684*e+1.9161415*t+.033454*n),on(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),xe(un,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof un)return new un(t.h,t.c,t.l,t.opacity);if(t instanceof en||(t=tn(t)),0===t.a&&0===t.b)return new un(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*He;return new un(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new un(t,e,n,null==r?1:r)},we(be,{brighter:function(t){return new un(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new un(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return tn(this).rgb()}}));var sn=-.14861,cn=1.78277,hn=-.29227,ln=-.90649,fn=1.97294,dn=fn*ln,pn=fn*cn,gn=cn*hn-ln*sn;function vn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function _n(t){return function(){return t}}function yn(t){return 1==(t=+t)?mn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):_n(isNaN(e)?n:e)}}function mn(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):_n(isNaN(t)?e:t)}xe(vn,function(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof vn)return new vn(t.h,t.s,t.l,t.opacity);t instanceof ze||(t=Ve(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(gn*r+dn*e-pn*n)/(gn+dn-pn),o=r-i,a=(fn*(n-i)-hn*o)/ln,u=Math.sqrt(a*a+o*o)/(fn*i*(1-i)),s=u?Math.atan2(a,o)*He-120:NaN;return new vn(s<0?s+360:s,u,i,t.opacity)}(t):new vn(t,e,n,null==r?1:r)},we(be,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new vn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new vn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*We,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new ze(255*(e+n*(sn*r+cn*i)),255*(e+n*(hn*r+ln*i)),255*(e+n*(fn*r)),this.opacity)}}));var xn=function t(e){var n=yn(e);function r(t,e){var r=n((t=Fe(t)).r,(e=Fe(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=mn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function wn(t,e){return e-=t=+t,function(n){return t+e*n}}var bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,En=new RegExp(bn.source,"g");var kn,Nn,Mn,jn,Sn=180/Math.PI,Dn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function An(t,e,n,r,i,o){var a,u,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Sn,skewX:Math.atan(s)*Sn,scaleX:a,scaleY:u}}function Cn(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],s=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var s=a.push("translate(",null,e,null,n);u.push({i:s-4,x:wn(t,i)},{i:s-2,x:wn(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,u,s),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:wn(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,u,s),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:wn(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,u,s),function(t,e,n,r,o,a){if(t!==n||e!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:wn(t,n)},{i:u-2,x:wn(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,s),o=a=null,function(t){for(var e,n=-1,r=s.length;++n<r;)u[(e=s[n]).i]=e.x(t);return u.join("")}}}var On=Cn(function(t){return"none"===t?Dn:(kn||(kn=document.createElement("DIV"),Nn=document.documentElement,Mn=document.defaultView),kn.style.transform=t,t=Mn.getComputedStyle(Nn.appendChild(kn),null).getPropertyValue("transform"),Nn.removeChild(kn),An(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Pn=Cn(function(t){return null==t?Dn:(jn||(jn=document.createElementNS("http://www.w3.org/2000/svg","g")),jn.setAttribute("transform",t),(t=jn.transform.baseVal.consolidate())?An((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Dn)},", ",")",")");Math.SQRT2;function Tn(t,e,n){var r=t._id;return t.each(function(){var t=ye(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return me(t,r).value[e]}}function In(t,e){var n;return("number"==typeof e?wn:e instanceof Ie?xn:(n=Ie(e))?(e=n,xn):function(t,e){var n,r,i,o=bn.lastIndex=En.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=bn.exec(t))&&(r=En.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:wn(n,r)})),o=En.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})})(t,e)}var Bn=jt.prototype.constructor;function Ln(t){return function(){this.style.removeProperty(t)}}var Vn=0;function Fn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function zn(){return++Vn}var Rn=jt.prototype;Fn.prototype=function(t){return jt().transition(t)}.prototype={constructor:Fn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=H(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,s,c=r[a],h=c.length,l=o[a]=new Array(h),f=0;f<h;++f)(u=c[f])&&(s=t.call(u,u.__data__,f,c))&&("__data__"in u&&(s.__data__=u.__data__),l[f]=s,ve(l[f],e,n,f,l,me(u,n)));return new Fn(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Y(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var s,c=r[u],h=c.length,l=0;l<h;++l)if(s=c[l]){for(var f,d=t.call(s,s.__data__,l,c),p=me(s,n),g=0,v=d.length;g<v;++g)(f=d[g])&&ve(f,e,n,g,d,p);o.push(d),a.push(s)}return new Fn(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=X(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],u=a.length,s=r[i]=[],c=0;c<u;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new Fn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var s,c=e[u],h=n[u],l=c.length,f=a[u]=new Array(l),d=0;d<l;++d)(s=c[d]||h[d])&&(f[d]=s);for(;u<r;++u)a[u]=e[u];return new Fn(a,this._parents,this._name,this._id)},selection:function(){return new Bn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=zn(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)if(a=u[c]){var h=me(a,e);ve(a,t,n,c,u,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Fn(r,this._parents,t,n)},call:Rn.call,nodes:Rn.nodes,node:Rn.node,size:Rn.size,empty:Rn.empty,each:Rn.each,on:function(t,e){var n=this._id;return arguments.length<2?me(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?_e:ye;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=q(t),r="transform"===n?Pn:In;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=e(r=a,s));this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,o;return function(){var a,u,s=n(this);if(null!=s)return(a=this.getAttribute(t))===(u=s+"")?null:a===r&&u===i?o:(i=u,o=e(r=a,s));this.removeAttribute(t)}})(n,r,Tn(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}:function(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=q(t);return this.tween(n,(r.local?function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e(n))}}(t,i)),n}return i._value=e,i}:function(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e(n))}}(t,i)),n}return i._value=e,i})(r,e))},style:function(t,e,n){var r="transform"==(t+="")?On:In;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=rt(this,t),a=(this.style.removeProperty(t),rt(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,Ln(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=rt(this,t),u=n(this),s=u+"";return null==u&&(this.style.removeProperty(t),s=u=rt(this,t)),a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,u))}}(t,r,Tn(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,u="end."+a;return function(){var s=ye(this,t),c=s.on,h=null==s.value[a]?o||(o=Ln(e)):void 0;c===n&&i===h||(r=(n=c).copy()).on(u,i=h),s.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=rt(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e(r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Tn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=me(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(t,e){var n,r;return function(){var i=ye(this,t),o=i.tween;if(o!==n)for(var a=0,u=(r=n=o).length;a<u;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=ye(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:e,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===e){i[s]=u;break}s===c&&i.push(u)}o.tween=i}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){_e(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){_e(this,t).delay=e}})(e,t)):me(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ye(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ye(this,t).duration=e}})(e,t)):me(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){ye(this,t).ease=e}}(e,t)):me(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var u={value:a},s={value:function(){0==--i&&o()}};n.each(function(){var n=ye(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(u),e._.interrupt.push(u),e._.end.push(s)),n.on=e})})}};Math.PI,Math.PI;var Gn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function qn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return Gn.time=Qt(),Gn;return n}jt.prototype.interrupt=function(t){return this.each(function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>le&&n.state<pe,n.state=ge,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)})},jt.prototype.transition=function(t){var e,n;t instanceof Fn?(e=t._id,t=t._name):(e=zn(),(n=Gn).time=Qt(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],s=u.length,c=0;c<s;++c)(a=u[c])&&ve(a,t,e,c,u,n||qn(a,e));return new Fn(r,this._parents,t,e)};var Un="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Wn(t,e){return t(e={exports:{}},e.exports),e.exports}var Hn=function(){this.__data__=[],this.size=0};var $n=function(t,e){return t===e||t!=t&&e!=e};var Yn=function(t,e){for(var n=t.length;n--;)if($n(t[n][0],e))return n;return-1},Xn=Array.prototype.splice;var Jn=function(t){var e=this.__data__,n=Yn(e,t);return!(n<0||(n==e.length-1?e.pop():Xn.call(e,n,1),--this.size,0))};var Kn=function(t){var e=this.__data__,n=Yn(e,t);return n<0?void 0:e[n][1]};var Zn=function(t){return Yn(this.__data__,t)>-1};var Qn=function(t,e){var n=this.__data__,r=Yn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function tr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}tr.prototype.clear=Hn,tr.prototype.delete=Jn,tr.prototype.get=Kn,tr.prototype.has=Zn,tr.prototype.set=Qn;var er=tr;var nr=function(){this.__data__=new er,this.size=0};var rr=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var ir=function(t){return this.__data__.get(t)};var or=function(t){return this.__data__.has(t)},ar="object"==typeof Un&&Un&&Un.Object===Object&&Un,ur="object"==typeof self&&self&&self.Object===Object&&self,sr=ar||ur||Function("return this")(),cr=sr.Symbol,hr=Object.prototype,lr=hr.hasOwnProperty,fr=hr.toString,dr=cr?cr.toStringTag:void 0;var pr=function(t){var e=lr.call(t,dr),n=t[dr];try{t[dr]=void 0;var r=!0}catch(t){}var i=fr.call(t);return r&&(e?t[dr]=n:delete t[dr]),i},gr=Object.prototype.toString;var vr=function(t){return gr.call(t)},_r="[object Null]",yr="[object Undefined]",mr=cr?cr.toStringTag:void 0;var xr=function(t){return null==t?void 0===t?yr:_r:mr&&mr in Object(t)?pr(t):vr(t)};var wr=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},br="[object AsyncFunction]",Er="[object Function]",kr="[object GeneratorFunction]",Nr="[object Proxy]";var Mr,jr=function(t){if(!wr(t))return!1;var e=xr(t);return e==Er||e==kr||e==br||e==Nr},Sr=sr["__core-js_shared__"],Dr=(Mr=/[^.]+$/.exec(Sr&&Sr.keys&&Sr.keys.IE_PROTO||""))?"Symbol(src)_1."+Mr:"";var Ar=function(t){return!!Dr&&Dr in t},Cr=Function.prototype.toString;var Or=function(t){if(null!=t){try{return Cr.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Pr=/^\[object .+?Constructor\]$/,Tr=Function.prototype,Ir=Object.prototype,Br=Tr.toString,Lr=Ir.hasOwnProperty,Vr=RegExp("^"+Br.call(Lr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Fr=function(t){return!(!wr(t)||Ar(t))&&(jr(t)?Vr:Pr).test(Or(t))};var zr=function(t,e){return null==t?void 0:t[e]};var Rr=function(t,e){var n=zr(t,e);return Fr(n)?n:void 0},Gr=Rr(sr,"Map"),qr=Rr(Object,"create");var Ur=function(){this.__data__=qr?qr(null):{},this.size=0};var Wr=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hr="__lodash_hash_undefined__",$r=Object.prototype.hasOwnProperty;var Yr=function(t){var e=this.__data__;if(qr){var n=e[t];return n===Hr?void 0:n}return $r.call(e,t)?e[t]:void 0},Xr=Object.prototype.hasOwnProperty;var Jr=function(t){var e=this.__data__;return qr?void 0!==e[t]:Xr.call(e,t)},Kr="__lodash_hash_undefined__";var Zr=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=qr&&void 0===e?Kr:e,this};function Qr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qr.prototype.clear=Ur,Qr.prototype.delete=Wr,Qr.prototype.get=Yr,Qr.prototype.has=Jr,Qr.prototype.set=Zr;var ti=Qr;var ei=function(){this.size=0,this.__data__={hash:new ti,map:new(Gr||er),string:new ti}};var ni=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var ri=function(t,e){var n=t.__data__;return ni(e)?n["string"==typeof e?"string":"hash"]:n.map};var ii=function(t){var e=ri(this,t).delete(t);return this.size-=e?1:0,e};var oi=function(t){return ri(this,t).get(t)};var ai=function(t){return ri(this,t).has(t)};var ui=function(t,e){var n=ri(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function si(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}si.prototype.clear=ei,si.prototype.delete=ii,si.prototype.get=oi,si.prototype.has=ai,si.prototype.set=ui;var ci=si,hi=200;var li=function(t,e){var n=this.__data__;if(n instanceof er){var r=n.__data__;if(!Gr||r.length<hi-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ci(r)}return n.set(t,e),this.size=n.size,this};function fi(t){var e=this.__data__=new er(t);this.size=e.size}fi.prototype.clear=nr,fi.prototype.delete=rr,fi.prototype.get=ir,fi.prototype.has=or,fi.prototype.set=li;var di=fi;var pi=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},gi=function(){try{var t=Rr(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var vi=function(t,e,n){"__proto__"==e&&gi?gi(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},_i=Object.prototype.hasOwnProperty;var yi=function(t,e,n){var r=t[e];_i.call(t,e)&&$n(r,n)&&(void 0!==n||e in t)||vi(t,e,n)};var mi=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var u=e[o],s=r?r(n[u],t[u],u,n,t):void 0;void 0===s&&(s=t[u]),i?vi(n,u,s):yi(n,u,s)}return n};var xi=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var wi=function(t){return null!=t&&"object"==typeof t},bi="[object Arguments]";var Ei=function(t){return wi(t)&&xr(t)==bi},ki=Object.prototype,Ni=ki.hasOwnProperty,Mi=ki.propertyIsEnumerable,ji=Ei(function(){return arguments}())?Ei:function(t){return wi(t)&&Ni.call(t,"callee")&&!Mi.call(t,"callee")},Si=Array.isArray;var Di=function(){return!1},Ai=Wn(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?sr.Buffer:void 0,o=(i?i.isBuffer:void 0)||Di;t.exports=o}),Ci=9007199254740991,Oi=/^(?:0|[1-9]\d*)$/;var Pi=function(t,e){var n=typeof t;return!!(e=null==e?Ci:e)&&("number"==n||"symbol"!=n&&Oi.test(t))&&t>-1&&t%1==0&&t<e},Ti=9007199254740991;var Ii=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ti},Bi={};Bi["[object Float32Array]"]=Bi["[object Float64Array]"]=Bi["[object Int8Array]"]=Bi["[object Int16Array]"]=Bi["[object Int32Array]"]=Bi["[object Uint8Array]"]=Bi["[object Uint8ClampedArray]"]=Bi["[object Uint16Array]"]=Bi["[object Uint32Array]"]=!0,Bi["[object Arguments]"]=Bi["[object Array]"]=Bi["[object ArrayBuffer]"]=Bi["[object Boolean]"]=Bi["[object DataView]"]=Bi["[object Date]"]=Bi["[object Error]"]=Bi["[object Function]"]=Bi["[object Map]"]=Bi["[object Number]"]=Bi["[object Object]"]=Bi["[object RegExp]"]=Bi["[object Set]"]=Bi["[object String]"]=Bi["[object WeakMap]"]=!1;var Li=function(t){return wi(t)&&Ii(t.length)&&!!Bi[xr(t)]};var Vi=function(t){return function(e){return t(e)}},Fi=Wn(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n&&ar.process,o=function(){try{var t=r&&r.require&&r.require("util").types;return t||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=o}),zi=Fi&&Fi.isTypedArray,Ri=zi?Vi(zi):Li,Gi=Object.prototype.hasOwnProperty;var qi=function(t,e){var n=Si(t),r=!n&&ji(t),i=!n&&!r&&Ai(t),o=!n&&!r&&!i&&Ri(t),a=n||r||i||o,u=a?xi(t.length,String):[],s=u.length;for(var c in t)!e&&!Gi.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Pi(c,s))||u.push(c);return u},Ui=Object.prototype;var Wi=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ui)};var Hi=function(t,e){return function(n){return t(e(n))}},$i=Hi(Object.keys,Object),Yi=Object.prototype.hasOwnProperty;var Xi=function(t){if(!Wi(t))return $i(t);var e=[];for(var n in Object(t))Yi.call(t,n)&&"constructor"!=n&&e.push(n);return e};var Ji=function(t){return null!=t&&Ii(t.length)&&!jr(t)};var Ki=function(t){return Ji(t)?qi(t):Xi(t)};var Zi=function(t,e){return t&&mi(e,Ki(e),t)};var Qi=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},to=Object.prototype.hasOwnProperty;var eo=function(t){if(!wr(t))return Qi(t);var e=Wi(t),n=[];for(var r in t)("constructor"!=r||!e&&to.call(t,r))&&n.push(r);return n};var no=function(t){return Ji(t)?qi(t,!0):eo(t)};var ro=function(t,e){return t&&mi(e,no(e),t)},io=Wn(function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,i=r&&r.exports===n?sr.Buffer:void 0,o=i?i.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=o?o(n):new t.constructor(n);return t.copy(r),r}});var oo=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var ao=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o};var uo=function(){return[]},so=Object.prototype.propertyIsEnumerable,co=Object.getOwnPropertySymbols,ho=co?function(t){return null==t?[]:(t=Object(t),ao(co(t),function(e){return so.call(t,e)}))}:uo;var lo=function(t,e){return mi(t,ho(t),e)};var fo=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},po=Hi(Object.getPrototypeOf,Object),go=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)fo(e,ho(t)),t=po(t);return e}:uo;var vo=function(t,e){return mi(t,go(t),e)};var _o=function(t,e,n){var r=e(t);return Si(t)?r:fo(r,n(t))};var yo=function(t){return _o(t,Ki,ho)};var mo=function(t){return _o(t,no,go)},xo=Rr(sr,"DataView"),wo=Rr(sr,"Promise"),bo=Rr(sr,"Set"),Eo=Rr(sr,"WeakMap"),ko=Or(xo),No=Or(Gr),Mo=Or(wo),jo=Or(bo),So=Or(Eo),Do=xr;(xo&&"[object DataView]"!=Do(new xo(new ArrayBuffer(1)))||Gr&&"[object Map]"!=Do(new Gr)||wo&&"[object Promise]"!=Do(wo.resolve())||bo&&"[object Set]"!=Do(new bo)||Eo&&"[object WeakMap]"!=Do(new Eo))&&(Do=function(t){var e=xr(t),n="[object Object]"==e?t.constructor:void 0,r=n?Or(n):"";if(r)switch(r){case ko:return"[object DataView]";case No:return"[object Map]";case Mo:return"[object Promise]";case jo:return"[object Set]";case So:return"[object WeakMap]"}return e});var Ao=Do,Co=Object.prototype.hasOwnProperty;var Oo=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Co.call(t,"index")&&(n.index=t.index,n.input=t.input),n},Po=sr.Uint8Array;var To=function(t){var e=new t.constructor(t.byteLength);return new Po(e).set(new Po(t)),e};var Io=function(t,e){var n=e?To(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},Bo=/\w*$/;var Lo=function(t){var e=new t.constructor(t.source,Bo.exec(t));return e.lastIndex=t.lastIndex,e},Vo=cr?cr.prototype:void 0,Fo=Vo?Vo.valueOf:void 0;var zo=function(t){return Fo?Object(Fo.call(t)):{}};var Ro=function(t,e){var n=e?To(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Go="[object Boolean]",qo="[object Date]",Uo="[object Map]",Wo="[object Number]",Ho="[object RegExp]",$o="[object Set]",Yo="[object String]",Xo="[object Symbol]",Jo="[object ArrayBuffer]",Ko="[object DataView]",Zo="[object Float32Array]",Qo="[object Float64Array]",ta="[object Int8Array]",ea="[object Int16Array]",na="[object Int32Array]",ra="[object Uint8Array]",ia="[object Uint8ClampedArray]",oa="[object Uint16Array]",aa="[object Uint32Array]";var ua=function(t,e,n){var r=t.constructor;switch(e){case Jo:return To(t);case Go:case qo:return new r(+t);case Ko:return Io(t,n);case Zo:case Qo:case ta:case ea:case na:case ra:case ia:case oa:case aa:return Ro(t,n);case Uo:return new r;case Wo:case Yo:return new r(t);case Ho:return Lo(t);case $o:return new r;case Xo:return zo(t)}},sa=Object.create,ca=function(){function t(){}return function(e){if(!wr(e))return{};if(sa)return sa(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var ha=function(t){return"function"!=typeof t.constructor||Wi(t)?{}:ca(po(t))},la="[object Map]";var fa=function(t){return wi(t)&&Ao(t)==la},da=Fi&&Fi.isMap,pa=da?Vi(da):fa,ga="[object Set]";var va=function(t){return wi(t)&&Ao(t)==ga},_a=Fi&&Fi.isSet,ya=_a?Vi(_a):va,ma=1,xa=2,wa=4,ba="[object Arguments]",Ea="[object Function]",ka="[object GeneratorFunction]",Na="[object Object]",Ma={};Ma[ba]=Ma["[object Array]"]=Ma["[object ArrayBuffer]"]=Ma["[object DataView]"]=Ma["[object Boolean]"]=Ma["[object Date]"]=Ma["[object Float32Array]"]=Ma["[object Float64Array]"]=Ma["[object Int8Array]"]=Ma["[object Int16Array]"]=Ma["[object Int32Array]"]=Ma["[object Map]"]=Ma["[object Number]"]=Ma[Na]=Ma["[object RegExp]"]=Ma["[object Set]"]=Ma["[object String]"]=Ma["[object Symbol]"]=Ma["[object Uint8Array]"]=Ma["[object Uint8ClampedArray]"]=Ma["[object Uint16Array]"]=Ma["[object Uint32Array]"]=!0,Ma["[object Error]"]=Ma[Ea]=Ma["[object WeakMap]"]=!1;var ja=function t(e,n,r,i,o,a){var u,s=n&ma,c=n&xa,h=n&wa;if(r&&(u=o?r(e,i,o,a):r(e)),void 0!==u)return u;if(!wr(e))return e;var l=Si(e);if(l){if(u=Oo(e),!s)return oo(e,u)}else{var f=Ao(e),d=f==Ea||f==ka;if(Ai(e))return io(e,s);if(f==Na||f==ba||d&&!o){if(u=c||d?{}:ha(e),!s)return c?vo(e,ro(u,e)):lo(e,Zi(u,e))}else{if(!Ma[f])return o?e:{};u=ua(e,f,s)}}a||(a=new di);var p=a.get(e);if(p)return p;if(a.set(e,u),ya(e))return e.forEach(function(i){u.add(t(i,n,r,i,e,a))}),u;if(pa(e))return e.forEach(function(i,o){u.set(o,t(i,n,r,o,e,a))}),u;var g=h?c?mo:yo:c?keysIn:Ki,v=l?void 0:g(e);return pi(v||e,function(i,o){v&&(i=e[o=i]),yi(u,o,t(i,n,r,o,e,a))}),u},Sa=4;var Da=function(t){return ja(t,Sa)};var Aa=function(t){return function(){return t}};var Ca=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),u=a.length;u--;){var s=a[t?u:++i];if(!1===n(o[s],s,o))break}return e}}();var Oa=function(t,e){return t&&Ca(t,e,Ki)};var Pa=function(t,e){return function(n,r){if(null==n)return n;if(!Ji(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(Oa);var Ta=function(t){return t};var Ia=function(t){return"function"==typeof t?t:Ta};var Ba=function(t,e){return(Si(t)?pi:Pa)(t,Ia(e))},La=Ba;var Va=function(t,e){var n=[];return Pa(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n},Fa="__lodash_hash_undefined__";var za=function(t){return this.__data__.set(t,Fa),this};var Ra=function(t){return this.__data__.has(t)};function Ga(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new ci;++e<n;)this.add(t[e])}Ga.prototype.add=Ga.prototype.push=za,Ga.prototype.has=Ra;var qa=Ga;var Ua=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var Wa=function(t,e){return t.has(e)},Ha=1,$a=2;var Ya=function(t,e,n,r,i,o){var a=n&Ha,u=t.length,s=e.length;if(u!=s&&!(a&&s>u))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var h=-1,l=!0,f=n&$a?new qa:void 0;for(o.set(t,e),o.set(e,t);++h<u;){var d=t[h],p=e[h];if(r)var g=a?r(p,d,h,e,t,o):r(d,p,h,t,e,o);if(void 0!==g){if(g)continue;l=!1;break}if(f){if(!Ua(e,function(t,e){if(!Wa(f,e)&&(d===t||i(d,t,n,r,o)))return f.push(e)})){l=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){l=!1;break}}return o.delete(t),o.delete(e),l};var Xa=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n};var Ja=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},Ka=1,Za=2,Qa="[object Boolean]",tu="[object Date]",eu="[object Error]",nu="[object Map]",ru="[object Number]",iu="[object RegExp]",ou="[object Set]",au="[object String]",uu="[object Symbol]",su="[object ArrayBuffer]",cu="[object DataView]",hu=cr?cr.prototype:void 0,lu=hu?hu.valueOf:void 0;var fu=function(t,e,n,r,i,o,a){switch(n){case cu:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case su:return!(t.byteLength!=e.byteLength||!o(new Po(t),new Po(e)));case Qa:case tu:case ru:return $n(+t,+e);case eu:return t.name==e.name&&t.message==e.message;case iu:case au:return t==e+"";case nu:var u=Xa;case ou:var s=r&Ka;if(u||(u=Ja),t.size!=e.size&&!s)return!1;var c=a.get(t);if(c)return c==e;r|=Za,a.set(t,e);var h=Ya(u(t),u(e),r,i,o,a);return a.delete(t),h;case uu:if(lu)return lu.call(t)==lu.call(e)}return!1},du=1,pu=Object.prototype.hasOwnProperty;var gu=function(t,e,n,r,i,o){var a=n&du,u=yo(t),s=u.length;if(s!=yo(e).length&&!a)return!1;for(var c=s;c--;){var h=u[c];if(!(a?h in e:pu.call(e,h)))return!1}var l=o.get(t);if(l&&o.get(e))return l==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<s;){var p=t[h=u[c]],g=e[h];if(r)var v=a?r(g,p,h,e,t,o):r(p,g,h,t,e,o);if(!(void 0===v?p===g||i(p,g,n,r,o):v)){f=!1;break}d||(d="constructor"==h)}if(f&&!d){var _=t.constructor,y=e.constructor;_!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(t),o.delete(e),f},vu=1,_u="[object Arguments]",yu="[object Array]",mu="[object Object]",xu=Object.prototype.hasOwnProperty;var wu=function(t,e,n,r,i,o){var a=Si(t),u=Si(e),s=a?yu:Ao(t),c=u?yu:Ao(e),h=(s=s==_u?mu:s)==mu,l=(c=c==_u?mu:c)==mu,f=s==c;if(f&&Ai(t)){if(!Ai(e))return!1;a=!0,h=!1}if(f&&!h)return o||(o=new di),a||Ri(t)?Ya(t,e,n,r,i,o):fu(t,e,s,n,r,i,o);if(!(n&vu)){var d=h&&xu.call(t,"__wrapped__"),p=l&&xu.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,v=p?e.value():e;return o||(o=new di),i(g,v,n,r,o)}}return!!f&&(o||(o=new di),gu(t,e,n,r,i,o))};var bu=function t(e,n,r,i,o){return e===n||(null==e||null==n||!wi(e)&&!wi(n)?e!=e&&n!=n:wu(e,n,r,i,t,o))},Eu=1,ku=2;var Nu=function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var u=n[i];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<o;){var s=(u=n[i])[0],c=t[s],h=u[1];if(a&&u[2]){if(void 0===c&&!(s in t))return!1}else{var l=new di;if(r)var f=r(c,h,s,t,e,l);if(!(void 0===f?bu(h,c,Eu|ku,r,l):f))return!1}}return!0};var Mu=function(t){return t==t&&!wr(t)};var ju=function(t){for(var e=Ki(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Mu(i)]}return e};var Su=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}};var Du=function(t){var e=ju(t);return 1==e.length&&e[0][2]?Su(e[0][0],e[0][1]):function(n){return n===t||Nu(n,t,e)}},Au="[object Symbol]";var Cu=function(t){return"symbol"==typeof t||wi(t)&&xr(t)==Au},Ou=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pu=/^\w*$/;var Tu=function(t,e){if(Si(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Cu(t))||Pu.test(t)||!Ou.test(t)||null!=e&&t in Object(e)},Iu="Expected a function";function Bu(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Iu);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Bu.Cache||ci),n}Bu.Cache=ci;var Lu=Bu,Vu=500;var Fu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zu=/\\(\\)?/g,Ru=function(t){var e=Lu(t,function(t){return n.size===Vu&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Fu,function(t,n,r,i){e.push(r?i.replace(zu,"$1"):n||t)}),e});var Gu=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i},qu=1/0,Uu=cr?cr.prototype:void 0,Wu=Uu?Uu.toString:void 0;var Hu=function t(e){if("string"==typeof e)return e;if(Si(e))return Gu(e,t)+"";if(Cu(e))return Wu?Wu.call(e):"";var n=e+"";return"0"==n&&1/e==-qu?"-0":n};var $u=function(t){return null==t?"":Hu(t)};var Yu=function(t,e){return Si(t)?t:Tu(t,e)?[t]:Ru($u(t))},Xu=1/0;var Ju=function(t){if("string"==typeof t||Cu(t))return t;var e=t+"";return"0"==e&&1/t==-Xu?"-0":e};var Ku=function(t,e){for(var n=0,r=(e=Yu(e,t)).length;null!=t&&n<r;)t=t[Ju(e[n++])];return n&&n==r?t:void 0};var Zu=function(t,e,n){var r=null==t?void 0:Ku(t,e);return void 0===r?n:r};var Qu=function(t,e){return null!=t&&e in Object(t)};var ts=function(t,e,n){for(var r=-1,i=(e=Yu(e,t)).length,o=!1;++r<i;){var a=Ju(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ii(i)&&Pi(a,i)&&(Si(t)||ji(t))};var es=function(t,e){return null!=t&&ts(t,e,Qu)},ns=1,rs=2;var is=function(t,e){return Tu(t)&&Mu(e)?Su(Ju(t),e):function(n){var r=Zu(n,t);return void 0===r&&r===e?es(n,t):bu(e,r,ns|rs)}};var os=function(t){return function(e){return null==e?void 0:e[t]}};var as=function(t){return function(e){return Ku(e,t)}};var us=function(t){return Tu(t)?os(Ju(t)):as(t)};var ss=function(t){return"function"==typeof t?t:null==t?Ta:"object"==typeof t?Si(t)?is(t[0],t[1]):Du(t):us(t)};var cs=function(t,e){return(Si(t)?ao:Va)(t,ss(e))},hs=Object.prototype.hasOwnProperty;var ls=function(t,e){return null!=t&&hs.call(t,e)};var fs=function(t,e){return null!=t&&ts(t,e,ls)},ds="[object Map]",ps="[object Set]",gs=Object.prototype.hasOwnProperty;var vs=function(t){if(null==t)return!0;if(Ji(t)&&(Si(t)||"string"==typeof t||"function"==typeof t.splice||Ai(t)||Ri(t)||ji(t)))return!t.length;var e=Ao(t);if(e==ds||e==ps)return!t.size;if(Wi(t))return!Xi(t).length;for(var n in t)if(gs.call(t,n))return!1;return!0};var _s=function(t){return void 0===t};var ys=function(t,e){var n=-1,r=Ji(t)?Array(t.length):[];return Pa(t,function(t,i,o){r[++n]=e(t,i,o)}),r};var ms=function(t,e){return(Si(t)?Gu:ys)(t,ss(e))};var xs=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n};var ws=function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n};var bs=function(t,e,n){var r=Si(t)?xs:ws,i=arguments.length<3;return r(t,ss(e),n,i,Pa)},Es="[object String]";var ks=function(t){return"string"==typeof t||!Si(t)&&wi(t)&&xr(t)==Es},Ns=os("length"),Ms=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var js=function(t){return Ms.test(t)},Ss="[\\ud800-\\udfff]",Ds="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",As="\\ud83c[\\udffb-\\udfff]",Cs="[^\\ud800-\\udfff]",Os="(?:\\ud83c[\\udde6-\\uddff]){2}",Ps="[\\ud800-\\udbff][\\udc00-\\udfff]",Ts="(?:"+Ds+"|"+As+")"+"?",Is="[\\ufe0e\\ufe0f]?"+Ts+("(?:\\u200d(?:"+[Cs,Os,Ps].join("|")+")[\\ufe0e\\ufe0f]?"+Ts+")*"),Bs="(?:"+[Cs+Ds+"?",Ds,Os,Ps,Ss].join("|")+")",Ls=RegExp(As+"(?="+As+")|"+Bs+Is,"g");var Vs=function(t){for(var e=Ls.lastIndex=0;Ls.test(t);)++e;return e};var Fs=function(t){return js(t)?Vs(t):Ns(t)},zs="[object Map]",Rs="[object Set]";var Gs=function(t){if(null==t)return 0;if(Ji(t))return ks(t)?Fs(t):t.length;var e=Ao(t);return e==zs||e==Rs?t.size:Xi(t).length};var qs=function(t,e,n){var r=Si(t),i=r||Ai(t)||Ri(t);if(e=ss(e),null==n){var o=t&&t.constructor;n=i?r?new o:[]:wr(t)&&jr(o)?ca(po(t)):{}}return(i?pi:Oa)(t,function(t,r,i){return e(n,t,r,i)}),n},Us=cr?cr.isConcatSpreadable:void 0;var Ws=function(t){return Si(t)||ji(t)||!!(Us&&t&&t[Us])};var Hs=function t(e,n,r,i,o){var a=-1,u=e.length;for(r||(r=Ws),o||(o=[]);++a<u;){var s=e[a];n>0&&r(s)?n>1?t(s,n-1,r,i,o):fo(o,s):i||(o[o.length]=s)}return o};var $s=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Ys=Math.max;var Xs=function(t,e,n){return e=Ys(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Ys(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=r[i];return u[e]=n(a),$s(t,this,u)}},Js=gi?function(t,e){return gi(t,"toString",{configurable:!0,enumerable:!1,value:Aa(e),writable:!0})}:Ta,Ks=800,Zs=16,Qs=Date.now;var tc=function(t){var e=0,n=0;return function(){var r=Qs(),i=Zs-(r-n);if(n=r,i>0){if(++e>=Ks)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Js);var ec=function(t,e){return tc(Xs(t,e,Ta),t+"")};var nc=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1};var rc=function(t){return t!=t};var ic=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};var oc=function(t,e,n){return e==e?ic(t,e,n):nc(t,rc,n)};var ac=function(t,e){return!(null==t||!t.length)&&oc(t,e,0)>-1};var uc=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1};var sc=function(){},cc=bo&&1/Ja(new bo([,-0]))[1]==1/0?function(t){return new bo(t)}:sc,hc=200;var lc=function(t,e,n){var r=-1,i=ac,o=t.length,a=!0,u=[],s=u;if(n)a=!1,i=uc;else if(o>=hc){var c=e?null:cc(t);if(c)return Ja(c);a=!1,i=Wa,s=new qa}else s=e?[]:u;t:for(;++r<o;){var h=t[r],l=e?e(h):h;if(h=n||0!==h?h:0,a&&l==l){for(var f=s.length;f--;)if(s[f]===l)continue t;e&&s.push(l),u.push(h)}else i(s,l,n)||(s!==u&&s.push(l),u.push(h))}return u};var fc=function(t){return wi(t)&&Ji(t)},dc=ec(function(t){return lc(Hs(t,1,fc,!0))});var pc=function(t,e){return Gu(e,function(e){return t[e]})};var gc,vc=function(t){return null==t?[]:pc(t,Ki(t))};try{gc={clone:Da,constant:Aa,each:La,filter:cs,has:fs,isArray:Si,isEmpty:vs,isFunction:jr,isUndefined:_s,keys:Ki,map:ms,reduce:bs,size:Gs,transform:qs,union:dc,values:vc}}catch(t){}gc||(gc=window._);var _c=gc,yc=bc,mc="\0",xc="\0",wc="";function bc(t){this._isDirected=!_c.has(t,"directed")||t.directed,this._isMultigraph=!!_c.has(t,"multigraph")&&t.multigraph,this._isCompound=!!_c.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=_c.constant(void 0),this._defaultEdgeLabelFn=_c.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[xc]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function Ec(t,e){t[e]?t[e]++:t[e]=1}function kc(t,e){--t[e]||delete t[e]}function Nc(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}return i+wc+o+wc+(_c.isUndefined(r)?mc:r)}function Mc(t,e){return Nc(t,e.v,e.w,e.name)}bc.prototype._nodeCount=0,bc.prototype._edgeCount=0,bc.prototype.isDirected=function(){return this._isDirected},bc.prototype.isMultigraph=function(){return this._isMultigraph},bc.prototype.isCompound=function(){return this._isCompound},bc.prototype.setGraph=function(t){return this._label=t,this},bc.prototype.graph=function(){return this._label},bc.prototype.setDefaultNodeLabel=function(t){return _c.isFunction(t)||(t=_c.constant(t)),this._defaultNodeLabelFn=t,this},bc.prototype.nodeCount=function(){return this._nodeCount},bc.prototype.nodes=function(){return _c.keys(this._nodes)},bc.prototype.sources=function(){var t=this;return _c.filter(this.nodes(),function(e){return _c.isEmpty(t._in[e])})},bc.prototype.sinks=function(){var t=this;return _c.filter(this.nodes(),function(e){return _c.isEmpty(t._out[e])})},bc.prototype.setNodes=function(t,e){var n=arguments,r=this;return _c.each(t,function(t){n.length>1?r.setNode(t,e):r.setNode(t)}),this},bc.prototype.setNode=function(t,e){return _c.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=xc,this._children[t]={},this._children[xc][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},bc.prototype.node=function(t){return this._nodes[t]},bc.prototype.hasNode=function(t){return _c.has(this._nodes,t)},bc.prototype.removeNode=function(t){var e=this;if(_c.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],_c.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),_c.each(_c.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],_c.each(_c.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},bc.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(_c.isUndefined(e))e=xc;else{for(var n=e+="";!_c.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},bc.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},bc.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==xc)return e}},bc.prototype.children=function(t){if(_c.isUndefined(t)&&(t=xc),this._isCompound){var e=this._children[t];if(e)return _c.keys(e)}else{if(t===xc)return this.nodes();if(this.hasNode(t))return[]}},bc.prototype.predecessors=function(t){var e=this._preds[t];if(e)return _c.keys(e)},bc.prototype.successors=function(t){var e=this._sucs[t];if(e)return _c.keys(e)},bc.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return _c.union(e,this.successors(t))},bc.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},bc.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;_c.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),_c.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var r={};return this._isCompound&&_c.each(e.nodes(),function(t){e.setParent(t,function t(i){var o=n.parent(i);return void 0===o||e.hasNode(o)?(r[i]=o,o):o in r?r[o]:t(o)}(t))}),e},bc.prototype.setDefaultEdgeLabel=function(t){return _c.isFunction(t)||(t=_c.constant(t)),this._defaultEdgeLabelFn=t,this},bc.prototype.edgeCount=function(){return this._edgeCount},bc.prototype.edges=function(){return _c.values(this._edgeObjs)},bc.prototype.setPath=function(t,e){var n=this,r=arguments;return _c.reduce(t,function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i}),this},bc.prototype.setEdge=function(){var t,e,n,r,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(t=o.v,e=o.w,n=o.name,2===arguments.length&&(r=arguments[1],i=!0)):(t=o,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),t=""+t,e=""+e,_c.isUndefined(n)||(n=""+n);var a=Nc(this._isDirected,t,e,n);if(_c.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(!_c.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(t,e,n);var u=function(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var a=i;i=o,o=a}var u={v:i,w:o};r&&(u.name=r);return u}(this._isDirected,t,e,n);return t=u.v,e=u.w,Object.freeze(u),this._edgeObjs[a]=u,Ec(this._preds[e],t),Ec(this._sucs[t],e),this._in[e][a]=u,this._out[t][a]=u,this._edgeCount++,this},bc.prototype.edge=function(t,e,n){var r=1===arguments.length?Mc(this._isDirected,arguments[0]):Nc(this._isDirected,t,e,n);return this._edgeLabels[r]},bc.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?Mc(this._isDirected,arguments[0]):Nc(this._isDirected,t,e,n);return _c.has(this._edgeLabels,r)},bc.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?Mc(this._isDirected,arguments[0]):Nc(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],kc(this._preds[e],t),kc(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},bc.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=_c.values(n);return e?_c.filter(r,function(t){return t.v===e}):r}},bc.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=_c.values(n);return e?_c.filter(r,function(t){return t.w===e}):r}},bc.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))};var jc={Graph:yc,version:"2.1.7"},Sc={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:Dc(t),edges:Ac(t)};_c.isUndefined(t.graph())||(e.value=_c.clone(t.graph()));return e},read:function(t){var e=new yc(t.options).setGraph(t.value);return _c.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),_c.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}};function Dc(t){return _c.map(t.nodes(),function(e){var n=t.node(e),r=t.parent(e),i={v:e};return _c.isUndefined(n)||(i.value=n),_c.isUndefined(r)||(i.parent=r),i})}function Ac(t){return _c.map(t.edges(),function(e){var n=t.edge(e),r={v:e.v,w:e.w};return _c.isUndefined(e.name)||(r.name=e.name),_c.isUndefined(n)||(r.value=n),r})}var Cc=function(t){var e,n={},r=[];function i(r){_c.has(n,r)||(n[r]=!0,e.push(r),_c.each(t.successors(r),i),_c.each(t.predecessors(r),i))}return _c.each(t.nodes(),function(t){e=[],i(t),e.length&&r.push(e)}),r};var Oc=Pc;function Pc(){this._arr=[],this._keyIndices={}}Pc.prototype.size=function(){return this._arr.length},Pc.prototype.keys=function(){return this._arr.map(function(t){return t.key})},Pc.prototype.has=function(t){return _c.has(this._keyIndices,t)},Pc.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},Pc.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},Pc.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!_c.has(n,t)){var r=this._arr,i=r.length;return n[t]=i,r.push({key:t,priority:e}),this._decrease(i),!0}return!1},Pc.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},Pc.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},Pc.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},Pc.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},Pc.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e};var Tc=function(t,e,n,r){return function(t,e,n,r){var i,o,a={},u=new Oc,s=function(t){var e=t.v!==i?t.v:t.w,r=a[e],s=n(t),c=o.distance+s;if(s<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+s);c<r.distance&&(r.distance=c,r.predecessor=i,u.decrease(e,c))};t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},u.add(t,n)});for(;u.size()>0&&(i=u.removeMin(),(o=a[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(s);return a}(t,String(e),n||Ic,r||function(e){return t.outEdges(e)})},Ic=_c.constant(1);var Bc=function(t,e,n){return _c.transform(t.nodes(),function(r,i){r[i]=Tc(t,i,e,n)},{})};var Lc=function(t){var e=0,n=[],r={},i=[];return t.nodes().forEach(function(o){_c.has(r,o)||function o(a){var u=r[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach(function(t){_c.has(r,t)?r[t].onStack&&(u.lowlink=Math.min(u.lowlink,r[t].index)):(o(t),u.lowlink=Math.min(u.lowlink,r[t].lowlink))}),u.lowlink===u.index){var s,c=[];do{s=n.pop(),r[s].onStack=!1,c.push(s)}while(a!==s);i.push(c)}}(o)}),i};var Vc=function(t){return _c.filter(Lc(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})};var Fc=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=o[t],i=e[n],a=o[n],u=r.distance+i.distance;u<a.distance&&(a.distance=u,a.predecessor=i.predecessor)})})}),r}(t,e||zc,n||function(e){return t.outEdges(e)})},zc=_c.constant(1);var Rc=Gc;function Gc(t){var e={},n={},r=[];if(_c.each(t.sinks(),function i(o){if(_c.has(n,o))throw new qc;_c.has(e,o)||(n[o]=!0,e[o]=!0,_c.each(t.predecessors(o),i),delete n[o],r.push(o))}),_c.size(e)!==t.nodeCount())throw new qc;return r}function qc(){}Gc.CycleException=qc,qc.prototype=new Error;var Uc=function(t,e,n){_c.isArray(e)||(e=[e]);var r=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],o={};return _c.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,r,i,o,a){_c.has(i,n)||(i[n]=!0,r||a.push(n),_c.each(o(n),function(n){t(e,n,r,i,o,a)}),r&&a.push(n))}(t,e,"post"===n,o,r,i)}),i};var Wc,Hc={Graph:jc.Graph,json:Sc,alg:{components:Cc,dijkstra:Tc,dijkstraAll:Bc,findCycles:Vc,floydWarshall:Fc,isAcyclic:function(t){try{Rc(t)}catch(t){if(t instanceof Rc.CycleException)return!1;throw t}return!0},postorder:function(t,e){return Uc(t,e,"post")},preorder:function(t,e){return Uc(t,e,"pre")},prim:function(t,e){var n,r=new yc,i={},o=new Oc;function a(t){var r=t.v===n?t.w:t.v,a=o.priority(r);if(void 0!==a){var u=e(t);u<a&&(i[r]=n,o.decrease(r,u))}}if(0===t.nodeCount())return r;_c.each(t.nodes(),function(t){o.add(t,Number.POSITIVE_INFINITY),r.setNode(t)}),o.decrease(t.nodes()[0],0);var u=!1;for(;o.size()>0;){if(n=o.removeMin(),_c.has(i,n))r.setEdge(n,i[n]);else{if(u)throw new Error("Input graph is not connected: "+t);u=!0}t.nodeEdges(n).forEach(a)}return r},tarjan:Lc,topsort:Rc},version:jc.version};try{Wc=Hc}catch(t){}Wc||(Wc=window.graphlib);var $c=Wc,Yc=1,Xc=4;var Jc=function(t){return ja(t,Yc|Xc)};var Kc=function(t,e,n){if(!wr(n))return!1;var r=typeof e;return!!("number"==r?Ji(n)&&Pi(e,n.length):"string"==r&&e in n)&&$n(n[e],t)},Zc=Object.prototype,Qc=Zc.hasOwnProperty,th=ec(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Kc(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=no(o),u=-1,s=a.length;++u<s;){var c=a[u],h=t[c];(void 0===h||$n(h,Zc[c])&&!Qc.call(t,c))&&(t[c]=o[c])}return t});var eh=function(t){return function(e,n,r){var i=Object(e);if(!Ji(e)){var o=ss(n);e=Ki(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:void 0}},nh=NaN,rh=/^\s+|\s+$/g,ih=/^[-+]0x[0-9a-f]+$/i,oh=/^0b[01]+$/i,ah=/^0o[0-7]+$/i,uh=parseInt;var sh=function(t){if("number"==typeof t)return t;if(Cu(t))return nh;if(wr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=wr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(rh,"");var n=oh.test(t);return n||ah.test(t)?uh(t.slice(2),n?2:8):ih.test(t)?nh:+t},ch=1/0,hh=1.7976931348623157e308;var lh=function(t){return t?(t=sh(t))===ch||t===-ch?(t<0?-1:1)*hh:t==t?t:0:0===t?t:0};var fh=function(t){var e=lh(t),n=e%1;return e==e?n?e-n:e:0},dh=Math.max;var ph=eh(function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:fh(n);return i<0&&(i=dh(r+i,0)),nc(t,ss(e),i)});var gh=function(t){return null!=t&&t.length?Hs(t,1):[]};var vh=function(t,e){return null==t?t:Ca(t,Ia(e),no)};var _h=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var yh=function(t,e){var n={};return e=ss(e),Oa(t,function(t,r,i){vi(n,r,e(t,r,i))}),n};var mh=function(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(void 0===u?a==a&&!Cu(a):n(a,u)))var u=a,s=o}return s};var xh=function(t,e){return t>e};var wh=function(t){return t&&t.length?mh(t,Ta,xh):void 0};var bh=function(t,e,n){(void 0===n||$n(t[e],n))&&(void 0!==n||e in t)||vi(t,e,n)},Eh="[object Object]",kh=Function.prototype,Nh=Object.prototype,Mh=kh.toString,jh=Nh.hasOwnProperty,Sh=Mh.call(Object);var Dh=function(t){if(!wi(t)||xr(t)!=Eh)return!1;var e=po(t);if(null===e)return!0;var n=jh.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Mh.call(n)==Sh};var Ah=function(t,e){if("__proto__"!=e)return t[e]};var Ch=function(t){return mi(t,no(t))};var Oh=function(t,e,n,r,i,o,a){var u=Ah(t,n),s=Ah(e,n),c=a.get(s);if(c)bh(t,n,c);else{var h=o?o(u,s,n+"",t,e,a):void 0,l=void 0===h;if(l){var f=Si(s),d=!f&&Ai(s),p=!f&&!d&&Ri(s);h=s,f||d||p?Si(u)?h=u:fc(u)?h=oo(u):d?(l=!1,h=io(s,!0)):p?(l=!1,h=Ro(s,!0)):h=[]:Dh(s)||ji(s)?(h=u,ji(u)?h=Ch(u):wr(u)&&!jr(u)||(h=ha(s))):l=!1}l&&(a.set(s,h),i(h,s,r,o,a),a.delete(s)),bh(t,n,h)}};var Ph=function t(e,n,r,i,o){e!==n&&Ca(n,function(a,u){if(wr(a))o||(o=new di),Oh(e,n,u,r,t,i,o);else{var s=i?i(Ah(e,u),a,u+"",e,n,o):void 0;void 0===s&&(s=a),bh(e,u,s)}},no)};var Th=function(t){return ec(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&Kc(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,o)}return e})}(function(t,e,n){Ph(t,e,n)});var Ih=function(t,e){return t<e};var Bh=function(t){return t&&t.length?mh(t,Ta,Ih):void 0};var Lh=function(t,e){return t&&t.length?mh(t,ss(e),Ih):void 0},Vh=function(){return sr.Date.now()};var Fh=function(t,e,n,r){if(!wr(t))return t;for(var i=-1,o=(e=Yu(e,t)).length,a=o-1,u=t;null!=u&&++i<o;){var s=Ju(e[i]),c=n;if(i!=a){var h=u[s];void 0===(c=r?r(h,s,u):void 0)&&(c=wr(h)?h:Pi(e[i+1])?[]:{})}yi(u,s,c),u=u[s]}return t};var zh=function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],u=Ku(t,a);n(u,a)&&Fh(o,Yu(a,t),u)}return o};var Rh=function(t,e){return zh(t,e,function(e,n){return es(t,n)})};var Gh=function(t){return tc(Xs(t,void 0,gh),t+"")}(function(t,e){return null==t?{}:Rh(t,e)}),qh=Math.ceil,Uh=Math.max;var Wh=function(t,e,n,r){for(var i=-1,o=Uh(qh((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a};var Hh=function(t){return function(e,n,r){return r&&"number"!=typeof r&&Kc(e,n,r)&&(n=r=void 0),e=lh(e),void 0===n?(n=e,e=0):n=lh(n),r=void 0===r?e<n?1:-1:lh(r),Wh(e,n,r,t)}}();var $h=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var Yh=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=Cu(t),a=void 0!==e,u=null===e,s=e==e,c=Cu(e);if(!u&&!c&&!o&&t>e||o&&a&&s&&!u&&!c||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||u&&n&&i||!a&&i||!s)return-1}return 0};var Xh=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,u=n.length;++r<a;){var s=Yh(i[r],o[r]);if(s)return r>=u?s:s*("desc"==n[r]?-1:1)}return t.index-e.index};var Jh=function(t,e,n){var r=-1;e=Gu(e.length?e:[Ta],Vi(ss));var i=ys(t,function(t,n,i){return{criteria:Gu(e,function(e){return e(t)}),index:++r,value:t}});return $h(i,function(t,e){return Xh(t,e,n)})},Kh=ec(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Kc(t,e[0],e[1])?e=[]:n>2&&Kc(e[0],e[1],e[2])&&(e=[e[0]]),Jh(t,Hs(e,1),[])}),Zh=0;var Qh=function(t){var e=++Zh;return $u(t)+e};var tl=function(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var u=r<o?e[r]:void 0;n(a,t[r],u)}return a};var el,nl=function(t,e){return tl(t||[],e||[],yi)};try{el={cloneDeep:Jc,constant:Aa,defaults:th,each:La,filter:cs,find:ph,flatten:gh,forEach:Ba,forIn:vh,has:fs,isUndefined:_s,last:_h,map:ms,mapValues:yh,max:wh,merge:Th,min:Bh,minBy:Lh,now:Vh,pick:Gh,range:Hh,reduce:bs,sortBy:Kh,uniqueId:Qh,values:vc,zipObject:nl}}catch(t){}el||(el=window._);var rl=el,il=ol;function ol(){var t={};t._next=t._prev=t,this._sentinel=t}function al(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function ul(t,e){if("_next"!==t&&"_prev"!==t)return e}ol.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return al(e),e},ol.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&al(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},ol.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,ul)),n=n._prev;return"["+t.join(", ")+"]"};var sl=$c.Graph,cl=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new sl,r=0,i=0;rl.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),rl.forEach(t.edges(),function(t){var o=n.edge(t.v,t.w)||0,a=e(t),u=o+a;n.setEdge(t.v,t.w,u),i=Math.max(i,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)});var o=rl.range(i+r+3).map(function(){return new il}),a=r+1;return rl.forEach(n.nodes(),function(t){fl(o,a,n.node(t))}),{graph:n,buckets:o,zeroIdx:a}}(t,e||hl),r=function(t,e,n){var r,i=[],o=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;r=a.dequeue();)ll(t,e,n,r);for(;r=o.dequeue();)ll(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(ll(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return rl.flatten(rl.map(r,function(e){return t.outEdges(e.v,e.w)}),!0)},hl=rl.constant(1);function ll(t,e,n,r,i){var o=i?[]:void 0;return rl.forEach(t.inEdges(r.v),function(r){var a=t.edge(r),u=t.node(r.v);i&&o.push({v:r.v,w:r.w}),u.out-=a,fl(e,n,u)}),rl.forEach(t.outEdges(r.v),function(r){var i=t.edge(r),o=r.w,a=t.node(o);a.in-=i,fl(e,n,a)}),t.removeNode(r.v),o}function fl(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var dl={run:function(t){var e="greedy"===t.graph().acyclicer?cl(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},r={};return rl.forEach(t.nodes(),function i(o){rl.has(r,o)||(r[o]=!0,n[o]=!0,rl.forEach(t.outEdges(o),function(t){rl.has(n,t.w)?e.push(t):i(t.w)}),delete n[o])}),e}(t);rl.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,rl.uniqueId("rev"))})},undo:function(t){rl.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}};var pl=$c.Graph,gl={addDummyNode:vl,simplify:function(t){var e=(new pl).setGraph(t.graph());return rl.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),rl.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new pl({multigraph:t.isMultigraph()}).setGraph(t.graph());return rl.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),rl.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e},successorWeights:function(t){var e=rl.map(t.nodes(),function(e){var n={};return rl.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return rl.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=rl.map(t.nodes(),function(e){var n={};return rl.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return rl.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,a=e.x-i,u=e.y-o,s=t.width/2,c=t.height/2;if(!a&&!u)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),n=c*a/u,r=c):(a<0&&(s=-s),n=s,r=s*u/a);return{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=rl.map(rl.range(_l(t)+1),function(){return[]});return rl.forEach(t.nodes(),function(n){var r=t.node(n),i=r.rank;rl.isUndefined(i)||(e[i][r.order]=n)}),e},normalizeRanks:function(t){var e=rl.min(rl.map(t.nodes(),function(e){return t.node(e).rank}));rl.forEach(t.nodes(),function(n){var r=t.node(n);rl.has(r,"rank")&&(r.rank-=e)})},removeEmptyRanks:function(t){var e=rl.min(rl.map(t.nodes(),function(e){return t.node(e).rank})),n=[];rl.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var r=0,i=t.graph().nodeRankFactor;rl.forEach(n,function(e,n){rl.isUndefined(e)&&n%i!=0?--r:r&&rl.forEach(e,function(e){t.node(e).rank+=r})})},addBorderNode:function(t,e,n,r){var i={width:0,height:0};arguments.length>=4&&(i.rank=n,i.order=r);return vl(t,"border",i,e)},maxRank:_l,partition:function(t,e){var n={lhs:[],rhs:[]};return rl.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=rl.now();try{return e()}finally{console.log(t+" time: "+(rl.now()-n)+"ms")}},notime:function(t,e){return e()}};function vl(t,e,n,r){var i;do{i=rl.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function _l(t){return rl.max(rl.map(t.nodes(),function(e){var n=t.node(e).rank;if(!rl.isUndefined(n))return n}))}var yl={run:function(t){t.graph().dummyChains=[],rl.forEach(t.edges(),function(e){!function(t,e){var n,r,i,o=e.v,a=t.node(o).rank,u=e.w,s=t.node(u).rank,c=e.name,h=t.edge(e),l=h.labelRank;if(s===a+1)return;for(t.removeEdge(e),i=0,++a;a<s;++i,++a)h.points=[],r={width:0,height:0,edgeLabel:h,edgeObj:e,rank:a},n=gl.addDummyNode(t,"edge",r,"_d"),a===l&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),t.setEdge(o,n,{weight:h.weight},c),0===i&&t.graph().dummyChains.push(n),o=n;t.setEdge(o,u,{weight:h.weight},c)}(t,e)})},undo:function(t){rl.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=n,r=t.node(e)})}};var ml=function(t){var e={};rl.forEach(t.sources(),function n(r){var i=t.node(r);if(rl.has(e,r))return i.rank;e[r]=!0;var o=rl.min(rl.map(t.outEdges(r),function(e){return n(e.w)-t.edge(e).minlen}));o!==Number.POSITIVE_INFINITY&&null!=o||(o=0);return i.rank=o})},xl=function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen};var wl=$c.Graph,bl=xl,El=function(t){var e,n,r=new wl({directed:!1}),i=t.nodes()[0],o=t.nodeCount();r.setNode(i,{});for(;kl(r,t)<o;)e=Nl(r,t),n=r.hasNode(e.v)?bl(t,e):-bl(t,e),Ml(r,t,n);return r};function kl(t,e){return rl.forEach(t.nodes(),function n(r){rl.forEach(e.nodeEdges(r),function(i){var o=i.v,a=r===o?i.w:o;t.hasNode(a)||bl(e,i)||(t.setNode(a,{}),t.setEdge(r,a,{}),n(a))})}),t.nodeCount()}function Nl(t,e){return rl.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return bl(e,n)})}function Ml(t,e,n){rl.forEach(t.nodes(),function(t){e.node(t).rank+=n})}var jl=xl,Sl=ml,Dl=$c.alg.preorder,Al=$c.alg.postorder,Cl=gl.simplify,Ol=Pl;function Pl(t){t=Cl(t),Sl(t);var e,n=El(t);for(Bl(n),Tl(n,t);e=Ll(n);)Fl(n,t,e,Vl(n,t,e))}function Tl(t,e){var n=Al(t,t.nodes());n=n.slice(0,n.length-1),rl.forEach(n,function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=Il(t,e,n)}(t,e,n)})}function Il(t,e,n){var r=t.node(n).parent,i=!0,o=e.edge(n,r),a=0;return o||(i=!1,o=e.edge(r,n)),a=o.weight,rl.forEach(e.nodeEdges(n),function(o){var u,s,c=o.v===n,h=c?o.w:o.v;if(h!==r){var l=c===i,f=e.edge(o).weight;if(a+=l?f:-f,u=n,s=h,t.hasEdge(u,s)){var d=t.edge(n,h).cutvalue;a+=l?-d:d}}}),a}function Bl(t,e){arguments.length<2&&(e=t.nodes()[0]),function t(e,n,r,i,o){var a=r,u=e.node(i);n[i]=!0;rl.forEach(e.neighbors(i),function(o){rl.has(n,o)||(r=t(e,n,r,o,i))});u.low=a;u.lim=r++;o?u.parent=o:delete u.parent;return r}(t,{},1,e)}function Ll(t){return rl.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function Vl(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var o=t.node(r),a=t.node(i),u=o,s=!1;o.lim>a.lim&&(u=a,s=!0);var c=rl.filter(e.edges(),function(e){return s===zl(t,t.node(e.v),u)&&s!==zl(t,t.node(e.w),u)});return rl.minBy(c,function(t){return jl(e,t)})}function Fl(t,e,n,r){var i=n.v,o=n.w;t.removeEdge(i,o),t.setEdge(r.v,r.w,{}),Bl(t),Tl(t,e),function(t,e){var n=rl.find(t.nodes(),function(t){return!e.node(t).parent}),r=Dl(t,n);r=r.slice(1),rl.forEach(r,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}(t,e)}function zl(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}Pl.initLowLimValues=Bl,Pl.initCutValues=Tl,Pl.calcCutValue=Il,Pl.leaveEdge=Ll,Pl.enterEdge=Vl,Pl.exchangeEdges=Fl;var Rl=ml,Gl=function(t){switch(t.graph().ranker){case"network-simplex":Ul(t);break;case"tight-tree":!function(t){Rl(t),El(t)}(t);break;case"longest-path":ql(t);break;default:Ul(t)}};var ql=Rl;function Ul(t){Ol(t)}var Wl=function(t){var e=function(t){var e={},n=0;return rl.forEach(t.children(),function r(i){var o=n;rl.forEach(t.children(i),r),e[i]={low:o,lim:n++}}),e}(t);rl.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,a=[],u=[],s=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>s||c>e[i].lim));o=i,i=r;for(;(i=t.parent(i))!==o;)u.push(i);return{path:a.concat(u.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,u=o.lca,s=0,c=a[s],h=!0;n!==i.w;){if(r=t.node(n),h){for(;(c=a[s])!==u&&t.node(c).maxRank<r.rank;)s++;c===u&&(h=!1)}if(!h){for(;s<a.length-1&&t.node(c=a[s+1]).minRank<=r.rank;)s++;c=a[s]}t.setParent(n,c),n=t.successors(n)[0]}})};var Hl={run:function(t){var e=gl.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};return rl.forEach(t.children(),function(n){!function n(r,i){var o=t.children(r);o&&o.length&&rl.forEach(o,function(t){n(t,i+1)}),e[r]=i}(n,1)}),e}(t),r=rl.max(rl.values(n))-1,i=2*r+1;t.graph().nestingRoot=e,rl.forEach(t.edges(),function(e){t.edge(e).minlen*=i});var o=function(t){return rl.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}(t)+1;rl.forEach(t.children(),function(a){!function t(e,n,r,i,o,a,u){var s=e.children(u);if(!s.length)return void(u!==n&&e.setEdge(n,u,{weight:0,minlen:r}));var c=gl.addBorderNode(e,"_bt"),h=gl.addBorderNode(e,"_bb"),l=e.node(u);e.setParent(c,u);l.borderTop=c;e.setParent(h,u);l.borderBottom=h;rl.forEach(s,function(s){t(e,n,r,i,o,a,s);var l=e.node(s),f=l.borderTop?l.borderTop:s,d=l.borderBottom?l.borderBottom:s,p=l.borderTop?i:2*i,g=f!==d?1:o-a[u]+1;e.setEdge(c,f,{weight:p,minlen:g,nestingEdge:!0}),e.setEdge(d,h,{weight:p,minlen:g,nestingEdge:!0})});e.parent(u)||e.setEdge(n,c,{weight:0,minlen:o+a[u]})}(t,e,i,o,r,n,a)}),t.graph().nodeRankFactor=i},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,rl.forEach(t.edges(),function(e){var n=t.edge(e);n.nestingEdge&&t.removeEdge(e)})}};var $l=function(t){rl.forEach(t.children(),function e(n){var r=t.children(n),i=t.node(n);r.length&&rl.forEach(r,e);if(rl.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)Yl(t,"borderLeft","_bl",n,i,o),Yl(t,"borderRight","_br",n,i,o)}})};function Yl(t,e,n,r,i,o){var a={width:0,height:0,rank:o,borderType:e},u=i[e][o-1],s=gl.addDummyNode(t,"border",a,n);i[e][o]=s,t.setParent(s,r),u&&t.setEdge(u,s,{weight:1})}var Xl={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||Jl(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){rl.forEach(t.nodes(),function(e){Zl(t.node(e))}),rl.forEach(t.edges(),function(e){var n=t.edge(e);rl.forEach(n.points,Zl),rl.has(n,"y")&&Zl(n)})}(t);"lr"!==e&&"rl"!==e||(!function(t){rl.forEach(t.nodes(),function(e){Ql(t.node(e))}),rl.forEach(t.edges(),function(e){var n=t.edge(e);rl.forEach(n.points,Ql),rl.has(n,"x")&&Ql(n)})}(t),Jl(t))}};function Jl(t){rl.forEach(t.nodes(),function(e){Kl(t.node(e))}),rl.forEach(t.edges(),function(e){Kl(t.edge(e))})}function Kl(t){var e=t.width;t.width=t.height,t.height=e}function Zl(t){t.y=-t.y}function Ql(t){var e=t.x;t.x=t.y,t.y=e}var tf=function(t){var e={},n=rl.filter(t.nodes(),function(e){return!t.children(e).length}),r=rl.max(rl.map(n,function(e){return t.node(e).rank})),i=rl.map(rl.range(r+1),function(){return[]});var o=rl.sortBy(n,function(e){return t.node(e).rank});return rl.forEach(o,function n(r){if(!rl.has(e,r)){e[r]=!0;var o=t.node(r);i[o.rank].push(r),rl.forEach(t.successors(r),n)}}),i};var ef=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=nf(t,e[r-1],e[r]);return n};function nf(t,e,n){for(var r=rl.zipObject(n,rl.map(n,function(t,e){return e})),i=rl.flatten(rl.map(e,function(e){return rl.sortBy(rl.map(t.outEdges(e),function(e){return{pos:r[e.w],weight:t.edge(e).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var u=rl.map(new Array(a),function(){return 0}),s=0;return rl.forEach(i.forEach(function(t){var e=t.pos+o;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;s+=t.weight*n})),s}var rf=function(t,e){return rl.map(e,function(e){var n=t.inEdges(e);if(n.length){var r=rl.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:r.sum/r.weight,weight:r.weight}}return{v:e}})};var of=function(t,e){var n={};return rl.forEach(t,function(t,e){var r=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};rl.isUndefined(t.barycenter)||(r.barycenter=t.barycenter,r.weight=t.weight)}),rl.forEach(e.edges(),function(t){var e=n[t.v],r=n[t.w];rl.isUndefined(e)||rl.isUndefined(r)||(r.indegree++,e.out.push(n[t.w]))}),function(t){var e=[];function n(t){return function(e){var n,r,i,o;e.merged||(rl.isUndefined(e.barycenter)||rl.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(r=e,i=0,o=0,(n=t).weight&&(i+=n.barycenter*n.weight,o+=n.weight),r.weight&&(i+=r.barycenter*r.weight,o+=r.weight),n.vs=r.vs.concat(n.vs),n.barycenter=i/o,n.weight=o,n.i=Math.min(r.i,n.i),r.merged=!0)}}function r(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var i=t.pop();e.push(i),rl.forEach(i.in.reverse(),n(i)),rl.forEach(i.out,r(i))}return rl.map(rl.filter(e,function(t){return!t.merged}),function(t){return rl.pick(t,["vs","i","barycenter","weight"])})}(rl.filter(n,function(t){return!t.indegree}))};var af=function(t,e){var n=gl.partition(t,function(t){return rl.has(t,"barycenter")}),r=n.lhs,i=rl.sortBy(n.rhs,function(t){return-t.i}),o=[],a=0,u=0,s=0;r.sort((c=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:c?e.i-t.i:t.i-e.i})),s=uf(o,i,s),rl.forEach(r,function(t){s+=t.vs.length,o.push(t.vs),a+=t.barycenter*t.weight,u+=t.weight,s=uf(o,i,s)});var c;var h={vs:rl.flatten(o,!0)};u&&(h.barycenter=a/u,h.weight=u);return h};function uf(t,e,n){for(var r;e.length&&(r=rl.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}var sf=function t(e,n,r,i){var o=e.children(n),a=e.node(n),u=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,c={};u&&(o=rl.filter(o,function(t){return t!==u&&t!==s}));var h=rf(e,o);rl.forEach(h,function(n){if(e.children(n.v).length){var o=t(e,n.v,r,i);c[n.v]=o,rl.has(o,"barycenter")&&(a=n,u=o,rl.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight))}var a,u});var l=of(h,r);!function(t,e){rl.forEach(t,function(t){t.vs=rl.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(l,c);var f=af(l,i);if(u&&(f.vs=rl.flatten([u,f.vs,s],!0),e.predecessors(u).length)){var d=e.node(e.predecessors(u)[0]),p=e.node(e.predecessors(s)[0]);rl.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+d.order+p.order)/(f.weight+2),f.weight+=2}return f};var cf=$c.Graph,hf=function(t,e,n){var r=function(t){var e;for(;t.hasNode(e=rl.uniqueId("_root")););return e}(t),i=new cf({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(e){return t.node(e)});return rl.forEach(t.nodes(),function(o){var a=t.node(o),u=t.parent(o);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(i.setNode(o),i.setParent(o,u||r),rl.forEach(t[n](o),function(e){var n=e.v===o?e.w:e.v,r=i.edge(n,o),a=rl.isUndefined(r)?0:r.weight;i.setEdge(n,o,{weight:t.edge(e).weight+a})}),rl.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),i};var lf=function(t,e,n){var r,i={};rl.forEach(n,function(n){for(var o,a,u=t.parent(n);u;){if((o=t.parent(u))?(a=i[o],i[o]=u):(a=r,r=u),a&&a!==u)return void e.setEdge(a,u);u=o}})};var ff=$c.Graph,df=function(t){var e=gl.maxRank(t),n=pf(t,rl.range(1,e+1),"inEdges"),r=pf(t,rl.range(e-1,-1,-1),"outEdges"),i=tf(t);vf(t,i);for(var o,a=Number.POSITIVE_INFINITY,u=0,s=0;s<4;++u,++s){gf(u%2?n:r,u%4>=2),i=gl.buildLayerMatrix(t);var c=ef(t,i);c<a&&(s=0,o=rl.cloneDeep(i),a=c)}vf(t,o)};function pf(t,e,n){return rl.map(e,function(e){return hf(t,e,n)})}function gf(t,e){var n=new ff;rl.forEach(t,function(t){var r=t.graph().root,i=sf(t,r,n,e);rl.forEach(i.vs,function(e,n){t.node(e).order=n}),lf(t,n,i.vs)})}function vf(t,e){rl.forEach(e,function(e){rl.forEach(e,function(e,n){t.node(e).order=n})})}var _f=$c.Graph,yf=function(t){var e,n=gl.buildLayerMatrix(t),r=rl.merge(mf(t,n),xf(t,n)),i={};rl.forEach(["u","d"],function(o){e="u"===o?n:rl.values(n).reverse(),rl.forEach(["l","r"],function(n){"r"===n&&(e=rl.map(e,function(t){return rl.values(t).reverse()}));var a=("u"===o?t.predecessors:t.successors).bind(t),u=Ef(t,e,r,a),s=kf(t,e,u.root,u.align,"r"===n);"r"===n&&(s=rl.mapValues(s,function(t){return-t})),i[o+n]=s})});var o=Nf(t,i);return Mf(i,o),jf(i,t.graph().align)};function mf(t,e){var n={};return rl.reduce(e,function(e,r){var i=0,o=0,a=e.length,u=rl.last(r);return rl.forEach(r,function(e,s){var c=function(t,e){if(t.node(e).dummy)return rl.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),h=c?t.node(c).order:a;(c||e===u)&&(rl.forEach(r.slice(o,s+1),function(e){rl.forEach(t.predecessors(e),function(r){var o=t.node(r),a=o.order;!(a<i||h<a)||o.dummy&&t.node(e).dummy||wf(n,r,e)})}),o=s+1,i=h)}),r}),n}function xf(t,e){var n={};function r(e,r,i,o,a){var u;rl.forEach(rl.range(r,i),function(r){u=e[r],t.node(u).dummy&&rl.forEach(t.predecessors(u),function(e){var r=t.node(e);r.dummy&&(r.order<o||r.order>a)&&wf(n,e,u)})})}return rl.reduce(e,function(e,n){var i,o=-1,a=0;return rl.forEach(n,function(u,s){if("border"===t.node(u).dummy){var c=t.predecessors(u);c.length&&(i=t.node(c[0]).order,r(n,a,s,o,i),a=s,o=i)}r(n,a,n.length,i,e.length)}),n}),n}function wf(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function bf(t,e,n){if(e>n){var r=e;e=n,n=r}return rl.has(t[e],n)}function Ef(t,e,n,r){var i={},o={},a={};return rl.forEach(e,function(t){rl.forEach(t,function(t,e){i[t]=t,o[t]=t,a[t]=e})}),rl.forEach(e,function(t){var e=-1;rl.forEach(t,function(t){var u=r(t);if(u.length)for(var s=((u=rl.sortBy(u,function(t){return a[t]})).length-1)/2,c=Math.floor(s),h=Math.ceil(s);c<=h;++c){var l=u[c];o[t]===t&&e<a[l]&&!bf(n,t,l)&&(o[l]=t,o[t]=i[t]=i[l],e=a[l])}})}),{root:i,align:o}}function kf(t,e,n,r,i){var o={},a=function(t,e,n,r){var i=new _f,o=t.graph(),a=function(t,e,n){return function(r,i,o){var a,u=r.node(i),s=r.node(o),c=0;if(c+=u.width/2,rl.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=-u.width/2;break;case"r":a=u.width/2}if(a&&(c+=n?a:-a),a=0,c+=(u.dummy?e:t)/2,c+=(s.dummy?e:t)/2,c+=s.width/2,rl.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=s.width/2;break;case"r":a=-s.width/2}return a&&(c+=n?a:-a),a=0,c}}(o.nodesep,o.edgesep,r);return rl.forEach(e,function(e){var r;rl.forEach(e,function(e){var o=n[e];if(i.setNode(o),r){var u=n[r],s=i.edge(u,o);i.setEdge(u,o,Math.max(a(t,e,r),s||0))}r=e})}),i}(t,e,n,i),u=i?"borderLeft":"borderRight";function s(t,e){for(var n=a.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return s(function(t){o[t]=a.inEdges(t).reduce(function(t,e){return Math.max(t,o[e.v]+a.edge(e))},0)},a.predecessors.bind(a)),s(function(e){var n=a.outEdges(e).reduce(function(t,e){return Math.min(t,o[e.w]-a.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==u&&(o[e]=Math.max(o[e],n))},a.successors.bind(a)),rl.forEach(r,function(t){o[t]=o[n[t]]}),o}function Nf(t,e){return rl.minBy(rl.values(e),function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return rl.forIn(e,function(e,i){var o=function(t,e){return t.node(e).width}(t,i)/2;n=Math.max(e+o,n),r=Math.min(e-o,r)}),n-r})}function Mf(t,e){var n=rl.values(e),r=rl.min(n),i=rl.max(n);rl.forEach(["u","d"],function(n){rl.forEach(["l","r"],function(o){var a,u=n+o,s=t[u];if(s!==e){var c=rl.values(s);(a="l"===o?r-rl.min(c):i-rl.max(c))&&(t[u]=rl.mapValues(s,function(t){return t+a}))}})})}function jf(t,e){return rl.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=rl.sortBy(rl.map(t,r));return(i[1]+i[2])/2})}var Sf=yf,Df=function(t){(function(t){var e=gl.buildLayerMatrix(t),n=t.graph().ranksep,r=0;rl.forEach(e,function(e){var i=rl.max(rl.map(e,function(e){return t.node(e).height}));rl.forEach(e,function(e){t.node(e).y=r+i/2}),r+=i+n})})(t=gl.asNonCompoundGraph(t)),rl.forEach(Sf(t),function(e,n){t.node(n).x=e})};var Af=gl.normalizeRanks,Cf=gl.removeEmptyRanks,Of=gl,Pf=$c.Graph,Tf=function(t,e){var n=e&&e.debugTiming?Of.time:Of.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return function(t){var e=new Pf({multigraph:!0,compound:!0}),n=Uf(t.graph());return e.setGraph(rl.merge({},Bf,qf(n,If),rl.pick(n,Lf))),rl.forEach(t.nodes(),function(n){var r=Uf(t.node(n));e.setNode(n,rl.defaults(qf(r,Vf),Ff)),e.setParent(n,t.parent(n))}),rl.forEach(t.edges(),function(n){var r=Uf(t.edge(n));e.setEdge(n,rl.merge({},Rf,qf(r,zf),rl.pick(r,Gf)))}),e}(t)});n("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,rl.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){rl.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){dl.run(t)}),e("    nestingGraph.run",function(){Hl.run(t)}),e("    rank",function(){Gl(Of.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){rl.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w),o={rank:(i.rank-r.rank)/2+r.rank,e:e};Of.addDummyNode(t,"edge-proxy",o,"_ep")}})}(t)}),e("    removeEmptyRanks",function(){Cf(t)}),e("    nestingGraph.cleanup",function(){Hl.cleanup(t)}),e("    normalizeRanks",function(){Af(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;rl.forEach(t.nodes(),function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=rl.max(e,r.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){rl.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){yl.run(t)}),e("    parentDummyChains",function(){Wl(t)}),e("    addBorderSegments",function(){$l(t)}),e("    order",function(){df(t)}),e("    insertSelfEdges",function(){!function(t){var e=Of.buildLayerMatrix(t);rl.forEach(e,function(e){var n=0;rl.forEach(e,function(e,r){var i=t.node(e);i.order=r+n,rl.forEach(i.selfEdges,function(e){Of.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){Xl.adjust(t)}),e("    position",function(){Df(t)}),e("    positionSelfEdges",function(){!function(t){rl.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,u=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-u},{x:i+5*a/6,y:o-u},{x:i+a,y:o},{x:i+5*a/6,y:o+u},{x:i+2*a/3,y:o+u}],n.label.x=n.x,n.label.y=n.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){rl.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(rl.last(n.borderLeft)),a=t.node(rl.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),rl.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){yl.undo(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){rl.forEach(t.edges(),function(e){var n=t.edge(e);if(rl.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){Xl.undo(t)}),e("    translateGraph",function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=t.graph(),a=o.marginx||0,u=o.marginy||0;function s(t){var o=t.x,a=t.y,u=t.width,s=t.height;e=Math.min(e,o-u/2),n=Math.max(n,o+u/2),r=Math.min(r,a-s/2),i=Math.max(i,a+s/2)}rl.forEach(t.nodes(),function(e){s(t.node(e))}),rl.forEach(t.edges(),function(e){var n=t.edge(e);rl.has(n,"x")&&s(n)}),e-=a,r-=u,rl.forEach(t.nodes(),function(n){var i=t.node(n);i.x-=e,i.y-=r}),rl.forEach(t.edges(),function(n){var i=t.edge(n);rl.forEach(i.points,function(t){t.x-=e,t.y-=r}),rl.has(i,"x")&&(i.x-=e),rl.has(i,"y")&&(i.y-=r)}),o.width=n-e+a,o.height=i-r+u}(t)}),e("    assignNodeIntersects",function(){!function(t){rl.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(Of.intersectRect(o,n)),i.points.push(Of.intersectRect(a,r))})}(t)}),e("    reversePoints",function(){!function(t){rl.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}(t)}),e("    acyclic.undo",function(){dl.undo(t)})}(e,n)}),n("  updateInputGraph",function(){!function(t,e){rl.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),rl.forEach(t.edges(),function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,rl.has(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})};var If=["nodesep","edgesep","ranksep","marginx","marginy"],Bf={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Lf=["acyclicer","ranker","rankdir","align"],Vf=["width","height"],Ff={width:0,height:0},zf=["minlen","weight","width","height","labeloffset"],Rf={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Gf=["labelpos"];function qf(t,e){return rl.mapValues(rl.pick(t,e),Number)}function Uf(t){var e={};return rl.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}var Wf=$c.Graph;var Hf={graphlib:$c,layout:Tf,debug:{debugOrdering:function(t){var e=gl.buildLayerMatrix(t),n=new Wf({compound:!0,multigraph:!0}).setGraph({});return rl.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),rl.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),rl.forEach(e,function(t,e){var r="layer"+e;n.setNode(r,{rank:"same"}),rl.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}},util:{time:gl.time,notime:gl.notime},version:"0.8.4"},$f=Hf.graphlib,Yf=Hf.layout,Xf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}($f.Graph),Jf=function(){function t(){this._g=new Xf({multigraph:!0,compound:!0}),this._g.setGraph({}),this._g.setDefaultNodeLabel(function(){return{debug:"error"}}),this._g.setDefaultEdgeLabel(function(){return{debug:"error"}})}return t.prototype.parent=function(t){return this._g.parent(t)},t.prototype.filterNodes=function(t){var e=[];return this.eachNode(function(n){t(n)&&e.push(n)}),e},t.prototype.eachNode=function(t){this._g.nodes().forEach(function(e){t(e,this.node(e))},this)},t.prototype.filterEdges=function(t){var e=[];return this.eachEdge(function(n){t(n)&&e.push(n)}),e},t.prototype.eachEdge=function(t){this._g.edges().forEach(function(e){t(e,e.v,e.w,this.edge(e))},this)},t.prototype.setData=function(t,e,n,r,i){for(var o=this,a={addedVertices:[],addedEdges:[]},u=t.concat(e),s=0;s<u.length;++s){var c=u[s];i&&this._g.hasNode(c._id)||(this._g.setNode(c._id,c),a.addedVertices.push(c))}for(s=0;s<n.length;++s){var h=n[s];i&&this._g.hasEdge(h._id)||(h._sourceVertex&&h._targetVertex?(this._g.setEdge(h._sourceVertex._id,h._targetVertex._id,h,h._id),a.addedEdges.push(h)):console.log("Bad edge definition"))}if(r)for(s=0;s<r.length;++s)this._g.setParent(r[s].child._id,r[s].parent._id);if(i){var l=n.map(function(t){return t._id});this.filterEdges(function(t){return l.indexOf(t.name)<0}).forEach(function(t){return o._g.removeEdge(t.v,t.w,t.name)});var f=u.map(function(t){return t._id});this.filterNodes(function(t){return f.indexOf(t)<0}).forEach(function(t){return o._g.removeNode(t)})}return a},t.prototype.node=function(t){return this._g.node(t)},t.prototype.nodeCount=function(){return this._g.nodeCount()},t.prototype.nodes=function(){var t=this;return this._g.nodes().map(function(e){return t._g.node(e)})},t.prototype.nodeEdges=function(t){return this._g.nodeEdges(t)},t.prototype.edge=function(t){return this._g.edge(t)},t.prototype.edges=function(){var t=this;return this._g.edges().map(function(e){return t._g.edge(e)})},t.prototype.neighbors=function(t){var e=this;return this._g.neighbors(t).map(function(t){return e._g.node(t)})},t.prototype.singleNeighbors=function(t){var e=this;return this._g.neighbors(t).filter(function(t){return 1===e._g.neighbors(t).length}).map(function(t){return e._g.node(t)})},t.prototype.gatherShortestPath=function(t,e){for(var n=[],r=e,i=t[r];i;){if(i.distance<1/0&&i.predecessor){var o=this._g.nodeEdges(r,i.predecessor)[0];n.push(this._g.edge(o))}i=t[r=i.predecessor]}return n},t.prototype.shortestPath=function(t,e){return this.gatherShortestPath($f.alg.dijkstra(this._g,t),e)},t.prototype.undirectedShortestPath=function(t,e){var n=this;return this.gatherShortestPath($f.alg.dijkstra(this._g,t,null,function(t){return n._g.nodeEdges(t)}),e)},t.prototype.getJSON=function(){var t=$f.json.write(this._g);return JSON.stringify(t,function(t,e){return"value"===t?e._text&&e._text._text?e._text._text:e._id:e},"  ")},t}();function Kf(t){return function(){return t}}function Zf(){return 1e-6*(Math.random()-.5)}function Qf(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,u,s,c,h,l,f,d=t._root,p={data:r},g=t._x0,v=t._y0,_=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(g+_)/2))?g=o:_=o,(h=n>=(a=(v+y)/2))?v=a:y=a,i=d,!(d=d[l=h<<1|c]))return i[l]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+_)/2))?g=o:_=o,(h=n>=(a=(v+y)/2))?v=a:y=a}while((l=h<<1|c)==(f=(s>=a)<<1|u>=o));return i[f]=d,i[l]=p,t}function td(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function ed(t){return t[0]}function nd(t){return t[1]}function rd(t,e,n){var r=new id(null==e?ed:e,null==n?nd:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function id(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function od(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ad=rd.prototype=id.prototype;ad.copy=function(){var t,e,n=new id(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=od(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=od(e));return n},ad.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Qf(this.cover(e,n),e,n,t)},ad.addAll=function(t){var e,n,r,i,o=t.length,a=new Array(o),u=new Array(o),s=1/0,c=1/0,h=-1/0,l=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,u[n]=i,r<s&&(s=r),r>h&&(h=r),i<c&&(c=i),i>l&&(l=i));for(h<s&&(s=this._x0,h=this._x1),l<c&&(c=this._y0,l=this._y1),this.cover(s,c).cover(h,l),n=0;n<o;++n)Qf(this,a[n],u[n],t[n]);return this},ad.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,u,s=i-n,c=this._root;switch(u=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do{(a=new Array(4))[u]=c,c=a}while(o=r+(s*=2),t>(i=n+s)||e>o);break;case 1:do{(a=new Array(4))[u]=c,c=a}while(o=r+(s*=2),(n=i-s)>t||e>o);break;case 2:do{(a=new Array(4))[u]=c,c=a}while(r=o-(s*=2),t>(i=n+s)||r>e);break;case 3:do{(a=new Array(4))[u]=c,c=a}while(r=o-(s*=2),(n=i-s)>t||r>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},ad.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},ad.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ad.find=function(t,e,n){var r,i,o,a,u,s,c,h=this._x0,l=this._y0,f=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new td(g,h,l,f,d)),null==n?n=1/0:(h=t-n,l=e-n,f=t+n,d=e+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(i=s.x0)>f||(o=s.y0)>d||(a=s.x1)<h||(u=s.y1)<l))if(g.length){var v=(i+a)/2,_=(o+u)/2;p.push(new td(g[3],v,_,a,u),new td(g[2],i,_,v,u),new td(g[1],v,o,a,_),new td(g[0],i,o,v,_)),(c=(e>=_)<<1|t>=v)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var y=t-+this._x.call(null,g.data),m=e-+this._y.call(null,g.data),x=y*y+m*m;if(x<n){var w=Math.sqrt(n=x);h=t-w,l=e-w,f=t+w,d=e+w,r=g.data}}return r},ad.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,u,s,c,h,l,f,d=this._root,p=this._x0,g=this._y0,v=this._x1,_=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(u=(p+v)/2))?p=u:v=u,(h=a>=(s=(g+_)/2))?g=s:_=s,e=d,!(d=d[l=h<<1|c]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,f=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},ad.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},ad.root=function(){return this._root},ad.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},ad.visit=function(t){var e,n,r,i,o,a,u=[],s=this._root;for(s&&u.push(new td(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&s.length){var c=(r+o)/2,h=(i+a)/2;(n=s[3])&&u.push(new td(n,c,h,o,a)),(n=s[2])&&u.push(new td(n,r,h,c,a)),(n=s[1])&&u.push(new td(n,c,i,o,h)),(n=s[0])&&u.push(new td(n,r,i,c,h))}return this},ad.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new td(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,u=e.y0,s=e.x1,c=e.y1,h=(a+s)/2,l=(u+c)/2;(o=i[0])&&n.push(new td(o,a,u,h,l)),(o=i[1])&&n.push(new td(o,h,u,s,l)),(o=i[2])&&n.push(new td(o,a,l,h,c)),(o=i[3])&&n.push(new td(o,h,l,s,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},ad.x=function(t){return arguments.length?(this._x=t,this):this._x},ad.y=function(t){return arguments.length?(this._y=t,this):this._y};function ud(){}function sd(t,e){var n=new ud;if(t instanceof ud)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function cd(){var t,e,n,r=[],i=[];function o(n,i,a,u){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var s,c,h,l=-1,f=n.length,d=r[i++],p=sd(),g=a();++l<f;)(h=p.get(s=d(c=n[l])+""))?h.push(c):p.set(s,[c]);return p.each(function(t,e){u(g,e,o(t,i,a,u))}),g}return n={object:function(t){return o(t,0,hd,ld)},map:function(t){return o(t,0,fd,dd)},entries:function(t){return function t(n,o){if(++o>r.length)return n;var a,u=i[o-1];return null!=e&&o>=r.length?a=n.entries():(a=[],n.each(function(e,n){a.push({key:n,values:t(e,o)})})),null!=u?a.sort(function(t,e){return u(t.key,e.key)}):a}(o(t,0,fd,dd),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}}function hd(){return{}}function ld(t,e,n){t[e]=n}function fd(){return sd()}function dd(t,e,n){t.set(e,n)}function pd(){}ud.prototype=sd.prototype={constructor:ud,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var gd=sd.prototype;function vd(t){return t.index}function _d(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function yd(t){return t.x}function md(t){return t.y}pd.prototype=function(t,e){var n=new pd;if(t instanceof pd)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}.prototype={constructor:pd,has:gd.has,add:function(t){return this["$"+(t+="")]=t,this},remove:gd.remove,clear:gd.clear,values:gd.keys,size:gd.size,empty:gd.empty,each:gd.each};var xd=10,wd=Math.PI*(3-Math.sqrt(5));function bd(t,e,n,r){var i=this;this.pos={};r=r||(e<n?e-0:n-0)/2;var o=t.nodeCount(),a=-Math.PI/2,u=2*Math.PI/o;t.eachNode(function(t,o){var s=o.getBBox();i.pos[t]={x:o.fixed?o.x:e/2+Math.cos(a)*(r-0),y:o.fixed?o.y:n/2+Math.sin(a)*(r-0),width:s.width,height:s.height},a+=u})}function Ed(t,e,n,r){r=r||{};var i=this;this.pos={},this.vertices=[],this.vertexMap={},t.eachNode(function(e){var n=t.node(e),r=n.getBBox(),o={id:e,x:n.pos().x,y:n.pos().y,width:r.width,height:r.height,value:n};i.vertices.push(o),i.vertexMap[e]=o}),this.edges=[],t.eachEdge(function(t,e,n){i.edges.push({source:e,target:n})});var o=function(t){var e,n,r,i,o,a=vd,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},s=Kf(30),c=1;function h(r){for(var i=0,a=t.length;i<c;++i)for(var u,s,h,l,f,d,p,g=0;g<a;++g)s=(u=t[g]).source,l=(h=u.target).x+h.vx-s.x-s.vx||Zf(),f=h.y+h.vy-s.y-s.vy||Zf(),l*=d=((d=Math.sqrt(l*l+f*f))-n[g])/d*r*e[g],f*=d,h.vx-=l*(p=o[g]),h.vy-=f*p,s.vx+=l*(p=1-p),s.vy+=f*p}function l(){if(r){var u,s,c=r.length,h=t.length,l=sd(r,a);for(u=0,i=new Array(c);u<h;++u)(s=t[u]).index=u,"object"!=typeof s.source&&(s.source=_d(l,s.source)),"object"!=typeof s.target&&(s.target=_d(l,s.target)),i[s.source.index]=(i[s.source.index]||0)+1,i[s.target.index]=(i[s.target.index]||0)+1;for(u=0,o=new Array(h);u<h;++u)s=t[u],o[u]=i[s.source.index]/(i[s.source.index]+i[s.target.index]);e=new Array(h),f(),n=new Array(h),d()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+u(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+s(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t){r=t,l()},h.links=function(e){return arguments.length?(t=e,l(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(u="function"==typeof t?t:Kf(+t),f(),h):u},h.distance=function(t){return arguments.length?(s="function"==typeof t?t:Kf(+t),d(),h):s},h}().id(function(t){return t.id}).distance(r.linkDistance).strength(r.linkStrength),a=function(){var t,e,n,r,i=Kf(-30),o=1,a=1/0,u=.81;function s(r){var i,o=t.length,a=rd(t,yd,md).visitAfter(h);for(n=r,i=0;i<o;++i)e=t[i],a.visit(l)}function c(){if(t){var e,n,o=t.length;for(r=new Array(o),e=0;e<o;++e)n=t[e],r[n.index]=+i(n,e,t)}}function h(t){var e,n,i,o,a,u=0;if(t.length){for(i=o=a=0;a<4;++a)(e=t[a])&&(n=e.value)&&(u+=n,i+=n*e.x,o+=n*e.y);t.x=i/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{u+=r[e.data.index]}while(e=e.next)}t.value=u}function l(t,i,s,c){if(!t.value)return!0;var h=t.x-e.x,l=t.y-e.y,f=c-i,d=h*h+l*l;if(f*f/u<d)return d<a&&(0===h&&(d+=(h=Zf())*h),0===l&&(d+=(l=Zf())*l),d<o&&(d=Math.sqrt(o*d)),e.vx+=h*t.value*n/d,e.vy+=l*t.value*n/d),!0;if(!(t.length||d>=a)){(t.data!==e||t.next)&&(0===h&&(d+=(h=Zf())*h),0===l&&(d+=(l=Zf())*l),d<o&&(d=Math.sqrt(o*d)));do{t.data!==e&&(f=r[t.data.index]*n/d,e.vx+=h*f,e.vy+=l*f)}while(t=t.next)}}return s.initialize=function(e){t=e,c()},s.strength=function(t){return arguments.length?(i="function"==typeof t?t:Kf(+t),c(),s):i},s.distanceMin=function(t){return arguments.length?(o=t*t,s):Math.sqrt(o)},s.distanceMax=function(t){return arguments.length?(a=t*t,s):Math.sqrt(a)},s.theta=function(t){return arguments.length?(u=t*t,s):Math.sqrt(u)},s}().strength(function(t){var e=t.value.getBBox();return r.charge*Math.max(e.width,e.height)});if(this.force=function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,u=sd(),s=ne(h),c=L("tick","end");function h(){l(),c.call("tick",e),n<r&&(s.stop(),c.call("end",e))}function l(){var e,r,s=t.length;for(n+=(o-n)*i,u.each(function(t){t(n)}),e=0;e<s;++e)null==(r=t[e]).fx?r.x+=r.vx*=a:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=a:(r.y=r.fy,r.vy=0)}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,isNaN(e.x)||isNaN(e.y)){var i=xd*Math.sqrt(n),o=n*wd;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:l,restart:function(){return s.restart(h),e},stop:function(){return s.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),u.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(a=1-t,e):1-a},force:function(t,n){return arguments.length>1?(null==n?u.remove(t):u.set(t,d(n)),e):u.get(t)},find:function(e,n,r){var i,o,a,u,s,c=0,h=t.length;for(null==r?r=1/0:r*=r,c=0;c<h;++c)(a=(i=e-(u=t[c]).x)*i+(o=n-u.y)*o)<r&&(s=u,r=a);return s},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}().force("link",o).force("charge",a).force("center",function(t,e){var n;function r(){var r,i,o=n.length,a=0,u=0;for(r=0;r<o;++r)a+=(i=n[r]).x,u+=i.y;for(a=a/o-t,u=u/o-e,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=u}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r}(e/2,n/2)).velocityDecay(r.oneShot?.1:r.friction).nodes(this.vertices),o.links(this.edges),r.oneShot){this.force.restart();var u=t.nodeCount();u=Math.min(u*u,500);for(var s=0;s<u;++s)this.force.tick();this.force.stop()}}function kd(t,e,n,r){var i=new $f.Graph({multigraph:!0,compound:!0}).setGraph(r).setDefaultNodeLabel(function(){return{}}).setDefaultEdgeLabel(function(){return{}});t.eachNode(function(e){var n=t.node(e).getBBox();i.setNode(e,{width:n.width,height:n.height})}),t.eachEdge(function(e,n,o){var a=t.edge(e);i.setEdge(n,o,{weight:a.weight()},a._id),r.digraph||i.setEdge(o,n,{weight:a.weight()},a._id)}),t.eachNode(function(e){i.setParent(e,t.parent(e))}),this.dagreLayout=Yf(i,{debugTiming:!1});var o=-i.graph().width/2,a=-i.graph().height/2;i.nodes().forEach(function(t){var r=i.node(t);r.x+=o+e/2,r.y+=a+n/2}),i.edges().forEach(function(t){for(var r=i.edge(t),u=0;u<r.points.length;++u)r.points[u].x+=o+e/2,r.points[u].y+=a+n/2}),this.digraph=i}bd.prototype.nodePos=function(t){return this.pos[t]},bd.prototype.edgePoints=function(t){return[]},Ed.prototype.nodePos=function(t){return this.vertexMap[t]},Ed.prototype.edgePoints=function(t){return[]},kd.prototype.nodePos=function(t){return this.digraph.node(t)},kd.prototype.edgePoints=function(t){return this.digraph.edge(t._sourceVertex.id(),t._targetVertex.id(),t._id).points};P(".graph_Subgraph .border{fill:none;stroke:#1f77b4;stroke-width:1px;pointer-events:none}.graph_Subgraph.selected>rect{stroke:red!important}");var Nd=14,Md=18,jd=function(t){function n(){var n=t.call(this)||this;return n._textWidget=(new e.Text).anchor("start").fontSize(Nd),n._buttonMin=(new e.Icon).diameter(Md).shape_colorStroke("#1f77b4").shape_colorFill("#dcf1ff").image_colorFill("#1f77b4").on("click",function(){n.minClick()},!0).on("dblclick",function(){},!0),n._minState="normal",n}return i(n,t),n.prototype.minState=function(t){return arguments.length?(this._minState=t,this):this._minState},n.prototype.calcIcon=function(){switch(this._minState){case"normal":return"";case"partial":return""}},n.prototype.getBBox=function(t,e){var n=this.width(),r=this.height();return{x:-n/2,y:-r/2-Nd,width:n,height:r}},n.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._border=n.append("rect").attr("class","border"),this._textWidget.target(e),this._buttonMin.target(e)},n.prototype.update=function(n,r){t.prototype.update.call(this,n,r);var i=this.getBBox();this._border.attr("x",i.x).attr("y",i.y).attr("width",i.width).attr("height",i.height).style("fill",this.border_colorFill()).style("stroke",this.border_colorStroke()),this.border_colorFill_exists()&&!this.title_colorFill_exists()&&this.title_colorFill(e.Palette.textColor(this.border_colorFill())),this._textWidget.pos({x:i.x+4,y:i.y+Nd}).width(this.width()-8).text(this.showTitle()?this.title():"").render(),this._buttonMin.visible(this.showMinMax()).pos({x:i.x+i.width-(Md/2+4),y:i.y+(Md/2+4)}).faChar(this.calcIcon()).render()},n.prototype.exit=function(e,n){this._buttonMin.target(null),this._textWidget.target(null),this._border.remove(),t.prototype.exit.call(this,e,n)},n.prototype.intersection=function(t,e){var n=null;return[].forEach(function(t){(null===n||n.d>t.d)&&(n=t)}),n&&n.i?n.i:null},n.prototype.click=function(t){console.log("Clicked: "+t.id)},n.prototype.minClick=function(){switch(this._minState){case"normal":this._minState="partial";break;case"partial":this._minState="normal"}this._buttonMin.faChar(this.calcIcon()).render()},n}(e.SVGWidget);jd.prototype._class+=" graph_Subgraph",jd.prototype.publish("border_colorStroke",null,"html-color","Stroke Color",null,{optional:!0}),jd.prototype.publish("border_colorFill",null,"html-color","Fill Color",null,{optional:!0}),jd.prototype.publish("showTitle",!0,"boolean","Show Title",null,{tags:["Basic"]}),jd.prototype.publish("title","","string","Title",null,{tags:["Basic"]}),jd.prototype.publishProxy("titleFontSize","_textWidget","fontSize"),jd.prototype.publishProxy("title_colorFill","_textWidget","colorFill"),jd.prototype.publish("showMinMax",!1,"boolean","Show Min/Max",null,{tags:["Basic"]});P(".graph_Vertex.selected .common_Shape{stroke:red!important}");var Sd=function(t){function n(){var n=t.call(this)||this;return n._icon=new e.Icon,n._textBox=new e.TextBox,n._annotationWidgets={},n.pos({x:void 0,y:void 0}),n}return i(n,t),n.prototype.getIconBBox=function(){var t=this._icon.getBBox(!0),e=this._textBox.getBBox(!0);switch(this.iconAnchor()){case"start":return{x:-e.width/2+t.width/3,y:-e.height/2-t.height/3,width:t.width,height:t.height};case"middle":return{x:0,y:-e.height/2-t.height/3,width:t.width,height:t.height};case"end":return{x:e.width/2-t.width/3,y:-e.height/2-t.height/3,width:t.width,height:t.height};case"left":return{x:-e.width/2-t.width/2,y:0,width:t.width,height:t.height}}return{x:0,y:0,width:t.width,height:t.height}},n.prototype.getBBox=function(t,e){var n=this.getIconBBox(),r=this._textBox.getBBox(!0),i=Math.min(n.x,r.x),o=Math.min(n.y,r.y);return{x:i,y:o,width:Math.max(n.x+n.width,r.x+r.width)-i,height:Math.max(n.y+n.height,r.y+r.height)-o}},n.prototype.enter=function(e,n){var r=this;t.prototype.enter.call(this,e,n),delete this._prevHash,this._icon.target(e),this._textBox.target(e),n.on("mouseover",function(t){return r.mouseover(t.data())}).on("mouseout",function(t){return r.mouseout(t.data())})},n.prototype.update=function(n,r){t.prototype.update.call(this,n,r);var i=this.hashSum();if(this._prevHash!==i){this._prevHash=i,r.classed("centroid",this.centroid()),r.style("filter",this.centroid()?"url(#"+this._graphID+"_glow)":null),this._icon.tooltip(this.iconTooltip()?this.iconTooltip():this.tooltip()).render(),this._textBox.tooltip(this.tooltip()).render();var o=this.getIconBBox();this._icon.move(o);var a=this,u=r.selectAll(".annotation").data(this.annotationIcons()),s=u.enter().append("g").attr("class","annotation").each(function(t,n){a._annotationWidgets[n]=(new e.Icon).target(this).shape("square")}),c=this._textBox.getBBox(!0),h=c.width/2,l=c.height/2;s.merge(u).each(function(t,e){var n=a._annotationWidgets[e];for(var r in n.diameter(a.annotationDiameter()).shape_colorFill(a.textbox_shape_colorFill()).shape_colorStroke(a.textbox_shape_colorStroke()),t)n[r]?n[r](t[r]):window.__hpcc_debug&&console.log("Invalid annotation property:  "+r);n.render();var i=n.getBBox(!0);n.move({x:h-i.width/2+4,y:l+i.height/2-4}),h-=i.width+a.annotationSpacing()}),u.exit().each(function(t,e){var n=St(this);a._annotationWidgets[e].target(null),delete a._annotationWidgets[e],n.remove()})}},n.prototype.exit=function(e,n){for(var r in this._annotationWidgets)this._annotationWidgets[r].target(null);this._icon.target(null),this._textBox.target(null),t.prototype.exit.call(this,e,n)},n.prototype.contains=function(t){return this._icon.contains(t)||this._textBox.contains(t)},n.prototype.intersection=function(t,e){var n=this._icon.intersection(t,e),r=this._textBox.intersection(t,e);return n&&r?this.distance(n,e)<this.distance(r,e)?n:r:n||r},n.prototype.mouseover=function(t){},n.prototype.mouseout=function(t){},n}(e.SVGWidget);Sd.prototype._class+=" graph_Vertex",Sd.prototype.publishProxy("faChar","_icon"),Sd.prototype.publishProxy("imageUrl","_icon"),Sd.prototype.publishProxy("icon_diameter","_icon","diameter"),Sd.prototype.publishProxy("icon_paddingPercent","_icon","paddingPercent"),Sd.prototype.publishProxy("icon_shape_colorFill","_icon","shape_colorFill"),Sd.prototype.publishProxy("icon_shape_colorStroke","_icon","shape_colorStroke"),Sd.prototype.publishProxy("icon_image_colorFill","_icon","image_colorFill"),Sd.prototype.publish("centroid",!1,"boolean","Centroid Vertex"),Sd.prototype.publishProxy("text","_textBox"),Sd.prototype.publishProxy("anchor","_textBox"),Sd.prototype.publishProxy("textbox_shape_colorStroke","_textBox","shape_colorStroke"),Sd.prototype.publishProxy("textbox_shape_colorFill","_textBox","shape_colorFill"),Sd.prototype.publishProxy("textbox_text_colorFill","_textBox","text_colorFill"),Sd.prototype.publish("iconAnchor","start","set","Horizontal anchor position of icon",["","start","middle","end","left"],{tags:["Basic"]}),Sd.prototype.publish("iconTooltip","","string","iconTooltip",null,{tags:["Private"]}),Sd.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),Sd.prototype.publish("annotationDiameter",14,"number","Annotation Diameter",null,{tags:["Private"]}),Sd.prototype.publish("annotationSpacing",3,"number","Annotation Spacing",null,{tags:["Private"]}),Sd.prototype.publish("annotationIcons",[],"array","Annotations",null,{tags:["Private"]});P(".graph_Graph .marker{fill:#656565;stroke:none;stroke-width:1px}.graph_Graph .zoom{fill:none;pointer-events:all}.graph_Graph .selectionBrush{fill:none;stroke:#a9a9a9}.graph_Graph .graphEdge.shortest-path .graph_Edge{stroke:red}");var Dd=function(t){function r(){var r=t.call(this)||this;r._toggleHierarchy=(new e.ToggleButton).faChar("fa-sitemap").tooltip("Hierarchy").on("click",function(){return r.layoutClick("Hierarchy")}),r._toggleForceDirected=(new e.ToggleButton).faChar("fa-expand").tooltip("Force Directed").on("click",function(){return r.layoutClick("ForceDirected")}),r._toggleForceDirected2=(new e.ToggleButton).faChar("fa-arrows").tooltip("Spring").on("click",function(){return r.layoutClick("ForceDirected2")}),r._toggleCircle=(new e.ToggleButton).faChar("fa-circle-o").tooltip("Circle").on("click",function(){return r.layoutClick("Circle")}),r._dataHash=0,r._neighborOffsets=[],n.IGraph.call(r),n.ITooltip.call(r),r.tooltipHTML(function(t){var e;return t instanceof jd?e=t.title().replace("\n","<br>"):(t instanceof Sd||t instanceof I)&&(e=t.text().replace("\n","<br>")),e?'<p style="text-align:center">'+e+"</p>":null}),r._drawStartPos="origin";var i=[r._toggleHierarchy,r._toggleForceDirected,r._toggleForceDirected2,r._toggleCircle,new e.Spacer];return r._iconBar.buttons(i.concat(r._iconBar.buttons())),r._graphData=new Jf,r.highlight={zoom:1.1,opacity:.33,edge:"1.25px"},r._selection=new e.Utility.Selection(r),r.zoomToFitLimit(1),r}return i(r,t),r.prototype.iconBarButtons=function(){return this._iconBar.buttons()},r.prototype.layoutClick=function(t){var e=this;this.layout(t),"ForceDirected2"!==t&&this.applyScaleOnLayout(!0),this.layout(t).render(function(t){e.applyScaleOnLayout(!1)})},r.prototype.getOffsetPos=function(){return{x:0,y:0}},r.prototype.size=function(e){return t.prototype.size.apply(this,arguments)},r.prototype.clear=function(){this.data({subgraphs:[],vertices:[],edges:[],hierarchy:[]},!1)},r.prototype.data=function(e,n){var r=t.prototype.data.apply(this,arguments);if(arguments.length){n||(this._graphData=new Jf,this._renderCount=0);var i=this._graphData.setData(e.subgraphs||[],e.vertices||[],e.edges||[],e.hierarchy||[],n||!1);i.addedVertices.length&&this._dataHash++;var o=this;i.addedVertices.forEach(function(t){t._graphID=o._id}),i.addedEdges.forEach(function(t){t._graphID=o._id});var a={};this._graphData.edges().forEach(function(t){a[t._sourceVertex._id]||(a[t._sourceVertex._id]={}),a[t._sourceVertex._id][t._targetVertex._id]||(a[t._sourceVertex._id][t._targetVertex._id]=0);var e=++a[t._sourceVertex._id][t._targetVertex._id];t.arcDepth(16*e)})}return r},r.prototype.graphData=function(){return this._graphData},r.prototype.selection=function(t){return arguments.length?(this._selection.set(t),this):this._selection.get()},r.prototype.linkcolor_default=function(t){return arguments.length?(this._linkcolor=t,this):this._linkcolor},r.prototype.linktooltip_default=function(t){return arguments.length?(this._linktooltip=t,this):this._linktooltip},r.prototype.dragstart=function(t){var n=this;if(this.allowDragging()){if(yt.sourceEvent.stopPropagation(),t.__drag_dx=yt.x-t.x(),t.__drag_dy=yt.y-t.y(),this._dragging=!0,this.forceLayout){yt.active||this.forceLayout.force.alphaTarget(.3).restart();var r=this.forceLayout.vertexMap[t.id()];r.fixed=!0,r.fx=r.x,r.fy=r.y}this._neighborOffsets=[],this.dragSingleNeighbors()&&(this._neighborOffsets=this._graphData.singleNeighbors(t.id()).map(function(e){return St(e.target()).raise(),{neighbor:e,offsetX:t.x()-e.x(),offsetY:t.y()-e.y()}}));for(var i=t.target(),o=i.nextSibling;o;)i.parentNode.insertBefore(o,i),o=i.nextSibling;e.Platform.svgMarkerGlitch&&this._graphData.nodeEdges(t.id()).forEach(function(t){var e=n._graphData.edge(t);n._pushMarkers(e.element())})}},r.prototype.dragging=function(t){var e=this;if(this.allowDragging()){if(yt.sourceEvent.stopPropagation(),t.move({x:yt.x-t.__drag_dx,y:yt.y-t.__drag_dy}),this.forceLayout){var n=this.forceLayout.vertexMap[t.id()];n.fixed=!0,n.fx=yt.x-t.__drag_dx,n.fy=yt.y-t.__drag_dy}this._neighborOffsets.forEach(function(n){var r=yt.x-t.__drag_dx-n.offsetX,i=yt.y-t.__drag_dy-n.offsetY;if(e.forceLayout){var o=e.forceLayout.vertexMap[n.neighbor.id()];o.fixed=!0,o.fx=r,o.fy=i}n.neighbor.move({x:r,y:i})}),this.refreshIncidentEdges(t,!0)}},r.prototype.dragend=function(t){var n=this;if(this.allowDragging()){if(yt.sourceEvent.stopPropagation(),this._dragging=!1,this.snapToGrid()){var r=t.calcSnap(this.snapToGrid());t.move(r[0]),this.refreshIncidentEdges(t,!0)}if(this.forceLayout){var i=this.forceLayout.vertexMap[t.id()];i.fixed=!1,i.fx=null,i.fy=null,this._neighborOffsets.forEach(function(t){var e=n.forceLayout.vertexMap[t.neighbor.id()];e.fixed=!1,e.fx=null,e.fy=null})}this._neighborOffsets=[],e.Platform.svgMarkerGlitch&&this._graphData.nodeEdges(t.id()).forEach(function(t){var e=this._graphData.edge(t);this._popMarkers(e.element())})}},r.prototype.enter=function(n,r){var i=this;t.prototype.enter.call(this,n,r),this._zoomGrab.on("click.clear",function(){i.selectionClearOnBackgroundClick()&&i._selection.clear()}),this._d3Drag=Rt().on("start",function(t){return i.dragstart(t)}).on("end",function(t){return i.dragend(t)}).on("drag",function(t){return i.dragging(t)}),this.defs=this._renderElement.append("defs"),this.addMarkers(),this._centroidFilter=new e.SVGGlowFilter(this.defs,this._id+"_glow"),this.svg=this._renderElement.append("svg:g"),this.svgC=this.svg.append("g").attr("id",this._id+"C"),this.svgE=this.svg.append("g").attr("id",this._id+"E"),this.svgV=this.svg.append("g").attr("id",this._id+"V")},r.prototype.getBounds=function(t,e){var n=[[null,null],[null,null]];return t.forEach(function(t){var r=e?e.nodePos(t._id):{x:t.x(),y:t.y(),width:t.width(),height:t.height()},i=r.x-r.width/2,o=r.x+r.width/2,a=r.y-r.height/2,u=r.y+r.height/2;(null===n[0][0]||n[0][0]>i)&&(n[0][0]=i),(null===n[0][1]||n[0][1]>a)&&(n[0][1]=a),(null===n[1][0]||n[1][0]<o)&&(n[1][0]=o),(null===n[1][1]||n[1][1]<u)&&(n[1][1]=u)}),n},r.prototype.getVertexBounds=function(t){return this.getBounds(this._graphData.nodes(),t)},r.prototype.getSelectionBounds=function(t){return this.getBounds(this._selection.get(),t)},r.prototype.centerOn=function(t,e){var n=[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2];this.zoomTo(n,1,e)},r.prototype.centerOnItem=function(t){var e=t.getBBox(!0),n=e.x+e.width/2,r=e.y+e.height/2,i={x:t.x()+n-e.width/2,y:t.y()+r-e.height/2,width:e.width,height:e.height};this.centerOnBBox(i)},r.prototype.zoomToItem=function(t){var e=t.getBBox(!0),n=e.x+e.width/2,r=e.y+e.height/2,i={x:t.x()+n-e.width/2,y:t.y()+r-e.height/2,width:e.width,height:e.height};this.zoomToBBox(i)},r.prototype.updateVertices=function(t,e,n){var r=this.width(),i=this.height(),o=this,a=t.selectAll("#"+this._id+e+" > .graphVertex").data(n,function(t){return t.id()});a.enter().append("g").attr("class","graphVertex").style("opacity",1e-6).on("click.selectionBag",function(t){o._selection.click(t,yt),o.selectionChanged()}).on("click",function(t){var e=St(this).select(".graph_Vertex"),n=!1;e.empty()||(n=e.classed("selected")),o.vertex_click(o.rowToObj(t.data()),"",n,{vertex:t})}).on("dblclick",function(t){var e=St(this).select(".graph_Vertex"),n=!1;e.empty()||(n=e.classed("selected")),o.vertex_dblclick(o.rowToObj(t.data()),"",n,{vertex:t})}).on("contextmenu",function(t){var e=St(this).select(".graph_Vertex"),n=!1;e.empty()||(n=e.classed("selected")),o.vertex_contextmenu(o.rowToObj(t.data()),"",n,{vertex:t})}).on("mouseout.tooltip",this.tooltip.hide).on("mousemove.tooltip",this.tooltip.show).on("mouseover",function(t){o._dragging||o.vertex_mouseover(St(this),t)}).on("mouseout",function(t){o._dragging||o.vertex_mouseout(St(this),t)}).each(function(t){St(this).style("cursor",o.allowDragging()?"move":"pointer"),t.target(this).pos({x:t.x()||r/2,y:t.y()||i/2}).animationFrameRender(),o.allowDragging()&&St(this).call(o._d3Drag);t.dispatch&&(t.dispatch.on("sizestart",function(t){t.allowResize(o.allowDragging()),o.allowDragging()&&(o._dragging=!0)}),t.dispatch.on("size",function(t){o.refreshIncidentEdges(t,!1)}),t.dispatch.on("sizeend",function(t){if(o._dragging=!1,o.snapToGrid()){var e=t.calcSnap(o.snapToGrid());t.pos(e[0]).size(e[1]).render(),o.refreshIncidentEdges(t,!1)}}))}).transition().duration(750).style("opacity",1),a.each(function(t){t.animationFrameRender()}),a.exit().each(function(t){t.target(null)}).remove(),a.order()},r.prototype.update=function(e,n){var r=this;t.prototype.update.call(this,e,n),this.tooltip.hide(),this._centroidFilter.update(this.centroidColor());var i=this.layout();this._toggleHierarchy.selected("Hierarchy"===i).render(),this._toggleForceDirected.selected("ForceDirected"===i).render(),this._toggleForceDirected2.selected("ForceDirected2"===i).render(),this._toggleCircle.selected("Circle"===i).render();var o=this;this.updateVertices(this.svgC,"C",this._graphData.nodes().filter(function(t){return"Hierarchy"===r.layout()&&t instanceof jd})),this.updateVertices(this.svgV,"V",this._graphData.nodes().filter(function(t){return!(t instanceof jd)}));var a=this.svgE.selectAll("#"+this._id+"E > .graphEdge").data(this.showEdges()?this._graphData.edges():[],function(t){return t.id()});a.enter().append("g").attr("class","graphEdge").style("opacity",1e-6).on("click.selectionBag",function(t){o._selection.click(t,yt)}).on("click",function(t){var e=St(this).select(".graph_Edge"),n=!1;e.empty()||(n=e.classed("selected")),o.edge_click(o.rowToObj(t.data()),"",n,{edge:t})}).on("dblclick",function(t){var e=St(this).select(".graph_Edge"),n=!1;e.empty()||(n=e.classed("selected")),o.edge_dblclick(o.rowToObj(t.data()),"",n,{edge:t})}).on("mouseout.tooltip",this.tooltip.hide).on("mousemove.tooltip",this.tooltip.show).on("mouseover",function(t){o._dragging||o.edge_mouseover(St(this),t)}).on("mouseout",function(t){o._dragging||o.edge_mouseout(St(this),t)}).each(function(t){t.target(this).animationFrameRender()}).transition().duration(750).style("opacity",1),a.each(function(t){t.animationFrameRender()}),a.exit().each(function(t){t.target(null)}).remove(),this._renderCount||(this._renderCount++,this.layout(this.layout()))},r.prototype.exit=function(e,n){this._graphData.nodes().forEach(function(t){return t.target(null)}),this._graphData.edges().forEach(function(t){return t.target(null)}),t.prototype.exit.call(this,e,n)},r.prototype.render=function(e){var n=this;return this.progress("start"),t.prototype.render.call(this,function(t){n.doLayout().then(function(){n.progress("end"),e&&e(t)})}),this},r.prototype.doLayout=function(t){var e=this;return void 0===t&&(t=0),new Promise(function(n,r){requestAnimationFrame(function(){e._prevLayout!==e.layout()||e._prevDataHash!==e._dataHash?(e._prevLayout=e.layout(),e._prevDataHash=e._dataHash,e._doLayout(t).then(function(){n()})):n()})})},r.prototype._doLayout=function(t){var e=this;return void 0===t&&(t=0),new Promise(function(n,i){e.progress("layout-start"),e.forceLayout&&(e.forceLayout.force.stop(),e.forceLayout=null);var o=e,a=e.getLayoutEngine();"ForceDirected2"===e.layout()?(e.forceLayout=a,e.forceLayout.force.on("tick",function(){o.progress("layout-tick"),a.vertices.forEach(function(t){if(t.fixed);else{var e=o._graphData.node(t.id);e&&e.move({x:t.x,y:t.y})}}),o._graphData.edges().forEach(function(t){t.points([],!1,!1)}),o.applyScaleOnLayout()}).on("end",function(){o.progress("layout-end")}),e.forceLayout.force.restart(),n()):a&&(e.forceLayout=null,o._dragging=!0,o._graphData.nodes().forEach(function(t){var e=a.nodePos(t._id);t instanceof r.Subgraph?t.pos({x:e.x,y:e.y}).size({width:e.width,height:e.height}).animationFrameRender():t.move({x:e.x,y:e.y},0)}),o._graphData.edges().forEach(function(e){var n=a.edgePoints(e);e.points(n,t)}),o.applyScaleOnLayout()&&requestAnimationFrame(function(){o.zoomToFit(),n()}),e._fixIEMarkers(),setTimeout(function(){o._dragging=!1},t?t+50:50),e.progress("layout-end"),o.applyScaleOnLayout()||n())})},r.prototype.getLayoutEngine=function(){switch(this.layout()){case"Circle":return new bd(this._graphData,this._size.width,this._size.height);case"ForceDirected":return new Ed(this._graphData,this._size.width,this._size.height,{oneShot:!0,linkDistance:this.forceDirectedLinkDistance(),linkStrength:this.forceDirectedLinkStrength(),friction:this.forceDirectedFriction(),charge:this.forceDirectedCharge(),chargeDistance:this.forceDirectedChargeDistance(),theta:this.forceDirectedTheta(),gravity:this.forceDirectedGravity()});case"ForceDirected2":return new Ed(this._graphData,this._size.width,this._size.height,{linkDistance:this.forceDirectedLinkDistance(),linkStrength:this.forceDirectedLinkStrength(),friction:this.forceDirectedFriction(),charge:this.forceDirectedCharge(),chargeDistance:this.forceDirectedChargeDistance(),theta:this.forceDirectedTheta(),gravity:this.forceDirectedGravity()});case"Hierarchy":return new kd(this._graphData,this._size.width,this._size.height,{rankdir:this.hierarchyRankDirection(),nodesep:this.hierarchyNodeSeparation(),edgesep:this.hierarchyEdgeSeparation(),ranksep:this.hierarchyRankSeparation(),digraph:this.hierarchyDigraph()})}return null},r.prototype.getNeighborMap=function(t){var e={},n={};if(t)for(var r=this._graphData.nodeEdges(t.id()),i=0;i<r.length;++i){var o=this._graphData.edge(r[i]);n[o.id()]=o,o._sourceVertex.id()!==t.id()&&(e[o._sourceVertex.id()]=o._sourceVertex),o._targetVertex.id()!==t.id()&&(e[o._targetVertex.id()]=o._targetVertex)}return{vertices:e,edges:n}},r.prototype.highlightVerticies=function(t){var e=this,n=this;return this.svgV.selectAll(".graphVertex").classed("graphVertex-highlighted",function(e){return!t||t[e.id()]}).style("filter",function(n){return t&&t[n.id()]?"url(#"+e.id()+"_glow)":null}).transition().duration(this.transitionDuration()).on("end",function(e){t&&t[e.id()]&&e._placeholderElement.node()&&e._placeholderElement.node().parentNode&&e._placeholderElement.node().parentNode.appendChild(e._placeholderElement.node())}).style("opacity",function(e){return!t||t[e.id()]?1:n.highlight.opacity}),this},r.prototype.highlightEdges=function(t){var e=this;return this.svgE.selectAll(".graphEdge").classed("graphEdge-highlighted",function(e){return!t||t[e.id()]}).style("stroke-width",function(n){return t&&t[n.id()]?e.highlight.edge:"1px"}).transition().duration(this.transitionDuration()).style("opacity",function(n){return!t||t[n.id()]?1:e.highlight.opacity}),this},r.prototype.highlightVertex=function(t,e){if(this.highlightOnMouseOverVertex())if(e){var n=this.getNeighborMap(e);n.vertices[e.id()]=e,this.highlightVerticies(n.vertices),this.highlightEdges(n.edges)}else this.highlightVerticies(null),this.highlightEdges(null)},r.prototype.highlightEdge=function(t,e){if(this.highlightOnMouseOverEdge())if(e){var n={};n[e._sourceVertex.id()]=e._sourceVertex,n[e._targetVertex.id()]=e._targetVertex;var r={};r[e.id()]=e,this.highlightVerticies(n),this.highlightEdges(r)}else this.highlightVerticies(null),this.highlightEdges(null)},r.prototype.refreshIncidentEdges=function(t,e){var n=this;this._graphData.nodeEdges(t.id()).forEach(function(t){n._graphData.edge(t).points([],!1,e)})},r.prototype.centroids=function(){return this._graphData.nodes().filter(function(t){return t.centroid()})},r.prototype.selectionChanged=function(){var t=this;if(this.highlightSelectedPathToCentroid()){var e={};this.centroids().forEach(function(n){t.selection().forEach(function(r){t._graphData.undirectedShortestPath(n.id(),r.id()).forEach(function(t){e[t.id()]=!0})})}),this.svgE.selectAll(".graphEdge").classed("shortest-path",function(t){return!0===e[t.id()]})}},r.prototype.vertex_click=function(t,e,r,i){i&&i.vertex&&i.vertex._placeholderElement.node().parentNode.appendChild(i.vertex._placeholderElement.node()),n.IGraph.prototype.vertex_click.apply(this,arguments)},r.prototype.vertex_dblclick=function(t,e,n,r){},r.prototype.vertex_contextmenu=function(t,e,n,r){},r.prototype.vertex_mouseover=function(t,e){this.highlightVertex(t,e)},r.prototype.vertex_mouseout=function(t,e){this.highlightVertex(null,null)},r.prototype.edge_mouseover=function(t,e){this.highlightEdge(t,e)},r.prototype.edge_mouseout=function(t,e){this.highlightEdge(null,null)},r.prototype.addMarkers=function(t){void 0===t&&(t=!1),t&&(this.defs.select("#"+this._id+"_arrowHead").remove(),this.defs.select("#"+this._id+"_circleFoot").remove(),this.defs.select("#"+this._id+"_circleHead").remove(),this.defs.select("#"+this._id+"_glow").remove()),this.defs.append("marker").attr("class","marker").attr("id",this._id+"_arrowHead").attr("viewBox","0 0 10 10").attr("refX",10).attr("refY",5).attr("markerWidth",8).attr("markerHeight",8).attr("markerUnits","strokeWidth").attr("orient","auto").append("polyline").attr("points","0,0 10,5 0,10 1,5"),this.defs.append("marker").attr("class","marker").attr("id",this._id+"_circleFoot").attr("viewBox","0 0 10 10").attr("refX",1).attr("refY",5).attr("markerWidth",7).attr("markerHeight",7).attr("markerUnits","strokeWidth").attr("orient","auto").append("circle").attr("cx",5).attr("cy",5).attr("r",4),this.defs.append("marker").attr("class","marker").attr("id",this._id+"_circleHead").attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerWidth",7).attr("markerHeight",7).attr("markerUnits","strokeWidth").attr("orient","auto").append("circle").attr("cx",5).attr("cy",5).attr("r",4)},r.prototype.progress=function(t){},r.Subgraph=jd,r.Vertex=Sd,r.Edge=I,r.profileID=0,r}(e.SVGZoomWidget);Dd.prototype._class+=" graph_Graph",Dd.prototype.implements(n.IGraph.prototype),Dd.prototype.implements(n.ITooltip.prototype),Dd.prototype.publish("allowDragging",!0,"boolean","Allow Dragging of Vertices",null,{tags:["Advanced"]}),Dd.prototype.publish("dragSingleNeighbors",!1,"boolean","Dragging a Vertex also moves its singleton neighbors",null,{tags:["Advanced"]}),Dd.prototype.publish("layout","Circle","set","Default Layout",["Circle","ForceDirected","ForceDirected2","Hierarchy","None"],{tags:["Basic"]}),Dd.prototype.publish("scale","100%","set","Zoom Level",["all","width","selection","100%","90%","75%","50%","25%","10%"],{tags:["Basic"]}),Dd.prototype.publish("applyScaleOnLayout",!1,"boolean","Shrink to fit on Layout",null,{tags:["Basic"]}),Dd.prototype.publish("highlightOnMouseOverVertex",!1,"boolean","Highlight Vertex on Mouse Over",null,{tags:["Basic"]}),Dd.prototype.publish("highlightOnMouseOverEdge",!1,"boolean","Highlight Edge on Mouse Over",null,{tags:["Basic"]}),Dd.prototype.publish("transitionDuration",250,"number","Transition Duration",null,{tags:["Intermediate"]}),Dd.prototype.publish("showEdges",!0,"boolean","Show Edges",null,{tags:["Intermediate"]}),Dd.prototype.publish("snapToGrid",0,"number","Snap to Grid",null,{tags:["Private"]}),Dd.prototype.publish("selectionClearOnBackgroundClick",!1,"boolean","Clear selection on background click"),Dd.prototype.publish("centroidColor","#00A000","html-color","Centroid Color",null,{tags:["Basic"]}),Dd.prototype.publish("highlightSelectedPathToCentroid",!1,"boolean","Highlight path to Center Vertex (for selected vertices)",null,{tags:["Basic"]}),Dd.prototype.publish("hierarchyRankDirection","TB","set","Direction for Rank Nodes",["TB","BT","LR","RL"],{tags:["Advanced"]}),Dd.prototype.publish("hierarchyNodeSeparation",50,"number","Number of pixels that separate nodes horizontally in the layout",null,{tags:["Advanced"]}),Dd.prototype.publish("hierarchyEdgeSeparation",10,"number","Number of pixels that separate edges horizontally in the layout",null,{tags:["Advanced"]}),Dd.prototype.publish("hierarchyRankSeparation",50,"number","Number of pixels between each rank in the layout",null,{tags:["Advanced"]}),Dd.prototype.publish("hierarchyDigraph",!0,"boolean","Directional Graph",null,{tags:["Advanced"]}),Dd.prototype.publish("forceDirectedLinkDistance",300,"number","Target distance between linked nodes",null,{tags:["Advanced"]}),Dd.prototype.publish("forceDirectedLinkStrength",1,"number","Strength (rigidity) of links",null,{tags:["Advanced"]}),Dd.prototype.publish("forceDirectedFriction",.9,"number","Friction coefficient",null,{tags:["Advanced"]}),Dd.prototype.publish("forceDirectedCharge",-25,"number","Charge strength ",null,{tags:["Advanced"]}),Dd.prototype.publish("forceDirectedChargeDistance",1e4,"number","Maximum distance over which charge forces are applied",null,{tags:["Advanced"]}),Dd.prototype.publish("forceDirectedTheta",.8,"number","BarnesHut approximation criterion",null,{tags:["Advanced"]}),Dd.prototype.publish("forceDirectedGravity",.1,"number","Gravitational strength",null,{tags:["Advanced"]});var Ad=Dd.prototype.scale;Dd.prototype.scale=function(t,e){var n=Ad.apply(this,arguments);return arguments.length&&this.zoomTo(t,e),n};var Cd=function(t){function e(){var e=t.call(this)||this;return e._vertexMap={},e._edgeMap={},e._adjacencyData=[],e}return i(e,t),e.prototype.data=function(e,n){var r=this;if(!arguments.length)return this._adjacencyData;if(e instanceof Array){var i=JSON.stringify(e);if(this._prevAdjacencyData!==i){var o,a,u;this._prevAdjacencyData=i,this._adjacencyData=e;for(var s=void 0,c=[],h=0,l=0,f=this.columns();l<f.length;l++){var d=f[l];switch(d){case"uid":o=h;break;case"label":a=h;break;case"icon":u=h;break;case"links":s=h;break;default:0===d.indexOf("annotation_")&&c.push(h)}++h}var p=void 0,g={},v={};p={vertices:e.map(function(t){var e=g[t[o]]||r._vertexMap[t[o]];if(!e){for(var n in e=new Sd,t[u])"function"==typeof e[n]&&e[n](t[u][n]);for(var i=[],s=0,h=c;s<h.length;s++){var l=t[h[s]];l.faChar&&(l.faChar=l.faChar,i.push(l))}e.text(t[a]).data(t).annotationIcons(i)}return g[t[o]]=e,e}),edges:[]};for(var _=0,y=e;_<y.length;_++)for(var m=y[_],x=0,w=m[s];x<w.length;x++){var b=w[x],E=m[o]+"->"+b[o],k=v[E]||this._edgeMap[E];k||(g[m[o]]&&g[b[o]]?(k=(new I).sourceVertex(g[m[o]]).targetVertex(g[b[o]]).data(b),v[E]=k):console.log("Missing vertices for edge:  "+E)),k&&p.edges.push(k)}return this._vertexMap=g,this._edgeMap=v,t.prototype.data.call(this,p,n)}return this}throw new Error("Invalid data shape.")},e.prototype.click=function(t,e,n){console.log("click")},e}(Dd);function Od(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Cd.prototype._class+=" graph_AdjacencyGraph";var Pd,Td;1===(Pd=Od).length&&(Td=Pd,Pd=function(t,e){return Od(Td(t),e)});function Id(t){return null===t?NaN:+t}function Bd(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r}function Ld(t,e){var n,r=t.length,i=-1,o=0;if(null==e)for(;++i<r;)(n=+t[i])&&(o+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(o+=n);return o}function Vd(t){return function(){return t}}function Fd(t,e){return t.source.y-e.source.y}function zd(t,e){return t.target.y-e.target.y}function Rd(t,e){return t.y-e.y}function Gd(t){return t.value}function qd(t){return t.y+t.dy/2}function Ud(t){return qd(t.source)*t.value}function Wd(t){return qd(t.target)*t.value}function Hd(t){return t.nodes}function $d(t){return t.links}function Yd(){var t=0,e=0,n=1,r=1,i=24,o=8,a=Hd,u=$d,s=32;function c(){var c={nodes:a.apply(null,arguments),links:u.apply(null,arguments)};return function(t){t.nodes.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),t.links.forEach(function(e){var n=e.source,r=e.target;"number"==typeof n&&(n=e.source=t.nodes[e.source]),"number"==typeof r&&(r=e.target=t.nodes[e.target]),n.sourceLinks.push(e),r.targetLinks.push(e)})}(c),function(t){t.nodes.forEach(function(t){t.value=Math.max(Ld(t.sourceLinks,Gd),Ld(t.targetLinks,Gd))})}(c),function(e){var r,o=e.nodes,a=0;for(;o.length;)r=[],o.forEach(function(t){t.x=a,t.dx=i,t.sourceLinks.forEach(function(t){r.indexOf(t.target)<0&&r.push(t.target)})}),o=r,++a;(function(t,e){t.nodes.forEach(function(t){t.sourceLinks.length||(t.x=e-1)})})(e,a),function(e,n){e.nodes.forEach(function(e){e.x=t+e.x*n})}(e,(n-t-i)/(a-1))}(c),function(t){var n=cd().key(function(t){return t.x}).sortKeys(Od).entries(t.nodes).map(function(t){return t.values});i=Bd(n,function(t){return(r-e-(t.length-1)*o)/Ld(t,Gd)}),n.forEach(function(t){t.forEach(function(t,e){t.y=e,t.dy=t.value*i})}),t.links.forEach(function(t){t.dy=t.value*i}),l();var i;for(var a=1,u=s;u>0;--u)h(a*=.99),l(),c(a),l();function c(t){n.forEach(function(e){e.forEach(function(e){e.targetLinks.length&&(e.y+=(Ld(e.targetLinks,Ud)/Ld(e.targetLinks,Gd)-qd(e))*t)})})}function h(t){n.slice().reverse().forEach(function(e){e.forEach(function(e){e.sourceLinks.length&&(e.y+=(Ld(e.sourceLinks,Wd)/Ld(e.sourceLinks,Gd)-qd(e))*t)})})}function l(){n.forEach(function(t){var n,i,a,u=e,s=t.length;for(t.sort(Rd),a=0;a<s;++a)n=t[a],(i=u-n.y)>0&&(n.y+=i),u=n.y+n.dy+o;if((i=u-o-r)>0)for(u=n.y-=i,a=s-2;a>=0;--a)n=t[a],(i=n.y+n.dy+o-u)>0&&(n.y-=i),u=n.y})}}(c),h(c),c}function h(t){t.nodes.forEach(function(t){t.sourceLinks.sort(zd),t.targetLinks.sort(Fd)}),t.nodes.forEach(function(t){var e=0,n=0;t.sourceLinks.forEach(function(t){t.sy=e,e+=t.dy}),t.targetLinks.forEach(function(t){t.ty=n,n+=t.dy})})}return c.update=function(t){return h(t),t},c.nodeWidth=function(t){return arguments.length?(i=+t,c):i},c.nodePadding=function(t){return arguments.length?(o=+t,c):o},c.nodes=function(t){return arguments.length?(a="function"==typeof t?t:Vd(t),c):a},c.links=function(t){return arguments.length?(u="function"==typeof t?t:Vd(t),c):u},c.size=function(i){return arguments.length?(t=e=0,n=+i[0],r=+i[1],c):[n-t,r-e]},c.extent=function(i){return arguments.length?(t=+i[0][0],n=+i[1][0],e=+i[0][1],r=+i[1][1],c):[[t,e],[n,r]]},c.iterations=function(t){return arguments.length?(s=+t,c):s},c}function Xd(t){return[t.source.x+t.source.dx,t.source.y+t.sy+t.dy/2]}function Jd(t){return[t.target.x,t.target.y+t.ty+t.dy/2]}P(".graph_Sankey .node rect{cursor:move;fill-opacity:.9;shape-rendering:crispEdges;stroke:#a9a9a9}.graph_Sankey .node.selected rect{stroke:red}.graph_Sankey .node.over rect{stroke:orange}.graph_Sankey .node.selected.over rect{stroke:red}.graph_Sankey .node text{pointer-events:none;text-shadow:0 1px 0 #fff}.graph_Sankey .node.selected text{fill:red}.graph_Sankey .node.over text{fill:orange}.graph_Sankey .node.selected.over text{fill:red}.graph_Sankey .link{fill:none;stroke:#000;stroke-opacity:.2}.graph_Sankey .link:hover{stroke-opacity:.5}");var Kd={mean:function(t,e){var n,r=t.length,i=r,o=-1,a=0;if(null==e)for(;++o<r;)isNaN(n=Id(t[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=Id(e(t[o],o,t)))?--i:a+=n;if(i)return a/i},median:function(t,e){var n,r=t.length,i=-1,o=[];if(null==e)for(;++i<r;)isNaN(n=Id(t[i]))||o.push(n);else for(;++i<r;)isNaN(n=Id(e(t[i],i,t)))||o.push(n);return function(t,e,n){if(null==n&&(n=Id),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}(o.sort(Od),.5)},min:Bd,max:function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&n>r&&(r=n);return r},sum:Ld},Zd=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.owner=function(t){return arguments.length?(this._owner=t,this):this._owner},e.prototype.valid=function(){return!!this.column()},e.prototype.aggregate=function(t){switch(this.aggrType()){case null:case void 0:case"":return t.length;default:var e=this._owner.columns().indexOf(this.aggrColumn());return Kd[this.aggrType()](t,function(t){return+t[e]})}},e}(e.PropertyExt);Zd.prototype._class+=" graph_Sankey.SankeyColumn",Zd.prototype.publish("column",null,"set","Field",function(){return this._owner?this._owner.columns():[]},{optional:!0}),Zd.prototype.publish("aggrType",null,"set","Aggregation Type",[null,"mean","median","sum","min","max"],{optional:!0,disable:function(t){return!t._owner||0===t._owner.mappings().indexOf(t)}}),Zd.prototype.publish("aggrColumn",null,"set","Aggregation Field",function(){return this._owner?this._owner.columns():[]},{optional:!0,disable:function(t){return!t._owner||!t.aggrType()||0===t._owner.mappings().indexOf(t)}});var Qd=function(t){function n(){var n=t.call(this)||this;return e.Utility.SimpleSelectionMixin.call(n),n._drawStartPos="origin",n}return i(n,t),n.prototype.sankeyData=function(){var t={vertices:[],edges:[]};if(0===this.data().length)return t;var e={},n=this.mappings().filter(function(t){return t.valid()});return n.forEach(function(n,r){this._db.rollupView([n.column()]).entries().forEach(function(i){var o=n.column()+":"+r+":"+i.key;e[o]||(t.vertices.push({__id:o,__category:n.column(),name:i.key,origRow:i.values}),e[o]=t.vertices.length-1)},this)},this),n.forEach(function(r,i){if(i<n.length-1){var o=n[i+1];this._db.rollupView([r.column(),o.column()]).entries().forEach(function(n){var a=r.column()+":"+i+":"+n.key;n.values.forEach(function(n){var r=o.column()+":"+(i+1)+":"+n.key;t.edges.push({__id:a+"_"+r,source:e[a],target:e[r],value:o.aggregate(n.value)})})})}},this),t},n.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._d3Sankey=new Yd,this._selection.widgetElement(n)},n.prototype.update=function(e,n){t.prototype.update.call(this,e,n),this._palette=this._palette.switch(this.paletteID());var r=this.sankeyData();this._d3Sankey.extent([[0,0],[this.width(),this.height()]]).nodeWidth(this.vertexWidth()).nodePadding(this.vertexPadding()),this._d3Sankey({nodes:r.vertices,links:r.edges});var i=this,o=n.selectAll(".link").data(r.edges);o.enter().append("path").attr("class","link").each(function(){St(this).append("title")}).merge(o).attr("d",x().source(Xd).target(Jd)).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,e){return e.dy-t.dy}).select("title").text(function(t){return t.source.name+"  "+t.target.name+"\n"+t.value}),o.exit().remove();var a=n.selectAll(".node").data(r.vertices);a.enter().append("g").attr("class","node").call(this._selection.enter.bind(this._selection)).on("click",function(t){i.click(i.rowToObj(t.origRow[0]),"",i._selection.selected(this))}).on("dblclick",function(t){i.dblclick(i.rowToObj(t.origRow[0]),"",i._selection.selected(this))}).each(function(){var t=St(this);t.append("rect"),t.append("text")}).merge(a).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).each(function(){var t=St(this);t.select("rect").attr("height",function(t){return t.dy}).attr("width",i._d3Sankey.nodeWidth()).style("fill",function(t){return i._palette(t.name)}).style("cursor",i.xAxisMovement()||i.yAxisMovement()?null:"default"),t.select("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(t){return t.name}).filter(function(t){return t.x<i.width()/2}).attr("x",6+i._d3Sankey.nodeWidth()).attr("text-anchor","start")}),a.exit().remove()},n.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},n.prototype.click=function(t,e,n){console.log("Click:  "+JSON.stringify(t)+", "+e+","+n)},n.prototype.dblclick=function(t,e,n){console.log("Double Click:  "+JSON.stringify(t)+", "+e+","+n)},n}(e.SVGWidget);Qd.prototype._class+=" graph_Sankey",Qd.prototype.Column=Zd,Qd.prototype.mixin(e.Utility.SimpleSelectionMixin),Qd.prototype._palette=e.Palette.ordinal("default"),Qd.prototype.publish("paletteID","default","set","Color palette for this widget",Qd.prototype._palette.switch()),Qd.prototype.publish("mappings",[],"propertyArray","Source Columns",null,{autoExpand:Zd}),Qd.prototype.publish("vertexWidth",36,"number","Vertex Width"),Qd.prototype.publish("vertexPadding",40,"number","Vertex Padding"),Qd.prototype.publish("xAxisMovement",!1,"boolean","Enable x-axis movement"),Qd.prototype.publish("yAxisMovement",!1,"boolean","Enable y-axis movement"),t.AdjacencyGraph=Cd,t.BUILD_VERSION="2.10.1",t.Edge=I,t.Graph=Dd,t.PKG_NAME="@hpcc-js/graph",t.PKG_VERSION="2.10.2",t.Sankey=Qd,t.SankeyColumn=Zd,t.Subgraph=jd,t.Vertex=Sd,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map