{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../node_modules/d3-timer/src/timer.js","../src/Audio.ts","../../../node_modules/javascript-autocomplete/auto-complete.js","../../../node_modules/style-inject/dist/style-inject.es.js","../src/AutoCompleteText.ts","../../../node_modules/d3-array/src/ascending.js","../../../node_modules/d3-array/src/bisect.js","../../../node_modules/d3-array/src/bisector.js","../../../node_modules/d3-array/src/extent.js","../../../node_modules/d3-collection/src/map.js","../../../node_modules/d3-collection/src/set.js","../../../node_modules/d3-format/src/formatDecimal.js","../../../node_modules/d3-format/src/formatSpecifier.js","../../../node_modules/d3-format/src/formatPrefixAuto.js","../../../node_modules/d3-format/src/formatRounded.js","../../../node_modules/d3-format/src/formatTypes.js","../../../node_modules/d3-format/src/identity.js","../../../node_modules/d3-format/src/locale.js","../../../node_modules/d3-format/src/defaultLocale.js","../../../node_modules/d3-format/src/formatGroup.js","../../../node_modules/d3-format/src/formatNumerals.js","../../../node_modules/d3-format/src/formatTrim.js","../../../node_modules/d3-format/src/exponent.js","../../../node_modules/d3-selection/src/namespaces.js","../../../node_modules/d3-selection/src/namespace.js","../../../node_modules/d3-selection/src/creator.js","../../../node_modules/d3-selection/src/selector.js","../../../node_modules/d3-selection/src/selectorAll.js","../../../node_modules/d3-selection/src/selection/sparse.js","../../../node_modules/d3-selection/src/selection/enter.js","../../../node_modules/d3-selection/src/selection/data.js","../../../node_modules/d3-selection/src/selection/sort.js","../../../node_modules/d3-selection/src/window.js","../../../node_modules/d3-selection/src/selection/classed.js","../../../node_modules/d3-selection/src/selection/text.js","../../../node_modules/d3-selection/src/selection/html.js","../../../node_modules/d3-selection/src/selection/raise.js","../../../node_modules/d3-selection/src/selection/lower.js","../../../node_modules/d3-selection/src/selection/insert.js","../../../node_modules/d3-selection/src/selection/remove.js","../../../node_modules/d3-selection/src/selection/clone.js","../../../node_modules/d3-selection/src/selection/on.js","../../../node_modules/d3-selection/src/selection/dispatch.js","../../../node_modules/d3-selection/src/selection/index.js","../../../node_modules/d3-selection/src/select.js","../../../node_modules/d3-selection/src/selection/select.js","../../../node_modules/d3-selection/src/selection/selectAll.js","../../../node_modules/d3-selection/src/selection/filter.js","../../../node_modules/d3-selection/src/matcher.js","../../../node_modules/d3-selection/src/constant.js","../../../node_modules/d3-selection/src/selection/exit.js","../../../node_modules/d3-selection/src/selection/join.js","../../../node_modules/d3-selection/src/selection/merge.js","../../../node_modules/d3-selection/src/selection/order.js","../../../node_modules/d3-selection/src/selection/call.js","../../../node_modules/d3-selection/src/selection/nodes.js","../../../node_modules/d3-selection/src/selection/node.js","../../../node_modules/d3-selection/src/selection/size.js","../../../node_modules/d3-selection/src/selection/empty.js","../../../node_modules/d3-selection/src/selection/each.js","../../../node_modules/d3-selection/src/selection/attr.js","../../../node_modules/d3-selection/src/selection/style.js","../../../node_modules/d3-selection/src/selection/property.js","../../../node_modules/d3-selection/src/selection/append.js","../../../node_modules/d3-selection/src/selection/datum.js","../../../node_modules/d3-selection/src/local.js","../../../node_modules/d3-selection/src/selectAll.js","../../../node_modules/d3-time/src/interval.js","../../../node_modules/d3-time/src/millisecond.js","../../../node_modules/d3-time/src/duration.js","../../../node_modules/d3-time/src/day.js","../../../node_modules/d3-time/src/second.js","../../../node_modules/d3-time/src/minute.js","../../../node_modules/d3-time/src/hour.js","../../../node_modules/d3-time/src/week.js","../../../node_modules/d3-time/src/month.js","../../../node_modules/d3-time/src/year.js","../../../node_modules/d3-time/src/utcMinute.js","../../../node_modules/d3-time/src/utcHour.js","../../../node_modules/d3-time/src/utcDay.js","../../../node_modules/d3-time/src/utcWeek.js","../../../node_modules/d3-time/src/utcYear.js","../../../node_modules/d3-time/src/utcMonth.js","../../../node_modules/d3-time-format/src/locale.js","../../../node_modules/d3-time-format/src/defaultLocale.js","../../../node_modules/d3-time-format/src/isoFormat.js","../../../node_modules/d3-time-format/src/isoParse.js","../src/CalendarHeatMap.ts","../../../node_modules/d3-array/src/range.js","../src/Comms.ts","../src/ESP.ts","../../../node_modules/simpleheat/simpleheat.js","../src/HeatMap.ts","../src/HPCCBadge.ts","../src/Html.ts","../src/IconList.ts","../src/Paginator.ts","../src/Table.ts","../src/Legend.ts","../src/MorphText.ts","../src/NestedTable.ts","../src/Opportunity.ts","../src/Persist.ts","../src/PropertyEditor.ts","../src/RadioCheckbox.ts","../src/Select.ts","../src/ThemeEditor.ts","../src/__package__.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","taskHead","taskTail","frame","timeout","interval","pokeDelay","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","window","requestAnimationFrame","bind","f","setTimeout","clearNow","Timer","_call","_time","_next","timer","callback","delay","time","t","restart","wake","e","call","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","TypeError","stop","Audio","_this","_super","_tag","_sections","tslib_1.__extends","section","label","offset","beatLength","beatCount","arguments","length","endOffset","getType","fileExt","enter","domNode","element","context","on","onPlay","update","selectAll","data","source","append","attr","createTimer","params","startTime","beat","d3Timer","onTick","key","i","play","_element","d2","node","load","HTMLWidget","_class","publish","autoComplete","options","document","querySelector","o","selector","minChars","offsetLeft","offsetTop","cache","menuClass","renderItem","item","search","replace","re","RegExp","split","join","onSelect","term","k","elems","querySelectorAll","that","sc","createElement","className","autocompleteAttr","getAttribute","setAttribute","last_val","updateSC","resize","next","rect","getBoundingClientRect","style","left","Math","round","pageXOffset","documentElement","scrollLeft","top","bottom","pageYOffset","scrollTop","width","right","display","classList","remove","maxHeight","parseInt","getComputedStyle","currentStyle","suggestionHeight","offsetHeight","scrTop","selTop","addEvent","body","appendChild","live","sel","hasClass","v","value","add","blurHandler","over_sb","activeElement","focus","suggest","val","s","innerHTML","keydownHandler","event","keyCode","which","nextSibling","previousSibling","childNodes","preventDefault","keyupHandler","part","slice","focusHandler","destroy","removeEvent","removeAttribute","removeChild","el","contains","test","type","handler","attachEvent","addEventListener","detachEvent","removeEventListener","elClass","cb","found","target","srcElement","parentElement","module","exports","styleInject","css","ref","insertAt","head","getElementsByTagName","firstChild","insertBefore","styleSheet","cssText","createTextNode","AutoCompleteText","autoCompleteTextData","_db","rollupView","textColumn","valueColumn","entries","map","row","idx","text","values","origRow","_span","_prompt","id","_input","placeholder","textboxWidth_exists","textboxWidth","_prevMinCharsText","minCharsText","_autoComplete","context_1","AutoComplete","field","fieldByLabel","toLowerCase","filter","indexOf","rowIdx","click","rowToObj","exit","column","selected","console","log","JSON","stringify","ascending","a","NaN","optional","columns","compare","x","d3Extent","valueof","min","max","n","Map","object","each","set","isArray","Set","has","get","property","clear","keys","push","size","empty","proto","formatDecimal","toExponential","coefficient","prefixExponent","formatSpecifier","specifier","FormatSpecifier","match","exec","Error","fill","align","sign","symbol","zero","comma","precision","trim","formatRounded","exponent","toString","formatTypes","%","toFixed","c","g","toPrecision","r","floor","X","toUpperCase","identity","locale","format","prefixes","formatLocale","grouping","thousands","group","j","substring","reverse","currency","decimal","numerals","formatNumerals","percent","newFormat","prefix","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","abs","out","i1","i0","formatTrim","charCodeAt","padding","formatPrefix","pow","xhtml","namespaces","svg","xlink","xml","xmlns","namespace","name","space","local","creator","fullname","ownerDocument","createElementNS","uri","namespaceURI","none","sparse","EnterNode","parent","datum","_parent","__data__","child","keyPrefix","bindIndex","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","defaultView","classArray","string","ClassList","_node","_names","classedAdd","names","list","classedRemove","textRemove","textContent","htmlRemove","raise","parentNode","lower","constantNull","selection_cloneShallow","cloneNode","selection_cloneDeep","splice","filterEvents","mouseenter","mouseleave","filterContextListener","listener","index","contextListener","related","relatedTarget","compareDocumentPosition","event1","event0","onRemove","typename","__on","m","capture","onAdd","wrap","dispatchEvent","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","root","Selection","groups","parents","_groups","_parents","d3Select","select","subgroups","subnode","subgroup","selectorAll","matches","matcher","enterGroup","updateGroup","previous","_enter","_exit","onenter","onupdate","onexit","merge","order","selection","groups0","groups1","m0","m1","merges","group0","group1","sort","compareNode","sortgroups","sortgroup","apply","nodes","getAttributeNS","removeAttributeNS","setAttributeNS","priority","removeProperty","setProperty","getPropertyValue","styleValue","classed","html","insert","before","clone","deep","typenames","parseTypenames","dispatch","nextId","Local","_","d3SelectAll","newInterval","floori","offseti","count","date","ceil","d0","d1","step","range","start","setTime","end","every","isFinite","millisecond","durationMinute","durationWeek","day","getUTCSeconds","getMinutes","getTimezoneOffset","getHours","setHours","setDate","getDate","days","weekday","getDay","sunday","monday","thursday","months","setMonth","getMonth","getFullYear","year","setFullYear","setUTCSeconds","getUTCMinutes","setUTCMinutes","getUTCHours","utcDay","setUTCHours","setUTCDate","getUTCDate","utcWeekday","getUTCDay","utcSunday","utcMonday","utcThursday","utcYear","setUTCMonth","getUTCMonth","getUTCFullYear","setUTCFullYear","localDate","y","H","M","S","L","utcDate","UTC","newYear","timeParse","utcFormat","utcParse","pads","-","0","numberRe","percentRe","requoteRe","pad","requote","formatRe","formatLookup","parseWeekdayNumberSunday","w","parseWeekdayNumberMonday","u","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","formatHour12","formatDayOfYear","timeDay","timeYear","formatMilliseconds","getMilliseconds","formatMicroseconds","formatMonthNumber","formatMinutes","formatSeconds","getSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","timeSunday","formatWeekNumberISO","timeThursday","formatWeekdayNumberSunday","formatWeekNumberMonday","timeMonday","formatYear","formatFullYear","formatZone","z","formatUTCDayOfMonth","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","definition","locale_dateTime","dateTime","locale_date","locale_time","locale_periods","periods","locale_weekdays","locale_shortWeekdays","shortDays","locale_months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","A","B","I","Y","utcFormats","parses","parseSpecifier","charAt","newParse","newDate","week","parse","defaultLocale","toISOString","CalendarHeatMap","Utility","SimpleSelectionMixin","calendarData","fields","dateParser","d3TimeParse","datePattern","valueFormatter","aggrDeltaColumn","d3Format","_prevDateColumn","dateColumn","_prevAggrType","aggrType","_prevAggrColumn","aggrColumn","_prevAggrDeltaColumn","_view","aggregateView","dateKey","formattedValues","aggregate","origRows","calcDelta","Close","Open","_selection","widgetElement","_palette","switch","paletteID","cellSize","height","mappedData","d3Map","dateExtent","d3Range","svgUpdate","_d3TimeMonths","d3TimeMonths","_months","forEach","_m","calcMonthPath","monthStrokeColor","monthStrokeWidth","dataExtent","dayRect","d3TimeDays","dayRectUpdate","data2","dblclick","d3TimeWeek","d3TimeYear","dayStrokeColor","dayStrokeWidth","monthPath","w0","w1","mixin","Palette","rainbow","tags","disable","TIMEOUT_DEFAULT","espValFix","Row","espRowFix","retVal","isNaN","Number","ESPUrl","_protocol","_hostname","url","_url","parser","href","tmp","tmpItem","decodeURIComponent","protocol","hostname","_port","port","_pathname","pathname","_search","_params","_hash","hash","_host","host","param","isWsWorkunits","isWorkunitResult","isWsEcl","isWsWorkunits_GetStats","getUrl","overrides","undefined","ESPMappings","mappings","resultName","_mappings","_reverseMappings","origField","exists","mapResult","response","mapping","mapResponse","serialize","obj","str","encodeURIComponent","jsonp","request","Promise","resolve","reject","respondedTimeout","callbackName","random","doCallback","script","src","progress","Comms","_proxyMappings","_timeout","_hipieResults","hipieResults","_hipieResultsLength","newUrlParts","newUrl","espUrl","IP","PORT","PATH","ajax","method","xhr","XMLHttpRequest","onload","status","statusText","onerror","open","setRequestHeader","send","post","proxyMappings","Basic","cacheCalls","_cacheCalls","localStorage","getItem","catch","then","response2","setItem","removeItem","locateRoxieResponse","locateRoxieException","Exception","WsECL","_target","_query","query","pathParts","queryParts","constructUrl","_response","reduce","previousValue","exception","array","Source","Code","Message","WsWorkunits","_wuid","_jobname","_sequence","_resultName","_fetchResultNamesPromise","_fetchResultPromise","_resultNameCache","_resultNameCacheCount","wuid","sequence","urlParts","urlParts2","jobname","appendParam","_fetchResult","skipMapping","resultname","_start","_count","Wuid","ResultName","SuppressXmlSchema","Start","Count","context_2","Result","responseKey","_total","Total","fetchResult","context_3","WUQuery","_request","Jobname","WUQueryResponse","Workunits","ECLWorkunit","fetchResultNames","url_1","request_1","TruncateEclTo64k","IncludeExceptions","IncludeGraphs","IncludeSourceFiles","IncludeResults","IncludeResultsViewNames","IncludeVariables","IncludeTimers","IncludeResourceURLs","IncludeDebugValues","IncludeApplicationValues","IncludeWorkflows","IncludeXmlSchemas","SuppressResultSchemas","context_4","WUInfoResponse","Workunit","Archived","Results","ECLResult","Name","fetchResults","fetchArray","all","responseArray","postFilter","request_key","WsWorkunits_GetStats","HIPIERoxie","HIPIEWorkunit","HIPIEDatabomb","createESPConnection","URL","testURL","WUGetStatsResponse","Statistics","WUStatisticItem","hipieKey","from","refresh","filterResults","request2","changedFilter","hipieResult","outputFilter","filters","isRange","fieldid","key2","databomb","_databomb","databombOutput","func","nestedRowFix","enableBasicCommsCache","basicCommsCache","BasicComms","Comms.Basic","baseUrl","WUResult","_name","_xmlSchema","LogicalFile","logicalName","_logicalName","RoxieQuery","queryName","pop","_queryName","trimRight","results","createResult","_espUrl","dataSource","Comms.ESPUrl","requestStr","wuQuery","Type","Cluster","RoxieCluster","Owner","State","StartDate","EndDate","ECL","LogicalFileSearchType","After","Before","PageSize","PageStartFrom","PageEndAt","LastNDays","Sortby","Descending","CacheHint","wuInfo","includeKey","wuUpdate","appData","appID","persistString","ApplicationValues","ApplicationValue","Application","Value","ApplicationValues.ApplicationValue.0.Application","ApplicationValues.ApplicationValue.0.Name","ApplicationValues.ApplicationValue.0.Value","ApplicationValues.ApplicationValue.itemcount","result","filterIdx","fKey","WUResultResponse","XmlSchema","LogicalName","simpleheat","canvas","_canvas","getElementById","_ctx","getContext","_width","_height","_max","_data","defaultRadius","defaultGradient","0.4","0.6","0.7","0.8","1","point","radius","blur","circle","_circle","_createCanvas","ctx","r2","_r","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","beginPath","arc","PI","closePath","gradient","grad","createLinearGradient","addColorStop","fillStyle","fillRect","_grad","getImageData","draw","minOpacity","clearRect","len","globalAlpha","drawImage","colored","_colorize","putImageData","pixels","_simpleheat","_simpleheat.default","HeatMap","_size","_heat","useClonedPalette","cloneNotExists","topLeftX_exists","topLeftY_exists","bottomRightX_exists","bottomRightY_exists","skewedData","usePalette","colorCount","CanvasWidget","retArr","arr","box","coordsWidth","bottomRightX","topLeftX","coordsHeight","bottomRightY","topLeftY","pixelValueX","pixelValueY","newX","newY","HPCCBadge","testData","logo","logo_accent","line","circle_accent","logo_circles","circle_1","circle_2","circle_3","circle_4","circle_5","circle_6","circle_7","circle_8","text_hpccsystems","text_r","text_tm","bbox","getBBox","centerX","centerY","scale","animation","transition","duration","ease","SVGWidget","Html","overflowX_exists","overflowX","overflowY_exists","overflowY","IconList","_entity_list","_content_list","_list","HorizontalList","orientation_default","flexWrap_default","listWidgets","widgets","updateListProperties","updateEntityProperties","htmlColumnIndex_exists","htmlColumnIndex","VerticalList","Entity","render","disableScroll","widgetsFlexBasis","iconSize","entity","icon","iconColumnIndex_exists","iconColumnIndex","iconColor","iconColorColumnIndex_exists","iconColorColumnIndex","iconDiameter","iconPaddingPercent","Paginator","_tNumPages","_numList","postUpdate","paginator","side","pageNumber","_onSelect","numItems","itemsPerPage","adjacentPages","page","li","linkText","span","d3Event","replacer","Widget","classID","Table","_paginator","_selectionBag","_selectionPrevClick","_paginatorTableSpacing","tableDiv","topMargin","showHeader","fixedHeader","thead","isHidden","colIdx","pivot","hiddenColumns","_empty_col_idx_arr","tableColumns","tableData","col","noTransform","transform","calcFieldsIndex","colLen","visibleCount","getEmptyColumnIdxArr","ret_arr","hideEmptyColumns","col_idx","column_is_empty","row_idx","_placeholderElement","table","fixedHead","fixedHeadTable","fixedThead","unfixedThead","tbody","tfoot","fixedCol","fixedColTable","fixedColHead","fixedColHeadRow","fixedColBody","fixedColFoot","fixedColFootRow","sortByFieldIndex_exists","_prevSortByFieldIndex","sortByFieldIndex","_prevDescending","descending","multiSort","_hasChildWidgets","thSel","thUpdate","element2","headerClick","theadRowBackgroundColor","theadCellBorderColor","theadFontColor","theadFontSize","theadFontFamily","fieldsIdx","paginationLimit","pagination","ipp","_calcRowsPerPage","startIndex","itemsOnPage","tData","topN","totalRow","totalledLabel","totalledColumns","sum","tfSel","tfootRowBackgroundColor","tfootCellBorderColor","tfootFontColor","tfootFontSize","renderHtmlDataCells","rowsSel","rowsUpdate","_d","selectionBagClick","applyRowStyles","getBodyRow","applyFirstColRowStyles","getFixedRow","fixedLeftRows","tbodyRows","applyStyleToRows","isSelected","_createSelectionObject","_id","cellsSel","_trIdx","cell","rowInfo","tdContents","tdIdx","alignment","getColumnAlignment","verticalAlign","widgetDiv","minWidgetWidth","minWidgetHeight","widgetDiv2","_parentWidget","lazyRender","tableMarginHeight","fixedColWidth","fixedColThSel","fixedColumn","fixedColThUpdate","fixedColTrSel","fixedColTrUpdate","fixedColTdSel","fixedColTdUpdate","fixedColFootTdSel","fixedColFootTdUpdate","fixedSize","setColumnWidths","newTableHeight_1","finalWidth_1","calcWidth","calcHeight","setOnScrollEvents","hasVScroll","Platform","getScrollbarWidth","hasHScroll","rows","firstRow","tds","totalWidth","tdWidths","offsetWidth","thwidth","tdwidth","usewidth","scrollNode","margHeight","onscroll","topDelta","leftDelta","_generateTempRow","trow","th","thHeight","clientHeight","tfootHeight","tmpRow","tcellHeight","paginatorHeight","multiSelect","shiftKey","inRange_1","rows_1","i2","lastInRangeRow","selObj","ctrlKey","applyHoverRowStyles","tbodyHoverRowFontColor","tbodyHoverRowBackgroundColor","applySelectedRowStyles","tbodySelectedRowFontColor","tbodySelectedRowBackgroundColor","isFirstCol","dataRow","tbodyFirstColFontColor","tbodyFontColor","tbodyFirstColBackgroundColor","tableZebraColor_exists","tbodyRowBackgroundColor","tableZebraColor","tr","__prop_type","stringAlign","numberAlign","serializeState","deserializeState","state","publishProxy","_htmlColorBlock","hexColor","Legend","isRainbow","widget","getWidget","targetWidget","_targetWidget","_targetWidgetMonitor","monitor","newProp","oldProp","chart","getPalette","ordinal","dataArr","palette_1","dataFamily","rainbowFormat","steps","rainbowBins","weightMin","_dataMinWeight","weightMax","_dataMaxWeight","stepWeightDiff","mid","orientation","tableRect","elementRect","onClick","onDblClick","onMouseOver","rowData","origGetBBox","_scale","MorphText","fontSize","_fontWidth","_textElement","seconds","minutes","hours","ampm","newText","anchor","_origText","usedChars_1","chars","NestedTable","origColumns","_columns","origData","Column","owner","_owner","valid","headerLabel","PropertyExt","MouseHoverColumn","hoverValue","hoverList","getIds","ColumnDropdown","columnIndex","ColumnDropdownList","Opportunity","_drawStartPos","groupCount","h","tooltipdiv","dropDownOption","opportunityId","cur_group","nodeRectWidth","groupHeadings","headerLabels","previousGroup","currentGroup","node_date_change","htmlInput","mouseHover","prevDate","prevdate","fromDate","curdate","pageY","node_prev_group","tooltipHtml","delta","prev_group","changeLines","nodeRectHeight","node_cur_group","colIndex","columnData","this_1","dropdownList","unshift","discover","publishedProperties","widgetPropertyWalker","widget2","visitor","widgetWalker","propertyWalker","serializeThemeToObject","propObj","publishedProperty","origDefaultValue","defaultValue","ret","_isFilterMatch","classParts","HasOwnProperty","serializeToObject","includeData","includeState","__class","_idSeed","__id","version","__version","__properties","childWwidget2","childWwidget","vertices","__vertices","__data","__state","editor_input","autoExpand","themeObj","widget3","applyTheme","hasProperties","PropertyEditor","_childPE","d3Local","_show_header","watchDepth","_parentPropertyEditor","_show_settings","parentPropertyEditor","depth","show_header","show_settings","rootWidgets","_selectedItems","_owningWidget","excludeObjs","tableElement","enterHeader","updateHeader","renderInputs","watchWidget","_watch","__hpcc_debug","_paramId","newVal","oldVal","peInputIcon","refreshExpandIcon","sortIcon","refreshSortIcon","hideNonWidgets","spanText","refreshHideParamsIcon","peInputCount","peInputCollapsedCount","collapsed","newIcon","increment","sorting","types","sorting_options","icons","__meta_sorting","ext","hideParamsIcon","gatherDataTree","children","Persist.discover","prop","getDataTree","_rowSorting","paramArr","typeOrder_1","filterInputs","discArr","filterTags","excludeTags","excludeParams","_idx","_i","_a","widgetName","excludeParam","class","some","showFields","showData","inputCell","enterInputs","description","updateWidgetRow","updateInputs","tmpWidget","widgetArr","lastModified_1","noEmpties","widgetDisabled","changed","autoExpandWidget","peInput","peInputElement","clickTarget","peDiv","topWidget","topPropEditor","oldValue","propEditor","broadcast","checked","multiline","isIE","_key","Persist.serialize","_widgetOrig","Grid","postSelectionChange","RadioCheckbox","rcData","view","concat","sort_exists","descending_1","l","_label","_Checkbox","radioCheckbox","checkboxDiv","selectedData","handleClick","rcDiv","multiple","Select","selectData","_select","options_dom_node","optionNode","selectSize","option","optionUpdate","_localStorage","mod","hasLocalStorage","getThemes","g_defaultThemes","getSerials","g_defaultSerials","getThemeNames","loadedThemes","themes","themeName","getSerialNames","loadedSerials","serials","serialName","camelizeString","tableInputHtml","rowObj","idSuffix","inputType","inputHtml","inputID","dataWIDs","valueAttr","_options","saveButtonID","saveButton","ThemeEditor","_current_grouping","_showing_columns","_showing_data","_contentEditors","_showSettings","_defaultThemes","_widgetObjsById","showSettings","onChange","propID","widgetProperty","elmValue","save","needsPropTableRedraw","needsRedraw","_group_params_by","showColumns","paramGrouping","_sharedProperties","findSharedProperties","teParams","editorComplexity","teParamVal","input","propertiesTableHtml","evt","buildTableObjects","initFunctionality","editorParams","tableObj","rowArr","modeTableObj","themeMode","td","trClass","tableObjHtml","targetElement","propObjs","sectionObjs","chartColorSection","rowObjArr","surfaceSection","fontSection","nonSurfaceSection","sharedPropertyTableHtml","elm","elm2","tableArr","getElementsByClassName","onclick","elm3","toElement","tagName","tbodyClass","sharedRowArr","subRowClass","nextSib","_expandCollapse","teInputs","inputElm","onchange","nameToLoad","elmType","splitId","genericId","widsStr","paramId","widArr","wid","individualId","indElm","_inputOnChange","saveBtn","clickedElm","loadSelect","loadOptions","saveExists","alert","_inputOnClick","sectionObj","widgetObj","widgetIdx","_sharedPropertyLabel","_sharedPropertyInput","_propertyLabel","_propertyInput","rowObj2","idx2","value2","_sharedValue","tableRowObjHtml","setWidgetObjsById","widgetProp","checkTagFilter","tagArr","allowTags","tag","propsByID","allProps_1","surfacePropsByID_1","nonSurfacePropsByID_1","gpResponse","_getParams","childWidgetArray","childWidget","cwArr","temp","tempIdx","getDefaultThemes","getDefaultSerials","espConnection","Comms.createESPConnection","Comms.WsWorkunits","colIdx_1"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow;\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, delay);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clockNow, interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import { HTMLWidget } from \"@hpcc-js/common\";\r\nimport { timer as d3Timer } from \"d3-timer\";\r\n\r\nexport class Audio extends HTMLWidget {\r\n    _sections;\r\n\r\n    constructor() {\r\n        super();\r\n        this._tag = \"audio\";\r\n\r\n        this._sections = {};\r\n    }\r\n\r\n    section(label, offset, beatLength, beatCount) {\r\n        if (!arguments.length) return this._sections;\r\n        if (arguments.length === 1) return this._sections[label];\r\n        this._sections[label] = {\r\n            label,\r\n            offset,\r\n            beatLength,\r\n            beatCount,\r\n            endOffset: offset + beatCount * beatLength\r\n        };\r\n        return this;\r\n    }\r\n\r\n    getType(fileExt) {\r\n        switch (fileExt) {\r\n            case \"mp3\":\r\n                return \"audio/mpeg; codecs='mp3'\";\r\n            case \"ogg\":\r\n                return \"audio/ogg; codecs='vorbis'\";\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        const context = this;\r\n        element.on(\"play\", function (d) { context.onPlay(d); });\r\n    }\r\n\r\n    update(domNode, element) {\r\n        const source = element.selectAll(\"source\").data(this.source(), function (d) { return d; });\r\n        source.enter().append(\"source\")\r\n            .attr(\"src\", function (d) { return d; })\r\n            ;\r\n    }\r\n\r\n    createTimer(params, startTime, beat) {\r\n        const context = this;\r\n        d3Timer(function () {\r\n            context.onTick(params.label, beat, params);\r\n            return true;\r\n        }, beat * params.beatLength, startTime + params.offset);\r\n    }\r\n\r\n    onTick(label, beat, params) {\r\n    }\r\n\r\n    onPlay(d) {\r\n        const startTime = Date.now();\r\n        for (const key in this._sections) {\r\n            const section = this._sections[key];\r\n            for (let i = 0; i < section.beatCount; ++i) {\r\n                this.createTimer(section, startTime, i);\r\n            }\r\n        }\r\n    }\r\n\r\n    play(d) {\r\n        const context = this;\r\n        this._element.on(\"canplaythrough\", function (d2) {\r\n            context.node().play();\r\n        });\r\n        this.node().load();\r\n    }\r\n\r\n    source: { (): string; (_: string): Audio };\r\n    source_exists: () => boolean;\r\n}\r\nAudio.prototype._class += \" other_Audio\";\r\n\r\nAudio.prototype.publish(\"source\", \"\", \"string\", \"Audio Source\");\r\n","/*\n    JavaScript autoComplete v1.0.4\n    Copyright (c) 2014 Simon Steinberger / Pixabay\n    GitHub: https://github.com/Pixabay/JavaScript-autoComplete\n    License: http://www.opensource.org/licenses/mit-license.php\n*/\n\nvar autoComplete = (function(){\n    // \"use strict\";\n    function autoComplete(options){\n        if (!document.querySelector) return;\n\n        // helpers\n        function hasClass(el, className){ return el.classList ? el.classList.contains(className) : new RegExp('\\\\b'+ className+'\\\\b').test(el.className); }\n\n        function addEvent(el, type, handler){\n            if (el.attachEvent) el.attachEvent('on'+type, handler); else el.addEventListener(type, handler);\n        }\n        function removeEvent(el, type, handler){\n            // if (el.removeEventListener) not working in IE11\n            if (el.detachEvent) el.detachEvent('on'+type, handler); else el.removeEventListener(type, handler);\n        }\n        function live(elClass, event, cb, context){\n            addEvent(context || document, event, function(e){\n                var found, el = e.target || e.srcElement;\n                while (el && !(found = hasClass(el, elClass))) el = el.parentElement;\n                if (found) cb.call(el, e);\n            });\n        }\n\n        var o = {\n            selector: 0,\n            source: 0,\n            minChars: 3,\n            delay: 150,\n            offsetLeft: 0,\n            offsetTop: 1,\n            cache: 1,\n            menuClass: '',\n            renderItem: function (item, search){\n                // escape special characters\n                search = search.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n                var re = new RegExp(\"(\" + search.split(' ').join('|') + \")\", \"gi\");\n                return '<div class=\"autocomplete-suggestion\" data-val=\"' + item + '\">' + item.replace(re, \"<b>$1</b>\") + '</div>';\n            },\n            onSelect: function(e, term, item){}\n        };\n        for (var k in options) { if (options.hasOwnProperty(k)) o[k] = options[k]; }\n\n        // init\n        var elems = typeof o.selector == 'object' ? [o.selector] : document.querySelectorAll(o.selector);\n        for (var i=0; i<elems.length; i++) {\n            var that = elems[i];\n\n            // create suggestions container \"sc\"\n            that.sc = document.createElement('div');\n            that.sc.className = 'autocomplete-suggestions '+o.menuClass;\n\n            that.autocompleteAttr = that.getAttribute('autocomplete');\n            that.setAttribute('autocomplete', 'off');\n            that.cache = {};\n            that.last_val = '';\n\n            that.updateSC = function(resize, next){\n                var rect = that.getBoundingClientRect();\n                that.sc.style.left = Math.round(rect.left + (window.pageXOffset || document.documentElement.scrollLeft) + o.offsetLeft) + 'px';\n                that.sc.style.top = Math.round(rect.bottom + (window.pageYOffset || document.documentElement.scrollTop) + o.offsetTop) + 'px';\n                that.sc.style.width = Math.round(rect.right - rect.left) + 'px'; // outerWidth\n                if (!resize) {\n                    that.sc.style.display = 'block';\n                    that.sc.classList.remove('hide')\n                    if (!that.sc.maxHeight) { that.sc.maxHeight = parseInt((window.getComputedStyle ? getComputedStyle(that.sc, null) : that.sc.currentStyle).maxHeight); }\n                    if (!that.sc.suggestionHeight) that.sc.suggestionHeight = that.sc.querySelector('.autocomplete-suggestion').offsetHeight;\n                    if (that.sc.suggestionHeight)\n                        if (!next) that.sc.scrollTop = 0;\n                        else {\n                            var scrTop = that.sc.scrollTop, selTop = next.getBoundingClientRect().top - that.sc.getBoundingClientRect().top;\n                            if (selTop + that.sc.suggestionHeight - that.sc.maxHeight > 0)\n                                that.sc.scrollTop = selTop + that.sc.suggestionHeight + scrTop - that.sc.maxHeight;\n                            else if (selTop < 0)\n                                that.sc.scrollTop = selTop + scrTop;\n                        }\n                }\n            }\n            addEvent(window, 'resize', that.updateSC);\n            document.body.appendChild(that.sc);\n\n            live('autocomplete-suggestion', 'mouseleave', function(e){\n                var sel = that.sc.querySelector('.autocomplete-suggestion.selected');\n                if (sel) setTimeout(function(){ sel.className = sel.className.replace('selected', ''); }, 20);\n            }, that.sc);\n\n            live('autocomplete-suggestion', 'mouseover', function(e){\n                var sel = that.sc.querySelector('.autocomplete-suggestion.selected');\n                if (sel) sel.className = sel.className.replace('selected', '');\n                this.className += ' selected';\n            }, that.sc);\n\n            live('autocomplete-suggestion', 'mousedown', function(e){\n                if (hasClass(this, 'autocomplete-suggestion')) { // else outside click\n                    var v = this.getAttribute('data-val');\n                    that.value = v;\n                    o.onSelect(e, v, this);\n                    that.sc.style.display = 'none';\n                    that.sc.classList.add(\"hide\");\n\n                }\n            }, that.sc);\n\n            that.blurHandler = function(){\n                try { var over_sb = document.querySelector('.autocomplete-suggestions:hover'); } catch(e){ var over_sb = 0; }\n                if (!over_sb) {\n                    that.last_val = that.value;\n                    that.sc.style.display = 'none';\n                    that.sc.classList.add(\"hide\");\n                    setTimeout(function(){\n                      that.sc.style.display = 'none';\n                      that.sc.classList.add(\"hide\");\n                    }, 350); // hide suggestions on fast input\n                } else if (that !== document.activeElement) setTimeout(function(){ that.focus(); }, 20);\n            };\n            addEvent(that, 'blur', that.blurHandler);\n\n            var suggest = function(data, val){\n                if (!val) {\n                    var val = that.value;\n                }\n                that.cache[val] = data;\n                if (data.length && val.length >= o.minChars) {\n                    var s = '';\n                    for (var i=0;i<data.length;i++) s += o.renderItem(data[i], val);\n                    that.sc.innerHTML = s;\n                    that.updateSC(0);\n                }\n                else\n                    that.sc.style.display = 'none';\n                    that.sc.classList.add(\"hide\");\n            }\n\n            that.keydownHandler = function(e){\n                var key = window.event ? e.keyCode : e.which;\n                // down (40), up (38)\n                if ((key == 40 || key == 38) && that.sc.innerHTML) {\n                    var next, sel = that.sc.querySelector('.autocomplete-suggestion.selected');\n                    if (!sel) {\n                        next = (key == 40) ? that.sc.querySelector('.autocomplete-suggestion') : that.sc.childNodes[that.sc.childNodes.length - 1]; // first : last\n                        next.className += ' selected';\n                        that.value = next.getAttribute('data-val');\n                    } else {\n                        next = (key == 40) ? sel.nextSibling : sel.previousSibling;\n                        if (next) {\n                            sel.className = sel.className.replace('selected', '');\n                            next.className += ' selected';\n                            that.value = next.getAttribute('data-val');\n                        }\n                        else { sel.className = sel.className.replace('selected', ''); that.value = that.last_val; next = 0; }\n                    }\n                    that.updateSC(0, next);\n                    return false;\n                }\n                // esc\n                else if (key == 27) {\n                  that.value = that.last_val;\n                  that.sc.style.display = 'none';\n                  that.sc.classList.add(\"hide\");\n                }\n                // enter\n                else if (key == 13 || key == 9) {\n                    if (that.sc.style.display !== 'none') {\n                        e.preventDefault();\n                    }\n                    var sel = that.sc.querySelector('.autocomplete-suggestion.selected');\n                    if (sel && that.sc.style.display != 'none') {\n                      o.onSelect(e, sel.getAttribute('data-val'), sel);\n                      setTimeout(function(){\n                        that.sc.style.display = 'none';\n                        that.sc.classList.add(\"hide\");\n                    }, 20); }\n                }\n            };\n            addEvent(that, 'keydown', that.keydownHandler);\n\n            that.keyupHandler = function(e){\n                var key = window.event ? e.keyCode : e.which;\n                if (!key || (key < 35 || key > 40) && key != 13 && key != 27) {\n                    var val = that.value;\n                    if (val.length >= o.minChars) {\n                        if (val != that.last_val) {\n                            that.last_val = val;\n                            clearTimeout(that.timer);\n                            if (o.cache) {\n                                if (val in that.cache) { suggest(that.cache[val]); return; }\n                                // no requests if previous suggestions were empty\n                                for (var i=1; i<val.length-o.minChars; i++) {\n                                    var part = val.slice(0, val.length-i);\n                                    if (part in that.cache && !that.cache[part].length) { suggest([]); return; }\n                                }\n                            }\n                            that.timer = setTimeout(function(){ o.source(val, suggest) }, o.delay);\n                        }\n                    } else {\n                        that.last_val = val;\n                        that.sc.style.display = 'none';\n                        that.sc.classList.add(\"hide\");\n                    }\n                }\n            };\n            addEvent(that, 'keyup', that.keyupHandler);\n\n            that.focusHandler = function(e){\n                that.last_val = '\\n';\n                that.keyupHandler(e)\n            };\n            if (!o.minChars) addEvent(that, 'focus', that.focusHandler);\n        }\n\n        // public destroy method\n        this.destroy = function(){\n            for (var i=0; i<elems.length; i++) {\n                var that = elems[i];\n                removeEvent(window, 'resize', that.updateSC);\n                removeEvent(that, 'blur', that.blurHandler);\n                removeEvent(that, 'focus', that.focusHandler);\n                removeEvent(that, 'keydown', that.keydownHandler);\n                removeEvent(that, 'keyup', that.keyupHandler);\n                if (that.autocompleteAttr)\n                    that.setAttribute('autocomplete', that.autocompleteAttr);\n                else\n                    that.removeAttribute('autocomplete');\n                document.body.removeChild(that.sc);\n                that = null;\n            }\n        };\n    }\n    return autoComplete;\n})();\n\n(function(){\n    if (typeof define === 'function' && define.amd)\n        define('autoComplete', function () { return autoComplete; });\n    else if (typeof module !== 'undefined' && module.exports)\n        module.exports = autoComplete;\n    else\n        window.autoComplete = autoComplete;\n})();\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { HTMLWidget } from \"@hpcc-js/common\";\r\nimport * as AutoComplete from \"javascript-autocomplete\";\r\n\r\nimport \"../src/AutoCompleteText.css\";\r\n\r\nexport class AutoCompleteText extends HTMLWidget {\r\n    _span;\r\n    _prompt;\r\n    _input;\r\n    _prevMinCharsText;\r\n    _autoComplete;\r\n\r\n    constructor() {\r\n        super();\r\n        this._tag = \"div\";\r\n    }\r\n\r\n    autoCompleteTextData() {\r\n        if (this.data().length === 0) return [];\r\n        const view = this._db.rollupView([this.textColumn(), this.valueColumn()]);\r\n        return view.entries().map(function (row, idx) {\r\n            return {\r\n                idx,\r\n                text: row.key,\r\n                value: row.values.length ? row.values[0].key : \"\",\r\n                origRow: row.values.length && row.values[0].value.length ? row.values[0].value[0] : []\r\n            };\r\n        }, this);\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        this._span = element.append(\"span\");\r\n        this._prompt = this._span.append(\"label\")\r\n            .attr(\"for\", this.id() + \"_input\")\r\n            ;\r\n        this._input = this._span.append(\"input\")\r\n            .attr(\"id\", this.id() + \"_input\")\r\n            .attr(\"name\", this.id() + \"_input_name\")\r\n            .attr(\"type\", \"text\")\r\n            .attr(\"placeholder\", this.placeholder())\r\n            ;\r\n    }\r\n\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n\r\n        this._prompt.text(this.label());\r\n        this._input.style(\"width\", this.textboxWidth_exists() ? this.textboxWidth() + \"px\" : null);\r\n\r\n        if (this._prevMinCharsText !== this.minCharsText()) {\r\n            this._prevMinCharsText = this.minCharsText();\r\n\r\n            if (this._autoComplete) {\r\n                this._autoComplete.destroy();\r\n            }\r\n            const context = this;\r\n            this._autoComplete = new AutoComplete({\r\n                selector: \"#\" + this.id() + \"_input\",\r\n                minChars: this.minCharsText(),\r\n                delay: 150,\r\n                offsetLeft: 0,\r\n                offsetTop: 1,\r\n                source: (term, suggest) => {\r\n                    const field = context._db.fieldByLabel(context.textColumn());\r\n                    if (field) {\r\n                        term = term.toLowerCase();\r\n                        const suggestions = context.autoCompleteTextData().filter(function (row) {\r\n                            return row.origRow[field.idx].toLowerCase().indexOf(term) >= 0;\r\n                        }).map(function (row) {\r\n                            return {\r\n                                text: row.origRow[field.idx],\r\n                                rowIdx: row.idx\r\n                            };\r\n                        });\r\n                        suggest(suggestions);\r\n                    }\r\n                },\r\n                renderItem: (item, search) => {\r\n                    search = search.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\r\n                    const re = new RegExp(\"(\" + search.split(\" \").join(\"|\") + \")\", \"gi\");\r\n                    return '<div class=\"autocomplete-suggestion\" data-val=\"' + item.text + '\" data-row-idx=\"' + item.rowIdx + '\">' + item.text.replace(re, \"<b>$1</b>\") + \"</div>\";\r\n                },\r\n                onSelect: (e, term, item) => {\r\n                    const rowIdx = +item.getAttribute(\"data-row-idx\");\r\n                    const row = context.autoCompleteTextData()[rowIdx];\r\n                    context.click(context.rowToObj(row.origRow), context.valueColumn(), true);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    exit(domNode, element) {\r\n        if (this._autoComplete) {\r\n            this._autoComplete.destroy();\r\n        }\r\n        this._span.remove();\r\n        super.exit(domNode, element);\r\n    }\r\n\r\n    click(row, column, selected) {\r\n        console.log(\"Click:  \" + JSON.stringify(row) + \", \" + column + \", \" + selected);\r\n    }\r\n\r\n    label: { (): string; (_: string): AutoCompleteText };\r\n    label_exists: () => boolean;\r\n    textboxWidth: { (): number; (_: number): AutoCompleteText };\r\n    textboxWidth_exists: () => boolean;\r\n    placeholder: { (): string; (_: string): AutoCompleteText };\r\n    placeholder_exists: () => boolean;\r\n    valueColumn: { (): string; (_: string): AutoCompleteText };\r\n    valueColumn_exists: () => boolean;\r\n    textColumn: { (): string; (_: string): AutoCompleteText };\r\n    textColumn_exists: () => boolean;\r\n    minCharsText: { (): number; (_: number): AutoCompleteText };\r\n    minCharsText_exists: () => boolean;\r\n}\r\nAutoCompleteText.prototype._class += \" other_AutoCompleteText\";\r\n\r\nAutoCompleteText.prototype.publish(\"label\", \"Label: \", \"string\", \"Label for AutoCompleteText\");\r\nAutoCompleteText.prototype.publish(\"textboxWidth\", null, \"number\", \"width of textbox\", null, { optional: true });\r\nAutoCompleteText.prototype.publish(\"placeholder\", \"Search...\", \"string\", \"Placeholder for AutoCompleteText\");\r\nAutoCompleteText.prototype.publish(\"valueColumn\", null, \"set\", \"Select column for autocomplete\", function () { return this.columns(); }, { optional: true });\r\nAutoCompleteText.prototype.publish(\"textColumn\", null, \"set\", \"Select value(s)\", function () { return this.columns(); }, { optional: true });\r\nAutoCompleteText.prototype.publish(\"minCharsText\", 1, \"number\", \"Size of multiAutoCompleteText box\");\r\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return [min, max];\n}\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume its an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  this.fill = match[1] || \" \";\n  this.align = match[2] || \">\";\n  this.sign = match[3] || \"-\";\n  this.symbol = match[4] || \"\";\n  this.zero = !!match[5];\n  this.width = match[6] && +match[6];\n  this.comma = !!match[7];\n  this.precision = match[8] && +match[8].slice(1);\n  this.trim = !!match[9];\n  this.type = match[10] || \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatNumerals from \"./formatNumerals\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTrim from \"./formatTrim\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\nimport identity from \"./identity\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal,\n      numerals = locale.numerals ? formatNumerals(locale.numerals) : identity,\n      percent = locale.percent || \"%\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision == null && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Perform the initial formatting.\n        var valueNegative = value < 0;\n        value = formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero during formatting, treat as positive.\n        if (valueNegative && +value === 0) valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (i0 > 0) { if (!+s[i]) break out; i0 = 0; } break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  return this.parentNode.insertBefore(this.cloneNode(false), this.nextSibling);\n}\n\nfunction selection_cloneDeep() {\n  return this.parentNode.insertBefore(this.cloneNode(true), this.nextSibling);\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","var nextId = 0;\n\nexport default function local() {\n  return new Local;\n}\n\nfunction Local() {\n  this._ = \"@\" + (++nextId).toString(36);\n}\n\nLocal.prototype = local.prototype = {\n  constructor: Local,\n  get: function(node) {\n    var id = this._;\n    while (!(id in node)) if (!(node = node.parentNode)) return;\n    return node[id];\n  },\n  set: function(node, value) {\n    return node[this._] = value;\n  },\n  remove: function(node) {\n    return this._ in node && delete node[this._];\n  },\n  toString: function() {\n    return this._;\n  }\n};\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : selector], root);\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [];\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(new Date(+start)); while (offseti(start, step), floori(start), start < stop)\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) while (--step >= 0) while (offseti(date, 1), !test(date)) {} // eslint-disable-line no-empty\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(Math.floor(date / durationSecond) * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(Math.floor(date / durationMinute) * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute} from \"./duration\";\n\nvar hour = interval(function(date) {\n  var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n  if (offset < 0) offset += durationHour;\n  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newYear(d.y)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = newDate(newYear(d.y)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","import { HTMLWidget, Palette, Utility } from \"@hpcc-js/common\";\r\nimport { extent as d3Extent, range as d3Range } from \"d3-array\";\r\nimport { map as d3Map } from \"d3-collection\";\r\nimport { format as d3Format } from \"d3-format\";\r\nimport { select as d3Select } from \"d3-selection\";\r\nimport { timeDays as d3TimeDays, timeMonths as d3TimeMonths, timeWeek as d3TimeWeek, timeYear as d3TimeYear } from \"d3-time\";\r\nimport { timeParse as d3TimeParse } from \"d3-time-format\";\r\n\r\nimport \"../src/CalendarHeatMap.css\";\r\n\r\nexport class CalendarHeatMap extends HTMLWidget {\r\n    _prevDateColumn;\r\n    _prevAggrType;\r\n    _prevAggrColumn;\r\n    _prevAggrDeltaColumn;\r\n    _view;\r\n    _parentNode;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        Utility.SimpleSelectionMixin.call(this);\r\n    }\r\n\r\n    calendarData() {\r\n        if (this.fields().length === 0 || this.data().length === 0) {\r\n            return [];\r\n        }\r\n        const dateParser = d3TimeParse(this.datePattern());\r\n        const valueFormatter = this.aggrDeltaColumn() ? d3Format(\".1%\") : d3Format(\"s\");\r\n        if (this._prevDateColumn !== this.dateColumn() ||\r\n            this._prevAggrType !== this.aggrType() ||\r\n            this._prevAggrColumn !== this.aggrColumn() ||\r\n            this._prevAggrDeltaColumn !== this.aggrDeltaColumn()) {\r\n            this._prevDateColumn = this.dateColumn();\r\n            this._prevAggrType = this.aggrType();\r\n            this._prevAggrColumn = this.aggrColumn();\r\n            this._prevAggrDeltaColumn = this.aggrDeltaColumn();\r\n            this._view = this._db.aggregateView([this.dateColumn()], this.aggrType(), this.aggrColumn(), this.aggrDeltaColumn());\r\n        }\r\n        return this._view.entries().map(function (row) {\r\n            row.dateKey = dateParser(row.key);\r\n            row.formattedValues = valueFormatter(row.value.aggregate);\r\n            row.origRows = row.value;\r\n            return row;\r\n        });\r\n    }\r\n\r\n    calcDelta(row) {\r\n        return (row.Close - row.Open) / row.Open;\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        d3Select(domNode.parentNode)\r\n            .style(\"overflow-y\", \"scroll\")\r\n            .style(\"overflow-x\", \"hidden\")\r\n            .style(\"height\", \"100%\")\r\n            .style(\"width\", \"100%\")\r\n            ;\r\n        this._selection.widgetElement(element);\r\n    }\r\n\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n        this._palette = this._palette.switch(this.paletteID());\r\n\r\n        const width = this.width();\r\n        const cellSize = (width / 12) / 5;\r\n        const height = cellSize * 8;\r\n\r\n        const data = this.calendarData();\r\n        const mappedData = d3Map(data, function (d: any) { return d.dateKey; });\r\n        const dateExtent = d3Extent(data, function (d: any) {\r\n            return d.dateKey.getFullYear();\r\n        });\r\n        const context = this;\r\n        const svg = element.selectAll(\"svg\").data(d3Range(+dateExtent[0], +dateExtent[1] + 1));\r\n        const svgUpdate = svg.enter().append(\"svg\")\r\n            .each(function (d) {\r\n                const svgElement = d3Select(this);\r\n                const g = svgElement.append(\"g\");\r\n                g.append(\"text\")\r\n                    .style(\"text-anchor\", \"middle\")\r\n                    ;\r\n                g.append(\"g\")\r\n                    .attr(\"class\", \"days\")\r\n                    ;\r\n\r\n                const _d3TimeMonths = d3TimeMonths(new Date(d, 0, 1), new Date(d + 1, 0, 1));\r\n                const _months = g.append(\"g\").attr(\"class\", \"months\");\r\n                _d3TimeMonths.forEach(function (_m) {\r\n                    _months.append(\"path\")\r\n                        .attr(\"class\", \"month\")\r\n                        .attr(\"d\", calcMonthPath(_m))\r\n                        .style(\"stroke\", context.monthStrokeColor())\r\n                        .style(\"stroke-width\", context.monthStrokeWidth())\r\n                        ;\r\n                });\r\n            })\r\n            .merge(svg)\r\n            .attr(\"width\", width)\r\n            .attr(\"height\", height)\r\n            ;\r\n        svgUpdate.select(\"g\")\r\n            .attr(\"transform\", \"translate(\" + ((width - cellSize * 53) / 2) + \",\" + (height - cellSize * 7 - 1) + \")\")\r\n            ;\r\n        svgUpdate.select(\"text\")\r\n            .attr(\"transform\", \"translate(-6,\" + cellSize * 3.5 + \")rotate(-90)\")\r\n            .text(d => d)\r\n            ;\r\n        svg.exit().remove();\r\n\r\n        let dataExtent: [any, any] = d3Extent<number>(data, function (d: any) {\r\n            return d.value.aggregate;\r\n        });\r\n        if (this.aggrDeltaColumn()) {\r\n            const max = Math.max(Math.abs(+dataExtent[0]), Math.abs(+dataExtent[1]));\r\n            dataExtent = [-max, max];\r\n        }\r\n        const dayRect = svgUpdate.select(\".days\").selectAll(\".day\").data(function (d) { return d3TimeDays(new Date(d, 0, 1), new Date(d + 1, 0, 1)); });\r\n        const dayRectUpdate = dayRect.enter().append(\"rect\")\r\n            .attr(\"class\", \"day\")\r\n            .call(this._selection.enter.bind(this._selection))\r\n            .on(\"click\", function (d) {\r\n                const data2 = mappedData.get(d);\r\n                if (data2 && data2.value && data2.value && data2.value.length) {\r\n                    context.click(context.rowToObj(data2.value[0]), context.dateColumn(), context._selection.selected(this));\r\n                }\r\n            })\r\n            .on(\"dblclick\", function (d) {\r\n                const data2 = mappedData.get(d);\r\n                if (data2 && data2.value && data2.value && data2.value.length) {\r\n                    context.dblclick(context.rowToObj(data2.value[0]), context.dateColumn(), context._selection.selected(this));\r\n                }\r\n            }).each(function (d) {\r\n                const dayRectElement = d3Select(this);\r\n                dayRectElement.append(\"title\");\r\n            })\r\n            .merge(dayRect)\r\n            .attr(\"x\", function (d) { return d3TimeWeek.count(d3TimeYear(d), d) * cellSize; })\r\n            .attr(\"y\", function (d) { return d.getDay() * cellSize; })\r\n            .attr(\"width\", cellSize)\r\n            .attr(\"height\", cellSize)\r\n            .style(\"stroke\", this.dayStrokeColor())\r\n            .style(\"stroke-width\", this.dayStrokeWidth())\r\n            .style(\"fill\", null)\r\n            ;\r\n        dayRectUpdate.select(\"title\")\r\n            .text(d => d)\r\n            ;\r\n        dayRectUpdate.filter(function (d) { return mappedData.has(d); })\r\n            .style(\"fill\", function (d) {\r\n                const row = mappedData.get(d);\r\n                if (!row || !row.value || !row.value.aggregate) {\r\n                    return null;\r\n                }\r\n                return context._palette(row.value.aggregate, dataExtent[0], dataExtent[1]);\r\n            })\r\n            .select(\"title\")\r\n            .text(function (d) {\r\n                const data2 = mappedData.get(d);\r\n                return data2.key + \": \" + data2.formattedValues;\r\n            })\r\n            ;\r\n        dayRect.exit().remove();\r\n\r\n        const monthPath = svg.select(\".months\").selectAll(\".month\").data(function (d) { return d3TimeMonths(new Date(d, 0, 1), new Date(d + 1, 0, 1)); });\r\n        monthPath.enter().append(\"path\")\r\n            .attr(\"class\", \"month\")\r\n            .merge(monthPath)\r\n            .attr(\"d\", calcMonthPath)\r\n            .style(\"stroke\", this.monthStrokeColor())\r\n            .style(\"stroke-width\", this.monthStrokeWidth())\r\n            ;\r\n        monthPath.exit().remove();\r\n\r\n        function calcMonthPath(t0) {\r\n            const t1 = new Date(t0.getFullYear(), t0.getMonth() + 1, 0);\r\n            const d0 = t0.getDay();\r\n            const w0 = d3TimeWeek.count(d3TimeYear(t0), t0);\r\n            const d1 = t1.getDay();\r\n            const w1 = d3TimeWeek.count(d3TimeYear(t1), t1);\r\n            return \"M\" + (w0 + 1) * cellSize + \",\" + d0 * cellSize +\r\n                \"H\" + w0 * cellSize + \"V\" + 7 * cellSize +\r\n                \"H\" + w1 * cellSize + \"V\" + (d1 + 1) * cellSize +\r\n                \"H\" + (w1 + 1) * cellSize + \"V\" + 0 +\r\n                \"H\" + (w0 + 1) * cellSize + \"Z\";\r\n        }\r\n    }\r\n\r\n    exit(domNode, element) {\r\n        super.exit(domNode, element);\r\n    }\r\n\r\n    //  Events  ---\r\n    click(row, column, selected) {\r\n        console.log(\"Click:  \" + JSON.stringify(row) + \", \" + column + \", \" + selected);\r\n    }\r\n\r\n    dblclick(row, column, selected) {\r\n        console.log(\"Double click:  \" + JSON.stringify(row) + \", \" + column + \", \" + selected);\r\n    }\r\n\r\n    _palette;\r\n    paletteID: { (): string; (_: string): CalendarHeatMap };\r\n    paletteID_exists: () => boolean;\r\n    dateColumn: { (): string; (_: string): CalendarHeatMap };\r\n    dateColumn_exists: () => boolean;\r\n    datePattern: { (): string; (_: string): CalendarHeatMap };\r\n    datePattern_exists: () => boolean;\r\n    aggrType: { (): string; (_: string): CalendarHeatMap };\r\n    aggrType_exists: () => boolean;\r\n    aggrColumn: { (): string; (_: string): CalendarHeatMap };\r\n    aggrColumn_exists: () => boolean;\r\n    aggrDeltaColumn: { (): string; (_: string): CalendarHeatMap };\r\n    aggrDeltaColumn_exists: () => boolean;\r\n\r\n    //  SimpleSelectionMixin\r\n    _selection;\r\n}\r\nCalendarHeatMap.prototype._class += \" other_CalendarHeatMap\";\r\nCalendarHeatMap.prototype.mixin(Utility.SimpleSelectionMixin);\r\nCalendarHeatMap.prototype._palette = Palette.rainbow(\"default\");\r\n\r\nexport interface CalendarHeatMap {\r\n    dayStrokeColor(): string;\r\n    dayStrokeColor(_: string): this;\r\n    monthStrokeColor(): string;\r\n    monthStrokeColor(_: string): this;\r\n    dayStrokeWidth(): number;\r\n    dayStrokeWidth(_: number): this;\r\n    monthStrokeWidth(): number;\r\n    monthStrokeWidth(_: number): this;\r\n}\r\nCalendarHeatMap.prototype.publish(\"paletteID\", \"YlOrRd\", \"set\", \"Color palette for this widget\", CalendarHeatMap.prototype._palette.switch(), { tags: [\"Basic\", \"Shared\"] });\r\nCalendarHeatMap.prototype.publish(\"dayStrokeColor\", \"#ccc\", \"html-color\", \"Color of day border\");\r\nCalendarHeatMap.prototype.publish(\"monthStrokeColor\", \"#000\", \"html-color\", \"Color of month border\");\r\nCalendarHeatMap.prototype.publish(\"dayStrokeWidth\", 1, \"number\", \"Pixel width of day border\");\r\nCalendarHeatMap.prototype.publish(\"monthStrokeWidth\", 2, \"number\", \"Pixel width of month border\");\r\nCalendarHeatMap.prototype.publish(\"dateColumn\", null, \"set\", \"Date Column\", function () { return this.columns(); }, { optional: true });\r\nCalendarHeatMap.prototype.publish(\"datePattern\", \"%Y-%m-%d\", \"string\", \"Date Pattern\");\r\nCalendarHeatMap.prototype.publish(\"aggrType\", null, \"set\", \"Aggregation Type\", [null, \"mean\", \"median\", \"sum\", \"min\", \"max\"], { optional: true });\r\nCalendarHeatMap.prototype.publish(\"aggrColumn\", null, \"set\", \"Aggregation Field\", function () { return this.columns(); }, { optional: true, disable: (w) => !w.aggrType() });\r\nCalendarHeatMap.prototype.publish(\"aggrDeltaColumn\", null, \"set\", \"Aggregation Field\", function () { return this.columns(); }, { optional: true, disable: (w) => !w.aggrType() });\r\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import { Utility } from \"@hpcc-js/common\";\r\n\r\nconst TIMEOUT_DEFAULT = 60;\r\nfunction espValFix(val) {\r\n    if (val === undefined || val === null) {\r\n        return null;\r\n    }\r\n    if (!val.trim) {\r\n        if (val.Row) {\r\n            return espRowFix(val.Row);\r\n        }\r\n        return val;\r\n    }\r\n    const retVal = val.trim();\r\n    if (retVal !== \"\" && !isNaN(retVal)) {\r\n        if (retVal.length <= 1 || retVal[0] !== \"0\" || retVal[1] === \".\") {\r\n            return Number(retVal);\r\n        }\r\n    }\r\n    return retVal;\r\n}\r\n\r\nfunction espRowFix(row) {\r\n    for (const key in row) {\r\n        row[key] = espValFix(row[key]);\r\n    }\r\n    return row;\r\n}\r\n\r\nexport class ESPUrl {\r\n    protected _protocol = \"http:\";\r\n    protected _hostname = \"localhost\";\r\n    protected _url;\r\n    protected _port;\r\n    protected _search;\r\n    protected _pathname;\r\n    protected _params;\r\n    protected _hash;\r\n    protected _host;\r\n\r\n    constructor() {\r\n    }\r\n\r\n    url(_: string): this;\r\n    url(): string;\r\n    url(_?): string | this {\r\n        if (!arguments.length) return this._url;\r\n        this._url = _;\r\n        const parser = document.createElement(\"a\");\r\n        parser.href = this._url;\r\n        parser.href = parser.href; // This fixes an IE9/IE10 DOM value issue\r\n\r\n        const params = {};\r\n        if (parser.search.length) {\r\n            let tmp: any = parser.search;\r\n            if (tmp[0] === \"?\") {\r\n                tmp = tmp.substring(1);\r\n            }\r\n            tmp = tmp.split(\"&\");\r\n            tmp.map(function (item) {\r\n                const tmpItem = item.split(\"=\");\r\n                params[decodeURIComponent(tmpItem[0])] = decodeURIComponent(tmpItem[1]);\r\n            });\r\n        }\r\n        this._protocol = parser.protocol;\r\n        this._hostname = parser.hostname;\r\n        this._port = parser.port;\r\n        this._pathname = parser.pathname;\r\n        while (this._pathname.length && this._pathname[0] === \"/\") {\r\n            this._pathname = this._pathname.substring(1);\r\n        }\r\n        this._search = parser.search;\r\n        this._params = params;\r\n        this._hash = parser.hash;\r\n        this._host = parser.host;\r\n\r\n        return this;\r\n    }\r\n\r\n    protocol(_: string): this;\r\n    protocol(): string;\r\n    protocol(_?: string): string | this {\r\n        if (!arguments.length) return this._protocol;\r\n        this._protocol = _;\r\n        return this;\r\n    }\r\n\r\n    hostname(_: string): this;\r\n    hostname(): string;\r\n    hostname(_?: string): string | this {\r\n        if (!arguments.length) return this._hostname;\r\n        this._hostname = _;\r\n        return this;\r\n    }\r\n\r\n    port(_: string): this;\r\n    port(): string;\r\n    port(_?: string) {\r\n        if (!arguments.length) return this._port;\r\n        this._port = _;\r\n        return this;\r\n    }\r\n\r\n    search(_: string): this;\r\n    search(): string;\r\n    search(_?: string) {\r\n        if (!arguments.length) return this._search;\r\n        this._search = _;\r\n        return this;\r\n    }\r\n\r\n    pathname(_: string): this;\r\n    pathname(): string;\r\n    pathname(_?: string) {\r\n        if (!arguments.length) return this._pathname;\r\n        this._pathname = _;\r\n        return this;\r\n    }\r\n\r\n    hash(_: string): this;\r\n    hash(): string;\r\n    hash(_?: string) {\r\n        if (!arguments.length) return this._hash;\r\n        this._hash = _;\r\n        return this;\r\n    }\r\n\r\n    host(_: string): this;\r\n    host(): string;\r\n    host(_?: string) {\r\n        if (!arguments.length) return this._host;\r\n        this._host = _;\r\n        return this;\r\n    }\r\n\r\n    params(_: string): this;\r\n    params(): string;\r\n    params(_?: string) {\r\n        if (!arguments.length) return this._params;\r\n        this._params = _;\r\n        return this;\r\n    }\r\n\r\n    param(key: string) {\r\n        return this._params[key];\r\n    }\r\n\r\n    isWsWorkunits() {\r\n        return this._pathname.toLowerCase().indexOf(\"wsworkunits\") >= 0 || this._params[\"Wuid\"];\r\n    }\r\n\r\n    isWorkunitResult() {\r\n        return this.isWsWorkunits() && (this._params[\"Sequence\"] || this._params[\"ResultName\"]);\r\n    }\r\n\r\n    isWsEcl() {\r\n        return this._pathname.toLowerCase().indexOf(\"wsecl\") >= 0 || (this._params[\"QuerySetId\"] && this._params[\"Id\"]);\r\n    }\r\n\r\n    isWsWorkunits_GetStats() {\r\n        return this._pathname.toLowerCase().indexOf(\"wsworkunits/wugetstats\") >= 0 && this._params[\"WUID\"];\r\n    }\r\n\r\n    getUrl(overrides) {\r\n        overrides = overrides || {};\r\n        return (overrides.protocol !== undefined ? overrides.protocol : this._protocol) + \"//\" +\r\n            (overrides.hostname !== undefined ? overrides.hostname : this._hostname) + \":\" +\r\n            (overrides.port !== undefined ? overrides.port : this._port) + \"/\" +\r\n            (overrides.pathname !== undefined ? overrides.pathname : this._pathname);\r\n    }\r\n}\r\n\r\nexport function ESPMappings(mappings) {\r\n    this._mappings = mappings;\r\n    this._reverseMappings = {};\r\n    for (const resultName in this._mappings) {\r\n        this._reverseMappings[resultName] = {};\r\n        for (const key in this._mappings[resultName]) {\r\n            this._reverseMappings[resultName][this._mappings[resultName][key]] = key;\r\n        }\r\n    }\r\n}\r\n\r\nESPMappings.prototype.contains = function (resultName, origField) {\r\n    return Utility.exists(resultName + \".\" + origField, this._mappings);\r\n};\r\n\r\nESPMappings.prototype.mapResult = function (response, resultName) {\r\n    const mapping = this._mappings[resultName];\r\n    if (mapping) {\r\n        response[resultName] = response[resultName].map(function (item) {\r\n            let row = [];\r\n            if (mapping.x && mapping.x instanceof Array) {\r\n                //  LINE Mapping  ---\r\n                row = [];\r\n                for (let i = 0; i < mapping.x.length; ++i) {\r\n                    row.push(item[mapping.y[i]]);\r\n                }\r\n            } else {\r\n                //  Regular Mapping  ---\r\n                for (const key in mapping) {\r\n                    if (mapping[key] === \"label\") {\r\n                        row[0] = item[key];\r\n                    } else if (mapping[key] === \"weight\") {\r\n                        row[1] = item[key];\r\n                    }\r\n                }\r\n            }\r\n            return row;\r\n        }, this);\r\n    }\r\n};\r\n\r\nESPMappings.prototype.mapResponse = function (response) {\r\n    for (const key in response) {\r\n        this.mapResult(response, key);\r\n    }\r\n};\r\n\r\nconst serialize = function (obj) {\r\n    const str = [];\r\n    for (const key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            const val = obj[key];\r\n            if (val !== undefined && val !== null) {\r\n                str.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(val));\r\n            }\r\n        }\r\n    }\r\n    return str.join(\"&\");\r\n};\r\n\r\nlet jsonp = function (url, request, timeout) {\r\n    return new Promise(function (resolve, reject) {\r\n        let respondedTimeout = timeout * 1000;\r\n        const respondedTick = 5000;\r\n        const callbackName = \"jsonp_callback_\" + Math.round(Math.random() * 999999);\r\n        window[callbackName] = function (response) {\r\n            respondedTimeout = 0;\r\n            doCallback();\r\n            resolve(response);\r\n        };\r\n        const script = document.createElement(\"script\");\r\n        script.src = url + (url.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"jsonp=\" + callbackName + \"&\" + serialize(request);\r\n        document.body.appendChild(script);\r\n        const progress = setInterval(function () {\r\n            if (respondedTimeout <= 0) {\r\n                clearInterval(progress);\r\n            } else {\r\n                respondedTimeout -= respondedTick;\r\n                if (respondedTimeout <= 0) {\r\n                    clearInterval(progress);\r\n                    console.log(\"Request timeout:  \" + script.src);\r\n                    doCallback();\r\n                    reject(Error(\"Request timeout:  \" + script.src));\r\n                } else {\r\n                    console.log(\"Request pending (\" + respondedTimeout / 1000 + \" sec):  \" + script.src);\r\n                }\r\n            }\r\n        }, respondedTick);\r\n\r\n        function doCallback() {\r\n            delete window[callbackName];\r\n            document.body.removeChild(script);\r\n        }\r\n    });\r\n};\r\n\r\nexport class Comms extends ESPUrl {\r\n    protected _proxyMappings;\r\n    protected _mappings;\r\n    protected _timeout;\r\n    protected _hipieResults;\r\n    protected _hipieResultsLength;\r\n\r\n    constructor() {\r\n        super();\r\n        this._proxyMappings = {};\r\n        this._mappings = new ESPMappings({});\r\n        this._timeout = TIMEOUT_DEFAULT;\r\n        this._hipieResults = {};\r\n    }\r\n\r\n    hipieResults(_) {\r\n        if (!arguments.length) return this._hipieResults;\r\n        this._hipieResultsLength = 0;\r\n        this._hipieResults = {};\r\n        const context = this;\r\n        _.forEach(function (item) {\r\n            context._hipieResultsLength++;\r\n            context._hipieResults[item.id] = item;\r\n        });\r\n        return this;\r\n    }\r\n\r\n    jsonp(url, request) {\r\n        for (const key in this._proxyMappings) {\r\n            const newUrlParts = url.split(key);\r\n            const newUrl = newUrlParts[0];\r\n            if (newUrlParts.length > 1) {\r\n                const espUrl = new ESPUrl()\r\n                    .url(url)\r\n                    ;\r\n                url = newUrl + this._proxyMappings[key];\r\n                request.IP = espUrl.hostname();\r\n                request.PORT = espUrl.port();\r\n                if (newUrlParts.length > 0) {\r\n                    request.PATH = newUrlParts[1];\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        return jsonp(url, request, this.timeout());\r\n    }\r\n\r\n    ajax(method, url, request?) {\r\n        return new Promise(function (resolve, reject) {\r\n            let uri = url;\r\n            if (method === \"GET\" && request) {\r\n                uri += \"?\" + serialize(request);\r\n            }\r\n            const xhr: any = new XMLHttpRequest();\r\n            xhr.onload = function (e) {\r\n                if (this.status >= 200 && this.status < 300) {\r\n                    resolve(JSON.parse(this.response));\r\n                } else {\r\n                    reject(Error(this.statusText));\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                reject(Error(this.statusText));\r\n            };\r\n            xhr.open(method, uri);\r\n            xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n            if (method === \"GET\") {\r\n                xhr.send();\r\n            } else {\r\n                xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n                xhr.send(serialize(request));\r\n            }\r\n        });\r\n    }\r\n\r\n    get(url, request?) {\r\n        return this.ajax(\"GET\", url, request);\r\n    }\r\n\r\n    post(url, request) {\r\n        return this.ajax(\"POST\", url, request);\r\n    }\r\n\r\n    mappings(_?) {\r\n        if (!arguments.length) return this._mappings;\r\n        this._mappings = new ESPMappings(_);\r\n        return this;\r\n    }\r\n\r\n    proxyMappings(_?) {\r\n        if (!arguments.length) return this._proxyMappings;\r\n        this._proxyMappings = _;\r\n        return this;\r\n    }\r\n\r\n    timeout(_?) {\r\n        if (!arguments.length) return this._timeout;\r\n        this._timeout = _ || TIMEOUT_DEFAULT;\r\n        return this;\r\n    }\r\n}\r\n\r\nexport class Basic extends Comms {\r\n\r\n    protected _cacheCalls;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    cacheCalls(_?) {\r\n        if (!arguments.length) return this._cacheCalls;\r\n        this._cacheCalls = _;\r\n        return this;\r\n    }\r\n\r\n    call(request, callback) {\r\n        const url = this._url + (this._url.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + serialize(request);\r\n        if (this._cacheCalls) {\r\n            const context = this;\r\n            return new Promise(function (resolve, reject) {\r\n                const response = JSON.parse(localStorage.getItem(\"hpcc.viz.\" + url));\r\n                if (!response) {\r\n                    throw Error(\"not cached\");\r\n                }\r\n                if (callback) {\r\n                    console.log(\"Deprecated:  callback, use promise (Basic.prototype.call)\");\r\n                    callback(response);\r\n                }\r\n                resolve(response);\r\n            }).catch(function (response) {\r\n                return context.get(url).then(function (response2) {\r\n                    localStorage.setItem(\"hpcc.viz.\" + url, JSON.stringify(response2));\r\n                    if (callback) {\r\n                        console.log(\"Deprecated:  callback, use promise (Basic.prototype.call)\");\r\n                        callback(response2);\r\n                    }\r\n                    return response2;\r\n                });\r\n            });\r\n        } else {\r\n            localStorage.removeItem(\"hpcc.viz.\" + url);\r\n            return this.get(url).then(function (response) {\r\n                if (callback) {\r\n                    console.log(\"Deprecated:  callback, use promise (Basic.prototype.call)\");\r\n                    callback(response);\r\n                }\r\n                return response;\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nfunction locateRoxieResponse(response): object {\r\n    // v5 and v6 compatible ---\r\n    for (const key in response) {\r\n        if (response[key].Row && response[key].Row instanceof Array) {\r\n            return response;\r\n        }\r\n        let retVal;\r\n        if (typeof (response[key]) !== \"string\") {\r\n            retVal = locateRoxieResponse(response[key]);\r\n        }\r\n        if (retVal) {\r\n            return retVal;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction locateRoxieException(response) {\r\n    for (const key in response) {\r\n        if (response[key].Exception && response[key].Exception instanceof Array) {\r\n            return response[key];\r\n        }\r\n        const retVal = locateRoxieException(response[key]);\r\n        if (retVal) {\r\n            return retVal;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nexport class WsECL extends Comms {\r\n\r\n    protected _target;\r\n    protected _query;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this._port = \"8002\";\r\n        this._target = \"\";\r\n        this._query = \"\";\r\n    }\r\n\r\n    url(_?) {\r\n        const retVal = super.url.apply(this, arguments);\r\n        if (arguments.length) {\r\n            //  http://localhost:8010/esp/files/stub.htm?QuerySetId=roxie&Id=stock.3&Widget=QuerySetDetailsWidget\r\n            this._port = this._port === \"8010\" ? \"8002\" : this._port;  //  Need a better way  ---\r\n            for (const key in this._params) {\r\n                switch (key) {\r\n                    case \"QuerySetId\":\r\n                        this.target(this._params[key]);\r\n                        break;\r\n                    case \"Id\":\r\n                        this.query(this._params[key]);\r\n                        break;\r\n                }\r\n            }\r\n\r\n            let pathParts;\r\n            let queryParts;\r\n            if (!this._target || !this._query) {\r\n                // http://localhost:8002/WsEcl/forms/default/query/roxie/wecare\r\n                pathParts = this._pathname.split(\"/query/\");\r\n                if (pathParts.length >= 2) {\r\n                    queryParts = pathParts[1].split(\"/\");\r\n                    if (queryParts.length >= 2) {\r\n                        this.target(queryParts[0]);\r\n                        this.query(queryParts[1]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n    target(_?) {\r\n        if (!arguments.length) return this._target;\r\n        this._target = _;\r\n        return this;\r\n    }\r\n\r\n    query(_?) {\r\n        if (!arguments.length) return this._query;\r\n        this._query = _;\r\n        return this;\r\n    }\r\n\r\n    constructUrl() {\r\n        return Comms.prototype.getUrl.call(this, {\r\n            pathname: \"WsEcl/submit/query/\" + this._target + \"/\" + this._query + \"/json\"\r\n        });\r\n    }\r\n\r\n    call(target, request, callback) {\r\n        target = target || {};\r\n        target.target = target.target || this._target;\r\n        target.query = target.query || this._query;\r\n        const context = this;\r\n        const url = this.getUrl({\r\n            pathname: \"WsEcl/submit/query/\" + target.target + \"/\" + target.query + \"/json\"\r\n        });\r\n        return this.jsonp(url, request).then(function (response: any) {\r\n            let _response = locateRoxieResponse(response);\r\n            if (!_response) {\r\n                _response = locateRoxieException(response);\r\n            }\r\n            response = _response;\r\n\r\n            // Check for exceptions\r\n            if (response.Exception) {\r\n                throw Error(response.Exception.reduce(function (previousValue, exception, index, array) {\r\n                    if (previousValue.length) {\r\n                        previousValue += \"\\n\";\r\n                    }\r\n                    return previousValue + exception.Source + \" \" + exception.Code + \":  \" + exception.Message;\r\n                }, \"\"));\r\n            }\r\n            // Remove \"response.result.Row\"\r\n            for (const key in response) {\r\n                if (response[key].Row) {\r\n                    response[key] = response[key].Row.map(espRowFix);\r\n                }\r\n            }\r\n            context._mappings.mapResponse(response);\r\n            if (callback) {\r\n                console.log(\"Deprecated:  callback, use promise (WsECL.prototype.call)\");\r\n                callback(response);\r\n            }\r\n            return response;\r\n        });\r\n    }\r\n\r\n    send(request, callback) {\r\n        return this.call({ target: this._target, query: this._query }, request, callback);\r\n    }\r\n}\r\n\r\nexport class WsWorkunits extends Comms {\r\n\r\n    protected _wuid = \"\";\r\n    protected _jobname = \"\";\r\n    protected _sequence = null;\r\n    protected _resultName = null;\r\n\r\n    protected _fetchResultNamesPromise = null;\r\n    protected _fetchResultPromise = {};\r\n    protected _resultNameCache = {};\r\n    protected _resultNameCacheCount = 0;\r\n    protected _total;\r\n\r\n    constructor() {\r\n        super();\r\n        this._port = \"8010\";\r\n    }\r\n\r\n    url(_?) {\r\n        const retVal = Comms.prototype.url.apply(this, arguments);\r\n        if (arguments.length) {\r\n            //  http://localhost:8010/WsWorkunit/WuResult?Wuid=xxx&ResultName=yyy\r\n            for (const key in this._params) {\r\n                switch (key) {\r\n                    case \"Wuid\":\r\n                        this.wuid(this._params[key]);\r\n                        break;\r\n                    case \"ResultName\":\r\n                        this.resultName(this._params[key]);\r\n                        break;\r\n                    case \"Sequence\":\r\n                        this.sequence(this._params[key]);\r\n                        break;\r\n                }\r\n            }\r\n            if (!this._wuid) {\r\n                //  http://localhost:8010/WsWorkunits/res/W20140922-213329/c:/temp/index.html\r\n                const urlParts = this._url.split(\"/res/\");\r\n                if (urlParts.length >= 2) {\r\n                    const urlParts2 = urlParts[1].split(\"/\");\r\n                    this.wuid(urlParts2[0]);\r\n                }\r\n            }\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n    wuid(_?) {\r\n        if (!arguments.length) return this._wuid;\r\n        this._wuid = _;\r\n        return this;\r\n    }\r\n\r\n    jobname(_?) {\r\n        if (!arguments.length) return this._jobname;\r\n        this._jobname = _;\r\n        return this;\r\n    }\r\n\r\n    sequence(_?) {\r\n        if (!arguments.length) return this._sequence;\r\n        this._sequence = _;\r\n        return this;\r\n    }\r\n\r\n    resultName(_?) {\r\n        if (!arguments.length) return this._resultName;\r\n        this._resultName = _;\r\n        return this;\r\n    }\r\n\r\n    appendParam(label, value, params) {\r\n        if (value) {\r\n            if (params) {\r\n                params += \"&\";\r\n            }\r\n            return params + label + \"=\" + value;\r\n        }\r\n        return params;\r\n    }\r\n\r\n    constructUrl() {\r\n        const url = Comms.prototype.getUrl.call(this, {\r\n            pathname: \"WsWorkunits/res/\" + this._wuid + \"/\"\r\n        });\r\n        let params = \"\";\r\n        params = this.appendParam(\"ResultName\", this._resultName, params);\r\n        return url + (params ? \"?\" + params : \"\");\r\n    }\r\n\r\n    _fetchResult(target, callback, skipMapping) {\r\n        target = target || {};\r\n        if (!this._fetchResultPromise[target.resultname]) {\r\n            target._start = target._start || 0;\r\n            target._count = target._count || -1;\r\n            const url = this.getUrl({\r\n                pathname: \"WsWorkunits/WUResult.json\"\r\n            });\r\n            const request = {\r\n                Wuid: target.wuid,\r\n                ResultName: target.resultname,\r\n                SuppressXmlSchema: true,\r\n                Start: target._start,\r\n                Count: target._count\r\n            };\r\n            this._resultNameCache[target.resultname] = {};\r\n            const context = this;\r\n            this._fetchResultPromise[target.resultname] = this.jsonp(url, request).then(function (response: any) {\r\n                // Remove \"xxxResponse.Result\"\r\n                for (const key in response) {\r\n                    if (!response[key].Result) {\r\n                        throw new Error(\"No result found.\");\r\n                    }\r\n                    context._total = response[key].Total;\r\n                    response = response[key].Result;\r\n                    for (const responseKey in response) {\r\n                        response = response[responseKey].Row.map(espRowFix);\r\n                        break;\r\n                    }\r\n                    break;\r\n                }\r\n                context._resultNameCache[target.resultname] = response;\r\n                if (!skipMapping) {\r\n                    context._mappings.mapResult(context._resultNameCache, target.resultname);\r\n                }\r\n                if (callback) {\r\n                    console.log(\"Deprecated:  callback, use promise (WsWorkunits.prototype._fetchResult)\");\r\n                    callback(context._resultNameCache[target.resultname]);\r\n                }\r\n                return context._resultNameCache[target.resultname];\r\n            });\r\n        }\r\n        return this._fetchResultPromise[target.resultname];\r\n    }\r\n\r\n    fetchResult(target, callback, skipMapping) {\r\n        if (target.wuid) {\r\n            return this._fetchResult(target, callback, skipMapping);\r\n        } else if (target.jobname) {\r\n            const context = this;\r\n            return this.WUQuery(target, function (response) {\r\n                target.wuid = response[0].Wuid;\r\n                return context._fetchResult(target, callback, skipMapping);\r\n            });\r\n        }\r\n    }\r\n\r\n    WUQuery(_request, callback) {\r\n        const url = this.getUrl({\r\n            pathname: \"WsWorkunits/WUQuery.json\"\r\n        });\r\n        const request = {\r\n            Jobname: _request.jobname,\r\n            Count: 1\r\n        };\r\n\r\n        this._resultNameCache = {};\r\n        this._resultNameCacheCount = 0;\r\n        return this.jsonp(url, request).then(function (response: any) {\r\n            if (!Utility.exists(\"WUQueryResponse.Workunits.ECLWorkunit\", response)) {\r\n                throw Error(\"No workunit found.\");\r\n            }\r\n            response = response.WUQueryResponse.Workunits.ECLWorkunit;\r\n            if (callback) {\r\n                console.log(\"Deprecated:  callback, use promise (WsWorkunits.prototype.WUQuery)\");\r\n                callback(response);\r\n            }\r\n            return response;\r\n        });\r\n    }\r\n\r\n    fetchResultNames(callback?) {\r\n        if (!this._fetchResultNamesPromise) {\r\n            const url = this.getUrl({\r\n                pathname: \"WsWorkunits/WUInfo.json\"\r\n            });\r\n            const request = {\r\n                Wuid: this._wuid,\r\n                TruncateEclTo64k: true,\r\n                IncludeExceptions: false,\r\n                IncludeGraphs: false,\r\n                IncludeSourceFiles: false,\r\n                IncludeResults: true,\r\n                IncludeResultsViewNames: false,\r\n                IncludeVariables: false,\r\n                IncludeTimers: false,\r\n                IncludeResourceURLs: false,\r\n                IncludeDebugValues: false,\r\n                IncludeApplicationValues: false,\r\n                IncludeWorkflows: false,\r\n                IncludeXmlSchemas: false,\r\n                SuppressResultSchemas: true\r\n            };\r\n\r\n            this._resultNameCache = {};\r\n            this._resultNameCacheCount = 0;\r\n            const context = this;\r\n            this._fetchResultNamesPromise = this.jsonp(url, request).then(function (response: any) {\r\n                if (Utility.exists(\"WUInfoResponse.Workunit.Archived\", response) && response.WUInfoResponse.Workunit.Archived) {\r\n                    console.log(\"WU is archived:  \" + url + \" \" + JSON.stringify(request));\r\n                }\r\n                if (Utility.exists(\"WUInfoResponse.Workunit.Results.ECLResult\", response)) {\r\n                    response.WUInfoResponse.Workunit.Results.ECLResult.map(function (item) {\r\n                        context._resultNameCache[item.Name] = [];\r\n                        ++context._resultNameCacheCount;\r\n                    });\r\n                }\r\n                if (callback) {\r\n                    console.log(\"Deprecated:  callback, use promise (WsWorkunits.prototype.fetchResultNames)\");\r\n                    callback(context._resultNameCache);\r\n                }\r\n                return context._resultNameCache;\r\n            });\r\n        }\r\n        return this._fetchResultNamesPromise;\r\n    }\r\n\r\n    fetchResults(callback, skipMapping) {\r\n        const context = this;\r\n        return this.fetchResultNames().then(function (response) {\r\n            const fetchArray = [];\r\n            for (const key in context._resultNameCache) {\r\n                fetchArray.push(context.fetchResult({ wuid: context._wuid, resultname: key }, null, skipMapping));\r\n            }\r\n            return Promise.all(fetchArray).then(function (responseArray) {\r\n                if (callback) {\r\n                    console.log(\"Deprecated:  callback, use promise (WsWorkunits.prototype.fetchResults)\");\r\n                    callback(context._resultNameCache);\r\n                }\r\n                return context._resultNameCache;\r\n            });\r\n        });\r\n    }\r\n\r\n    postFilter(request, response) {\r\n        const retVal = {};\r\n        for (const key in response) {\r\n            retVal[key] = response[key].filter(function (row, idx) {\r\n                for (const request_key in request) {\r\n                    // tslint:disable-next-line:triple-equals\r\n                    if (row[request_key] !== undefined && request[request_key] !== undefined && row[request_key] != request[request_key]) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n        this._mappings.mapResponse(retVal);\r\n        return retVal;\r\n    }\r\n\r\n    send(request, callback) {\r\n        const context = this;\r\n        if (!this._resultNameCacheCount) {\r\n            this.fetchResults(function (response) {\r\n                callback(context.postFilter(request, response));\r\n            }, true);\r\n        } else {\r\n            callback(context.postFilter(request, this._resultNameCache));\r\n        }\r\n    }\r\n}\r\n\r\nfunction WsWorkunits_GetStats() {\r\n    Comms.call(this);\r\n\r\n    this._port = \"8010\";\r\n    this._wuid = null;\r\n}\r\nWsWorkunits_GetStats.prototype = Object.create(Comms.prototype);\r\n\r\nWsWorkunits_GetStats.prototype.url = function (_) {\r\n    const retVal = Comms.prototype.url.apply(this, arguments);\r\n    if (arguments.length) {\r\n        //  http://localhost:8010/WsWorkunits/WUGetStats?WUID=\"xxx\"\r\n        for (const key in this._params) {\r\n            switch (key) {\r\n                case \"WUID\":\r\n                    this.wuid(this._params[key]);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    return retVal;\r\n};\r\n\r\nWsWorkunits_GetStats.prototype.wuid = function (_) {\r\n    if (!arguments.length) return this._wuid;\r\n    this._wuid = _;\r\n    return this;\r\n};\r\n\r\nWsWorkunits_GetStats.prototype.constructUrl = function () {\r\n    return Comms.prototype.getUrl.call(this, {\r\n        pathname: \"WsWorkunits/WUGetStats?WUID=\" + this._wuid\r\n    });\r\n};\r\n\r\nWsWorkunits_GetStats.prototype.send = function (request, callback) {\r\n    const url = this.getUrl({\r\n        pathname: \"WsWorkunits/WUGetStats.json?WUID=\" + this._wuid\r\n    });\r\n    return this.jsonp(url, request).then(function (response) {\r\n        if (Utility.exists(\"WUGetStatsResponse.Statistics.WUStatisticItem\", response)) {\r\n            if (callback) {\r\n                console.log(\"Deprecated:  callback, use promise (WsWorkunits_GetStats.prototype.send)\");\r\n                callback(response.WUGetStatsResponse.Statistics.WUStatisticItem);\r\n            }\r\n            return response.WUGetStatsResponse.Statistics.WUStatisticItem;\r\n        } else {\r\n            if (callback) {\r\n                console.log(\"Deprecated:  callback, use promise (WsWorkunits_GetStats.prototype.send)\");\r\n                callback([]);\r\n            }\r\n            return [];\r\n        }\r\n    });\r\n};\r\n\r\n//  HIPIERoxie  ---\r\nfunction HIPIERoxie() {\r\n    Comms.call(this);\r\n}\r\nHIPIERoxie.prototype = Object.create(Comms.prototype);\r\n\r\nHIPIERoxie.prototype.fetchResults = function (request, callback) {\r\n    const url = this.getUrl({});\r\n    this._resultNameCache = {};\r\n    this._resultNameCacheCount = 0;\r\n    const context = this;\r\n    return this.jsonp(url, request).then(function (response) {\r\n        let _response = locateRoxieResponse(response);\r\n        if (!_response) {\r\n            _response = locateRoxieException(response);\r\n        }\r\n        response = _response;\r\n\r\n        // Check for exceptions\r\n        if (response.Exception) {\r\n            throw Error(response.Exception.reduce(function (previousValue, exception, index, array) {\r\n                if (previousValue.length) {\r\n                    previousValue += \"\\n\";\r\n                }\r\n                return previousValue + exception.Source + \" \" + exception.Code + \":  \" + exception.Message;\r\n            }, \"\"));\r\n        }\r\n        // Remove \"response.result.Row\"\r\n        for (const key in response) {\r\n            if (response[key].Row) {\r\n                context._resultNameCache[key] = response[key].Row.map(espRowFix);\r\n                ++context._resultNameCacheCount;\r\n            }\r\n        }\r\n        if (callback) {\r\n            console.log(\"Deprecated:  callback, use promise (HIPIERoxie.prototype.fetchResults)\");\r\n            callback(context._resultNameCache);\r\n        }\r\n        return context._resultNameCache;\r\n    });\r\n};\r\n\r\nHIPIERoxie.prototype.fetchResult = function (name, callback) {\r\n    const context = this;\r\n    return new Promise(function (resolve, reject) {\r\n        if (callback) {\r\n            console.log(\"Deprecated:  callback, use promise (HIPIERoxie.prototype.fetchResult)\");\r\n            callback(context._resultNameCache[name]);\r\n        }\r\n        resolve(context._resultNameCache[name]);\r\n    });\r\n};\r\n\r\nHIPIERoxie.prototype.call = function (request, callback) {\r\n    const context = this;\r\n    return this.fetchResults(request, callback).then(function (response) {\r\n        const retVal = {};\r\n        for (const hipieKey in context._hipieResults) {\r\n            const item = context._hipieResults[hipieKey];\r\n            retVal[item.id] = response[item.from];\r\n        }\r\n        return retVal;\r\n    });\r\n};\r\n\r\n//  HIPIEWorkunit  ---\r\nfunction HIPIEWorkunit() {\r\n    WsWorkunits.call(this);\r\n}\r\nHIPIEWorkunit.prototype = Object.create(WsWorkunits.prototype);\r\n\r\nHIPIEWorkunit.prototype.fetchResults = function (callback) {\r\n    const context = this;\r\n    return WsWorkunits.prototype.fetchResultNames.call(this).then(function (response) {\r\n        const fetchArray = [];\r\n        for (const key in context._hipieResults) {\r\n            const item = context._hipieResults[key];\r\n            fetchArray.push(context.fetchResult(item.from));\r\n        }\r\n        return Promise.all(fetchArray).then(function (response2) {\r\n            if (callback) {\r\n                console.log(\"Deprecated:  callback, use promise (HIPIEWorkunit.prototype.fetchResults)\");\r\n                callback(context._resultNameCache);\r\n            }\r\n            return context._resultNameCache;\r\n        });\r\n    });\r\n};\r\n\r\nHIPIEWorkunit.prototype.fetchResult = function (name, callback) {\r\n    return WsWorkunits.prototype.fetchResult.call(this, { wuid: this._wuid, resultname: name }).then(function (response) {\r\n        if (callback) {\r\n            console.log(\"Deprecated:  callback, use promise (HIPIEWorkunit.prototype.fetchResult)\");\r\n            callback(response);\r\n        }\r\n        return response;\r\n    });\r\n};\r\n\r\nHIPIEWorkunit.prototype.call = function (request, callback) {\r\n    const context = this;\r\n    if (request.refresh || !this._resultNameCache || !this._resultNameCacheCount) {\r\n        return this.fetchResults(callback).then(function (response) {\r\n            return filterResults(request);\r\n        });\r\n    } else {\r\n        return new Promise(function (resolve, reject) {\r\n            resolve(filterResults(request));\r\n        });\r\n    }\r\n\r\n    function filterResults(request2) {\r\n        const changedFilter = {};\r\n        for (const key in request2) {\r\n            if (request2[key + \"_changed\"] !== undefined) {\r\n                changedFilter[key] = {\r\n                    value: request2[key]\r\n                };\r\n            }\r\n        }\r\n        const retVal = {};\r\n        for (const hipieKey in context._hipieResults) {\r\n            const hipieResult = context._hipieResults[hipieKey];\r\n            const outputFilter = {};\r\n            for (let i = 0; i < hipieResult.filters.length; ++i) {\r\n                const filter = hipieResult.filters[i];\r\n                if (!filter.isRange()) {\r\n                    outputFilter[filter.fieldid] = changedFilter[filter.fieldid] || { value: undefined };\r\n                    outputFilter[filter.fieldid].filter = filter;\r\n                }\r\n            }\r\n            retVal[hipieResult.id] = context._resultNameCache[hipieResult.from].filter(function (row) {\r\n                for (const key2 in outputFilter) {\r\n                    if (!outputFilter[key2].filter.matches(row, outputFilter[key2].value)) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n        }\r\n        return retVal;\r\n    }\r\n};\r\n\r\n//  HIPIEDatabomb  ---\r\nfunction HIPIEDatabomb() {\r\n    HIPIEWorkunit.call(this);\r\n}\r\nHIPIEDatabomb.prototype = Object.create(HIPIEWorkunit.prototype);\r\n\r\nHIPIEDatabomb.prototype.databomb = function (_) {\r\n    if (!arguments.length) return this._databomb;\r\n    this._databomb = _;\r\n    return this;\r\n};\r\n\r\nHIPIEDatabomb.prototype.databombOutput = function (from, id) {\r\n    if (!arguments.length) return undefined;\r\n    this._resultNameCacheCount++;\r\n    if (this._databomb instanceof Array) {\r\n        this._resultNameCache[from] = this._databomb.map(espRowFix);\r\n    } else {\r\n        this._resultNameCache[from] = this._databomb[from].map(espRowFix);\r\n    }\r\n    return this;\r\n};\r\n\r\nHIPIEDatabomb.prototype.fetchResults = function (callback) {\r\n    const context = this;\r\n    return new Promise(function (resolve, reject) {\r\n        if (callback) {\r\n            console.log(\"Deprecated:  callback, use promise (HIPIEDatabomb.prototype.fetchResults)\");\r\n            callback(context._resultNameCache);\r\n        }\r\n        resolve(context._resultNameCache);\r\n    });\r\n};\r\n\r\nexport function createESPConnection(url) {\r\n    url = url || document.URL;\r\n    const testURL = new ESPUrl()\r\n        .url(url)\r\n        ;\r\n    if (testURL.isWsWorkunits_GetStats()) {\r\n        return new WsWorkunits_GetStats()\r\n            .url(url)\r\n            ;\r\n    }\r\n    if (testURL.isWsWorkunits()) {\r\n        return new WsWorkunits()\r\n            .url(url)\r\n            ;\r\n    }\r\n    if (testURL.isWsEcl()) {\r\n        return new WsECL()\r\n            .url(url)\r\n            ;\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function hookJsonp(func) {\r\n    jsonp = func;\r\n}\r\n\r\nexport {\r\n    HIPIEWorkunit,\r\n    HIPIERoxie,\r\n    HIPIEDatabomb\r\n};\r\n","import { Utility } from \"@hpcc-js/common\";\r\nimport * as Comms from \"./Comms\";\r\n\r\nfunction nestedRowFix(row) {\r\n    if (row.Row && row.Row instanceof Array) {\r\n        return row.Row.map(nestedRowFix);\r\n    } else if (row instanceof Object) {\r\n        for (const key in row) {\r\n            row[key] = nestedRowFix(row[key]);\r\n        }\r\n    }\r\n    return row;\r\n}\r\n\r\n//  Basic Comms  ---\r\nlet enableBasicCommsCache = false;\r\nlet basicCommsCache = {};\r\nfunction BasicComms() {\r\n    Comms.Basic.call(this);\r\n}\r\nBasicComms.prototype = Object.create(Comms.Basic.prototype);\r\n\r\nBasicComms.prototype.jsonp = function (url, request) {\r\n    const requestStr = JSON.stringify(request);\r\n    if (enableBasicCommsCache && basicCommsCache[url] && basicCommsCache[url][requestStr]) {\r\n        return Promise.resolve(basicCommsCache[url][requestStr]);\r\n    }\r\n    return Comms.Basic.prototype.jsonp.apply(this, arguments).then(function (response) {\r\n        if (enableBasicCommsCache) {\r\n            if (!basicCommsCache[url]) {\r\n                basicCommsCache[url] = {};\r\n            }\r\n            basicCommsCache[url][requestStr] = response;\r\n        }\r\n        return response;\r\n    });\r\n};\r\n\r\n//  WsWorkunits  ---\r\nfunction WsWorkunits(baseUrl) {\r\n    BasicComms.call(this);\r\n\r\n    this.url(baseUrl + \"WsWorkunits/\");\r\n}\r\nWsWorkunits.prototype = Object.create(BasicComms.prototype);\r\n\r\nWsWorkunits.prototype.wuQuery = function (options) {\r\n    const url = this.getUrl({\r\n        pathname: \"WsWorkunits/WUQuery.json\"\r\n    });\r\n    const request = {\r\n        Wuid: \"\",\r\n        Type: \"\",\r\n        Cluster: \"\",\r\n        RoxieCluster: \"\",\r\n        Owner: \"\",\r\n        State: \"\",\r\n        StartDate: \"\",\r\n        EndDate: \"\",\r\n        ECL: \"\",\r\n        Jobname: \"\",\r\n        LogicalFile: \"\",\r\n        LogicalFileSearchType: \"\",\r\n        /*\r\n        ApplicationValues>\r\n         ApplicationValue>\r\n          Application: \"\",\r\n          Name: \"\",\r\n          Value: \"\",\r\n         /ApplicationValue>\r\n        /ApplicationValues>\r\n        */\r\n        After: \"\",\r\n        Before: \"\",\r\n        Count: \"\",\r\n        PageSize: 100,\r\n        PageStartFrom: 0,\r\n        PageEndAt: \"\",\r\n        LastNDays: \"\",\r\n        Sortby: \"\",\r\n        Descending: 0,\r\n        CacheHint: \"\"\r\n    };\r\n    for (const key in options) {\r\n        request[key] = options[key];\r\n    }\r\n    return this.jsonp(url, request).then(function (response) {\r\n        if (response.WUQueryResponse && response.WUQueryResponse.Workunits) {\r\n            return response.WUQueryResponse.Workunits.ECLWorkunit;\r\n        }\r\n        return [];\r\n    });\r\n};\r\n\r\n//  Workunit  ---\r\nfunction Workunit(baseUrl, wuid) {\r\n    BasicComms.call(this);\r\n\r\n    this.url(baseUrl + \"WsWorkunits/\");\r\n    this._wuid = wuid;\r\n}\r\nWorkunit.prototype = Object.create(BasicComms.prototype);\r\n\r\nWorkunit.prototype.wuInfo = function (options) {\r\n    const url = this.getUrl({\r\n        pathname: \"WsWorkunits/WUInfo.json\"\r\n    });\r\n    const request = {\r\n        Wuid: this._wuid,\r\n        TruncateEclTo64k: true,\r\n        IncludeExceptions: false,\r\n        IncludeGraphs: false,\r\n        IncludeSourceFiles: false,\r\n        IncludeResults: false,\r\n        IncludeResultsViewNames: false,\r\n        IncludeVariables: false,\r\n        IncludeTimers: false,\r\n        IncludeResourceURLs: false,\r\n        IncludeDebugValues: false,\r\n        IncludeApplicationValues: false,\r\n        IncludeWorkflows: false,\r\n        IncludeXmlSchemas: false,\r\n        SuppressResultSchemas: true\r\n    };\r\n    for (const key in options) {\r\n        request[key] = options[key];\r\n    }\r\n    return this.jsonp(url, request).then(function (response) {\r\n        if (enableBasicCommsCache) {\r\n            const retVal = { WUInfoResponse: { Workunit: {} } };\r\n            for (const key in options) {\r\n                const includeKey = key.substring(7);\r\n                retVal.WUInfoResponse.Workunit[includeKey] = response.WUInfoResponse.Workunit[includeKey];\r\n            }\r\n            basicCommsCache[url][JSON.stringify(request)] = retVal;\r\n        }\r\n        return response;\r\n    });\r\n};\r\n\r\nWorkunit.prototype.wuUpdate = function (options) {\r\n    const url = this.getUrl({\r\n        pathname: \"WsWorkunits/WUUpdate.json\"\r\n    });\r\n    const request = {\r\n        Wuid: this._wuid\r\n    };\r\n    for (const key in options) {\r\n        request[key] = options[key];\r\n    }\r\n    return this.post(url, request);\r\n};\r\n\r\nWorkunit.prototype.appData = function (appID, key, _) {\r\n    if (arguments.length === 2) {\r\n        return this.wuInfo({\r\n            IncludeApplicationValues: true\r\n        }).then(function (response) {\r\n            let persistString;\r\n            if (response.WUInfoResponse && response.WUInfoResponse.Workunit && response.WUInfoResponse.Workunit.ApplicationValues && response.WUInfoResponse.Workunit.ApplicationValues.ApplicationValue) {\r\n                response.WUInfoResponse.Workunit.ApplicationValues.ApplicationValue.filter(function (row) {\r\n                    return row.Application === appID && row.Name === key;\r\n                }).forEach(function (row) {\r\n                    persistString = row.Value;\r\n                });\r\n            }\r\n            return persistString;\r\n        });\r\n    } else if (arguments.length === 3) {\r\n        return this.wuUpdate({\r\n            \"ApplicationValues.ApplicationValue.0.Application\": appID,\r\n            \"ApplicationValues.ApplicationValue.0.Name\": key,\r\n            \"ApplicationValues.ApplicationValue.0.Value\": _,\r\n            \"ApplicationValues.ApplicationValue.itemcount\": 1\r\n        });\r\n    }\r\n};\r\n\r\nWorkunit.prototype.results = function () {\r\n    const context = this;\r\n    return this.wuInfo({\r\n        IncludeResults: true\r\n    }).then(function (response) {\r\n        let retVal = [];\r\n        if (Utility.exists(\"WUInfoResponse.Workunit.Results.ECLResult\", response)) {\r\n            retVal = response.WUInfoResponse.Workunit.Results.ECLResult.map(function (result) {\r\n                return new WUResult(context.getUrl({ pathname: \"WsWorkunits/\" }), context._wuid, result.Name);\r\n            });\r\n        }\r\n        return retVal;\r\n    });\r\n};\r\n\r\nWorkunit.prototype.result = function (dataSource, resultName) {\r\n    dataSource = dataSource || this._wuid;\r\n    return createResult(dataSource, resultName);\r\n};\r\n\r\n//  Workunit Result  ---\r\nfunction WUResult(baseUrl, wuid, name) {\r\n    BasicComms.call(this);\r\n    this.url(baseUrl + \"WUResult.json\");\r\n    this._wuid = wuid;\r\n    this._name = name;\r\n    this._xmlSchema = null;\r\n}\r\nWUResult.prototype = Object.create(BasicComms.prototype);\r\n\r\nWUResult.prototype.wuid = function (_) {\r\n    if (!arguments.length) return this._wuid;\r\n    this._wuid = _;\r\n    return this;\r\n};\r\n\r\nWUResult.prototype.name = function (_) {\r\n    if (!arguments.length) return this._name;\r\n    this._name = _;\r\n    return this;\r\n};\r\n\r\nWUResult.prototype.query = function (options, filter) {\r\n    options = options || {};\r\n    filter = filter || {};\r\n    const request = {\r\n        Wuid: this._wuid,\r\n        ResultName: this._name,\r\n        SuppressXmlSchema: true,\r\n        Start: 0,\r\n        Count: -1\r\n    };\r\n    for (const key in options) {\r\n        request[key] = options[key];\r\n    }\r\n    let filterIdx = 0;\r\n    for (const fKey in filter) {\r\n        request[\"FilterBy.NamedValue.\" + filterIdx + \".Name\"] = fKey;\r\n        request[\"FilterBy.NamedValue.\" + filterIdx + \".Value\"] = filter[fKey];\r\n        ++filterIdx;\r\n    }\r\n    if (filterIdx) {\r\n        request[\"FilterBy.NamedValue.itemcount\"] = filterIdx;\r\n    }\r\n    const context = this;\r\n    return this.jsonp(this.url(), request).then(function (response) {\r\n        if (response.WUResultResponse &&\r\n            response.WUResultResponse.Result &&\r\n            response.WUResultResponse.Result[context._name]) {\r\n            if (enableBasicCommsCache) {\r\n                basicCommsCache[context.url()][JSON.stringify(request)] = {\r\n                    WUResultResponse: {\r\n                        Result: response.WUResultResponse.Result\r\n                    }\r\n                };\r\n            }\r\n            context._xmlSchema = response.WUResultResponse.Result.XmlSchema;\r\n            return nestedRowFix(response.WUResultResponse.Result[context._name]);\r\n        }\r\n        return [];\r\n    });\r\n};\r\n\r\n//  Logical File  ---\r\nfunction LogicalFile(baseUrl, logicalName) {\r\n    BasicComms.call(this);\r\n    this.url(baseUrl + \"WUResult.json\");\r\n    this._logicalName = logicalName;\r\n    this._xmlSchema = null;\r\n}\r\nLogicalFile.prototype = Object.create(BasicComms.prototype);\r\n\r\nLogicalFile.prototype.query = function (options, filter) {\r\n    options = options || {};\r\n    filter = filter || {};\r\n    const request = {\r\n        Cluster: \"hthor\",  //  TODO:  Should not be needed  ---\r\n        LogicalName: this._logicalName,\r\n        SuppressXmlSchema: this._xmlSchema !== null,\r\n        Start: 0,\r\n        Count: -1\r\n    };\r\n    for (const key in options) {\r\n        request[key] = options[key];\r\n    }\r\n    let filterIdx = 0;\r\n    for (const fKey in filter) {\r\n        request[\"FilterBy.NamedValue.\" + filterIdx + \".Name\"] = fKey;\r\n        request[\"FilterBy.NamedValue.\" + filterIdx + \".Value\"] = filter[fKey];\r\n        ++filterIdx;\r\n    }\r\n    if (filterIdx) {\r\n        request[\"FilterBy.NamedValue.itemcount\"] = filterIdx;\r\n    }\r\n    const context = this;\r\n    return this.jsonp(this.url(), request).then(function (response) {\r\n        if (response.WUResultResponse &&\r\n            response.WUResultResponse.Result &&\r\n            response.WUResultResponse.Result.Row) {\r\n            context._xmlSchema = response.WUResultResponse.Result.XmlSchema;\r\n            return nestedRowFix(response.WUResultResponse.Result.Row);\r\n        }\r\n        return [];\r\n    });\r\n};\r\n\r\n//  Roxie Query  ---\r\nfunction RoxieQuery(baseUrl, resultName) {\r\n    BasicComms.call(this);\r\n    const urlParts = baseUrl.split(\"/\");\r\n    let queryName = urlParts.pop();\r\n    if (queryName.toLowerCase() === \"json\") {\r\n        queryName = urlParts.pop();\r\n    }\r\n    this._queryName = queryName;\r\n    this._resultName = resultName;\r\n    this.url(urlParts.join(\"/\") + \"/\" + queryName + \"/json\");\r\n}\r\nRoxieQuery.prototype = Object.create(BasicComms.prototype);\r\n\r\nfunction trimRight(str) {\r\n    if (str && str.replace) {\r\n        return str.replace(/ +$/, \"\");\r\n    }\r\n    return str;\r\n}\r\n\r\nfunction postFilter(results, filter) {\r\n    return results.filter(function (row) {\r\n        for (const key in filter) {\r\n            if (row[key] !== undefined && trimRight(filter[key]) !== trimRight(row[key])) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    });\r\n}\r\n\r\nfunction locateRoxieResponse(response) {\r\n    // v5 and v6 compatible ---\r\n    for (const key in response) {\r\n        if (response[key].Row && response[key].Row instanceof Array) {\r\n            return response;\r\n        }\r\n        const retVal = locateRoxieResponse(response[key]);\r\n        if (retVal) {\r\n            return retVal;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nRoxieQuery.prototype.query = function (options, filter) {\r\n    options = options || {};\r\n    filter = filter || {};\r\n    const request = {\r\n    };\r\n    for (const key in options) {\r\n        request[key] = options[key];\r\n    }\r\n    for (const fKey in filter) {\r\n        request[fKey] = filter[fKey];\r\n    }\r\n    const context = this;\r\n    return this.jsonp(this.url(), request).then(function (response) {\r\n        response = locateRoxieResponse(response);\r\n        if (response) {\r\n            if (context._resultName) {\r\n                if (response && response[context._resultName] && response[context._resultName].Row) {\r\n                    return nestedRowFix(postFilter(response[context._resultName].Row, filter));\r\n                }\r\n            } else {\r\n                for (const key in response) {\r\n                    if (response[key].Row) {\r\n                        return nestedRowFix(postFilter(response[key].Row, filter));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return [];\r\n    });\r\n};\r\n\r\nexport function createResult(_espUrl, dataSource, resultName?) {\r\n    const espUrl = new Comms.ESPUrl()\r\n        .url(_espUrl)\r\n        ;\r\n    if (dataSource.indexOf(\"http\") === 0) {\r\n        return new RoxieQuery(dataSource, resultName);\r\n    } else if (dataSource.indexOf(\"~\") === 0 || dataSource.indexOf(\"::\") >= 0) {\r\n        return new LogicalFile(espUrl.getUrl({ pathname: \"WsWorkunits/\" }), dataSource);\r\n    } else if (dataSource) {\r\n        return new WUResult(espUrl.getUrl({ pathname: \"WsWorkunits/\" }), dataSource, resultName);\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function enableCache(_?: any): any | undefined {\r\n    if (!arguments.length) return enableBasicCommsCache;\r\n    enableBasicCommsCache = _;\r\n    if (!_) {\r\n        basicCommsCache = {};\r\n    }\r\n}\r\nexport function cache(_?: any): any | undefined {\r\n    if (!arguments.length) return basicCommsCache;\r\n    basicCommsCache = _;\r\n}\r\nexport function createConnection(url) {\r\n    url = url || document.URL;\r\n    const testURL = new Comms.ESPUrl()\r\n        .url(url)\r\n        ;\r\n    if (testURL.isWsWorkunits()) {\r\n        const espConnection = Comms.createESPConnection(url);\r\n        if (espConnection instanceof Comms.WsWorkunits && espConnection.wuid()) {\r\n            return new Workunit(espConnection.getUrl({ pathname: \"\" }), espConnection.wuid())\r\n                .url(url)\r\n                ;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexport function flattenResult(result, mappings) {\r\n    const retVal = {\r\n        columns: [],\r\n        data: []\r\n    };\r\n    if (result && result.length) {\r\n        const colIdx = {};\r\n        if (mappings && mappings.length) {\r\n            mappings.forEach(function (mapping) {\r\n                colIdx[mapping.value.toLowerCase()] = retVal.columns.length;\r\n                retVal.columns.push(mapping.key);\r\n            });\r\n        } else {\r\n            for (const key in result[0]) {\r\n                colIdx[key.toLowerCase()] = retVal.columns.length;\r\n                retVal.columns.push(key);\r\n            }\r\n        }\r\n        result.forEach(function (row, rowIdx) {\r\n            const rowArr = [];\r\n            for (const key in row) {\r\n                if (colIdx[key.toLowerCase()] !== undefined) {\r\n                    rowArr[colIdx[key.toLowerCase()]] = row[key];\r\n                }\r\n            }\r\n            retVal.data.push(rowArr);\r\n        });\r\n    }\r\n    return retVal;\r\n}\r\n","'use strict';\n\nif (typeof module !== 'undefined') module.exports = simpleheat;\n\nfunction simpleheat(canvas) {\n    if (!(this instanceof simpleheat)) return new simpleheat(canvas);\n\n    this._canvas = canvas = typeof canvas === 'string' ? document.getElementById(canvas) : canvas;\n\n    this._ctx = canvas.getContext('2d');\n    this._width = canvas.width;\n    this._height = canvas.height;\n\n    this._max = 1;\n    this._data = [];\n}\n\nsimpleheat.prototype = {\n\n    defaultRadius: 25,\n\n    defaultGradient: {\n        0.4: 'blue',\n        0.6: 'cyan',\n        0.7: 'lime',\n        0.8: 'yellow',\n        1.0: 'red'\n    },\n\n    data: function (data) {\n        this._data = data;\n        return this;\n    },\n\n    max: function (max) {\n        this._max = max;\n        return this;\n    },\n\n    add: function (point) {\n        this._data.push(point);\n        return this;\n    },\n\n    clear: function () {\n        this._data = [];\n        return this;\n    },\n\n    radius: function (r, blur) {\n        blur = blur === undefined ? 15 : blur;\n\n        // create a grayscale blurred circle image that we'll use for drawing points\n        var circle = this._circle = this._createCanvas(),\n            ctx = circle.getContext('2d'),\n            r2 = this._r = r + blur;\n\n        circle.width = circle.height = r2 * 2;\n\n        ctx.shadowOffsetX = ctx.shadowOffsetY = r2 * 2;\n        ctx.shadowBlur = blur;\n        ctx.shadowColor = 'black';\n\n        ctx.beginPath();\n        ctx.arc(-r2, -r2, r, 0, Math.PI * 2, true);\n        ctx.closePath();\n        ctx.fill();\n\n        return this;\n    },\n\n    resize: function () {\n        this._width = this._canvas.width;\n        this._height = this._canvas.height;\n    },\n\n    gradient: function (grad) {\n        // create a 256x1 gradient that we'll use to turn a grayscale heatmap into a colored one\n        var canvas = this._createCanvas(),\n            ctx = canvas.getContext('2d'),\n            gradient = ctx.createLinearGradient(0, 0, 0, 256);\n\n        canvas.width = 1;\n        canvas.height = 256;\n\n        for (var i in grad) {\n            gradient.addColorStop(+i, grad[i]);\n        }\n\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, 1, 256);\n\n        this._grad = ctx.getImageData(0, 0, 1, 256).data;\n\n        return this;\n    },\n\n    draw: function (minOpacity) {\n        if (!this._circle) this.radius(this.defaultRadius);\n        if (!this._grad) this.gradient(this.defaultGradient);\n\n        var ctx = this._ctx;\n\n        ctx.clearRect(0, 0, this._width, this._height);\n\n        // draw a grayscale heatmap by putting a blurred circle at each data point\n        for (var i = 0, len = this._data.length, p; i < len; i++) {\n            p = this._data[i];\n            ctx.globalAlpha = Math.max(p[2] / this._max, minOpacity === undefined ? 0.05 : minOpacity);\n            ctx.drawImage(this._circle, p[0] - this._r, p[1] - this._r);\n        }\n\n        // colorize the heatmap, using opacity value of each pixel to get the right color from our gradient\n        var colored = ctx.getImageData(0, 0, this._width, this._height);\n        this._colorize(colored.data, this._grad);\n        ctx.putImageData(colored, 0, 0);\n\n        return this;\n    },\n\n    _colorize: function (pixels, gradient) {\n        for (var i = 0, len = pixels.length, j; i < len; i += 4) {\n            j = pixels[i + 3] * 4; // get gradient color from opacity value\n\n            if (j) {\n                pixels[i] = gradient[j];\n                pixels[i + 1] = gradient[j + 1];\n                pixels[i + 2] = gradient[j + 2];\n            }\n        }\n    },\n\n    _createCanvas: function () {\n        if (typeof document !== 'undefined') {\n            return document.createElement('canvas');\n        } else {\n            // create a new canvas instance in node.js\n            // the canvas class needs to have a default constructor without any parameter\n            return new this._canvas.constructor();\n        }\n    }\n};\n","import { CanvasWidget, Palette } from \"@hpcc-js/common\";\r\nimport * as _simpleheat from \"simpleheat\";\r\n\r\nconst simpleheat = (window as any).simpleheat || (_simpleheat && _simpleheat.default) || _simpleheat;\r\n\r\nexport class HeatMap extends CanvasWidget {\r\n    _heat;\r\n    _palette;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        // canvas size needs to be set before render\r\n        this.resize(this._size);\r\n        this._heat = simpleheat(domNode);\r\n    }\r\n\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n\r\n        this._palette = this._palette.switch(this.paletteID());\r\n        if (this.useClonedPalette()) {\r\n            this._palette = this._palette.cloneNotExists(this.paletteID() + \"_\" + this.id());\r\n        }\r\n\r\n        if (this.topLeftX_exists() && this.topLeftY_exists() && this.bottomRightX_exists() && this.bottomRightY_exists()) {\r\n            this._heat.data(this.skewedData());\r\n        } else {\r\n            this._heat.data(this.data());\r\n        }\r\n\r\n        if (this.radius()) {\r\n            this._heat.radius(this.radius(), this.blur());\r\n        }\r\n        if (this.usePalette()) {\r\n            const grad = {};\r\n            for (let idx = 1; idx <= this.colorCount(); idx++) {\r\n                const value = idx / this.colorCount();\r\n                grad[value] = this._palette(idx, 1, this.colorCount());\r\n            }\r\n            this._heat.defaultGradient = grad;\r\n            this._heat.gradient(grad);\r\n        } else if (this.gradient()) {\r\n            this._heat.defaultGradient = this.gradient();\r\n            this._heat.gradient(this.gradient());\r\n        }\r\n\r\n        this._heat.draw();\r\n    }\r\n\r\n    exit(domNode, element) {\r\n        delete this._heat;\r\n        super.exit(domNode, element);\r\n    }\r\n\r\n    resize(size: any): this {\r\n        const retVal = CanvasWidget.prototype.resize.apply(this, arguments);\r\n        if (this._heat !== undefined) {\r\n            this._heat.resize();\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n    skewedData() {\r\n        const context = this;\r\n        const retArr = [];\r\n        const arr = this.data();\r\n        const box = this.size();\r\n\r\n        const coordsWidth = this.bottomRightX() - this.topLeftX();\r\n        const coordsHeight = this.bottomRightY() - this.topLeftY();\r\n\r\n        const pixelValueX = coordsWidth / box.width;\r\n        const pixelValueY = coordsHeight / box.height;\r\n\r\n        arr.forEach(function (n) {\r\n            const left = Math.abs(n[0] - context.topLeftX());\r\n            const top = Math.abs(n[1] - context.topLeftY());\r\n\r\n            const newX = left / pixelValueX;\r\n            const newY = top / pixelValueY;\r\n\r\n            retArr.push([newX, newY, n[2]]);\r\n        });\r\n\r\n        return retArr;\r\n    }\r\n\r\n    radius: { (): number; (_: number): HeatMap };\r\n    radius_exists: () => boolean;\r\n    blur: { (): number; (_: number): HeatMap };\r\n    blur_exists: () => boolean;\r\n    max: { (): number; (_: number): HeatMap };\r\n    max_exists: () => boolean;\r\n    gradient: { (): object; (_: object): HeatMap };\r\n    gradient_exists: () => boolean;\r\n    usePalette: { (): boolean; (_: boolean): HeatMap };\r\n    usePalette_exists: () => boolean;\r\n    colorCount: { (): number; (_: number): HeatMap };\r\n    colorCount_exists: () => boolean;\r\n    paletteID: { (): string; (_: string): HeatMap };\r\n    paletteID_exists: () => boolean;\r\n    useClonedPalette: { (): boolean; (_: boolean): HeatMap };\r\n    useClonedPalette_exists: () => boolean;\r\n    topLeftX: { (): number; (_: number): HeatMap };\r\n    topLeftX_exists: () => boolean;\r\n    topLeftY: { (): number; (_: number): HeatMap };\r\n    topLeftY_exists: () => boolean;\r\n    bottomRightX: { (): number; (_: number): HeatMap };\r\n    bottomRightX_exists: () => boolean;\r\n    bottomRightY: { (): number; (_: number): HeatMap };\r\n    bottomRightY_exists: () => boolean;\r\n}\r\nHeatMap.prototype._class += \" other_HeatMap\";\r\nHeatMap.prototype._palette = Palette.rainbow(\"default\");\r\n\r\nHeatMap.prototype.publish(\"radius\", 15, \"number\", \"Set point radius\", null, { tags: [\"Basic\"] });\r\nHeatMap.prototype.publish(\"blur\", 15, \"number\", \"Set point blur\", null, { tags: [\"Basic\"] });\r\nHeatMap.prototype.publish(\"max\", 1, \"number\", \"Set max data value\", null, { tags: [\"Basic\"] });\r\n\r\nHeatMap.prototype.publish(\"gradient\", { 0.4: \"blue\", 0.6: \"cyan\", 0.7: \"lime\", 0.8: \"yellow\", 1.0: \"red\" }, \"object\", \"Set gradient colors\", null, { tags: [\"Basic\"] });\r\n\r\nHeatMap.prototype.publish(\"usePalette\", false, \"boolean\", \"If true, uses paletteID and colorCount to determine gradient\", null, { tags: [\"Basic\"] });\r\n\r\nHeatMap.prototype.publish(\"colorCount\", 10, \"number\", \"Top left x-value\", null, { tags: [\"Basic\"] });\r\nHeatMap.prototype.publish(\"paletteID\", \"default\", \"set\", \"Color palette for this widget\", HeatMap.prototype._palette.switch(), { tags: [\"Basic\"] });\r\nHeatMap.prototype.publish(\"useClonedPalette\", false, \"boolean\", \"Enable or disable using a cloned palette\", null, { tags: [\"Intermediate\", \"Shared\"] });\r\n\r\nHeatMap.prototype.publish(\"topLeftX\", null, \"number\", \"Top left x-value\", null, { tags: [\"Basic\"], optional: true });\r\nHeatMap.prototype.publish(\"topLeftY\", null, \"number\", \"Top left y-value\", null, { tags: [\"Basic\"], optional: true });\r\nHeatMap.prototype.publish(\"bottomRightX\", null, \"number\", \"Bottom right x-value\", null, { tags: [\"Basic\"], optional: true });\r\nHeatMap.prototype.publish(\"bottomRightY\", null, \"number\", \"Bottom right y-value\", null, { tags: [\"Basic\"], optional: true });\r\n","import { SVGWidget } from \"@hpcc-js/common\";\r\n\r\nexport class HPCCBadge extends SVGWidget {\r\n    protected root;\r\n    protected logo;\r\n    protected logo_accent;\r\n    protected logo_circles;\r\n    protected line;\r\n    protected circle_1;\r\n    protected circle_2;\r\n    protected circle_3;\r\n    protected circle_4;\r\n    protected circle_5;\r\n    protected circle_6;\r\n    protected circle_7;\r\n    protected circle_8;\r\n    protected circle_accent;\r\n    protected text;\r\n    protected text_hpccsystems;\r\n    protected text_r;\r\n    protected text_tm;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    testData(domNode, element) {\r\n        return this;\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n\r\n        this.root = element.append(\"g\");\r\n        this.logo = this.root.append(\"g\");\r\n        this.logo_accent = this.root.append(\"g\");\r\n        this.line = this.logo_accent.append(\"path\")\r\n            .attr(\"fill-rule\", \"evenodd\")\r\n            .attr(\"clip-rule\", \"evenodd\")\r\n            .attr(\"fill\", \"#179BD7\")\r\n            .attr(\"d\", \"m 189.38849,364.55373 c 191.6,3.8 0,0 191.6,3.8 l 0.1,-4.2 c -191.7,0.4 0,0 -191.7,0.4 z\")\r\n            ;\r\n        this.circle_accent = this.logo_accent.append(\"path\")\r\n            .attr(\"fill-rule\", \"evenodd\")\r\n            .attr(\"clip-rule\", \"evenodd\")\r\n            .attr(\"fill\", \"#6E6E73\")\r\n            .attr(\"d\", \"M421.3,354.2c6.9,6.9,3.1,18.7-8.6,26.1c-11.8,7.4-26.3,6.9-32.1-0.6c-5.5-7.2-1.1-18.2,9.6-25C401,348,414.7,347.6,421.3,354.2z\")\r\n            ;\r\n        this.logo_circles = this.logo.append(\"g\");\r\n        this.circle_1 = this.logo_circles.append(\"path\")\r\n            .attr(\"fill-rule\", \"evenodd\")\r\n            .attr(\"clip-rule\", \"evenodd\")\r\n            .attr(\"fill\", \"#179BD7\")\r\n            .attr(\"d\", \"m 258.9815,363.84947 c 1.3,-3 1.5,-5.9 0.4,-8.1 -2.6,-5.4 -11.8,-5.1 -20.6,0.4 -3.5,2.2 -6.5,4.9 -8.7,7.8 -0.11933,0.35821 -0.39477,0.60735 -0.6,0.9 -2.9,4.1 -4.2,8.3 -3,11.6 2.1,6 11.4,6.3 20.9,0.4 5,-3.2 8.9,-7.3 11,-11.4 -0.59813,0.54778 0.47385,-1.28911 0.6,-1.6 z\")\r\n            ;\r\n        this.circle_2 = this.logo_circles.append(\"path\")\r\n            .attr(\"fill-rule\", \"evenodd\")\r\n            .attr(\"clip-rule\", \"evenodd\")\r\n            .attr(\"fill\", \"#179BD7\")\r\n            .attr(\"d\", \"M291.3,349.3c9.5-5.9,14.1-15,10.5-20c-3.5-4.8-13.3-4.2-22.1,1.3c-8.8,5.5-13.7,14.1-10.9,19.3C271.7,355.4,281.9,355.2,291.3,349.3z\")\r\n            ;\r\n        this.circle_3 = this.logo_circles.append(\"path\")\r\n            .attr(\"fill-rule\", \"evenodd\")\r\n            .attr(\"clip-rule\", \"evenodd\")\r\n            .attr(\"fill\", \"#179BD7\")\r\n            .attr(\"d\", \"M335.3,321.7c9.5-5.9,13.3-14.5,8.9-19c-4.3-4.3-14.8-3.2-23.6,2.3c-8.8,5.5-13.1,13.7-9.4,18.4C315,328.3,325.9,327.7,335.3,321.7z\")\r\n            ;\r\n        this.circle_4 = this.logo_circles.append(\"path\")\r\n            .attr(\"fill-rule\", \"evenodd\")\r\n            .attr(\"clip-rule\", \"evenodd\")\r\n            .attr(\"fill\", \"#179BD7\")\r\n            .attr(\"d\", \"M273.2,384c-3.2-6.5-13.5-6.7-23.2-0.7c-9.7,6-15.6,16.4-13.2,23.4c2.5,7.3,13.1,8.2,23.6,1.7 C270.8,401.9,276.5,390.8,273.2,384z\")\r\n            ;\r\n        this.circle_5 = this.logo_circles.append(\"path\")\r\n            .attr(\"fill-rule\", \"evenodd\")\r\n            .attr(\"clip-rule\", \"evenodd\")\r\n            .attr(\"fill\", \"#179BD7\")\r\n            .attr(\"d\", \"m 320.84499,363.83119 c 1,-3.4 0.8,-6.6 -1,-9.1 -4.2,-5.9 -15.3,-5.6 -25,0.5 -3.89999,2.4 -7.09999,5.5 -9.19999,8.7 -1.18854,2.2092 -0.0404,-0.09 -1.2,2.2 -2.2,4.1 -2.7,8.3 -0.9,11.5 3.6,6.7 15.09999,7 25.59999,0.5 5,-3.2 8.7,-7.2 10.7,-11.3 0.95557,-2.97582 0.0423,0.0306 1,-3 z\")\r\n            ;\r\n        this.circle_6 = this.logo_circles.append(\"path\")\r\n            .attr(\"fill-rule\", \"evenodd\")\r\n            .attr(\"clip-rule\", \"evenodd\")\r\n            .attr(\"fill\", \"#179BD7\")\r\n            .attr(\"d\", \"M330.4,348.2c4.6,6,17,5.8,27.5-0.8c10.5-6.6,14.3-16.5,8.9-22c-5.2-5.3-17.1-4.4-26.8,1.6C330.3,333.1,325.9,342.4,330.4,348.2z\")\r\n            ;\r\n        this.circle_7 = this.logo_circles.append(\"path\")\r\n            .attr(\"fill-rule\", \"evenodd\")\r\n            .attr(\"clip-rule\", \"evenodd\")\r\n            .attr(\"fill\", \"#179BD7\")\r\n            .attr(\"d\", \"M264.1,417.4c-10.8,6.7-17.2,19-14.2,27.8c3.2,9.2,15.4,11.1,27.2,3.7c11.8-7.4,17.8-20.6,13.6-29.2C286.6,411.6,274.8,410.7,264.1,417.4z\")\r\n            ;\r\n        this.circle_8 = this.logo_circles.append(\"path\")\r\n            .attr(\"fill-rule\", \"evenodd\")\r\n            .attr(\"clip-rule\", \"evenodd\")\r\n            .attr(\"fill\", \"#179BD7\")\r\n            .attr(\"d\", \"M314.2,386.1c-10.8,6.7-16.2,18.4-11.9,26.4c4.5,8.4,17.8,9.5,29.6,2.2c11.8-7.4,16.6-19.9,11.1-27.7C337.7,379.6,324.9,379.3,314.2,386.1z\")\r\n            ;\r\n\r\n        //  Text  ---\r\n        this.text = this.root.append(\"g\");\r\n        this.text_hpccsystems = this.text.append(\"path\")\r\n            .attr(\"fill\", \"#6E6E73\")\r\n            .attr(\"d\", \"M224.2,476.3c0.1-1.3,0.1-2.7,0.2-4.1c-0.3,0-0.5,0.1-0.8,0.1c-0.3,0-0.5,0-0.8,0c-0.3,0-0.5,0-0.8,0c-0.3,0-0.5-0.1-0.8-0.1c0.1,1.4,0.1,2.8,0.2,4.1c0.1,1.3,0.1,2.7,0.1,4.1v1.1c-1.1,0-2.3,0-3.3,0.1c-1.1,0-2.2,0-3.3,0c-1.1,0-2.3,0-3.3,0c-1.1,0-2.2,0-3.3-0.1v-1.1c0-1.4,0-2.8,0.1-4.1c0.1-1.3,0.1-2.7,0.2-4.1c-0.3,0-0.5,0.1-0.8,0.1c-0.3,0-0.5,0-0.8,0c-0.3,0-0.5,0-0.8,0c-0.3,0-0.5-0.1-0.8-0.1c0.1,1.4,0.1,2.8,0.2,4.1c0.1,1.3,0.1,2.7,0.1,4.1v5.5c0,1.4,0,2.8-0.1,4.1c-0.1,1.4-0.1,2.7-0.2,4c0.5,0,1-0.1,1.6-0.1c0.6,0,1.1,0,1.6,0.1c-0.1-1.3-0.1-2.7-0.2-4c-0.1-1.4-0.1-2.7-0.1-4.1v-2.9c1.1,0,2.3,0,3.3,0c1.1,0,2.2,0,3.3,0c1.1,0,2.3,0,3.3,0c1.1,0,2.2,0,3.3,0v2.9c0,1.4,0,2.8-0.1,4.1c-0.1,1.4-0.1,2.7-0.2,4c0.5,0,1-0.1,1.6-0.1c0.6,0,1.1,0,1.6,0.1c-0.1-1.3-0.1-2.7-0.2-4c-0.1-1.4-0.1-2.7-0.1-4.1v-5.5C224.1,479,224.1,477.7,224.2,476.3z M242.7,473.8c-0.4-0.4-0.9-0.7-1.4-0.9c-0.5-0.2-1-0.4-1.5-0.5c-0.5-0.1-1-0.2-1.5-0.2c-0.5,0-0.9,0-1.2,0c-0.2,0-0.5,0-0.9,0c-0.3,0-0.7,0-1.1,0c-0.4,0-0.7,0-1.1,0c-0.4,0-0.7,0-0.9,0c-0.5,0-1,0-1.5,0c-0.5,0-1-0.1-1.5-0.1c0.1,1.4,0.1,2.8,0.2,4.1c0.1,1.3,0.1,2.7,0.1,4.1v5.5c0,1.4,0,2.8-0.1,4.1c-0.1,1.4-0.1,2.7-0.2,4c0.5,0,1-0.1,1.6-0.1c0.6,0,1.1,0,1.6,0.1c-0.1-1.3-0.1-2.7-0.2-4c-0.1-1.4-0.1-2.7-0.1-4.1v-1.8c0.4,0,0.8,0.1,1.2,0.1c0.4,0,0.8,0,1.3,0c0.8,0,1.6-0.1,2.6-0.3c1-0.2,1.9-0.5,2.8-1c0.9-0.5,1.6-1.2,2.2-2c0.6-0.9,0.9-2,0.9-3.4c0-0.9-0.1-1.6-0.4-2.2C243.5,474.7,243.1,474.2,242.7,473.8z M240.6,480.4c-0.4,0.7-0.9,1.2-1.4,1.6c-0.6,0.4-1.2,0.7-1.9,0.8c-0.7,0.1-1.4,0.2-2,0.2c-0.8,0-1.5-0.1-2.3-0.3v-9.5h2.9c0.8,0,1.6,0.1,2.2,0.2c0.7,0.1,1.2,0.3,1.7,0.7c0.5,0.3,0.8,0.8,1.1,1.3c0.3,0.6,0.4,1.3,0.4,2.2C241.2,478.8,241,479.7,240.6,480.4z M251.9,475.4c0.8-0.8,1.7-1.5,2.8-1.9c1.1-0.4,2.2-0.6,3.5-0.6c0.8,0,1.5,0.1,2.1,0.3c0.6,0.2,1.2,0.5,1.7,0.7c0.5,0.3,1,0.6,1.3,0.9c0.4,0.3,0.7,0.6,0.9,0.9l0.2-0.1c0.1-0.3,0.1-0.8,0.3-1.3c0.1-0.5,0.2-0.9,0.4-1.2c-0.9-0.4-1.9-0.7-3.1-1c-1.2-0.3-2.4-0.4-3.8-0.4c-1.8,0-3.4,0.3-4.8,0.8c-1.5,0.5-2.7,1.3-3.8,2.2c-1.1,1-1.9,2.2-2.5,3.6c-0.6,1.4-0.9,3-0.9,4.8c0,1.8,0.3,3.4,0.9,4.8c0.6,1.4,1.4,2.6,2.4,3.6c1,1,2.3,1.7,3.7,2.2c1.4,0.5,3,0.7,4.7,0.7c0.8,0,1.5-0.1,2.3-0.2c0.7-0.1,1.4-0.3,2-0.4c0.6-0.2,1.1-0.3,1.5-0.5c0.4-0.2,0.7-0.4,0.9-0.6l0.3-1.9l-0.1-0.1c-0.3,0.2-0.7,0.5-1.1,0.8c-0.4,0.3-0.9,0.6-1.5,0.9c-0.5,0.3-1.1,0.5-1.8,0.7c-0.6,0.2-1.4,0.3-2.1,0.3c-1.3,0-2.4-0.2-3.5-0.6c-1.1-0.4-2-1-2.8-1.9c-0.8-0.8-1.4-1.9-1.9-3.2c-0.4-1.3-0.7-2.8-0.7-4.6c0-1.8,0.2-3.3,0.7-4.6 C250.5,477.3,251.1,476.3,251.9,475.4z M273.2,475.4c0.8-0.8,1.7-1.5,2.8-1.9c1.1-0.4,2.2-0.6,3.5-0.6c0.8,0,1.5,0.1,2.1,0.3c0.6,0.2,1.2,0.5,1.7,0.7c0.5,0.3,1,0.6,1.3,0.9c0.4,0.3,0.7,0.6,0.9,0.9l0.2-0.1c0.1-0.3,0.1-0.8,0.3-1.3c0.1-0.5,0.2-0.9,0.4-1.2c-0.9-0.4-1.9-0.7-3.1-1c-1.2-0.3-2.4-0.4-3.8-0.4c-1.8,0-3.4,0.3-4.8,0.8c-1.5,0.5-2.7,1.3-3.8,2.2c-1.1,1-1.9,2.2-2.5,3.6c-0.6,1.4-0.9,3-0.9,4.8c0,1.8,0.3,3.4,0.9,4.8c0.6,1.4,1.4,2.6,2.4,3.6c1,1,2.3,1.7,3.7,2.2c1.4,0.5,3,0.7,4.7,0.7c0.8,0,1.5-0.1,2.3-0.2c0.7-0.1,1.4-0.3,2-0.4c0.6-0.2,1.1-0.3,1.5-0.5c0.4-0.2,0.7-0.4,0.9-0.6l0.3-1.9l-0.1-0.1c-0.3,0.2-0.7,0.5-1.1,0.8c-0.4,0.3-0.9,0.6-1.5,0.9c-0.5,0.3-1.1,0.5-1.8,0.7c-0.6,0.2-1.4,0.3-2.1,0.3c-1.3,0-2.4-0.2-3.5-0.6c-1.1-0.4-2-1-2.8-1.9c-0.8-0.8-1.4-1.9-1.9-3.2c-0.4-1.3-0.7-2.8-0.7-4.6c0-1.8,0.2-3.3,0.7-4.6 C271.8,477.3,272.4,476.3,273.2,475.4z M308.2,482.9c-0.7-0.4-1.5-0.8-2.4-1.1c-0.9-0.3-1.7-0.7-2.4-1.1c-0.7-0.4-1.4-0.9-1.9-1.5c-0.5-0.6-0.7-1.4-0.7-2.4c0-0.6,0.1-1.1,0.3-1.6c0.2-0.5,0.5-0.9,0.9-1.3c0.4-0.4,0.8-0.6,1.3-0.8c0.5-0.2,1-0.3,1.6-0.3c0.6,0,1.1,0.1,1.5,0.3c0.4,0.2,0.8,0.5,1.1,0.7c0.3,0.3,0.6,0.6,0.7,1c0.2,0.4,0.3,0.7,0.4,1h0.4c0.1-0.6,0.3-1.1,0.4-1.5c0.1-0.4,0.3-0.8,0.5-1.1c-0.6-0.5-1.3-0.9-2.1-1.1c-0.7-0.2-1.6-0.4-2.6-0.4c-1.1,0-2,0.1-2.9,0.4c-0.9,0.3-1.6,0.7-2.2,1.2c-0.6,0.5-1.1,1.2-1.4,1.9c-0.3,0.7-0.5,1.5-0.5,2.4c0,1.3,0.2,2.3,0.7,3c0.5,0.7,1.1,1.4,1.9,1.8c0.7,0.5,1.5,0.9,2.4,1.2c0.9,0.3,1.7,0.7,2.4,1.1c0.7,0.4,1.4,0.9,1.9,1.4c0.5,0.6,0.7,1.3,0.7,2.3c0,0.6-0.1,1.2-0.3,1.8c-0.2,0.6-0.5,1.1-0.9,1.5c-0.4,0.4-0.9,0.7-1.4,1c-0.6,0.2-1.2,0.4-1.9,0.4c-0.7,0-1.3-0.1-1.8-0.3c-0.6-0.2-1-0.5-1.5-0.8c-0.4-0.3-0.8-0.7-1.1-1.1c-0.3-0.4-0.5-0.8-0.7-1.2h-0.4c-0.1,0.6-0.1,1.1-0.2,1.5c-0.1,0.4-0.2,0.8-0.4,1.3c0.6,0.4,1.2,0.8,2.1,1.2c0.8,0.4,1.9,0.5,3.2,0.5c1.2,0,2.3-0.2,3.3-0.5c1-0.4,1.8-0.8,2.5-1.5c0.7-0.6,1.2-1.4,1.5-2.3c0.4-0.9,0.5-1.8,0.5-2.8c0-1.2-0.2-2.1-0.7-2.8C309.6,483.9,309,483.3,308.2,482.9z M328.6,472.2c-0.4,0.9-0.9,1.9-1.4,2.8c-0.5,1-1,1.9-1.5,2.9c-0.5,1-1.1,1.9-1.6,2.8c-0.5,0.9-1,1.8-1.5,2.5c-1.1-1.9-2.2-3.8-3.1-5.6c-1-1.8-2-3.6-2.9-5.5c-0.3,0-0.6,0.1-0.9,0.1c-0.3,0-0.6,0-0.9,0c-0.3,0-0.6,0-0.9,0c-0.3,0-0.6-0.1-0.9-0.1c0.2,0.3,0.5,0.8,0.9,1.5c0.4,0.7,0.9,1.4,1.4,2.3c0.5,0.8,1,1.7,1.6,2.6c0.6,0.9,1.1,1.8,1.6,2.6c0.5,0.8,1,1.6,1.4,2.3c0.4,0.7,0.7,1.2,0.9,1.6c0,1.7,0,3.4,0,4.9c0,1.6-0.1,2.9-0.2,4c0.5,0,1-0.1,1.6-0.1c0.6,0,1.1,0,1.6,0.1c0-0.4-0.1-1-0.1-1.8c0-0.7-0.1-1.5-0.1-2.4c0-0.9,0-1.7,0-2.6c0-0.9,0-1.7,0-2.5c0.3-0.7,0.7-1.4,1.2-2.2c0.5-0.8,1-1.7,1.6-2.8c0.6-1,1.3-2.2,2.1-3.4c0.8-1.3,1.7-2.7,2.7-4.2c-0.5,0.1-0.9,0.2-1.2,0.2C329.5,472.3,329.1,472.3,328.6,472.2z M343.6,482.9c-0.7-0.4-1.5-0.8-2.4-1.1c-0.9-0.3-1.7-0.7-2.4-1.1c-0.7-0.4-1.4-0.9-1.9-1.5c-0.5-0.6-0.7-1.4-0.7-2.4c0-0.6,0.1-1.1,0.3-1.6c0.2-0.5,0.5-0.9,0.9-1.3c0.4-0.4,0.8-0.6,1.3-0.8c0.5-0.2,1-0.3,1.6-0.3c0.6,0,1.1,0.1,1.5,0.3c0.4,0.2,0.8,0.5,1.1,0.7c0.3,0.3,0.6,0.6,0.7,1c0.2,0.4,0.3,0.7,0.4,1h0.4c0.1-0.6,0.3-1.1,0.4-1.5c0.1-0.4,0.3-0.8,0.5-1.1c-0.6-0.5-1.3-0.9-2.1-1.1c-0.7-0.2-1.6-0.4-2.6-0.4c-1.1,0-2,0.1-2.9,0.4c-0.9,0.3-1.6,0.7-2.2,1.2c-0.6,0.5-1.1,1.2-1.4,1.9c-0.3,0.7-0.5,1.5-0.5,2.4c0,1.3,0.2,2.3,0.7,3c0.5,0.7,1.1,1.4,1.9,1.8c0.7,0.5,1.5,0.9,2.4,1.2c0.9,0.3,1.7,0.7,2.4,1.1c0.7,0.4,1.4,0.9,1.9,1.4c0.5,0.6,0.7,1.3,0.7,2.3c0,0.6-0.1,1.2-0.3,1.8c-0.2,0.6-0.5,1.1-0.9,1.5c-0.4,0.4-0.9,0.7-1.4,1c-0.6,0.2-1.2,0.4-1.9,0.4c-0.7,0-1.3-0.1-1.8-0.3c-0.6-0.2-1-0.5-1.5-0.8c-0.4-0.3-0.8-0.7-1.1-1.1c-0.3-0.4-0.5-0.8-0.7-1.2h-0.4c-0.1,0.6-0.1,1.1-0.2,1.5c-0.1,0.4-0.2,0.8-0.4,1.3c0.6,0.4,1.2,0.8,2.1,1.2c0.8,0.4,1.9,0.5,3.2,0.5c1.2,0,2.3-0.2,3.3-0.5c1-0.4,1.8-0.8,2.5-1.5c0.7-0.6,1.2-1.4,1.5-2.3c0.4-0.9,0.5-1.8,0.5-2.8c0-1.2-0.2-2.1-0.7-2.8C345,483.9,344.4,483.3,343.6,482.9z M360.7,472.3c-1.3,0-2.7,0-4.1,0c-1.4,0-2.8,0-4.1,0c-1.3,0-2.7-0.1-4.1-0.1c0.1,0.4,0.2,0.8,0.2,1c0,0.3-0.1,0.6-0.2,1c0.4-0.1,1-0.1,1.5-0.2c0.6,0,1.1-0.1,1.8-0.1c0.6,0,1.2-0.1,1.8-0.1c0.6,0,1.2,0,1.7,0c0.1,2.2,0.1,4.4,0.1,6.6v5.5c0,1.4,0,2.8-0.1,4.1c-0.1,1.4-0.1,2.7-0.2,4c0.5,0,1-0.1,1.6-0.1c0.6,0,1.1,0,1.6,0.1c-0.1-1.3-0.1-2.7-0.2-4c-0.1-1.4-0.1-2.7-0.1-4.1v-5.5c0-2.2,0-4.4,0.1-6.6c0.6,0,1.1,0,1.7,0c0.6,0,1.2,0,1.8,0.1c0.6,0,1.2,0.1,1.8,0.1c0.6,0,1.1,0.1,1.5,0.2c-0.1-0.4-0.2-0.7-0.2-1c0-0.3,0.1-0.6,0.2-1C363.4,472.2,362,472.3,360.7,472.3z M379.8,492.3c-0.5,0.1-1.1,0.2-1.8,0.2c-0.7,0.1-1.4,0.1-2.2,0.1c-0.8,0-1.6,0-2.4,0h-2.2c0-0.4,0-1,0-1.8c0-0.8,0-1.8,0-3v-3.2c0-0.3,0-0.6,0-0.8c0-0.2,0-0.4,0-0.6c0.4,0,0.9,0,1.5,0c0.6,0,1.3,0,2.1,0c0.7,0,1.5,0,2.2,0.1c0.7,0,1.4,0.1,1.9,0.2c-0.1-0.3-0.1-0.6-0.1-1c0-0.3,0-0.7,0.1-1c-0.5,0-1,0.1-1.5,0.1c-0.5,0-1.1,0.1-1.7,0.1c-0.6,0-1.3,0.1-2,0.1c-0.7,0-1.6,0-2.5,0c0-0.4,0-1,0-1.8c0-0.8,0-1.6,0-2.4c0-0.8,0-1.5,0-2.1c0-0.6,0.1-1.3,0.1-1.9c1,0,1.9,0,2.7,0c0.7,0,1.4,0.1,2.1,0.1c0.6,0,1.2,0.1,1.8,0.1c0.6,0,1.2,0.1,1.9,0.1c-0.1-0.3-0.1-0.6-0.1-1c0-0.3,0-0.6,0.1-1c-1,0-1.9,0.1-2.8,0.1c-0.9,0-1.9,0-2.8,0c-1,0-1.9,0-2.9,0c-0.9,0-1.9-0.1-2.9-0.1c0.1,1.4,0.1,2.7,0.2,4.1c0.1,1.4,0.1,2.7,0.1,4.1v5.5c0,1.4,0,2.8-0.1,4.1c-0.1,1.4-0.1,2.7-0.2,4.1c1,0,1.9-0.1,2.9-0.1h5.8c0.9,0,1.9,0,2.9,0.1c-0.1-0.2-0.1-0.5-0.1-0.8c0-0.1,0-0.3,0-0.5C379.7,492.6,379.8,492.4,379.8,492.3z M406.8,483.3c-0.2-1.8-0.4-3.7-0.6-5.6c-0.2-1.9-0.4-3.9-0.7-5.9h-0.4c-0.5,1-1.1,2-1.7,3.2c-0.6,1.1-1.2,2.3-1.9,3.4c-0.6,1.2-1.2,2.3-1.8,3.5c-0.6,1.1-1.2,2.2-1.7,3.2c-0.5,1-1,1.8-1.4,2.6c-0.4,0.8-0.7,1.3-0.9,1.7c-1.6-3-3.2-5.9-4.7-8.8c-1.5-2.8-3-5.8-4.4-8.8H386c-0.2,1.7-0.4,3.5-0.6,5.4c-0.2,1.9-0.5,3.8-0.8,5.7c-0.3,1.9-0.6,3.9-0.9,5.8c-0.3,1.9-0.6,3.7-0.9,5.5c0.3,0,0.7-0.1,1.1-0.1c0.4,0,0.8,0,1.1,0.1c0-0.9,0.1-1.9,0.2-3.3c0.1-1.3,0.2-2.7,0.4-4.2c0.1-1.5,0.3-3,0.5-4.6c0.2-1.5,0.3-3,0.5-4.3h0.1c1.4,2.8,2.8,5.6,4.2,8.2c1.4,2.7,2.7,5.4,4,8h0.3c1.3-2.9,2.6-5.7,4-8.3c1.4-2.6,2.9-5.3,4.3-8h0.1c0.3,2.8,0.6,5.5,0.9,8.1c0.2,2.7,0.5,5.4,0.7,8.2c0.3,0,0.5-0.1,0.7-0.1h1.5c0.2,0,0.5,0,0.7,0.1c-0.3-1.8-0.5-3.5-0.7-5.3 C407.2,486.9,407,485.1,406.8,483.3z M423.4,484.6c-0.5-0.7-1.1-1.3-1.9-1.7c-0.7-0.4-1.5-0.8-2.4-1.1c-0.9-0.3-1.7-0.7-2.4-1.1c-0.7-0.4-1.4-0.9-1.9-1.5c-0.5-0.6-0.7-1.4-0.7-2.4c0-0.6,0.1-1.1,0.3-1.6c0.2-0.5,0.5-0.9,0.9-1.3c0.4-0.4,0.8-0.6,1.3-0.8c0.5-0.2,1-0.3,1.6-0.3c0.6,0,1.1,0.1,1.5,0.3c0.4,0.2,0.8,0.5,1.1,0.7c0.3,0.3,0.6,0.6,0.7,1c0.2,0.4,0.3,0.7,0.4,1h0.4c0.1-0.6,0.3-1.1,0.4-1.5c0.1-0.4,0.3-0.8,0.5-1.1c-0.6-0.5-1.3-0.9-2.1-1.1c-0.7-0.2-1.6-0.4-2.6-0.4c-1.1,0-2,0.1-2.9,0.4c-0.9,0.3-1.6,0.7-2.2,1.2c-0.6,0.5-1.1,1.2-1.4,1.9c-0.3,0.7-0.5,1.5-0.5,2.4c0,1.3,0.2,2.3,0.7,3c0.5,0.7,1.1,1.4,1.9,1.8c0.7,0.5,1.5,0.9,2.4,1.2c0.9,0.3,1.7,0.7,2.4,1.1c0.7,0.4,1.4,0.9,1.9,1.4c0.5,0.6,0.7,1.3,0.7,2.3c0,0.6-0.1,1.2-0.3,1.8c-0.2,0.6-0.5,1.1-0.9,1.5c-0.4,0.4-0.9,0.7-1.4,1c-0.6,0.2-1.2,0.4-1.9,0.4c-0.7,0-1.3-0.1-1.8-0.3c-0.6-0.2-1-0.5-1.5-0.8c-0.4-0.3-0.8-0.7-1.1-1.1c-0.3-0.4-0.5-0.8-0.7-1.2h-0.4c-0.1,0.6-0.1,1.1-0.2,1.5c-0.1,0.4-0.2,0.8-0.4,1.3c0.6,0.4,1.2,0.8,2.1,1.2c0.8,0.4,1.9,0.5,3.2,0.5c1.2,0,2.3-0.2,3.3-0.5c1-0.4,1.8-0.8,2.5-1.5c0.7-0.6,1.2-1.4,1.5-2.3c0.4-0.9,0.5-1.8,0.5-2.8 C424.2,486.3,423.9,485.3,423.4,484.6z\")\r\n            ;\r\n        this.text_r = this.text.append(\"path\")\r\n            .attr(\"fill\", \"#6E6E73\")\r\n            .attr(\"d\", \"M433.1,472.1c2.2,0,3.9,1.8,3.9,3.9c0,2.2-1.8,3.9-3.9,3.9c-2.2,0-3.9-1.8-3.9-3.9 C429.2,473.8,430.9,472.1,433.1,472.1z M433.1,479.5c1.9,0,3.5-1.6,3.5-3.5s-1.5-3.5-3.5-3.5s-3.5,1.6-3.5,3.5 S431.2,479.5,433.1,479.5z M431.7,475c0-0.5,0-1.1-0.1-1.5c0.3,0,0.6,0.1,0.9,0.1c0.3,0,0.6-0.1,0.9-0.1c0.8,0,1.4,0.4,1.4,1.1c0,0.9-1,1.3-1.5,1.4c0.6,0.7,1.5,2,1.9,2.4v0.1c-0.1,0-0.3-0.1-0.4-0.1c-0.1,0-0.3,0-0.4,0.1c-0.5-0.8-1.1-1.6-1.8-2.4h-0.4v0.8c0,0.5,0,1.1,0.1,1.6c-0.1,0-0.2-0.1-0.4-0.1c-0.1,0-0.2,0-0.4,0.1c0-0.5,0.1-1,0.1-1.5V475z M432.2,475.7c0.1,0,0.3,0,0.5,0c0.7,0,1.4-0.3,1.4-1.1c0-0.6-0.4-0.9-1-0.9c-0.3,0-0.5,0-0.8,0.1c0,0.3-0.1,0.7-0.1,1V475.7z\")\r\n            ;\r\n        this.text_tm = this.text.append(\"path\")\r\n            .attr(\"fill\", \"#6E6E73\")\r\n            .attr(\"d\", \"M376.1,322.1c0-0.6,0-1.2,0-1.9c-0.6,0-1.4,0-1.9,0.1c0-0.1,0-0.2,0-0.3c0-0.1,0-0.2,0-0.3c0.8,0,1.5,0,2.3,0s1.5,0,2.3,0c0,0.1,0,0.2,0,0.3c0,0.1,0,0.2,0,0.3c-0.5-0.1-1.3-0.1-1.9-0.1c0,0.6,0,1.2,0,1.9v1.5c0,0.8,0,1.6,0.1,2.3c-0.2,0-0.3,0-0.4,0c-0.1,0-0.3,0-0.4,0c0-0.8,0.1-1.6,0.1-2.3V322.1zM380.5,319.7c0.8,1.7,1.7,3.3,2.6,5c0.4-0.7,1.8-3.3,2.7-5h0.1c0.3,2.3,0.5,4.3,0.7,6.3c-0.1,0-0.3,0-0.4,0c-0.1,0-0.3,0-0.4,0c-0.1-1.6-0.3-3.1-0.4-4.6h0c-0.8,1.5-1.6,3-2.4,4.6h-0.1c-0.7-1.5-1.5-3-2.3-4.6h0c-0.2,1.5-0.4,3.6-0.4,4.6c-0.1,0-0.2,0-0.3,0c-0.1,0-0.2,0-0.3,0c0.3-2,0.7-4.4,0.9-6.3H380.5z\")\r\n            ;\r\n\r\n        const bbox = this.root.node().getBBox();\r\n        const centerX = bbox.x + bbox.width / 2;\r\n        const centerY = bbox.y + bbox.height / 2;\r\n        const scale = Math.min(this.width(), this.height()) / Math.max(bbox.width, bbox.height);\r\n        this.root\r\n            .attr(\"transform\", \"translate(\" + (-centerX * scale) + \",\" + (-centerY * scale) + \")scale(\" + scale + \")\")\r\n            ;\r\n    }\r\n\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n\r\n        switch (this.animation()) {\r\n            case \"none\":\r\n                break;\r\n            case \"accentInOut\":\r\n                this.logo.attr(\"opacity\", 0);\r\n                this.logo_accent.attr(\"transform\", \"translate(-400, 0)\");\r\n                this.text.attr(\"opacity\", 0);\r\n\r\n                this.logo.transition().duration(1000)\r\n                    .attr(\"opacity\", 1)\r\n                    ;\r\n                this.logo_accent.transition().delay(500).duration(1500)\r\n                    .attr(\"transform\", \"translate(0, 0)\")\r\n                    ;\r\n                this.text.transition().delay(100).duration(1000)\r\n                    .attr(\"opacity\", 1)\r\n                    ;\r\n                this.logo_accent.transition().ease(\"back\").delay(7000).duration(1500)\r\n                    .attr(\"transform\", \"translate(400, 0)\")\r\n                    ;\r\n                this.text.transition().delay(8400).duration(1000)\r\n                    .attr(\"opacity\", 0)\r\n                    ;\r\n                this.logo_accent.transition().delay(8500).duration(1000)\r\n                    .attr(\"opacity\", 0)\r\n                    ;\r\n                this.logo.transition().delay(8500).duration(1000)\r\n                    .attr(\"opacity\", 0)\r\n                    ;\r\n                break;\r\n            case \"accentIn\":\r\n                this.logo.attr(\"opacity\", 0);\r\n                this.logo_accent.attr(\"transform\", \"translate(-400, 0)\");\r\n                this.text.attr(\"opacity\", 0);\r\n\r\n                this.logo.transition().duration(1000)\r\n                    .attr(\"opacity\", 1)\r\n                    ;\r\n                this.logo_accent.transition().delay(500).duration(1500)\r\n                    .attr(\"transform\", \"translate(0, 0)\")\r\n                    ;\r\n                this.text.transition().delay(100).duration(1000)\r\n                    .attr(\"opacity\", 1)\r\n                    ;\r\n                break;\r\n            case \"fade_in\":\r\n                this.logo.attr(\"opacity\", 0);\r\n                // this.logo_accent.attr(\"transform\", \"translate(-400, 0)\");\r\n                this.logo_accent.attr(\"opacity\", 0);\r\n                this.text.attr(\"opacity\", 0);\r\n\r\n                this.logo.transition().duration(1000)\r\n                    .attr(\"opacity\", 1)\r\n                    ;\r\n                /*\r\n                this.logo_accent.transition().delay(500).duration(1500)\r\n                    .attr(\"transform\", \"translate(0, 0)\")\r\n                ;\r\n                */\r\n                this.logo_accent.transition().duration(1000)\r\n                    .attr(\"opacity\", 1)\r\n                    ;\r\n                this.text.transition().delay(100).duration(1000)\r\n                    .attr(\"opacity\", 1)\r\n                    ;\r\n                /*\r\n                this.logo_accent.transition().ease(\"back\").delay(7000).duration(1500)\r\n                    .attr(\"transform\", \"translate(400, 0)\")\r\n                ;\r\n                */\r\n                /*\r\n                this.text.transition().delay(8400).duration(1000)\r\n                    .attr(\"opacity\", 0)\r\n                ;\r\n                this.logo_accent.transition().delay(8500).duration(1000)\r\n                    .attr(\"opacity\", 0)\r\n                ;\r\n                this.logo.transition().delay(8500).duration(1000)\r\n                    .attr(\"opacity\", 0)\r\n                ;\r\n                */\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}\r\nHPCCBadge.prototype._class += \" other_HPCCBadge\";\r\n\r\nexport interface HPCCBadge {\r\n    animation(): \"none\" | \"accentInOut\" | \"accentIn\" | \"fade_in\";\r\n    animation(_: \"none\" | \"accentInOut\" | \"accentIn\" | \"fade_in\"): this;\r\n}\r\n\r\nHPCCBadge.prototype.publish(\"animation\", \"none\", \"set\", \"Animation Style\", [\"none\", \"accentInOut\", \"accentIn\", \"fade_in\"]);\r\n","import { HTMLWidget } from \"@hpcc-js/common\";\r\n\r\nimport \"../src/Html.css\";\r\n\r\nexport class Html extends HTMLWidget {\r\n    constructor() {\r\n        super();\r\n\r\n        this._tag = \"div\";\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n    }\r\n\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n\r\n        element\r\n            .style(\"overflow-x\", this.overflowX_exists() ? this.overflowX() : \"\")\r\n            .style(\"overflow-y\", this.overflowY_exists() ? this.overflowY() : \"\")\r\n            ;\r\n\r\n        const html = element.selectAll(\".htmlWrapper\").data(this.data().length > 0 ? this.data() : [this.html()]);\r\n        html.enter().append(\"div\")\r\n            .attr(\"class\", \"htmlWrapper\")\r\n            .merge(html)\r\n            .html(function (d) { return d; })\r\n            ;\r\n        html.exit().remove();\r\n    }\r\n\r\n    html: { (): string; (_: string): Html };\r\n    html_exists: () => boolean;\r\n    overflowX: { (): string; (_: string): Html };\r\n    overflowX_exists: () => boolean;\r\n    overflowY: { (): string; (_: string): Html };\r\n    overflowY_exists: () => boolean;\r\n}\r\nHtml.prototype._class += \" other_Html\";\r\n\r\nHtml.prototype.publish(\"html\", \"\", \"string\", \"Html to render\", null, { tags: [\"Basic\"] });\r\nHtml.prototype.publish(\"overflowX\", null, \"set\", \"CSS overflow-x\", [\"\", \"visible\", \"hidden\", \"scroll\", \"auto\", \"initial\", \"inherit\"], { tags: [\"Basic\"], optional: true });\r\nHtml.prototype.publish(\"overflowY\", null, \"set\", \"CSS overflow-y\", [\"\", \"visible\", \"hidden\", \"scroll\", \"auto\", \"initial\", \"inherit\"], { tags: [\"Basic\"], optional: true });\r\n","import { Entity, HTMLWidget } from \"@hpcc-js/common\";\r\nimport { HorizontalList, VerticalList } from \"@hpcc-js/layout\";\r\nimport { select as d3Select } from \"d3-selection\";\r\nimport { Html } from \"./Html\";\r\n\r\nimport \"../src/IconList.css\";\r\n\r\nexport class IconList extends HTMLWidget {\r\n    protected _list;\r\n    protected _entity_list = [];\r\n    protected _content_list = [];\r\n    constructor() {\r\n        super();\r\n        this._list = new HorizontalList()\r\n            .orientation_default(\"horizontal\")\r\n            .flexWrap_default(\"nowrap\")\r\n            ;\r\n    }\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        element\r\n            .style(\"height\", \"100%\")\r\n            .style(\"width\", \"100%\")\r\n            ;\r\n        d3Select(domNode.parentElement)\r\n            .style(\"height\", \"100%\")\r\n            .style(\"width\", \"100%\")\r\n            ;\r\n        this._list.target(domNode);\r\n    }\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n        const listWidgets = this._list.widgets();\r\n        this.data().forEach((row, idx) => {\r\n            if (!listWidgets[idx]) {\r\n                listWidgets[idx] = this.updateListProperties(new VerticalList(), idx)\r\n                    .widgets([\r\n                        this.updateEntityProperties(new Entity(), idx),\r\n                        new Html().html(this.data()[idx][this.htmlColumnIndex_exists() ? this.htmlColumnIndex() : 1])\r\n                    ]);\r\n            } else {\r\n                listWidgets[idx] = this.updateListProperties(listWidgets[idx], idx);\r\n                this.updateEntityProperties(listWidgets[idx].widgets()[0], idx);\r\n                listWidgets[idx]\r\n                    .widgets()[1]\r\n                    .html(this.data()[idx][this.htmlColumnIndex_exists() ? this.htmlColumnIndex() : 1])\r\n                    ;\r\n            }\r\n        });\r\n        this._list.widgets(listWidgets.slice(0, this.data().length));\r\n        this._list.resize().render();\r\n    }\r\n    updateListProperties(list, idx) {\r\n        return list\r\n            .disableScroll(true)\r\n            .widgetsFlexBasis([this.iconSize() + \"px\", `calc(100% - ${this.iconSize()}px)`])\r\n            ;\r\n    }\r\n    updateEntityProperties(entity, idx) {\r\n        return entity\r\n            .icon(this.iconColumnIndex_exists() ? this.data()[idx][this.iconColumnIndex()] : \"?\")\r\n            .iconColor(this.iconColorColumnIndex_exists() ? this.data()[idx][this.iconColorColumnIndex()] : \"#000\")\r\n            .iconDiameter(this.iconSize())\r\n            .iconPaddingPercent(0)\r\n            ;\r\n    }\r\n}\r\nIconList.prototype._class += \" other_IconList\";\r\n\r\nexport interface IconList {\r\n    iconSize(): number;\r\n    iconSize(_: number): this;\r\n    iconColumnIndex(): number;\r\n    iconColumnIndex(_: number): this;\r\n    iconColumnIndex_exists(): boolean;\r\n    iconColorColumnIndex(): number;\r\n    iconColorColumnIndex(_: number): this;\r\n    iconColorColumnIndex_exists(): boolean;\r\n    htmlColumnIndex(): number;\r\n    htmlColumnIndex(_: number): this;\r\n    htmlColumnIndex_exists(): boolean;\r\n}\r\nIconList.prototype.publish(\"iconSize\", 72, \"number\", \"Size of icon (pixels)\");\r\nIconList.prototype.publish(\"iconColumnIndex\", 0, \"number\", \"Index of column containing icon character\");\r\nIconList.prototype.publish(\"iconColorColumnIndex\", 1, \"number\", \"Index of column containing icon color\");\r\nIconList.prototype.publish(\"htmlColumnIndex\", 2, \"number\", \"Index of column containing html string\");\r\n","import { HTMLWidget } from \"@hpcc-js/common\";\r\nimport { event as d3Event, select as d3Select } from \"d3-selection\";\r\n\r\nimport \"../src/Paginator.css\";\r\n\r\nexport class Paginator extends HTMLWidget {\r\n    _tNumPages;\r\n    _numList;\r\n    paginator;\r\n    side;\r\n    _onSelect;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this._tag = \"div\";\r\n\r\n        this._tNumPages = 1; // np\r\n\r\n        this._numList = []; // pn\r\n    }\r\n\r\n    postUpdate(domNode, element) { }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        const context = this;\r\n\r\n        this.paginator = element.append(\"ul\").attr(\"class\", \"paginator pagination pagination-sm\");\r\n        this.side = element.append(\"div\").attr(\"class\", \"paginator pagination side\");\r\n\r\n        this.side.append(\"span\")\r\n            .classed(\"side\", true)\r\n            .text(\"Page \")\r\n            ;\r\n\r\n        this.side.append(\"input\")\r\n            .attr(\"type\", \"number\")\r\n            .attr(\"class\", \"currentPageNumber\")\r\n            .property(\"value\", 1)\r\n            .attr(\"min\", 1)\r\n            .on(\"change\", function () {\r\n                context.pageNumber(this.value);\r\n                context._onSelect(this.value);\r\n            })\r\n            ;\r\n\r\n        this.side.append(\"span\")\r\n            .classed(\"side total\", true)\r\n            .text(\" of 1\")\r\n            ;\r\n    }\r\n\r\n    update(domNode, element) {\r\n        const context = this;\r\n        element\r\n            .style(\"bottom\", this.bottom() + \"px\")\r\n            .style(\"right\", this.right() + \"px\")\r\n            ;\r\n\r\n        this._tNumPages = Math.ceil(this.numItems() / this.itemsPerPage()) || 1;\r\n\r\n        if (this.pageNumber() > this._tNumPages) { this.pageNumber(1); }\r\n\r\n        this._numList = [];\r\n        if (this.numItems()) {\r\n            this._numList.push(\"first\");\r\n            for (let x = -this.adjacentPages(); x <= this.adjacentPages(); x++) {\r\n                if (this.pageNumber() + x > 0 && this.pageNumber() + x <= this._tNumPages) {\r\n                    this._numList.push(this.pageNumber() + x);\r\n                }\r\n            }\r\n            this._numList.push(\"last\");\r\n        }\r\n\r\n        this.side.select(\".total\").text(\" of \" + this._tNumPages);\r\n        this.side.select(\".currentPageNumber\").property(\"value\", this.pageNumber());\r\n        this.side.select(\".currentPageNumber\").attr(\"max\", this._tNumPages);\r\n\r\n        const page = this.paginator.selectAll(\"li\").data(this._numList, function (d) { return d; });\r\n        page\r\n            .enter()\r\n            .append(function (d) {\r\n                const li = document.createElement(\"li\");\r\n\r\n                if (d !== context.pageNumber()) {\r\n                    const a = document.createElement(\"a\");\r\n                    const linkText = document.createTextNode(d);\r\n\r\n                    a.appendChild(linkText);\r\n                    a.href = \"#\";\r\n                    li.appendChild(a);\r\n\r\n                    return li;\r\n                } else {\r\n                    const span = document.createElement(\"span\");\r\n                    span.innerHTML = d;\r\n\r\n                    li.appendChild(span);\r\n\r\n                    return li;\r\n                }\r\n            })\r\n            .on(\"click\", function (d, i) {\r\n                d3Event.preventDefault();\r\n                context.side.select(\".currentPageNumber\").property(\"value\", context.pageNumber());\r\n                switch (d) {\r\n                    case \"first\":\r\n                        if (context.pageNumber() !== 1) {\r\n                            context.pageNumber(1);\r\n                            context._onSelect(1, \"previous\");\r\n                        }\r\n                        break;\r\n                    case \"last\":\r\n                        if (context.pageNumber() !== context._tNumPages) {\r\n                            context.pageNumber(context._tNumPages);\r\n                            context._onSelect(context._tNumPages, \"previous\");\r\n                        }\r\n                        break;\r\n                    default:\r\n                        context.pageNumber(d);\r\n                        context._onSelect(d);\r\n                }\r\n            })\r\n            ;\r\n\r\n        page.classed(\"active\", function (e, j) { return e === context.pageNumber(); })\r\n            .select(\"a\")\r\n            .text(function (d) { return d; })\r\n            ;\r\n\r\n        page.exit().remove();\r\n        page.order();\r\n\r\n        if (this.numItems() === 0) {\r\n            d3Select(domNode).remove();\r\n        }\r\n    }\r\n\r\n    exit(domNode, element) {\r\n        super.exit(domNode, element);\r\n    }\r\n\r\n    itemsPerPage: { (): number; (_: number): Paginator };\r\n    itemsPerPage_exists: () => boolean;\r\n    numItems: { (): number; (_: number): Paginator };\r\n    numItems_exists: () => boolean;\r\n    pageNumber: { (): number; (_: number): Paginator };\r\n    pageNumber_exists: () => boolean;\r\n    adjacentPages: { (): number; (_: number): Paginator };\r\n    adjacentPages_exists: () => boolean;\r\n    bottom: { (): number; (_: number): Paginator };\r\n    bottom_exists: () => boolean;\r\n    right: { (): number; (_: number): Paginator };\r\n    right_exists: () => boolean;\r\n}\r\nPaginator.prototype._class += \" other_Paginator\";\r\n\r\nPaginator.prototype.publish(\"itemsPerPage\", 2, \"number\", \"Pagination items per page\", null, { tags: [\"Private\"] });\r\n\r\nPaginator.prototype.publish(\"numItems\", 10, \"number\", \"Pagination total number of items\", null, { tags: [\"Private\"] });\r\nPaginator.prototype.publish(\"pageNumber\", 1, \"number\", \"Pagination set or get the page number\", null, { tags: [\"Private\"] });\r\nPaginator.prototype.publish(\"adjacentPages\", 2, \"number\", \"Number of page indexes either side of current one\", null, { tags: [\"Private\"] });\r\nPaginator.prototype.publish(\"bottom\", 20, \"number\", \"Pagination bottom offset\", null, { tags: [\"Private\"] });\r\nPaginator.prototype.publish(\"right\", 20, \"number\", \"Pagination right offset\", null, { tags: [\"Private\"] });\r\n","import { HTMLWidget, Platform, Utility, Widget } from \"@hpcc-js/common\";\r\nimport { event as d3Event, select as d3Select, selectAll as d3SelectAll } from \"d3-selection\";\r\nimport { Paginator } from \"./Paginator\";\r\n\r\nimport \"../src/Table.css\";\r\n\r\nfunction replacer(key, value) {\r\n    if (value instanceof Widget) {\r\n        return \"Widget with class: \" + value.classID();\r\n    }\r\n    return value;\r\n}\r\n\r\nexport class Table extends HTMLWidget {\r\n    protected _paginator;\r\n    protected _selectionBag;\r\n    protected _selectionPrevClick;\r\n    protected _paginatorTableSpacing;\r\n\r\n    tableDiv;\r\n    thead;\r\n    table;\r\n    fixedHead;\r\n    fixedHeadTable;\r\n    fixedThead;\r\n    unfixedThead;\r\n    tbody;\r\n    tfoot;\r\n    fixedCol;\r\n    fixedColTable;\r\n    fixedColHead;\r\n    fixedColHeadRow;\r\n    fixedColBody;\r\n    fixedColFoot;\r\n    fixedColFootRow;\r\n    protected _prevDescending;\r\n    protected _prevSortByFieldIndex;\r\n    protected _hasChildWidgets;\r\n    protected _tNumPages;\r\n    protected _empty_col_idx_arr: any[];\r\n\r\n    constructor() {\r\n        super();\r\n        this._tag = \"div\";\r\n        this.columns([]);\r\n        this._paginator = new Paginator();\r\n        this._selectionBag = new Utility.Selection(this);\r\n        this._selectionPrevClick = null;\r\n        this._paginatorTableSpacing = 4;\r\n    }\r\n\r\n    size(): any;\r\n    size(_): Widget;\r\n    size(_?): any | Widget {\r\n        const retVal = super.size.apply(this, arguments);\r\n        if (arguments.length) {\r\n            if (this.tableDiv) {\r\n                const topMargin = this.showHeader() && this.fixedHeader() ? this.thead.property(\"offsetHeight\") : 0;\r\n                this.tableDiv\r\n                    .style(\"width\", this._size.width + \"px\")\r\n                    .style(\"height\", this._size.height - topMargin + \"px\")\r\n                    ;\r\n                this._element\r\n                    .style(\"width\", this._size.width + \"px\")\r\n                    .style(\"height\", this._size.height + \"px\")\r\n                    ;\r\n            }\r\n        }\r\n\r\n        return retVal;\r\n    }\r\n\r\n    isHidden(colIdx) {\r\n        if (this.pivot()) return false;\r\n        if (this.hiddenColumns().indexOf(colIdx) !== -1) return true;\r\n        const fields = this.fields();\r\n        if (fields && fields[colIdx] && (fields[colIdx].type() === \"hidden\" || this._empty_col_idx_arr.indexOf(colIdx) !== -1)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    tableColumns(_?: string[]): string[] {\r\n        const retVal = this.columns.apply(this, arguments);\r\n        if (!arguments.length && this.pivot()) {\r\n            return this._db.column(0);\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n    tableData(_?) {\r\n        const retVal = this.data.apply(this, arguments);\r\n        if (!arguments.length && this.pivot()) {\r\n            return this._db.columns().filter(function (col, idx) { return idx > 0; });\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n    field(rowIdx, colIdx) {\r\n        const noTransform = { transform: d => d };\r\n        if (this.pivot()) {\r\n            if (colIdx === 0) return noTransform;\r\n            return this.fields()[rowIdx + 1];\r\n        }\r\n        if (rowIdx === -1) return noTransform;\r\n        return this.fields()[colIdx];\r\n    }\r\n\r\n    calcFieldsIndex(colIdx) {\r\n        let i = -1;\r\n        let offset = 0;\r\n        const colLen = this.columns().length;\r\n        let visibleCount = 0;\r\n        while (i < colLen && visibleCount <= colIdx) {\r\n            i++;\r\n            if (this.isHidden(i)) {\r\n                offset++;\r\n            } else {\r\n                visibleCount++;\r\n            }\r\n        }\r\n        return colIdx + offset;\r\n    }\r\n\r\n    getEmptyColumnIdxArr(columns, data) {\r\n        const ret_arr = [];\r\n        if (this.hideEmptyColumns()) {\r\n            for (let col_idx = 0; col_idx < columns.length; col_idx++) {\r\n                let column_is_empty = true;\r\n                for (let row_idx = 0; row_idx < data.length; row_idx++) {\r\n                    if ([\"\", null, undefined].indexOf(data[row_idx][col_idx]) === -1) {\r\n                        column_is_empty = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (column_is_empty) {\r\n                    ret_arr.push(col_idx);\r\n                }\r\n            }\r\n        }\r\n        return ret_arr;\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        this._placeholderElement.style(\"overflow\", \"hidden\");\r\n\r\n        this.tableDiv = element.append(\"div\").attr(\"class\", \"tableDiv\");\r\n        this.table = this.tableDiv.append(\"table\");\r\n        this.fixedHead = element.append(\"div\").classed(\"header-wrapper\", true);\r\n        this.fixedHeadTable = this.fixedHead.append(\"table\");\r\n        this.fixedThead = this.fixedHeadTable.append(\"thead\").append(\"tr\");\r\n        this.unfixedThead = this.table.append(\"thead\").append(\"tr\");\r\n        this.tbody = this.table.append(\"tbody\");\r\n        this.tfoot = this.table.append(\"tfoot\").append(\"tr\");\r\n        this.fixedCol = element.append(\"div\").classed(\"rows-wrapper\", true);\r\n        this.fixedColTable = this.fixedCol.append(\"table\");\r\n        this.fixedColHead = this.fixedColTable.append(\"thead\");\r\n        this.fixedColHeadRow = this.fixedColHead.append(\"tr\");\r\n        this.fixedColBody = this.fixedColTable.append(\"tbody\");\r\n        this.fixedColFoot = this.fixedColTable.append(\"tfoot\");\r\n        this.fixedColFootRow = this.fixedColFoot.append(\"tr\");\r\n\r\n        this.tableDiv\r\n            .style(\"overflow\", \"auto\")\r\n            ;\r\n    }\r\n\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n        const context = this;\r\n        const columns = context.tableColumns();\r\n        const data = context.tableData();\r\n        const scrollLeft = this.tableDiv.node().scrollLeft;\r\n        this._empty_col_idx_arr = this.getEmptyColumnIdxArr(columns, data);\r\n\r\n        this.element().selectAll(\"table,tbody,th,td\").style(\"width\", null);\r\n\r\n        if (this.sortByFieldIndex_exists() && (this._prevSortByFieldIndex !== this.sortByFieldIndex() || this._prevDescending !== this.descending())) {\r\n            Utility.multiSort(data, [{ idx: this.sortByFieldIndex(), reverse: this.descending() }]);\r\n            this._prevSortByFieldIndex = this.sortByFieldIndex();\r\n            this._prevDescending = this.descending();\r\n        }\r\n\r\n        this._hasChildWidgets = false;\r\n\r\n        if (this.fixedHeader()) {\r\n            this.thead = this.fixedThead;\r\n        } else {\r\n            this.thead = this.unfixedThead;\r\n        }\r\n        this.fixedHead.style(\"display\", this.fixedHeader() ? \"table-row\" : \"none\");\r\n        this.unfixedThead.style(\"display\", this.fixedHeader() ? \"none\" : \"table-row\");\r\n\r\n        const thSel = this.thead.selectAll(\"th\").data(this.showHeader() ? columns.filter(function (col, idx) {\r\n            return !context.isHidden(idx) && context._empty_col_idx_arr.indexOf(idx) === -1;\r\n        }) : []);\r\n        const thUpdate = thSel.enter().append(\"th\")\r\n            .each(function (d) {\r\n                const element2 = d3Select(this);\r\n                element2\r\n                    .append(\"span\")\r\n                    .attr(\"class\", \"thText\")\r\n                    ;\r\n                element2\r\n                    .append(\"span\")\r\n                    .attr(\"class\", \"thIcon\")\r\n                    ;\r\n            })\r\n            .on(\"click\", function (column, idx) {\r\n                context.headerClick(column, idx);\r\n            })\r\n            .merge(thSel)\r\n            .style(\"background-color\", this.theadRowBackgroundColor())\r\n            .style(\"border-color\", this.theadCellBorderColor())\r\n            .style(\"color\", this.theadFontColor())\r\n            .style(\"font-size\", this.theadFontSize())\r\n            ;\r\n        thUpdate.select(\".thText\")\r\n            .style(\"font-family\", this.theadFontFamily())\r\n            .text(function (column, idx) {\r\n                const fieldsIdx = context.calcFieldsIndex(idx);\r\n                return context.field(-1, fieldsIdx).transform(column);\r\n            })\r\n            ;\r\n        thUpdate.select(\".thIcon\")\r\n            .text(function (column, idx) {\r\n                if (context.descending()) {\r\n                    return context.sortByFieldIndex() === idx ? \"\\uf078\" : \"\";\r\n                } else {\r\n                    return context.sortByFieldIndex() === idx ? \"\\uf077\" : \"\";\r\n                }\r\n            })\r\n            ;\r\n        thSel.exit()\r\n            .remove()\r\n            ;\r\n        thUpdate.order();\r\n\r\n        if (this.paginationLimit()) {\r\n            this.pagination(data.length >= parseInt(this.paginationLimit()) ? true : false);\r\n        }\r\n        if (this.pagination()) {\r\n            if (this._paginator.target() === null) {\r\n                this._paginator.target(element.node());\r\n            }\r\n\r\n            const ipp = this._calcRowsPerPage(thUpdate);\r\n            this.itemsPerPage(ipp);\r\n\r\n            this._paginator.numItems(data.length);\r\n            this._tNumPages = Math.ceil(this._paginator.numItems() / this.itemsPerPage()) || 1;\r\n            if (this.pageNumber() > this._tNumPages || this.pageNumber() <= 0) { this.pageNumber(1); } // resets if current pagenum selected out of range\r\n\r\n            this._paginator._onSelect = function (p, d) {\r\n                context.pageNumber(p);\r\n                context.render();\r\n                return;\r\n            };\r\n        } else {\r\n            this._paginator.numItems(0); // remove widget\r\n        }\r\n\r\n        // pageNumber starts at index 1\r\n        const startIndex = this.pageNumber() - 1;\r\n        const itemsOnPage = this.itemsPerPage();\r\n\r\n        const start = startIndex * itemsOnPage;\r\n        const end = startIndex * parseInt(itemsOnPage) + parseInt(itemsOnPage);\r\n\r\n        let tData = null;\r\n\r\n        if (this.topN()) {\r\n            tData = data.slice(0, this.topN());\r\n        } else if (this.pagination()) {\r\n            tData = data.slice(start, end);\r\n        } else {\r\n            tData = data;\r\n        }\r\n\r\n        const totalRow: any[] = [this.totalledLabel() ? this.totalledLabel() : null];\r\n        if (this.totalledColumns().length !== 0) {\r\n            for (let i = 0; i < this.totalledColumns().length; i++) this.totalledColumns()[i] = +this.totalledColumns()[i];\r\n            for (let j = 1; j < columns.length; j++) {\r\n                let sum = 0;\r\n                if (this.totalledColumns().indexOf(j) !== -1) {\r\n                    for (let k = 0; k < tData.length; k++) {\r\n                        sum = sum + tData[k][j];\r\n                    }\r\n                    totalRow.push(sum);\r\n                } else {\r\n                    totalRow.push(\"\");\r\n                }\r\n            }\r\n\r\n            const tfSel = this.tfoot.selectAll(\"td\").data(totalRow);\r\n            tfSel.enter()\r\n                .append(\"td\")\r\n                .merge(tfSel)\r\n                .style(\"background-color\", this.tfootRowBackgroundColor())\r\n                .style(\"border-color\", this.tfootCellBorderColor())\r\n                .style(\"color\", this.tfootFontColor())\r\n                .style(\"font-size\", this.tfootFontSize())\r\n            [this.renderHtmlDataCells() ? \"html\" : \"text\"](function (d, idx) {\r\n                return context.fields()[idx].transform(d);\r\n            });\r\n            tfSel.exit()\r\n                .remove()\r\n                ;\r\n        }\r\n\r\n        const rowsSel = this.tbody.selectAll(\"tr.tr_\" + this.id()).data(tData.map(function (d, idx) {\r\n            //  TODO - Move fix closer to data source?\r\n            for (let i = 0; i < d.length; ++i) {\r\n                if (d[i] === undefined) {\r\n                    d[i] = null;\r\n                }\r\n            }\r\n            return {\r\n                rowIdx: idx,\r\n                row: d\r\n            };\r\n        }));\r\n        const rowsUpdate = rowsSel.enter().append(\"tr\")\r\n            .attr(\"class\", \"tr_\" + this.id())\r\n            .on(\"click.selectionBag\", function (_d) {\r\n                if (_d.row) {\r\n                    const d = _d.row;\r\n                    const i = _d.rowIdx;\r\n                    context.selectionBagClick(d, i);\r\n                    context.applyRowStyles(context.getBodyRow(i));\r\n                    context.applyFirstColRowStyles(context.getFixedRow(i));\r\n                }\r\n            }, true)  //  capture=true:  event is caught on the way down the DOM before the cell click.\r\n            .on(\"mouseover\", function (_d) {\r\n                if (_d.row) {\r\n                    const i = _d.rowIdx;\r\n                    const fixedLeftRows = context.getFixedRow(i);\r\n                    if (!fixedLeftRows.empty()) {\r\n                        fixedLeftRows.classed(\"hover\", true);\r\n                    }\r\n                    const tbodyRows = context.getBodyRow(i);\r\n                    tbodyRows.classed(\"hover\", true);\r\n                    context.applyStyleToRows(tbodyRows);\r\n                    context.applyFirstColRowStyles(fixedLeftRows);\r\n                }\r\n            })\r\n            .on(\"mouseout\", function (_d) {\r\n                if (_d.row) {\r\n                    const i = _d.rowIdx;\r\n                    const fixedLeftRows = context.getFixedRow(i);\r\n                    fixedLeftRows.classed(\"hover\", false);\r\n                    const tbodyRows = context.getBodyRow(i);\r\n                    tbodyRows.classed(\"hover\", false);\r\n                    context.applyStyleToRows(tbodyRows);\r\n                    context.applyFirstColRowStyles(fixedLeftRows);\r\n                }\r\n            })\r\n            .merge(rowsSel)\r\n            .classed(\"selected\", function (_d) {\r\n                const d = _d.row;\r\n                return context._selectionBag.isSelected(context._createSelectionObject(d));\r\n            })\r\n            .classed(\"trId\" + this._id, true)\r\n            ;\r\n        rowsSel.exit()\r\n            .remove()\r\n            ;\r\n        this.applyStyleToRows(rowsUpdate);\r\n\r\n        const cellsSel = rowsUpdate.selectAll(\".td_\" + this.id()).data(function (_d, _trIdx) {\r\n            return _d.row.filter(function (cell, idx) {\r\n                return idx < columns.length && !context.isHidden(idx) && context._empty_col_idx_arr.indexOf(idx) === -1;\r\n            }).map(function (cell, idx) {\r\n                return {\r\n                    rowInfo: _d,\r\n                    colIdx: idx,\r\n                    cell\r\n                };\r\n            });\r\n        });\r\n        cellsSel.enter()\r\n            .append(\"td\")\r\n            .attr(\"class\", \"td_\" + this.id())\r\n            .on(\"click\", function (tdContents) {\r\n                if (tdContents.rowInfo) {\r\n                    context.click(context.rowToObj(tdContents.rowInfo.row), context.columns()[tdContents.colIdx], context._selectionBag.isSelected(context._createSelectionObject(tdContents.rowInfo.row)));\r\n                }\r\n            })\r\n            .on(\"dblclick\", function (tdContents, idx) {\r\n                if (tdContents.rowInfo) {\r\n                    context.dblclick(context.rowToObj(tdContents.rowInfo.row), context.columns()[tdContents.colIdx], context._selectionBag.isSelected(context._createSelectionObject(tdContents.rowInfo.row)));\r\n                }\r\n            })\r\n            .each(function (tdContents, tdIdx) {\r\n                const alignment = context.getColumnAlignment(tdContents.rowInfo.rowIdx, tdContents.colIdx, tdContents.cell);\r\n                const el = d3Select(this);\r\n                el\r\n                    .style(\"height\", null)\r\n                    .style(\"text-align\", alignment)\r\n                    .style(\"vertical-align\", context.verticalAlign())\r\n                    .classed(\"tr-\" + tdContents.rowInfo.rowIdx + \"-td-\" + tdIdx, true)\r\n                    ;\r\n            })\r\n            .merge(cellsSel)\r\n            .each(function (tdContents) {\r\n                const el = d3Select(this);\r\n                if (tdContents.cell instanceof Widget) {\r\n                    el[context.renderHtmlDataCells() ? \"html\" : \"text\"](null);\r\n                    const widgetDiv = el.selectAll(\".div_\" + context.id()).data([tdContents.cell], function (d: any) { return d.id(); });\r\n                    widgetDiv.exit()\r\n                        .each(function (d: any) {\r\n                            d.target(null);\r\n                        })\r\n                        .remove()\r\n                        ;\r\n                    widgetDiv.enter().append(\"div\")\r\n                        .attr(\"class\", \"div_\" + context.id())\r\n                        .style(\"width\", context.minWidgetWidth() + \"px\")\r\n                        .style(\"height\", context.minWidgetHeight() + \"px\")\r\n                        .each(function (d) {\r\n                            const widgetDiv2 = d3Select(this);\r\n                            d._parentWidget = context;\r\n                            if (d._class.indexOf(\"childWidget\") < 0) {\r\n                                d._class = \"childWidget \" + d._class;\r\n                            }\r\n                            d\r\n                                .target(null)\r\n                                .target(widgetDiv2.node())\r\n                                ;\r\n                        })\r\n                        .merge(widgetDiv as any)\r\n                        .each(function (d) {\r\n                            d\r\n                                .resize()\r\n                                .lazyRender()\r\n                                ;\r\n                            context._hasChildWidgets = true;\r\n                        })\r\n                        ;\r\n                } else {\r\n                    el.selectAll(\".div_\" + context.id()).remove();\r\n                    const fieldsIdx = context.calcFieldsIndex(tdContents.colIdx);\r\n                    el[context.renderHtmlDataCells() ? \"html\" : \"text\"](\r\n                        context.field(tdContents.rowInfo.rowIdx, fieldsIdx).transform(tdContents.cell)\r\n                    );\r\n                }\r\n            })\r\n            ;\r\n        cellsSel.exit()\r\n            .remove()\r\n            ;\r\n        const tableMarginHeight = parseInt(this.thead.node().offsetHeight);\r\n\r\n        if (this.pagination() && this._hasChildWidgets) {\r\n            this.tableDiv.style(\"overflow-y\", \"auto\");\r\n            this.table.style(\"margin-bottom\", \"50px\");\r\n            console.log(\"Warning: displaying another widget in the table may cause problems with pagination\");\r\n        } else {\r\n            this.tableDiv.style(\"overflow-y\", null);\r\n            this.table.style(\"margin-bottom\", null);\r\n\r\n        }\r\n        this.size(this._size);\r\n\r\n        let fixedColWidth = 0;\r\n        const fixedColThSel = this.fixedColHeadRow.selectAll(\"th\").data(this.fixedColumn() && this.showHeader() ? [columns[0]] : []);\r\n        const fixedColThUpdate = fixedColThSel.enter().append(\"th\")\r\n            .each(function (d) {\r\n                const element2 = d3Select(this);\r\n                element2\r\n                    .append(\"span\")\r\n                    .attr(\"class\", \"thText\")\r\n                    ;\r\n                element2\r\n                    .append(\"span\")\r\n                    .attr(\"class\", \"thIcon\")\r\n                    ;\r\n            })\r\n            .on(\"click\", function (column, idx) {\r\n                context.headerClick(column, idx);\r\n            })\r\n            .merge(fixedColThSel)\r\n            .style(\"background-color\", this.theadRowBackgroundColor())\r\n            .style(\"border-color\", this.theadCellBorderColor())\r\n            .style(\"color\", this.theadFontColor())\r\n            .style(\"font-size\", this.theadFontSize())\r\n            ;\r\n        fixedColThUpdate.select(\".thText\")\r\n            .style(\"font-family\", this.theadFontFamily())\r\n            .text(function (column) {\r\n                return column;\r\n            })\r\n            ;\r\n        fixedColThUpdate.select(\".thIcon\")\r\n            .text(function (column, idx) {\r\n                if (context.descending()) {\r\n                    return context.sortByFieldIndex() === idx ? \"\\uf078\" : \"\";\r\n                } else {\r\n                    return context.sortByFieldIndex() === idx ? \"\\uf077\" : \"\";\r\n                }\r\n            })\r\n            ;\r\n        fixedColThSel.exit()\r\n            .remove()\r\n            ;\r\n\r\n        const fixedColTrSel = this.fixedColBody.selectAll(\"tr\").data(this.fixedColumn() ? tData : []);\r\n        const fixedColTrUpdate = fixedColTrSel.enter().append(\"tr\")\r\n            .attr(\"class\", function () {\r\n                return \"trId\" + context._id;\r\n            })\r\n            .merge(fixedColTrSel)\r\n            .on(\"click\", function (d, i) {\r\n                (d3Select(rowsUpdate[0][i]).on(\"click.selectionBag\") as any)(rowsUpdate.data()[i], i)\r\n                    ;\r\n            })\r\n            .on(\"mouseover\", function (d, i) {\r\n                (d3Select(rowsUpdate[0][i]).on(\"mouseover\") as any)(rowsUpdate.data()[i], i)\r\n                    ;\r\n            })\r\n            .on(\"mouseout\", function (d, i) {\r\n                (d3Select(rowsUpdate[0][i]).on(\"mouseout\") as any)(rowsUpdate.data()[i], i)\r\n                    ;\r\n            })\r\n            .classed(\"selected\", function (d) {\r\n                return context._selectionBag.isSelected(context._createSelectionObject(d));\r\n            })\r\n            ;\r\n        fixedColTrSel.exit()\r\n            .remove()\r\n            ;\r\n        const fixedColTdSel = fixedColTrUpdate.selectAll(\"td\").data(function (d, i) {\r\n            return [d[0]];\r\n        });\r\n        const fixedColTdUpdate = fixedColTdSel.enter().append(\"td\")\r\n            .merge(fixedColTdSel)[this.renderHtmlDataCells() ? \"html\" : \"text\"](function (d): any {\r\n                if (typeof (d) === \"string\") {\r\n                    return d.trim();\r\n                } else if (typeof (d) === \"number\") {\r\n                    return d;\r\n                }\r\n                return \"\";\r\n            });\r\n        fixedColTdSel.exit()\r\n            .remove()\r\n            ;\r\n\r\n        const fixedColFootTdSel = this.fixedColFootRow.selectAll(\"td\").data(this.fixedColumn() && this.totalledLabel() ? [this.totalledLabel()] : []);\r\n        const fixedColFootTdUpdate = fixedColFootTdSel.enter().append(\"td\")\r\n            .merge(fixedColFootTdSel)[this.renderHtmlDataCells() ? \"html\" : \"text\"](function (d): any {\r\n                if (typeof (d) === \"string\") {\r\n                    return d.trim();\r\n                } else if (typeof (d) === \"number\") {\r\n                    return d;\r\n                }\r\n                return \"\";\r\n            });\r\n        fixedColFootTdSel.exit()\r\n            .remove()\r\n            ;\r\n\r\n        if (this.fixedColumn() && !this.fixedSize() && fixedColFootTdUpdate.length) {\r\n            if (this.showHeader()) {\r\n                fixedColWidth = fixedColFootTdUpdate.property(\"offsetWidth\") > fixedColFootTdUpdate.property(\"offsetWidth\") ? fixedColFootTdUpdate.property(\"offsetWidth\") : fixedColFootTdUpdate.property(\"offsetWidth\");\r\n            } else {\r\n                fixedColWidth = fixedColFootTdUpdate.property(\"offsetWidth\");\r\n            }\r\n            this.fixedCol\r\n                .style(\"position\", \"absolute\")\r\n                .style(\"margin-top\", -this.tableDiv.property(\"scrollTop\") + tableMarginHeight + \"px\")\r\n                ;\r\n            fixedColTdUpdate\r\n                .style(\"width\", fixedColWidth + \"px\")\r\n                ;\r\n            this.fixedColHead\r\n                .style(\"position\", \"absolute\")\r\n                .style(\"margin-top\", (this.fixedHeader() ? this.tableDiv.property(\"scrollTop\") : 0) - tableMarginHeight + \"px\")\r\n                ;\r\n            fixedColThUpdate\r\n                .style(\"width\", fixedColWidth + \"px\")\r\n                ;\r\n            rowsUpdate.each(function (d, i) {\r\n                const height = d3Select(this).select(\"td\").property(\"offsetHeight\");\r\n                d3Select(fixedColTdUpdate[i][0]).style(\"height\", height + \"px\");\r\n            });\r\n        }\r\n\r\n        this.table\r\n            .style(\"margin-left\", -fixedColWidth + \"px\")\r\n            ;\r\n        this.tableDiv\r\n            .style(\"margin-left\", fixedColWidth + \"px\")\r\n            .style(\"width\", this.width() - fixedColWidth + \"px\")\r\n            ;\r\n\r\n        if (!rowsUpdate.empty()) this.setColumnWidths(rowsUpdate);\r\n\r\n        let box;\r\n        let newTableHeight;\r\n        let finalWidth;\r\n        let maxWidth;\r\n        if (this.fixedSize()) {\r\n            const node = d3Select(\".tableDiv > table\").node();\r\n            if (node) {\r\n                box = (node as any).getBoundingClientRect();\r\n                let newTableHeight;\r\n                let finalWidth;\r\n                if (box.width !== 0 && box.height !== 0) {\r\n                    calcWidth();\r\n                    calcHeight();\r\n                } else {\r\n                    if (box.height - tableMarginHeight <= context.tableDiv.property(\"offsetHeight\")) {\r\n                        calcHeight();\r\n                    } else {\r\n                        if (context.fixedHeader()) {\r\n                            newTableHeight = context.tableDiv.property(\"offsetHeight\"); //  is tableDiv correct?\r\n                            newTableHeight = newTableHeight + \"px\";\r\n                        } else {\r\n                            newTableHeight = \"100%\";\r\n                        }\r\n                    }\r\n                    if (box.width - fixedColWidth < context.tableDiv.property(\"offsetWidth\")) {\r\n                        calcWidth();\r\n                    } else {\r\n                        if (context.fixedColumn()) {\r\n                            finalWidth = context.tableDiv.property(\"offsetWidth\") - fixedColWidth; //  is tableDiv correct?\r\n                            finalWidth = finalWidth + \"px\";\r\n                        } else {\r\n                            finalWidth = \"100%\";\r\n                        }\r\n                    }\r\n                }\r\n                if (element.classed(\"childWidget\")) {\r\n                    context._placeholderElement\r\n                        .style(\"width\", finalWidth + \"px\")\r\n                        .style(\"height\", newTableHeight + \"px\")\r\n                        ;\r\n                    context.tableDiv\r\n                        .style(\"overflow\", \"hidden\")\r\n                        ;\r\n                }\r\n                context.size({ width: finalWidth, height: newTableHeight });\r\n            }\r\n        }\r\n\r\n        this.setOnScrollEvents(this.tableDiv.node(), tableMarginHeight);\r\n\r\n        function calcWidth() {\r\n            const newTableWidth = box.width;\r\n            maxWidth = context.tbody.property(\"offsetWidth\") + 1;\r\n            finalWidth = newTableWidth > maxWidth ? maxWidth : newTableWidth;\r\n            finalWidth = finalWidth;\r\n        }\r\n\r\n        function calcHeight() {\r\n            newTableHeight = context.tbody.property(\"offsetHeight\") + tableMarginHeight;\r\n            newTableHeight = newTableHeight;\r\n        }\r\n\r\n        this._paginator.render();\r\n        setTimeout(function () {\r\n            context._paginator\r\n                .right((context.hasVScroll(element) ? Platform.getScrollbarWidth() : 0) + context._paginatorTableSpacing)\r\n                .bottom((context.hasHScroll(element) ? Platform.getScrollbarWidth() : 0) + context._paginatorTableSpacing)\r\n                .render(function () {\r\n                    context.tableDiv.node().scrollLeft = scrollLeft;\r\n                })\r\n                ;\r\n        }, 0);\r\n    }\r\n\r\n    exit(domNode, element) {\r\n        this._paginator.target(null);\r\n        super.exit(domNode, element);\r\n    }\r\n\r\n    setColumnWidths(rows) {\r\n        const context = this;\r\n        const firstRow = rows.filter(function (d, i) { return i === 0; });\r\n\r\n        let tds = d3Select(null);\r\n        firstRow.each(function (d) {\r\n            tds = d3SelectAll(this.childNodes);\r\n        });\r\n\r\n        const tableMarginHeight = this.fixedHeader() ? this.thead.property(\"offsetHeight\") : 0;\r\n        let totalWidth = 1;\r\n        const tdWidths = {};\r\n\r\n        tds.each(function (d, i) {\r\n            tdWidths[i] = (this as any).offsetWidth;\r\n        });\r\n\r\n        const th = this.thead.selectAll(\"th\");\r\n        th.each(function (d, i) {\r\n            const thwidth = this.offsetWidth;\r\n            const tdwidth = tds.empty() ? 0 : tdWidths[i];\r\n            const usewidth = thwidth >= tdwidth ? thwidth : tdwidth;\r\n            this.style.width = usewidth + \"px\";\r\n            tds\r\n                .filter((_d, idx) => idx === 0)\r\n                .each(function () {\r\n                    d3Select(this).style(\"width\", usewidth + \"px\");\r\n                })\r\n                ;\r\n            totalWidth += usewidth;\r\n        });\r\n        this.thead\r\n            .style(\"position\", this.fixedHeader() ? \"absolute\" : \"relative\")\r\n            .style(\"width\", totalWidth + \"px\")\r\n            .style(\"margin-top\", \"0px\")\r\n            ;\r\n        this.table\r\n            .style(\"width\", totalWidth + \"px\")\r\n            ;\r\n        this.tableDiv\r\n            .style(\"margin-top\", (context.fixedHeader() ? tableMarginHeight : 0) + \"px\")\r\n            ;\r\n        this.tbody\r\n            .style(\"width\", totalWidth + \"px\")\r\n            ;\r\n    }\r\n\r\n    getBodyRow(i) {\r\n        return this.table.selectAll(\"tbody tr.trId\" + this._id)\r\n            .filter(function (d, idx) {\r\n                return idx === i;\r\n            })\r\n            ;\r\n    }\r\n\r\n    getFixedRow(i) {\r\n        return this._element.selectAll(\".rows-wrapper tbody tr\")\r\n            .filter(function (d, idx) {\r\n                return idx === i;\r\n            })\r\n            ;\r\n    }\r\n\r\n    setOnScrollEvents(scrollNode, margHeight) {\r\n        const context = this;\r\n        scrollNode.onscroll = function (e) {\r\n            const topDelta = e.target.scrollTop;\r\n            const leftDelta = e.target.scrollLeft;\r\n            if (context.fixedHeader()) {\r\n                context.thead\r\n                    .style(\"margin-left\", -leftDelta + \"px\")\r\n                    ;\r\n            }\r\n            if (context.fixedColumn()) {\r\n                context.fixedCol\r\n                    .style(\"margin-top\", -topDelta + margHeight + \"px\")\r\n                    ;\r\n                if (context.fixedHeader()) {\r\n                    context.fixedColHead\r\n                        .style(\"margin-top\", topDelta - margHeight + \"px\")\r\n                        ;\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    _generateTempRow() {\r\n        const trow = this.tbody.append(\"tr\");\r\n        trow.append(\"td\").text(\"QQQ\");\r\n        return trow;\r\n    }\r\n\r\n    _createSelectionObject(d) {\r\n        const context = this;\r\n        return {\r\n            _id: d,\r\n            element: () => context.tbody ? context.tbody.selectAll(\"tr\").filter(function (d2) { return d2 === d; }) : d3Select(null)\r\n        };\r\n    }\r\n\r\n    _calcRowsPerPage(th) {\r\n        if (this._paginator.numItems() === 0) { // only run on first render\r\n            this._paginator.numItems(1);\r\n            this.itemsPerPage(1);\r\n        }\r\n        this._paginator.render();\r\n\r\n        const thHeight = this.thead.selectAll(\"th\").node() ? this.thead.selectAll(\"th\").node().clientHeight : 0;\r\n        const tfootHeight = this.tfoot.selectAll(\"td\").node() ? this.tfoot.selectAll(\"td\").node().clientHeight : 0;\r\n        const tmpRow = this._generateTempRow();\r\n        const tcellHeight = tmpRow.node().clientHeight;\r\n        tmpRow.remove();\r\n        const paginatorHeight = this.calcHeight(this._paginator.element());\r\n        let ipp = Math.floor((this.height() - thHeight - tfootHeight - paginatorHeight - (this.table.style(\"width\") >= this.table.style(\"width\") ? Platform.getScrollbarWidth() : 0) - this._paginatorTableSpacing * 2) / tcellHeight) || 1;\r\n        if (this.totalledColumns().length !== 0) {\r\n            ipp -= 1;\r\n        }\r\n        return ipp;\r\n    }\r\n\r\n    sort(idx) {\r\n        if (this.sortByFieldIndex() !== idx) {\r\n            this.descending(false);\r\n        } else {\r\n            this.descending(!this.descending());\r\n        }\r\n        this.sortByFieldIndex(idx);\r\n\r\n        return this;\r\n    }\r\n\r\n    selection(_) {\r\n        if (!arguments.length) return this._selectionBag.get().map(function (d) { return d._id; });\r\n        this._selectionBag.set(_.map(function (row) {\r\n            return this._createSelectionObject(row);\r\n        }, this));\r\n        return this;\r\n    }\r\n\r\n    selectionBagClick(d, i) {\r\n        if (this.multiSelect() && d3Event.shiftKey && this._selectionPrevClick) {\r\n            let inRange = false;\r\n            const rows = [];\r\n            const selection = this.tableData().filter(function (row, i2) {\r\n                let lastInRangeRow = false;\r\n                if (row === d || row === this._selectionPrevClick) {\r\n                    if (inRange) {\r\n                        lastInRangeRow = true;\r\n                    }\r\n                    inRange = !inRange;\r\n                    rows.push(i2);\r\n                }\r\n                return inRange || lastInRangeRow;\r\n            }, this);\r\n            this.selection(selection);\r\n        } else if (this.multiSelect()) {\r\n            this._selectionBag.click(this._createSelectionObject(d), d3Event);\r\n            this._selectionPrevClick = d;\r\n        } else {\r\n            const selObj = this._createSelectionObject(d);\r\n            this._selectionBag.click(selObj, { ctrlKey: this._selectionBag.isSelected(selObj) });\r\n            this._selectionPrevClick = d;\r\n        }\r\n        this.render();\r\n    }\r\n\r\n    applyHoverRowStyles(row) {\r\n        const context = this;\r\n        row\r\n            .style(\"color\", context.tbodyHoverRowFontColor())\r\n            .style(\"background-color\", context.tbodyHoverRowBackgroundColor())\r\n            ;\r\n    }\r\n    applySelectedRowStyles(row) {\r\n        const context = this;\r\n        row\r\n            .style(\"color\", context.tbodySelectedRowFontColor())\r\n            .style(\"background-color\", context.tbodySelectedRowBackgroundColor())\r\n            ;\r\n    }\r\n    applyRowStyles(row, isFirstCol: boolean = false) {\r\n        const dataRow = row.datum().row;\r\n        row\r\n            .style(\"color\", isFirstCol ? this.tbodyFirstColFontColor() : this.tbodyFontColor())\r\n            .style(\"background-color\", isFirstCol ? this.tbodyFirstColBackgroundColor() : this.tableZebraColor_exists() && this.tableData().indexOf(dataRow) % 2 ? this.tbodyRowBackgroundColor() : this.tableZebraColor())\r\n            ;\r\n    }\r\n    applyFirstColRowStyles(rows) {\r\n        this.applyStyleToRows(rows, true);\r\n    }\r\n    applyStyleToRows(rows, isFirstCol: boolean = false) {\r\n        isFirstCol = typeof isFirstCol !== \"undefined\" ? isFirstCol : false;\r\n        const context = this;\r\n        rows.each(function () {\r\n            const tr = d3Select(this);\r\n            if (tr.classed(\"hover\")) {\r\n                context.applyHoverRowStyles(tr);\r\n            } else if (tr.classed(\"selected\")) {\r\n                context.applySelectedRowStyles(tr);\r\n            } else {\r\n                context.applyRowStyles(tr, isFirstCol);\r\n            }\r\n        })\r\n            ;\r\n    }\r\n\r\n    getColumnAlignment(rowIdx, colIdx, cell) {\r\n        const fieldsIdx = this.calcFieldsIndex(colIdx);\r\n        const field = this.field(rowIdx, fieldsIdx);\r\n        switch ((field as any).__prop_type) {\r\n            case \"string\":\r\n                return this.stringAlign();\r\n            case \"number\":\r\n                return this.numberAlign();\r\n            case \"\":\r\n            case undefined:\r\n                switch (typeof cell) {\r\n                    case \"string\":\r\n                        return this.stringAlign();\r\n                    case \"number\":\r\n                        return this.numberAlign();\r\n                }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    serializeState() {\r\n        return {\r\n            selection: this._selectionBag.get().map(function (d) {\r\n                return d._id;\r\n            }),\r\n            data: this.data()\r\n        };\r\n    }\r\n\r\n    deserializeState(state) {\r\n        if (state) {\r\n            if (state.selection) {\r\n                const context = this;\r\n                this._selectionBag.set(state.selection.map(function (d) {\r\n                    return context._createSelectionObject(d);\r\n                }));\r\n            }\r\n            if (state.data) {\r\n                this.data(state.data);\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n\r\n    click(row, column, selected) {\r\n        console.log(\"click:  \" + JSON.stringify(row, replacer) + \", \" + column + \",\" + selected);\r\n    }\r\n\r\n    dblclick(row, column, selected) {\r\n        console.log(\"dblclick:  \" + JSON.stringify(row, replacer) + \", \" + column + \",\" + selected);\r\n    }\r\n\r\n    headerClick(column, idx) {\r\n        this\r\n            .sort(idx)\r\n            .render()\r\n            ;\r\n    }\r\n    renderHtmlDataCells: { (): boolean; (_: boolean): Table; };\r\n    pagination: { (): boolean; (_: boolean): Table; };\r\n    paginationLimit: { (): any; (_: any): Table; };\r\n    itemsPerPage: { (): any; (_: any): Table; };\r\n    pageNumber: { (): number; (_: number): Table; };\r\n    adjacentPages: { (): number; (_: number): Table; };\r\n    topN: { (): number; (_: number): Table; };\r\n    pivot: { (): boolean; (_: boolean): Table; };\r\n    showHeader: { (): boolean; (_: boolean): Table; };\r\n    fixedHeader: { (): boolean; (_: boolean): Table; };\r\n    fixedColumn: { (): boolean; (_: boolean): Table; };\r\n    multiSelect: { (): boolean; (_: boolean): Table; };\r\n\r\n    fixedSize: { (): boolean; (_: boolean): Table; };\r\n\r\n    hideEmptyColumns: { (): boolean; (_: boolean): Table; };\r\n\r\n    theadFontSize: { (): string; (_: string): Table; };\r\n    tbodyFontSize: { (): string; (_: string): Table; };\r\n    tfootFontSize: { (): string; (_: string): Table; };\r\n    theadFontColor: { (): string; (_: string): Table; };\r\n    tbodyFontColor: { (): string; (_: string): Table; };\r\n    tfootFontColor: { (): string; (_: string): Table; };\r\n    theadFontFamily: { (): string; (_: string): Table; };\r\n    tbodyFontFamily: { (): string; (_: string): Table; };\r\n    tfootFontFamily: { (): string; (_: string): Table; };\r\n\r\n    theadCellBorderColor: { (): string; (_: string): Table; };\r\n    tfootCellBorderColor: { (): string; (_: string): Table; };\r\n    theadRowBackgroundColor: { (): string; (_: string): Table; };\r\n    tfootRowBackgroundColor: { (): string; (_: string): Table; };\r\n\r\n    tbodyCellBorderColor: { (): string; (_: string): Table; };\r\n\r\n    tbodyRowBackgroundColor: { (): string; (_: string): Table; };\r\n    tbodyFirstColFontColor: { (): string; (_: string): Table; };\r\n    tbodyFirstColBackgroundColor: { (): string; (_: string): Table; };\r\n\r\n    tbodyHoverRowFontColor: { (): string; (_: string): Table; };\r\n    tbodyHoverRowBackgroundColor: { (): string; (_: string): Table; };\r\n\r\n    tbodySelectedRowFontColor: { (): string; (_: string): Table; };\r\n    tbodySelectedRowBackgroundColor: { (): string; (_: string): Table; };\r\n    tableZebraColor: { (): string; (_: string): Table; };\r\n    tableZebraColor_exists: () => boolean;\r\n    totalledColumns: { (): any[]; (_: any[]): Table; };\r\n    totalledLabel: { (): string; (_: string): Table; };\r\n    hiddenColumns: { (): any[]; (_: any[]): Table; };\r\n\r\n    stringAlign: { (): string; (_: string): Table; };\r\n    numberAlign: { (): string; (_: string): Table; };\r\n    verticalAlign: { (): string; (_: string): Table; };\r\n\r\n    minWidgetWidth: { (): number; (_: number): Table; };\r\n    minWidgetHeight: { (): number; (_: number): Table; };\r\n\r\n    sortByFieldIndex: { (): number; (_: number): Table; };\r\n    sortByFieldIndex_exists: () => boolean;\r\n    descending: { (): boolean; (_: boolean): Table; };\r\n}\r\nTable.prototype._class += \" other_Table\";\r\n\r\nTable.prototype.publish(\"renderHtmlDataCells\", false, \"boolean\", \"enable or disable HTML within cells\", null, { tags: [\"Private\"] });\r\nTable.prototype.publish(\"pagination\", true, \"boolean\", \"Enable or disable pagination\", null, { tags: [\"Private\"] });\r\nTable.prototype.publish(\"paginationLimit\", null, \"number\", \"Maximum number of rows allowed before pagination defaults to on\", null, { tags: [\"Private\"] });\r\nTable.prototype.publishProxy(\"itemsPerPage\", \"_paginator\");\r\nTable.prototype.publishProxy(\"pageNumber\", \"_paginator\", \"pageNumber\", 1);\r\nTable.prototype.publishProxy(\"adjacentPages\", \"_paginator\");\r\nTable.prototype.publish(\"topN\", null, \"number\", \"Total number or rows of data to be displayed in the table\", null, { tags: [\"Private\"] });\r\nTable.prototype.publish(\"pivot\", false, \"boolean\", \"Pivot Table\");\r\nTable.prototype.publish(\"showHeader\", true, \"boolean\", \"Show or hide the table header\", null, { tags: [\"Private\"] });\r\nTable.prototype.publish(\"fixedHeader\", true, \"boolean\", \"Enable or disable fixed table header\", null, { tags: [\"Private\"] });\r\nTable.prototype.publish(\"fixedColumn\", false, \"boolean\", \"Enable or disable fixed first column\", null, { tags: [\"Private\"] });\r\nTable.prototype.publish(\"multiSelect\", false, \"boolean\", \"Multiple Selection\", null, { tags: [\"Basic\"] });\r\n\r\nTable.prototype.publish(\"fixedSize\", false, \"boolean\", \"Fix Size to Min Width/Height\");\r\n\r\nTable.prototype.publish(\"hideEmptyColumns\", false, \"boolean\", \"Hide columns with all empty cells\");\r\n\r\nTable.prototype.publish(\"theadFontSize\", null, \"string\", \"Table head font size\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tbodyFontSize\", null, \"string\", \"Table body font size\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tfootFontSize\", null, \"string\", \"Table body font size\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"theadFontColor\", null, \"html-color\", \"Table head font color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tbodyFontColor\", null, \"html-color\", \"Table body font color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tfootFontColor\", null, \"html-color\", \"Table body font color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"theadFontFamily\", null, \"string\", \"Table head font family\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tbodyFontFamily\", null, \"string\", \"Table body font family\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tfootFontFamily\", null, \"string\", \"Table body font family\", null, { tags: [\"Basic\"], optional: true });\r\n\r\nTable.prototype.publish(\"theadCellBorderColor\", null, \"html-color\", \"Table head cell border color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tfootCellBorderColor\", null, \"html-color\", \"Table head cell border color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"theadRowBackgroundColor\", null, \"html-color\", \"Table head row color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tfootRowBackgroundColor\", null, \"html-color\", \"Table head row color\", null, { tags: [\"Basic\"], optional: true });\r\n\r\nTable.prototype.publish(\"tbodyCellBorderColor\", null, \"html-color\", \"Table body cell border color\", null, { tags: [\"Basic\"], optional: true });\r\n\r\nTable.prototype.publish(\"tbodyRowBackgroundColor\", null, \"html-color\", \"Table body row color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tbodyFirstColFontColor\", null, \"html-color\", \"Table body first column font color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tbodyFirstColBackgroundColor\", null, \"html-color\", \"Table body first column background color\", null, { tags: [\"Basic\"], optional: true });\r\n\r\nTable.prototype.publish(\"tbodyHoverRowFontColor\", null, \"html-color\", \"Table body hover row font color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tbodyHoverRowBackgroundColor\", null, \"html-color\", \"Table body hover row background color\", null, { tags: [\"Basic\"], optional: true });\r\n\r\nTable.prototype.publish(\"tbodySelectedRowFontColor\", null, \"html-color\", \"Table body selected row color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tbodySelectedRowBackgroundColor\", null, \"html-color\", \"Table body selected row color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"tableZebraColor\", null, \"html-color\", \"Table zebra row color\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"totalledColumns\", [], \"array\", \"Array of indices of the columns to be totalled\", null, { tags: [\"Basic\"], optional: true, disable: (w: any) => w.pivot() });\r\nTable.prototype.publish(\"totalledLabel\", null, \"string\", \"Adds a label to the first column of the 'Totalled' row\", null, { tags: [\"Basic\"], optional: true, disable: (w: any) => w.pivot() });\r\nTable.prototype.publish(\"hiddenColumns\", [], \"array\", \"Array of indices of the columns to be hidden\", null, { tags: [\"Basic\"], optional: true, disable: (w) => w.pivot() });\r\n\r\nTable.prototype.publish(\"stringAlign\", \"left\", \"set\", \"Cell alignment for strings\", [\"left\", \"right\", \"center\"], { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"numberAlign\", \"right\", \"set\", \"Cell alignment for numbers\", [\"left\", \"right\", \"center\"], { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"verticalAlign\", null, \"set\", \"Cell vertical alignment\", [null, \"middle\", \"top\", \"bottom\"], { tags: [\"Basic\"], optional: true });\r\n\r\nTable.prototype.publish(\"minWidgetWidth\", 320, \"number\", \"Minimum width of a child widget\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"minWidgetHeight\", 240, \"number\", \"Minimum height of a child widget\", null, { tags: [\"Basic\"], optional: true });\r\n\r\nTable.prototype.publish(\"sortByFieldIndex\", null, \"number\", \"Index for the field/column to sort the data\", null, { tags: [\"Basic\"], optional: true });\r\nTable.prototype.publish(\"descending\", false, \"boolean\", \"Direction for sorting the data: ascending (true) or descending (false)\", null, { tags: [\"Basic\"], optional: true });\r\n","import { Palette, Platform } from \"@hpcc-js/common\";\r\nimport { format as d3Format } from \"d3-format\";\r\nimport { select as d3Select } from \"d3-selection\";\r\nimport { Table } from \"./Table\";\r\n\r\nimport \"../src/Legend.css\";\r\n\r\nfunction _htmlColorBlock(hexColor) {\r\n    return \"<div class=\\\"colorBlock\\\" style=\\\"background-color:\" + hexColor + \";\\\"></div>\";\r\n}\r\n\r\nexport class Legend extends Table {\r\n    _targetWidget;\r\n    _targetWidgetMonitor;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.showHeader(false);\r\n        this.pagination(false);\r\n    }\r\n\r\n    isRainbow() {\r\n        const widget = this.getWidget();\r\n        return widget && widget._palette && widget._palette.type() === \"rainbow\";\r\n    }\r\n\r\n    targetWidget(): any;\r\n    targetWidget(_: any): this;\r\n    targetWidget(_?: any): any | this {\r\n        if (!arguments.length) return this._targetWidget;\r\n        this._targetWidget = _;\r\n        if (this._targetWidgetMonitor) {\r\n            this._targetWidgetMonitor.remove();\r\n            delete this._targetWidgetMonitor;\r\n        }\r\n        const context = this;\r\n        this._targetWidgetMonitor = this._targetWidget.monitor(function (key, newProp, oldProp, source) {\r\n            switch (key) {\r\n                case \"chart\":\r\n                case \"columns\":\r\n                case \"data\":\r\n                case \"paletteID\":\r\n                    context.lazyRender();\r\n                    break;\r\n            }\r\n        });\r\n        return this;\r\n    }\r\n\r\n    getWidget() {\r\n        if (this._targetWidget) {\r\n            switch (this._targetWidget.classID()) {\r\n                case \"chart_MultiChart\":\r\n                    return this._targetWidget.chart();\r\n            }\r\n        }\r\n        return this._targetWidget;\r\n    }\r\n\r\n    getPalette() {\r\n        const widget = this.getWidget();\r\n        if (widget && widget._palette) {\r\n            switch (widget._palette.type()) {\r\n                case \"ordinal\":\r\n                    return Palette.ordinal(widget._palette.id());\r\n                case \"rainbow\":\r\n                    return Palette.rainbow(widget._palette.id());\r\n            }\r\n        }\r\n        return Palette.ordinal(\"default\");\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        d3Select(domNode.parentNode).style(\"overflow-y\", \"auto\");\r\n\r\n        this.renderHtmlDataCells(true);\r\n        this.fixedHeader(false);\r\n        this.fixedSize(true);\r\n        element.classed(\"other_Legend\", true);\r\n    }\r\n\r\n    update(domNode, element) {\r\n        const colArr = [\"Key\", \"Label\"];\r\n        let dataArr = [];\r\n        if (this._targetWidget) {\r\n            const palette = this.getPalette();\r\n            switch (palette.type()) {\r\n                case \"ordinal\":\r\n                    switch (this.dataFamily()) {\r\n                        case \"2D\":\r\n                            dataArr = this._targetWidget.data().map(function (n) {\r\n                                return [_htmlColorBlock(palette(n[0])), n[0]];\r\n                            }, this);\r\n                            break;\r\n                        case \"ND\":\r\n                            const widgetColumns = this._targetWidget.columns();\r\n                            dataArr = widgetColumns.filter(function (n, i) { return i > 0; }).map(function (n) {\r\n                                return [_htmlColorBlock(palette(n)), n];\r\n                            }, this);\r\n                            break;\r\n                    }\r\n                    break;\r\n                case \"rainbow\":\r\n                    const format = d3Format(this.rainbowFormat());\r\n                    const widget = this.getWidget();\r\n                    const steps = this.rainbowBins();\r\n                    const weightMin = widget._dataMinWeight;\r\n                    const weightMax = widget._dataMaxWeight;\r\n                    const stepWeightDiff = (weightMax - weightMin) / (steps - 1);\r\n                    dataArr.push([_htmlColorBlock(palette(weightMin, weightMin, weightMax)), format(weightMin)]);\r\n                    for (let x = 1; x < steps - 1; ++x) {\r\n                        const mid = stepWeightDiff * x;\r\n                        dataArr.push([_htmlColorBlock(palette(mid, weightMin, weightMax)), format(Math.floor(mid))]);\r\n                    }\r\n                    dataArr.push([_htmlColorBlock(palette(weightMax, weightMin, weightMax)), format(weightMax)]);\r\n                    break;\r\n            }\r\n        }\r\n        this.columns(colArr);\r\n        this.data(dataArr);\r\n        super.update(domNode, element);\r\n\r\n        element.classed(\"horiz-legend\", this.orientation() === \"horizontal\");\r\n\r\n        const table = element.select(\".tableDiv > table\");\r\n        const tableRect = table.node().getBoundingClientRect();\r\n        const elementRect = this._placeholderElement.node().getBoundingClientRect();\r\n\r\n        element.select(\".tableDiv\").style(\"overflow\", \"visible\");\r\n\r\n        const top = elementRect.height / 2 - tableRect.height / 2;\r\n        const left = elementRect.width / 2 - tableRect.width / 2;\r\n        table\r\n            .style(\"position\", \"absolute\")\r\n            .style(\"top\", top + \"px\")\r\n            .style(\"left\", left + \"px\" )\r\n            ;\r\n\r\n        const startIndex = this.pageNumber() - 1;\r\n        const itemsOnPage = this.itemsPerPage();\r\n\r\n        const start = startIndex * itemsOnPage;\r\n        const end = startIndex * parseInt(itemsOnPage) + parseInt(itemsOnPage);\r\n\r\n        let tData = null;\r\n        if (this.pagination()) {\r\n            tData = this.data().slice(start, end);\r\n        } else {\r\n            tData = this.data();\r\n        }\r\n\r\n        const rows = this.tbody.selectAll(\"tr\").data(tData);\r\n        const context = this;\r\n        rows\r\n            .on(\"click\", function (d, i) {\r\n                context.onClick(d, i);\r\n            })\r\n            .on(\"dblclick\", function (d, i) {\r\n                context.onDblClick(d, i);\r\n            })\r\n            .on(\"mouseover\", function (d, i) {\r\n                context.onMouseOver(d, i);\r\n            })\r\n            ;\r\n    }\r\n\r\n    exit(domNode, element) {\r\n        if (this._targetWidgetMonitor) {\r\n            this._targetWidgetMonitor.remove();\r\n            delete this._targetWidgetMonitor;\r\n        }\r\n        super.exit(domNode, element);\r\n    }\r\n\r\n    onClick(rowData, rowIdx) {\r\n        console.log(\"Legend onClick method\");\r\n        console.log(\"rowData: \" + rowData);\r\n        console.log(\"rowIdx: \" + rowIdx);\r\n    }\r\n\r\n    onDblClick(rowData, rowIdx) {\r\n        console.log(\"Legend onDblClick method\");\r\n        console.log(\"rowData: \" + rowData);\r\n        console.log(\"rowIdx: \" + rowIdx);\r\n    }\r\n\r\n    onMouseOver(rowData, rowIdx) {\r\n        console.log(\"Legend onMouseOver method\");\r\n        console.log(\"rowData: \" + rowData);\r\n        console.log(\"rowIdx: \" + rowIdx);\r\n    }\r\n\r\n    dataFamily: { (): string; (_: string): Legend };\r\n    dataFamily_exists: () => boolean;\r\n    orientation: { (): string; (_: string): Legend };\r\n    orientation_exists: () => boolean;\r\n    rainbowFormat: { (): string; (_: string): Legend };\r\n    rainbowFormat_exists: () => boolean;\r\n    rainbowBins: { (): number; (_: number): Legend };\r\n    rainbowBins_exists: () => boolean;\r\n}\r\nLegend.prototype._class += \" other_Legend\";\r\n\r\nLegend.prototype.publish(\"dataFamily\", \"ND\", \"set\", \"Type of data\", [\"1D\", \"2D\", \"ND\", \"map\", \"any\", \"other\"], { tags: [\"Private\"] });\r\nLegend.prototype.publish(\"orientation\", \"vertical\", \"set\", \"Orientation of Legend rows\", [\"vertical\", \"horizontal\"], { tags: [\"Private\"] });\r\nLegend.prototype.publish(\"rainbowFormat\", \",\", \"string\", \"Rainbow number formatting\", null, { tags: [\"Private\"], optional: true, disable: w => !w.isRainbow() });\r\nLegend.prototype.publish(\"rainbowBins\", 8, \"number\", \"Number of rainbow bins\", null, { tags: [\"Private\"], disable: w => !w.isRainbow() });\r\n\r\nconst origGetBBox = Table.prototype.getBBox;\r\nLegend.prototype.getBBox = function (refresh, round) {\r\n    const retVal = origGetBBox.apply(this, arguments);\r\n    const table = this.element().select(\".tableDiv > table\");\r\n    if (!table.empty()) {\r\n        const tableRect = table.node().getBoundingClientRect();\r\n        const width = tableRect.width + 8 + (this.hasVScroll(this._placeholderElement) ? Platform.getScrollbarWidth() : 0);\r\n        const height = tableRect.height + 8 + (this.hasHScroll(this._placeholderElement) ? Platform.getScrollbarWidth() : 0);\r\n        return {\r\n            x: retVal.x,\r\n            y: retVal.y,\r\n            width: (round ? Math.round(width) : width) * this._scale,\r\n            height: (round ? Math.round(height) : height) * this._scale\r\n        };\r\n    }\r\n    return retVal;\r\n};\r\n","import { SVGWidget } from \"@hpcc-js/common\";\r\n\r\nimport \"../src/MorphText.css\";\r\n\r\nexport class MorphText extends SVGWidget {\r\n    _fontWidth;\r\n    _textElement;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        if (!this.fontSize()) {\r\n            const style = window.getComputedStyle(domNode, null);\r\n            this.fontSize(parseInt(style.fontSize));\r\n        }\r\n        this._fontWidth = this.fontSize() * 32 / 48;\r\n        this._textElement = element.append(\"g\")\r\n            ;\r\n    }\r\n\r\n    dateTime() {\r\n        const d = new Date();\r\n        const seconds = d.getSeconds().toString().length === 1 ? \"0\" + d.getSeconds() : d.getSeconds();\r\n        const minutes = d.getMinutes().toString().length === 1 ? \"0\" + d.getMinutes() : d.getMinutes();\r\n        const hours = d.getHours().toString().length === 1 ? \"0\" + d.getHours() : d.getHours();\r\n        const ampm = d.getHours() >= 12 ? \"pm\" : \"am\";\r\n        const months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n        const days = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\r\n        return days[d.getDay()] + \" \" + months[d.getMonth()] + \" \" + d.getDate() + \" \" + d.getFullYear() + \" \" + hours + \":\" + minutes + \":\" + seconds + ampm;\r\n    }\r\n\r\n    update(domNode, element) {\r\n        const context = this;\r\n        const text = this._textElement.selectAll(\"text\")\r\n            .data(this.data(), function (d) { return d.id; })\r\n            ;\r\n        text\r\n            .attr(\"class\", \"update\")\r\n            ;\r\n        this.transition.apply(text)\r\n            .attr(\"x\", function (d, i) { return (-context.data().length / 2 + i) * context._fontWidth + context._fontWidth / 2; })\r\n            ;\r\n\r\n        const newText = text.enter().append(\"text\")\r\n            .attr(\"class\", \"enter\")\r\n            .attr(\"font-size\", this.fontSize())\r\n            .attr(\"dy\", \".35em\")\r\n            .attr(\"y\", (this.reverse() ? +1 : -1) * this._fontWidth * 2)\r\n            .attr(\"x\", function (d, i) { return (-context.data().length / 2 + i) * context._fontWidth + context._fontWidth / 2; })\r\n            .style(\"fill-opacity\", 1e-6)\r\n            .style(\"text-anchor\", this.anchor())\r\n            .text(function (d) { return d.text; })\r\n            ;\r\n        this.transition.apply(newText)\r\n            .attr(\"y\", 0)\r\n            .style(\"fill-opacity\", 1)\r\n            ;\r\n\r\n        text.exit()\r\n            .attr(\"class\", \"exit\")\r\n            ;\r\n        this.transition.apply(text.exit())\r\n            .attr(\"y\", (this.reverse() ? -1 : +1) * this._fontWidth * 2)\r\n            .style(\"fill-opacity\", 1e-6)\r\n            .remove()\r\n            ;\r\n    }\r\n    anchor: { (): string; (_: string): MorphText };\r\n    anchor_exists: () => boolean;\r\n    fontSize: { (): number; (_: number): MorphText };\r\n    fontSize_exists: () => boolean;\r\n    reverse: { (): boolean; (_: boolean): MorphText };\r\n    reverse_exists: () => boolean;\r\n    text: (_?: string) => MorphText | this;\r\n    text_exists: () => boolean;\r\n}\r\nMorphText.prototype._class += \" other_MorphText\";\r\n\r\nMorphText.prototype.publish(\"anchor\", \"middle\", \"set\", \"Sets anchor point\", [\"middle\"], { tags: [\"Basic\"] });\r\nMorphText.prototype.publish(\"fontSize\", 14, \"number\", \"Sets fontsize\", null, { tags: [\"Basic\"] });\r\nMorphText.prototype.publish(\"reverse\", false, \"boolean\", \"Reverse Animation\", null, { tags: [\"Basic\"] });\r\nMorphText.prototype.publish(\"text\", \"\", \"string\", \"Sets text/data of widget\", null, { tags: [\"Basic\"] });\r\n\r\nconst _origText = MorphText.prototype.text;\r\nMorphText.prototype.text = function (_) {\r\n    const retVal = _origText.apply(this, arguments);\r\n    if (arguments.length) {\r\n        const usedChars = {};\r\n        const chars = _.split(\"\");\r\n        this.data(chars.map(function (d) {\r\n            const id = \"_\" + d;\r\n            if (usedChars[id] === undefined) {\r\n                usedChars[id] = 0;\r\n            }\r\n            usedChars[id]++;\r\n            return { text: d, id: d.charCodeAt(0) + (1024 * usedChars[id]) };\r\n        }));\r\n    }\r\n    return retVal;\r\n};\r\n","import { Table } from \"./Table\";\r\n\r\nexport class NestedTable extends Table {\r\n    constructor() {\r\n        super();\r\n        this.minWidgetHeight(240);\r\n        this.minWidgetWidth(360);\r\n    }\r\n}\r\nNestedTable.prototype._class += \" other_NestedTable\";\r\n\r\nconst origColumns = NestedTable.prototype.columns;\r\nNestedTable.prototype.columns = function (_?) {\r\n    if (arguments.length) {\r\n        this._columns = _;\r\n        return origColumns.call(this, _.map(function (col) {\r\n            if (typeof col === \"object\") {\r\n                return col.label;\r\n            }\r\n            return col;\r\n        }));\r\n    }\r\n    return origColumns.apply(this, arguments);\r\n};\r\n\r\nconst origData = NestedTable.prototype.data;\r\nNestedTable.prototype.data = function (_?: any): NestedTable | any {\r\n    if (arguments.length) {\r\n        const context = this;\r\n        return origData.call(this, _.map(function (row) {\r\n            return row.map(function (cell, idx) {\r\n                if (cell instanceof Array) {\r\n                    let columns = [];\r\n                    if (typeof context._columns[idx] === \"object\" && context._columns[idx].columns) {\r\n                        columns = context._columns[idx].columns;\r\n                    } else {\r\n                        for (let i = 0; i < cell.length; ++i) {\r\n                            columns.push(context._columns[idx] + \".\" + i);\r\n                        }\r\n                    }\r\n                    return new Table()\r\n                        .columns(columns)\r\n                        .data(cell)\r\n                        ;\r\n                }\r\n                return cell;\r\n            });\r\n        }));\r\n    }\r\n    return origData.apply(this, arguments);\r\n};\r\n","import { PropertyExt, SVGWidget } from \"@hpcc-js/common\";\r\nimport { event as d3Event, select as d3Select, selectAll as d3SelectAll } from \"d3-selection\";\r\n\r\nimport \"../src/Opportunity.css\";\r\n\r\nexport class Column extends PropertyExt {\r\n    _owner: Opportunity;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    owner(): Opportunity;\r\n    owner(_: Opportunity): this;\r\n    owner(_?: Opportunity): Opportunity | this {\r\n        if (!arguments.length) return this._owner;\r\n        this._owner = _;\r\n        return this;\r\n    }\r\n\r\n    valid(): boolean {\r\n        return !!this.headerLabel();\r\n    }\r\n}\r\nColumn.prototype._class += \" other_Opportunity.Column\";\r\n\r\nexport interface Column {\r\n    headerLabel(): string;\r\n    headerLabel(_: string): this;\r\n}\r\nColumn.prototype.publish(\"headerLabel\", null, \"string\", \"Header value of a table\", function (this: Column) { return this._owner ? this._owner.columns() : []; }, { tags: [\"Basic\"], optional: true });\r\n\r\nexport class MouseHoverColumn extends PropertyExt {\r\n    _owner: Opportunity;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    owner(): Opportunity;\r\n    owner(_: Opportunity): this;\r\n    owner(_?: Opportunity): Opportunity | this {\r\n        if (!arguments.length) return this._owner;\r\n        this._owner = _;\r\n        return this;\r\n    }\r\n\r\n    valid(): boolean {\r\n        return !!this.hoverValue() && !!this.hoverList();\r\n    }\r\n}\r\nMouseHoverColumn.prototype._class += \" other_Opportunity.MouseHoverColumn\";\r\n\r\nexport interface MouseHoverColumn {\r\n    hoverValue(): string;\r\n    hoverValue(_: string): this;\r\n    hoverList(): string;\r\n    hoverList(_: string): this;\r\n}\r\nMouseHoverColumn.prototype.publish(\"hoverValue\", null, \"string\", \"Hover value of a table\", function () { return this._owner ? this._owner.columns() : []; }, { tags: [\"Basic\"], optional: true });\r\nMouseHoverColumn.prototype.publish(\"hoverList\", null, \"set\", \"Hover value of a table\", function () { return this._owner ? this._owner.getIds() : []; }, { tags: [\"Basic\"], optional: true });\r\n\r\nexport class ColumnDropdown extends PropertyExt {\r\n    _owner: Opportunity;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    owner(): Opportunity;\r\n    owner(_: Opportunity): this;\r\n    owner(_?: Opportunity): Opportunity | this {\r\n        if (!arguments.length) return this._owner;\r\n        this._owner = _;\r\n        return this;\r\n    }\r\n\r\n    valid(): boolean {\r\n        return !!this.columnIndex() && !!this.ColumnDropdownList();\r\n    }\r\n}\r\nColumnDropdown.prototype._class += \" other_Opportunity.ColumnDropdown\";\r\n\r\nexport interface ColumnDropdown {\r\n    columnIndex(): number;\r\n    columnIndex(_: number): this;\r\n    ColumnDropdownList(): string;\r\n    ColumnDropdownList(_: string): this;\r\n}\r\nColumnDropdown.prototype.publish(\"columnIndex\", null, \"number\", \"Column index for display context data based on column dropdown list selction\", {}, { tags: [\"Basic\", \"Shared\"] });\r\nColumnDropdown.prototype.publish(\"ColumnDropdownList\", null, \"set\", \"column value of a table\", function () { return this._owner ? this._owner.getIds() : []; }, { tags: [\"Basic\"], optional: true });\r\n\r\nexport class Opportunity extends SVGWidget {\r\n    groupCount;\r\n    svg;\r\n    tooltipdiv;\r\n    Column;\r\n    MouseHoverColumn;\r\n    ColumnDropdown;\r\n\r\n    constructor() {\r\n        super();\r\n        this._drawStartPos = \"origin\";\r\n        this.groupCount = 7;\r\n    }\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        const paddingTop = 30;\r\n        const nodeRectHeight = 14;\r\n        const verticalPadding = 10;\r\n        const h = (this.data().length + 1) * (nodeRectHeight + verticalPadding + 1) + paddingTop;\r\n        this.svg = element.append(\"g\")\r\n            .attr(\"width\", ((this.groupCount * 100) + 1))\r\n            .attr(\"height\", h);\r\n        this.svg.append(\"defs\").append(\"marker\")\r\n            .classed(\"arrowhead\", true)\r\n            .attr(\"id\", \"end-arrow\")\r\n            .attr(\"viewBox\", \"0 -5 10 10\")\r\n            .attr(\"refX\", 6)\r\n            .attr(\"markerWidth\", 8)\r\n            .attr(\"markerHeight\", 8)\r\n            .attr(\"orient\", \"auto\")\r\n            .append(\"svg:path\")\r\n            .attr(\"d\", \"M0,-5L10,0L0,5\")\r\n            .attr(\"fill\", \"rgb(100,100,100)\");\r\n        this.tooltipdiv = d3Select(\"body\").append(\"div\")\r\n            .attr(\"class\", \"other_Opportunity-tooltip tooltip\")\r\n            .style(\"opacity\", 0);\r\n    }\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n        const context = this;\r\n        const data = this.data();\r\n        const dropDownOption = this.opportunityId();\r\n        data.sort(function (a, b) {\r\n            if (a.cur_group > b.cur_group) return 1;\r\n            else if (a.cur_group < b.cur_group) return -1;\r\n            else return 0;\r\n        });\r\n        const groups = [];\r\n        for (let i = 1; i <= context.groupCount; i++) {\r\n            groups.push(i);\r\n        }\r\n        const paddingTop = 30;\r\n        const nodeRectHeight = 14;\r\n        const verticalPadding = 10;\r\n        const h = (data.length + 1) * (nodeRectHeight + verticalPadding + 1) + paddingTop;\r\n        const w = this.width();\r\n        const nodeRectWidthPadding = 30;\r\n        const nodeRectWidth = ((w / context.groupCount) - nodeRectWidthPadding);\r\n        //  Groups  ---\r\n        const group = this.svg.selectAll(\".group\").data(groups);\r\n        group.enter().append(\"rect\")\r\n            .attr(\"class\", \"group\");\r\n        group\r\n            .attr(\"x\", function (d, i) {\r\n                return (i * w / context.groupCount) + 1;\r\n            })\r\n            .attr(\"y\", paddingTop)\r\n            .attr(\"width\", w / this.groupCount)\r\n            .attr(\"height\", h - paddingTop);\r\n        group.exit().remove();\r\n        //  Group Headings  ---\r\n        const groupHeadings = this.svg.selectAll(\".group_headings\").data(groups);\r\n        groupHeadings.enter().append(\"text\")\r\n            .attr(\"class\", \"group_headings\")\r\n            .attr(\"y\", 20);\r\n        groupHeadings\r\n            .attr(\"x\", function (d, i) {\r\n                return (i * w / context.groupCount) + ((w / context.groupCount) / context.groupCount);\r\n            })\r\n            .text(function (d, i) {\r\n                if (context.headerLabels().length > 0) {\r\n                    if (context.headerLabels()[i] && (context.headerLabels()[i]).headerLabel()) {\r\n                        return (context.headerLabels()[i]).headerLabel();\r\n                    }\r\n                }\r\n                return \"\";\r\n            });\r\n        groupHeadings.exit().remove();\r\n        if (this.previousGroup() === \"prev_group\" && this.currentGroup() === \"cur_group\") {\r\n            //  Node Date Change  ---\r\n            const node_date_change = this.svg.selectAll(\".node_date_change\").data(data);\r\n            node_date_change.enter().append(\"g\")\r\n                .attr(\"class\", \"node_date_change update\")\r\n                .on(\"mouseover\", function (d) {\r\n                    context.tooltipdiv.transition()\r\n                        .duration(200)\r\n                        .style(\"opacity\", 0.9);\r\n                    let htmlInput = \"<span style='font-weight:bolder'>\" + \"Close Date Change \" + \"</span>\" + \"<br/>\";\r\n                    const mouseHoverMapping = context.mouseHover();\r\n                    mouseHoverMapping.forEach(function (obj, index) {\r\n                        if (obj.hoverValue() !== undefined) {\r\n                            htmlInput = htmlInput + \"<span style='font-weight:bold'>\" + obj.hoverValue() + \":  \" + \"</span>\" + d[obj.hoverList()] + \"<br/>\";\r\n                        }\r\n                    });\r\n                    let prevDate = d.prevdate + \"\";\r\n                    prevDate = prevDate.replace(/(\\d\\d\\d\\d)(\\d\\d)(\\d\\d)/g, \"$3-$2-$1\");\r\n                    let fromDate = d.curdate + \"\";\r\n                    fromDate = fromDate.replace(/(\\d\\d\\d\\d)(\\d\\d)(\\d\\d)/g, \"$3-$2-$1\");\r\n                    htmlInput = htmlInput + \"<span style='font-weight:bold'>\" + \"From: \" + \"</span>\" + prevDate + \"<br/>\" + \"<span style='font-weight:bold'>\" + \"To: \" + \"</span>\" + fromDate + \"<br/>\";\r\n                    context.tooltipdiv.html(htmlInput)\r\n                        .style(\"left\", (d3Event.pageX) + \"px\")\r\n                        .style(\"top\", (d3Event.pageY - 50) + \"px\");\r\n                })\r\n                .on(\"mouseout\", function (d) {\r\n                    context.tooltipdiv.transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", 0);\r\n                })\r\n                .each(function (d) {\r\n                    const element2 = d3Select(this);\r\n                    element2.append(\"rect\")\r\n                        .attr(\"class\", \"node_date_change_rect\")\r\n                        .attr(\"width\", 5)\r\n                        .attr(\"height\", nodeRectHeight)\r\n                        .attr(\"rx\", 6)\r\n                        .attr(\"ry\", 6);\r\n                });\r\n            node_date_change\r\n                .attr(\"transform\", function (d, i) {\r\n                    return \"translate(\" + ((9 * w / context.groupCount) + (nodeRectWidthPadding) - 80) + \",\" + ((i + (i * (nodeRectHeight + verticalPadding))) + 12 + paddingTop) + \")\";\r\n                });\r\n            node_date_change.exit().remove();\r\n            //  Node Prev Group  ---\r\n            const node_prev_group = this.svg.selectAll(\".node_prev_group\").data(data);\r\n            node_prev_group.enter().append(\"g\")\r\n                .attr(\"class\", \"node_prev_group\")\r\n                .on(\"mouseover\", function (d, i) {\r\n                    context.tooltipdiv.transition()\r\n                        .duration(200)\r\n                        .style(\"opacity\", 0.9);\r\n                    let tooltipHtml = \"\";\r\n                    const mouseHoverMapping = context.mouseHover();\r\n                    mouseHoverMapping.forEach(function (obj, index) {\r\n                        if (obj.hoverValue() !== undefined) {\r\n                            tooltipHtml = tooltipHtml + \"<span style='font-weight:bold'>\" + obj.hoverValue() + \":  \" + \"</span>\" + d[obj.hoverList()] + \"<br/>\";\r\n                        }\r\n                    });\r\n                    context.tooltipdiv.html(tooltipHtml)\r\n                        .style(\"left\", (d3Event.pageX) + \"px\")\r\n                        .style(\"top\", (d3Event.pageY - 100) + \"px\");\r\n                })\r\n                .on(\"mouseout\", function (d) {\r\n                    context.tooltipdiv.transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", 0);\r\n                })\r\n                .each(function (d) {\r\n                    const element2 = d3Select(this);\r\n                    element2.append(\"rect\")\r\n                        .attr(\"class\", \"node_prev_rect\")\r\n                        .attr(\"rx\", 6)\r\n                        .attr(\"ry\", 6);\r\n                    element2.append(\"text\")\r\n                        .attr(\"class\", \"node_prev_text\");\r\n                });\r\n            node_prev_group\r\n                .classed(\"update\", true)\r\n                .classed(\"changed\", function (d) {\r\n                    return d.delta !== 0;\r\n                })\r\n                .attr(\"transform\", function (d, i) {\r\n                    return \"translate(\" + ((((d.prev_group - 1)) * w / context.groupCount) + (nodeRectWidthPadding / 2)) + \",\" + ((i + (i * (nodeRectHeight + verticalPadding))) + 10 + paddingTop) + \")\";\r\n                })\r\n                .each(function (d) {\r\n                    const element2 = d3Select(this);\r\n                    //  Change Lines  ---\r\n                    const changeLines = element2.selectAll(\".arrow\").data(d.delta !== 0 ? [d] : []);\r\n                    changeLines.enter().append(\"line\")\r\n                        .attr(\"class\", \"arrow update\");\r\n                    changeLines\r\n                        .attr(\"x1\", function (d2) {\r\n                            return (d2.delta > 0) ? nodeRectWidth : 0;\r\n                        })\r\n                        .attr(\"y1\", nodeRectHeight / 2)\r\n                        .attr(\"x2\", function (d2) {\r\n                            return (d2.delta > 0) ? (nodeRectWidth + nodeRectWidthPadding - 4) + ((Math.abs(d2.delta) - 1)) * (w / context.groupCount) : ((-nodeRectWidthPadding - ((Math.abs(d2.delta) - 1)) * (w / context.groupCount)) + 4);\r\n                        })\r\n                        .attr(\"y2\", nodeRectHeight / 2)\r\n                        .style(\"stroke-dasharray\", (\"3, 3\"))\r\n                        .style(\"stroke\", \"rgb(100,100,100)\")\r\n                        .style(\"marker-end\", \"url(#end-arrow)\")\r\n                        .style(\"opacity\", \"1\");\r\n                    changeLines.exit().remove();\r\n                });\r\n            const node_previous_rect = node_prev_group.select(\".node_prev_rect\");\r\n            node_previous_rect\r\n                .attr(\"width\", nodeRectWidth)\r\n                .attr(\"height\", nodeRectHeight);\r\n            const node_previous_text = node_prev_group.select(\".node_prev_text\");\r\n            node_previous_text\r\n                .attr(\"dy\", (nodeRectHeight / 2) + 3)\r\n                .attr(\"dx\", (nodeRectWidth / 4))\r\n                .text(function (d) {\r\n                    if (typeof d[dropDownOption] === \"number\")\r\n                        return d[dropDownOption];\r\n                    else\r\n                        return d[dropDownOption].substring(0, 14);\r\n                });\r\n            node_prev_group.exit().remove();\r\n            //  Node Cur Group  ---\r\n            const node_cur_group = this.svg.selectAll(\".node_cur_group\").data(data);\r\n            node_cur_group.enter().append(\"g\")\r\n                .attr(\"class\", \"node_cur_group\")\r\n                .attr(\"transform\", function (d, i) {\r\n                    return \"translate(\" + ((((d.prev_group - 1)) * w / context.groupCount) + (nodeRectWidthPadding / 2)) + \",\" + ((i + (i * (nodeRectHeight + verticalPadding))) + 10 + paddingTop) + \")\";\r\n                })\r\n                .on(\"mouseover\", function (d, i) {\r\n                    context.tooltipdiv.transition()\r\n                        .duration(200)\r\n                        .style(\"opacity\", 0.9);\r\n                    let tooltipHtml = \"\";\r\n                    const mouseHoverMapping = context.mouseHover();\r\n                    mouseHoverMapping.forEach(function (obj, index) {\r\n                        if (obj.hoverValue() !== undefined) {\r\n                            tooltipHtml = tooltipHtml + \"<span style='font-weight:bold'>\" + obj.hoverValue() + \":  \" + \"</span>\" + d[obj.hoverList()] + \"<br/>\";\r\n                        }\r\n                    });\r\n                    context.tooltipdiv.html(tooltipHtml)\r\n                        .style(\"left\", (d3Event.pageX) + \"px\")\r\n                        .style(\"top\", (d3Event.pageY - 100) + \"px\");\r\n                })\r\n                .on(\"mouseout\", function (d) {\r\n                    context.tooltipdiv.transition()\r\n                        .duration(500)\r\n                        .style(\"opacity\", 0);\r\n                })\r\n                .each(function (d) {\r\n                    const element2 = d3Select(this);\r\n                    element2.append(\"rect\")\r\n                        .attr(\"class\", \"node_cur_rect\")\r\n                        .attr(\"fill\", function (d2: any) {\r\n                            let color;\r\n                            if (d2.delta < 0 || d2.cur_group === 7) {\r\n                                color = \"#F78181\";\r\n                            } else {\r\n                                color = \"#A9F5A9\";\r\n                            }\r\n                            return color;\r\n                        })\r\n                        .attr(\"rx\", 6)\r\n                        .attr(\"ry\", 6);\r\n                    element2.append(\"a\")\r\n                        .append(\"text\")\r\n                        .attr(\"class\", \"node_cur_text\");\r\n                });\r\n            node_cur_group\r\n                .classed(\"update\", true)\r\n                .classed(\"changed\", function (d) {\r\n                    return d.delta !== 0;\r\n                })\r\n                .transition().duration(800)\r\n                .ease(\"linear\")\r\n                .attr(\"transform\", function (d, i) {\r\n                    return \"translate(\" + ((((d.cur_group) - 1) * w / context.groupCount) + (nodeRectWidthPadding / 2)) + \",\" + ((i + (i * (nodeRectHeight + verticalPadding))) + 10 + paddingTop) + \")\";\r\n                })\r\n                .each(\"end\", function () {\r\n                    d3SelectAll(\".arrow\").style(\"opacity\", \"1\");\r\n                });\r\n            const node_current_anchor = node_cur_group.select(\".node_cur_group a\");\r\n            node_current_anchor.classed(\"update\", true)\r\n                .attr(\"xlink:href\", function (d) {\r\n                    return context.url() + d.id;\r\n                })\r\n                .attr(\"xlink:show\", \"new\");\r\n            const node_current_rect = node_cur_group.select(\".node_cur_rect\");\r\n            node_current_rect\r\n                .attr(\"width\", nodeRectWidth)\r\n                .attr(\"height\", nodeRectHeight);\r\n            const node_current_text = node_cur_group.select(\".node_cur_text\");\r\n            node_current_text\r\n                .classed(\"update\", true)\r\n                .attr(\"dy\", (nodeRectHeight / 2) + 3)\r\n                .attr(\"dx\", (nodeRectWidth / 4))\r\n                .style(\"fill\", \"blue\")\r\n                .text(function (d) {\r\n                    if (typeof d[dropDownOption] === \"number\")\r\n                        return d[dropDownOption];\r\n                    else\r\n                        return d[dropDownOption].substring(0, 14);\r\n                });\r\n            node_cur_group.exit().remove();\r\n        }\r\n        for (let colIndex = 0; colIndex < context.columnData().length; colIndex++) {\r\n            if ((context.columnData()[colIndex]) && (context.columnData()[colIndex]).ColumnDropdownList()) {\r\n                const columnData = this.svg.selectAll(\".columnDataText_\" + colIndex).data(data);\r\n                columnData.enter().append(\"g\")\r\n                    .attr(\"class\", \"columnDataText_\" + colIndex + \" update\")\r\n                    .each(function (d) {\r\n                        const element2 = d3Select(this);\r\n                        element2.append(\"text\");\r\n                    });\r\n                columnData\r\n                    .attr(\"transform\", function (d, i) {\r\n                        return \"translate(\" + (((context.columnData()[colIndex]).columnIndex() * w / context.groupCount) + (nodeRectWidthPadding / 2)) + \",\" + ((i + (i * (nodeRectHeight + verticalPadding))) + 12 + paddingTop) + \")\";\r\n                    })\r\n                    .attr(\"width\", 5)\r\n                    .attr(\"height\", nodeRectHeight)\r\n                    .attr(\"rx\", 6)\r\n                    .attr(\"ry\", 6);\r\n                const textLable = columnData.select(\"text\");\r\n                textLable\r\n                    .attr(\"y\", -6)\r\n                    .attr(\"dy\", (nodeRectHeight) + 14)\r\n                    .attr(\"dx\", 0)\r\n                    .attr(\"height\", 20)\r\n                    .attr(\"width\", 29)\r\n                    .text(function (d, i) {\r\n                        return d[(context.columnData()[colIndex]).ColumnDropdownList()];\r\n                    });\r\n                columnData.exit().remove();\r\n            }\r\n        }\r\n    }\r\n    exit(domNode, element) {\r\n        super.exit(domNode, element);\r\n    }\r\n\r\n    getIds() {\r\n        const dropdownList = this.columns();\r\n        dropdownList.unshift(\"default\");\r\n        return dropdownList;\r\n    }\r\n    previousGroup: { (): string; (_: string): Opportunity };\r\n    previousGroup_exists: () => boolean;\r\n    currentGroup: { (): string; (_: string): Opportunity };\r\n    currentGroup_exists: () => boolean;\r\n    opportunityId: { (): string; (_: string): Opportunity };\r\n    opportunityId_exists: () => boolean;\r\n    url: { (): string; (_: string): Opportunity };\r\n    url_exists: () => boolean;\r\n    // width: { (): number; (_: number): Opportunity };\r\n    width_exists: () => boolean;\r\n    addColumn: { (): string; (_: string): Opportunity };\r\n    addColumn_exists: () => boolean;\r\n    removeColumn: { (): string; (_: string): Opportunity };\r\n    removeColumn_exists: () => boolean;\r\n    headerLabels: { (): any[]; (_: any[]): Opportunity };\r\n    headerLabels_exists: () => boolean;\r\n    mouseHover: { (): any[]; (_: any[]): Opportunity };\r\n    mouseHover_exists: () => boolean;\r\n    columnData: { (): any[]; (_: any[]): Opportunity };\r\n    columnData_exists: () => boolean;\r\n}\r\nOpportunity.prototype._class += \" other_Opportunity\";\r\nOpportunity.prototype.Column = Column;\r\nOpportunity.prototype.MouseHoverColumn = MouseHoverColumn;\r\nOpportunity.prototype.ColumnDropdown = ColumnDropdown;\r\n\r\nOpportunity.prototype.publish(\"previousGroup\", \"\", \"set\", \"label in Opportunity\", function () { return this.getIds(); }, { tags: [\"Basic\", \"Shared\"] });\r\nOpportunity.prototype.publish(\"currentGroup\", \"\", \"set\", \"label in Opportunity\", function () { return this.getIds(); }, { tags: [\"Basic\", \"Shared\"] });\r\nOpportunity.prototype.publish(\"opportunityId\", \"id\", \"set\", \"Id for label in Opportunity\", function () { return this.getIds(); }, { tags: [\"Basic\", \"Shared\"] });\r\nOpportunity.prototype.publish(\"url\", null, \"string\", \"URL in Opportunity\", {}, { tags: [\"Basic\", \"Shared\"] });\r\nOpportunity.prototype.publish(\"width\", 1100, \"number\", \"label in Opportunity\", {}, { tags: [\"Basic\", \"Shared\"] });\r\nOpportunity.prototype.publish(\"addColumn\", null, \"string\", \"number of columns in a table\", {}, {\r\n    tags: [\"Basic\", \"Shared\"],\r\n    editor_input: (context, widget, cell, param) => {\r\n        cell.append(\"button\")\r\n            .attr(\"id\", context.id() + \"_addColumn\" + param.id)\r\n            .classed(\"property-input custom-editor-input addColumn update\", true)\r\n            .text(\"AddColumn\")\r\n            .on(\"click\", function () {\r\n                widget.groupCount = widget.groupCount + 1;\r\n                const new_value_after_click = \"Added a new column\";\r\n                context.setProperty(widget, param.id, new_value_after_click);\r\n            });\r\n    }\r\n});\r\nOpportunity.prototype.publish(\"removeColumn\", null, \"string\", \"number of columns in a table\", function () { return this.columns(); }, {\r\n    tags: [\"Basic\", \"Shared\"],\r\n    editor_input: (context, widget, cell, param) => {\r\n        cell.append(\"button\")\r\n            .attr(\"id\", context.id() + \"_removeColumn\" + param.id)\r\n            .classed(\"property-input custom-editor-input removeColumn update\", true)\r\n            .text(\"RemoveColumn\")\r\n            .on(\"click\", function () {\r\n                widget.groupCount = widget.groupCount - 1;\r\n                const new_value_after_click = \"Removed a column\";\r\n                context.setProperty(widget, param.id, new_value_after_click);\r\n            });\r\n    }\r\n});\r\nOpportunity.prototype.publish(\"headerLabels\", [], \"propertyArray\", \"Source Columns\", null, { autoExpand: Column });\r\nOpportunity.prototype.publish(\"mouseHover\", [], \"propertyArray\", \"mouse hover options\", null, { autoExpand: MouseHoverColumn });\r\nOpportunity.prototype.publish(\"columnData\", [], \"propertyArray\", \"column data\", null, { autoExpand: ColumnDropdown });\r\n","export function discover(widget) {\r\n    return widget.publishedProperties(false, true);\r\n}\r\n\r\nexport function widgetArrayWalker(widgets, visitor) {\r\n    if (!widgets)\r\n        return;\r\n    widgets.forEach(function (widget) {\r\n        widget.widgetWalker(visitor);\r\n    });\r\n}\r\n\r\nexport function widgetPropertyWalker(widget2, visitor, filter?) {\r\n    widget2.widgetWalker(function (widget) {\r\n        widget.propertyWalker(visitor, filter);\r\n    });\r\n}\r\n\r\nexport function serializeTheme(widget, filter) {\r\n    return JSON.stringify(serializeThemeToObject(widget, filter));\r\n}\r\n\r\nexport function serializeThemeToObject(widget2, filter?) {\r\n    filter = filter || [\"surface\", \"Color\", \"Font\", \"palette\"];\r\n\r\n    const propObj = {};\r\n    widgetPropertyWalker(widget2, null, function (widget, item) {\r\n        if (widget[item.id + \"_modified\"]() || widget.publishedProperty(item.id).origDefaultValue !== widget.publishedProperty(item.id).defaultValue) {\r\n            if (_isFilterMatch(item.id, filter)) {\r\n                const classParts = widget._class.trim().split(\" \");\r\n                for (const i in classParts) {\r\n                    if (classParts.HasOwnProperty(i)) {\r\n                        if (propObj[classParts[i]] === undefined) {\r\n                            propObj[classParts[i]] = {};\r\n                        }\r\n                        if (propObj[classParts[i]][item.id] === undefined) {\r\n                            propObj[classParts[i]][item.id] = widget[item.id]();\r\n                            break;\r\n                        } else if (propObj[classParts[i]][item.id] === widget[item.id]()) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    function _isFilterMatch(str, arr) {\r\n        let ret = false;\r\n        for (const i in arr) {\r\n            if (str.indexOf(arr[i]) !== -1) {\r\n                ret = true;\r\n                break;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    return propObj;\r\n}\r\nexport function removeTheme(widget2, callback) {\r\n    widgetPropertyWalker(widget2, null, function (widget, item) {\r\n        widget.publishedProperty(item.id).defaultValue = widget.publishedProperty(item.id).origDefaultValue;\r\n    });\r\n\r\n    if (typeof (callback) === \"function\") {\r\n        callback.call(this);\r\n    }\r\n}\r\nexport function applyTheme(widget2, themeObj, callback) {\r\n    const context = this;\r\n    widgetPropertyWalker(widget2, null, function (widget3, item) {\r\n        switch (item.type) {\r\n            case \"widget\":\r\n                context.applyTheme(widget3[item.id](), themeObj);\r\n                return true;\r\n            case \"widgetArray\":\r\n                const widgetArray = widget3[item.id]();\r\n                widgetArray.forEach(function (widget) {\r\n                    context.applyTheme(widget, themeObj);\r\n                }, this);\r\n                return true;\r\n            default:\r\n                widget3.applyTheme(themeObj);\r\n                break;\r\n        }\r\n    });\r\n    if (typeof (callback) === \"function\") {\r\n        callback.call(this);\r\n    }\r\n}\r\n\r\nexport function serializeToObject(widget, filter?, includeData?, includeState?) {\r\n    const retVal: any = {\r\n        __class: widget.classID()\r\n    };\r\n    if (widget._id.indexOf(widget._idSeed) !== 0) {\r\n        retVal.__id = widget._id;\r\n    }\r\n    if (widget.version) {\r\n        retVal.__version = widget.version();\r\n    }\r\n    retVal.__properties = {};\r\n\r\n    widget.propertyWalker((childWwidget2, item) => {\r\n        if (childWwidget2[item.id + \"_modified\"]()) {\r\n            switch (item.type) {\r\n                case \"widget\":\r\n                    retVal.__properties[item.id] = serializeToObject(childWwidget2[item.id](), null, includeData, includeState && !widget.serializeState);  //  Only include state once\r\n                    return true;\r\n                case \"widgetArray\":\r\n                case \"propertyArray\":\r\n                    retVal.__properties[item.id] = [];\r\n                    const widgetArray = childWwidget2[item.id]();\r\n                    widgetArray.forEach((childWwidget) => {\r\n                        retVal.__properties[item.id].push(serializeToObject(childWwidget, null, includeData, includeState && !widget.serializeState));  //  Only include state once\r\n                    });\r\n                    return true;\r\n                default:\r\n                    retVal.__properties[item.id] = childWwidget2[item.id]();\r\n                    break;\r\n            }\r\n        }\r\n    }, filter);\r\n\r\n    if (widget.classID() === \"marshaller_Graph\") {\r\n        const vertices = widget.data().vertices;\r\n        if (vertices) {\r\n            this.__vertices = vertices.map(item => {\r\n                return serializeToObject(item, null, includeData, includeState && !widget.serializeState);\r\n            });\r\n        }\r\n    }\r\n    if (includeData && widget.data) {\r\n        if (!retVal.__data) retVal.__data = {};\r\n        retVal.__data.data = widget.data();\r\n    }\r\n    if (includeState) {\r\n        if (widget.serializeState) {\r\n            retVal.__state = widget.serializeState();\r\n        } else if (widget.data) {\r\n            retVal.__state = {\r\n                data: widget.data()\r\n            };\r\n        }\r\n    }\r\n    return retVal;\r\n}\r\n\r\nexport function serialize(widget, filter?, includeData?, includeState?) {\r\n    return JSON.stringify(serializeToObject(widget, filter, includeData, includeState));\r\n}\r\n","import { HTMLWidget, Platform, PropertyExt, Widget } from \"@hpcc-js/common\";\r\nimport { Grid } from \"@hpcc-js/layout\";\r\nimport { local as d3Local, select as d3Select, selectAll as d3SelectAll } from \"d3-selection\";\r\nimport * as Persist from \"./Persist\";\r\n\r\nimport \"../src/PropertyEditor.css\";\r\n\r\nfunction hasProperties(type) {\r\n    switch (type) {\r\n        case \"widget\":\r\n        case \"widgetArray\":\r\n        case \"propertyArray\":\r\n            return true;\r\n        default:\r\n    }\r\n    return false;\r\n}\r\n\r\nexport class PropertyEditor extends HTMLWidget {\r\n    _widgetOrig;\r\n    _parentPropertyEditor;\r\n    _show_settings: boolean;\r\n    _selectedItems;\r\n    __meta_sorting;\r\n    _watch;\r\n    private _childPE = d3Local<PropertyEditor>();\r\n\r\n    constructor() {\r\n        super();\r\n        this._parentPropertyEditor = null;\r\n\r\n        this._tag = \"div\";\r\n        this._show_settings = false;\r\n    }\r\n\r\n    parentPropertyEditor(_?: PropertyEditor): PropertyEditor {\r\n        if (!arguments.length) return this._parentPropertyEditor;\r\n        this._parentPropertyEditor = _;\r\n        return this;\r\n    }\r\n\r\n    depth(): number {\r\n        let retVal = 0;\r\n        let parent = this.parentPropertyEditor();\r\n        while (parent) {\r\n            ++retVal;\r\n            parent = parent.parentPropertyEditor();\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n    _show_header = true;\r\n    show_header(): boolean;\r\n    show_header(_: boolean): PropertyEditor;\r\n    show_header(_?: boolean): boolean | PropertyEditor {\r\n        if (!arguments.length) {\r\n            return this._show_header;\r\n        }\r\n        this._show_header = _;\r\n        return this;\r\n    }\r\n\r\n    show_settings(): boolean;\r\n    show_settings(_: boolean): PropertyEditor;\r\n    show_settings(_?: boolean): boolean | PropertyEditor {\r\n        if (!arguments.length) {\r\n            return this._show_settings;\r\n        }\r\n        this._show_settings = _;\r\n        return this;\r\n    }\r\n\r\n    rootWidgets() {\r\n        if (this._selectedItems && this._selectedItems.length) {\r\n            return this._selectedItems;\r\n        }\r\n        return this.show_settings() ? [this] : this.widget() ? [this.widget()] : [];\r\n    }\r\n\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n\r\n        const context = this;\r\n\r\n        const rootWidgets = this.rootWidgets().filter(function (w) {\r\n            if (w._owningWidget && w._owningWidget.excludeObjs instanceof Array) {\r\n                if (w._owningWidget.excludeObjs.indexOf(w.classID()) !== -1) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n\r\n        const table = element.selectAll(`table.property-table.table-${this.depth()}`).data(rootWidgets, function (d) {\r\n            //  We reuse the existing DOM Nodes and this node _might_ have been a regular Input previously  ---\r\n            if (typeof d.id !== \"function\") {\r\n                return `meta-${d.id}`;\r\n            }\r\n            return d.id();\r\n        });\r\n        table.enter().append(\"table\")\r\n            .attr(\"class\", `property-table table-${this.depth()}`)\r\n            .each(function () {\r\n                const tableElement = d3Select(this);\r\n\r\n                //  Header  ---\r\n                if (context._show_header && context.parentPropertyEditor() === null) {\r\n                    tableElement.append(\"thead\").append(\"tr\").append(\"th\")// .datum(tableElement)\r\n                        .attr(\"colspan\", \"2\")\r\n                        .each(function () {\r\n                            context.enterHeader(d3Select(this));\r\n                        })\r\n                        ;\r\n                }\r\n\r\n                //  Body  ---\r\n                tableElement.append(\"tbody\");\r\n            })\r\n            .merge(table)\r\n            .each(function (tableData) {\r\n                const tableElement = d3Select(this);\r\n\r\n                //  Header  ---\r\n                if (context._show_header && context.parentPropertyEditor() === null) {\r\n                    context.updateHeader(tableElement.select(\"thead > tr > th\"));\r\n                }\r\n\r\n                //  Body  ---\r\n                context.renderInputs(tableElement.select(\"tbody\"), tableData);\r\n            })\r\n            ;\r\n        table.exit()\r\n            .each(function () {\r\n                context.renderInputs(element.select(\"tbody\"), null);\r\n            })\r\n            .remove()\r\n            ;\r\n    }\r\n\r\n    exit(domNode, element) {\r\n        super.exit(domNode, element);\r\n        this.watchWidget(null);\r\n    }\r\n\r\n    private watchDepth = 0;\r\n    watchWidget(widget) {\r\n        if (this._watch) {\r\n            if ((window as any).__hpcc_debug) {\r\n                --this.watchDepth;\r\n                console.log(\"watchDepth:  \" + this.watchDepth);\r\n            }\r\n            this._watch.remove();\r\n            delete this._watch;\r\n        }\r\n        if (widget) {\r\n            const context = this;\r\n            this._watch = widget.monitor(function (_paramId, newVal, oldVal) {\r\n                if (oldVal !== newVal) {\r\n                    const propEditor = context.parentPropertyEditor() || context;\r\n                    propEditor.lazyRender();\r\n                }\r\n            });\r\n            if ((window as any).__hpcc_debug) {\r\n                ++this.watchDepth;\r\n                console.log(\"watchDepth:  \" + this.watchDepth);\r\n            }\r\n        }\r\n    }\r\n\r\n    enterHeader(th) {\r\n        const context = this;\r\n\r\n        th.append(\"span\");\r\n        th.append(\"i\")\r\n            .attr(\"class\", \"expandIcon fa\")\r\n            .on(\"click\", function () {\r\n                switch (context.peInputIcon()) {\r\n                    case \"fa-caret-up\":\r\n                    case \"fa-caret-right\":\r\n                        context.element().selectAll(`.table-${context.depth()} > tbody > tr > .headerRow > .peInput > .property-table-collapsed`)\r\n                            .classed(\"property-table-collapsed\", false)\r\n                            ;\r\n                        context.element().selectAll(`.table-${context.depth()} > tbody > tr > .headerRow > .peInput > i`)\r\n                            .classed(\"fa-minus-square-o\", true)\r\n                            .classed(\"fa-plus-square-o\", false)\r\n                            ;\r\n                        break;\r\n                    case \"fa-caret-down\":\r\n                        context.element().selectAll(`.table-${context.depth()} > tbody > tr > .headerRow > .peInput > div`)\r\n                            .classed(\"property-table-collapsed\", true)\r\n                            ;\r\n                        context.element().selectAll(`.table-${context.depth()} > tbody > tr > .headerRow > .peInput > i`)\r\n                            .classed(\"fa-minus-square-o\", false)\r\n                            .classed(\"fa-plus-square-o\", true)\r\n                            ;\r\n                        break;\r\n                }\r\n                context.refreshExpandIcon();\r\n            })\r\n            ;\r\n\r\n        const sortIcon = th.append(\"i\")\r\n            .attr(\"class\", \"sortIcon fa\")\r\n            .on(\"click\", function () {\r\n                context.refreshSortIcon(sortIcon, true);\r\n            })\r\n            ;\r\n\r\n        th.append(\"i\")\r\n            .attr(\"class\", \"hideParamsIcon fa\")\r\n            .on(\"click\", function () {\r\n                context.hideNonWidgets(!context.hideNonWidgets()).render();\r\n            })\r\n            ;\r\n    }\r\n\r\n    updateHeader(th) {\r\n        const widget: any = this.widget();\r\n        let spanText = \"\";\r\n        if (widget) {\r\n            if (widget.label) {\r\n                spanText += widget.label();\r\n            }\r\n            if (widget.classID) {\r\n                if (spanText) {\r\n                    spanText += \" - \";\r\n                }\r\n                spanText += widget.classID();\r\n            }\r\n        }\r\n        th.select(\"span\")\r\n            .text(spanText)\r\n            ;\r\n        this.refreshExpandIcon();\r\n        this.refreshSortIcon(th.select(\".sortIcon\"));\r\n        this.refreshHideParamsIcon(th.select(\".hideParamsIcon\"));\r\n    }\r\n\r\n    peInputCount() {\r\n        return this.element().selectAll(`.table-${this.depth()} > tbody > tr > .headerRow > .peInput > div`).size();\r\n    }\r\n\r\n    peInputCollapsedCount() {\r\n        return this.element().selectAll(`.table-${this.depth()} > tbody > tr > .headerRow > .peInput > div.property-table-collapsed`).size();\r\n    }\r\n\r\n    peInputIcon(): \"fa-caret-down\" | \"fa-caret-up\" | \"fa-caret-right\" {\r\n        const collapsed = this.peInputCollapsedCount();\r\n        if (collapsed === 0) {\r\n            return \"fa-caret-down\";\r\n        } else if (collapsed === this.peInputCount()) {\r\n            return \"fa-caret-up\";\r\n        }\r\n        return \"fa-caret-right\";\r\n    }\r\n\r\n    refreshExpandIcon() {\r\n        const newIcon = this.peInputIcon();\r\n        this.element().select(`.table-${this.depth()} > thead > tr > th > .expandIcon`)\r\n            .classed(\"fa-caret-up\", false)\r\n            .classed(\"fa-caret-right\", false)\r\n            .classed(\"fa-caret-down\", false)\r\n            .classed(newIcon, true)\r\n            ;\r\n    }\r\n\r\n    refreshSortIcon(sortIcon, increment = false) {\r\n        const sort = this.sorting();\r\n        const types = this.sorting_options();\r\n        const icons = this.__meta_sorting.ext.icons;\r\n        if (increment) {\r\n            sortIcon.classed(icons[types.indexOf(sort)], false);\r\n            this.sorting(types[(types.indexOf(sort) + 1) % types.length]).render();\r\n        } else {\r\n            sortIcon\r\n                .classed(icons[(types.indexOf(sort)) % types.length], true)\r\n                .attr(\"title\", sort)\r\n                ;\r\n        }\r\n    }\r\n\r\n    refreshHideParamsIcon(hideParamsIcon) {\r\n        hideParamsIcon\r\n            .classed(\"fa-eye\", !this.hideNonWidgets())\r\n            .classed(\"fa-eye-slash\", this.hideNonWidgets())\r\n            ;\r\n    }\r\n\r\n    gatherDataTree(widget) {\r\n        if (!widget) return null;\r\n        const retVal = {\r\n            label: widget.id() + \" (\" + widget.classID() + \")\",\r\n            children: []\r\n        };\r\n        const arr2 = Persist.discover(widget);\r\n        arr2.forEach(function (prop) {\r\n            const node = {\r\n                label: prop.id,\r\n                children: []\r\n            };\r\n            switch (prop.type) {\r\n                case \"widget\":\r\n                    node.children.push(this.gatherDataTree(widget[prop.id]()));\r\n                    break;\r\n                case \"widgetArray\":\r\n                case \"propertyArray\":\r\n                    const arr = widget[prop.id]();\r\n                    if (arr) {\r\n                        arr.forEach(function (item) {\r\n                            node.children.push(this.gatherDataTree(item));\r\n                        }, this);\r\n                    }\r\n                    break;\r\n                default:\r\n            }\r\n            retVal.children.push(node);\r\n        }, this);\r\n        return retVal;\r\n    }\r\n\r\n    getDataTree() {\r\n        return this.gatherDataTree(this.widget());\r\n    }\r\n\r\n    _rowSorting(paramArr) {\r\n        if (this.sorting() === \"type\") {\r\n            const typeOrder = [\"boolean\", \"number\", \"string\", \"html-color\", \"array\", \"object\", \"widget\", \"widgetArray\", \"propertyArray\"];\r\n            paramArr.sort(function (a, b) {\r\n                if (a.type === b.type) {\r\n                    return a.id < b.id ? -1 : 1;\r\n                } else {\r\n                    return typeOrder.indexOf(a.type) < typeOrder.indexOf(b.type) ? -1 : 1;\r\n                }\r\n            });\r\n        } else if (this.sorting() === \"A-Z\") {\r\n            paramArr.sort(function (a, b) { return a.id < b.id ? -1 : 1; });\r\n        } else if (this.sorting() === \"Z-A\") {\r\n            paramArr.sort(function (a, b) { return a.id > b.id ? -1 : 1; });\r\n        }\r\n    }\r\n\r\n    filterInputs(d) {\r\n        const discArr = Persist.discover(d);\r\n        if ((this.filterTags() || this.excludeTags().length > 0 || this.excludeParams.length > 0) && d instanceof PropertyEditor === false) {\r\n            const context = this;\r\n            return discArr.filter(function (param, _idx) {\r\n                if (d[param.id + \"_hidden\"] && d[param.id + \"_hidden\"]()) return false;\r\n                for (const excludeParamItem of context.excludeParams()) {\r\n                    const arr = excludeParamItem.split(\".\");\r\n                    let widgetName;\r\n                    let excludeParam;\r\n                    if (arr.length > 2) {\r\n                        widgetName = arr[0];\r\n                        excludeParam = arr[2];\r\n                    } else {\r\n                        widgetName = arr[0];\r\n                        excludeParam = arr[1];\r\n                    }\r\n                    if (d.class().indexOf(widgetName) !== -1) {\r\n                        if (param.id === excludeParam) {\r\n                            return false;\r\n                        }\r\n                        return true;\r\n                    }\r\n                }\r\n                if (context.excludeTags().length > 0 && param.ext && param.ext.tags && param.ext.tags.some(function (item) { return (context.excludeTags().indexOf(item) > -1); })) {\r\n                    return false;\r\n                }\r\n                if ((context.filterTags() && param.ext && param.ext.tags && param.ext.tags.indexOf(context.filterTags()) !== -1) || !context.filterTags()) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n        }\r\n        return discArr;\r\n    }\r\n\r\n    renderInputs(element, d) {\r\n        const context = this;\r\n        let discArr = [];\r\n        const showFields = !this.show_settings() && this.showFields();\r\n        if (d) {\r\n            discArr = this.filterInputs(d).filter(function (prop) { return prop.id !== \"fields\" ? true : showFields; });\r\n            if (!this.show_settings() && this.showData() && d.data) {\r\n                discArr.push({ id: \"data\", type: \"array\" });\r\n            }\r\n            if (this.hideNonWidgets()) {\r\n                discArr = discArr.filter(function (n) {\r\n                    return hasProperties(n.type);\r\n                });\r\n            }\r\n            this._rowSorting(discArr);\r\n        }\r\n\r\n        const rows = element.selectAll(\"tr.prop\" + this.id()).data(discArr, function (d2) { return d2.id; });\r\n        rows.enter().append(\"tr\")\r\n            .attr(\"class\", \"property-wrapper prop\" + this.id())\r\n            .each(function (param) {\r\n                const tr = d3Select(this);\r\n                if (hasProperties(param.type)) {\r\n                    tr.classed(\"property-widget-wrapper\", true);\r\n                    tr.append(\"td\")\r\n                        .attr(\"colspan\", \"2\")\r\n                        ;\r\n                } else {\r\n                    tr.classed(\"property-input-wrapper\", true);\r\n                    tr.append(\"td\")\r\n                        .classed(\"property-label\", true)\r\n                        .text(param.id)\r\n                        ;\r\n                    const inputCell = tr.append(\"td\")\r\n                        .classed(\"property-input-cell\", true)\r\n                        ;\r\n                    context.enterInputs(d, inputCell, param);\r\n                }\r\n            }).merge(rows)\r\n            .each(function (param) {\r\n                const tr = d3Select(this);\r\n                tr.classed(\"disabled\", d[param.id + \"_disabled\"] && d[param.id + \"_disabled\"]());\r\n                tr.classed(\"invalid\", d[param.id + \"_valid\"] && !d[param.id + \"_valid\"]());\r\n                tr.attr(\"title\", param.description);\r\n                if (hasProperties(param.type)) {\r\n                    context.updateWidgetRow(d, tr.select(\"td\"), param);\r\n                } else {\r\n                    context.updateInputs(d, param);\r\n                }\r\n            });\r\n        rows.exit().each(function (param) {\r\n            const tr = d3Select(this);\r\n            if (hasProperties(param.type)) {\r\n                context.updateWidgetRow(d, tr.select(\"td\"), null);\r\n            }\r\n        }).remove();\r\n        rows.order();\r\n    }\r\n\r\n    updateWidgetRow(widget: PropertyExt, element, param) {\r\n        let tmpWidget = [];\r\n        if (widget && param) {\r\n            tmpWidget = widget[param.id]() || [];\r\n        }\r\n        let widgetArr = tmpWidget instanceof Array ? tmpWidget : [tmpWidget];\r\n        if (param && param.ext && param.ext.autoExpand) {\r\n            //  remove empties and ensure last row is an empty  ---\r\n            let lastModified = true;\r\n            const noEmpties = widgetArr.filter(function (row, idx) {\r\n                lastModified = row.valid();\r\n                row._owner = widget;\r\n                return lastModified || idx === widgetArr.length - 1;\r\n            }, this);\r\n            const widgetDisabled = widget[param.id + \"_disabled\"] && widget[param.id + \"_disabled\"]();\r\n            let changed = !!(widgetArr.length - noEmpties.length);\r\n            if (lastModified && !widgetDisabled) {\r\n                changed = true;\r\n                const autoExpandWidget = new param.ext.autoExpand()\r\n                    .owner(widget)\r\n                    ;\r\n                // autoExpandWidget.monitor((id, newVal, oldVal, source) => {\r\n                // widget.broadcast(param.id, newVal, oldVal, source);\r\n                // });\r\n                noEmpties.push(autoExpandWidget);\r\n            }\r\n            if (changed) {\r\n                widget[param.id](noEmpties);\r\n                widgetArr = noEmpties;\r\n            }\r\n        }\r\n\r\n        const context = this;\r\n        element.classed(\"headerRow\", true);\r\n        const peInput = element.selectAll(`div.peInput-${this.depth()}`).data(widgetArr, function (d) { return d.id(); });\r\n        peInput.enter().append(\"div\")\r\n            .attr(\"class\", `peInput peInput-${this.depth()}`)\r\n            .each(function (w) {\r\n                const peInputElement = d3Select(this);\r\n\r\n                //  Header  ---\r\n                peInputElement.append(\"span\");\r\n                peInputElement.append(\"i\")\r\n                    .attr(\"class\", \"fa\")\r\n                    .on(\"click\", function (d) {\r\n                        const clickTarget = peInputElement.select(\"div\");\r\n                        clickTarget\r\n                            .classed(\"property-table-collapsed\", !clickTarget.classed(\"property-table-collapsed\"))\r\n                            ;\r\n                        d3Select(this)\r\n                            .classed(\"fa-minus-square-o\", !clickTarget.classed(\"property-table-collapsed\"))\r\n                            .classed(\"fa-plus-square-o\", clickTarget.classed(\"property-table-collapsed\"))\r\n                            ;\r\n                        context.refreshExpandIcon();\r\n                    })\r\n                    ;\r\n\r\n                //  Body  ---\r\n                const peDiv = peInputElement.append(\"div\")\r\n                    // .attr(\"class\", `property- input - cell propEditor-${context.depth() }`)\r\n                    ;\r\n                context._childPE.set(this, new PropertyEditor().label(param.id).target(peDiv.node() as HTMLElement));\r\n            })\r\n            .merge(peInput)\r\n            .each(function (w) {\r\n                const peInputElement = d3Select(this);\r\n                const clickTarget = peInputElement.select(\"div\");\r\n\r\n                //  Header  ---\r\n                d3Select(this).select(\"span\")\r\n                    .text(`${param.id}`)\r\n                    ;\r\n\r\n                d3Select(this).select(\"i\")\r\n                    .classed(\"fa-minus-square-o\", !clickTarget.classed(\"property-table-collapsed\"))\r\n                    .classed(\"fa-plus-square-o\", clickTarget.classed(\"property-table-collapsed\"))\r\n                    ;\r\n\r\n                //  Body  ---\r\n                context._childPE.get(this)\r\n                    .parentPropertyEditor(context)\r\n                    .showFields(context.showFields())\r\n                    .showData(context.showData())\r\n                    .sorting(context.sorting())\r\n                    .filterTags(context.filterTags())\r\n                    .excludeTags(context.excludeTags())\r\n                    .excludeParams(context.excludeParams())\r\n                    .hideNonWidgets(context.hideNonWidgets() && w._class.indexOf(\"layout_\") >= 0)\r\n                    .widget(w)\r\n                    .render()\r\n                    ;\r\n            })\r\n            ;\r\n        peInput.exit()\r\n            .each(function (w) {\r\n                context._childPE.get(this)\r\n                    .widget(null)\r\n                    .render()\r\n                    .target(null)\r\n                    ;\r\n                context._childPE.remove(this);\r\n            })\r\n            .remove()\r\n            ;\r\n    }\r\n\r\n    setProperty(widget, id, value) {\r\n        //  With PropertyExt not all \"widgets\" have a render, if not use top most render...\r\n        let topWidget: Widget;\r\n        let topPropEditor: Widget;\r\n        let propEditor: PropertyEditor = this;\r\n        let oldValue;\r\n        while (propEditor && widget) {\r\n            if (propEditor === this) {\r\n                oldValue = widget[id]();\r\n                widget[id](value);\r\n            }\r\n            if (propEditor) {\r\n                topPropEditor = propEditor;\r\n                const w: PropertyExt = propEditor.widget();\r\n                if (w instanceof Widget) {\r\n                    topWidget = w;\r\n                }\r\n            }\r\n            propEditor = propEditor.parentPropertyEditor();\r\n        }\r\n        if (topWidget) {\r\n            topWidget.render();\r\n        }\r\n        if (topPropEditor) {\r\n            topPropEditor.broadcast(id, value, oldValue, widget);\r\n        }\r\n    }\r\n\r\n    enterInputs(widget, cell, param) {\r\n        cell.classed(param.type + \"-cell\", true);\r\n        const context = this;\r\n        if (typeof (param.ext.editor_input) === \"function\") {\r\n            param.ext.editor_input(this, widget, cell, param);\r\n        }\r\n        switch (param.type) {\r\n            case \"boolean\":\r\n                cell.append(\"input\")\r\n                    .attr(\"id\", this.id() + \"_\" + param.id)\r\n                    .classed(\"property-input\", true)\r\n                    .attr(\"type\", \"checkbox\")\r\n                    .on(\"change\", function () {\r\n                        context.setProperty(widget, param.id, this.checked);\r\n                    })\r\n                    ;\r\n                break;\r\n            case \"set\":\r\n                cell.append(\"select\")\r\n                    .attr(\"id\", this.id() + \"_\" + param.id)\r\n                    .classed(\"property-input\", true)\r\n                    .on(\"change\", function () {\r\n                        context.setProperty(widget, param.id, this.value);\r\n                    })\r\n                    ;\r\n                break;\r\n            case \"array\":\r\n            case \"object\":\r\n                cell.append(\"textarea\")\r\n                    .attr(\"id\", this.id() + \"_\" + param.id)\r\n                    .classed(\"property-input\", true)\r\n                    .attr(\"autocomplete\", \"off\")\r\n                    .attr(\"autocorrect\", \"off\")\r\n                    .attr(\"autocapitalize\", \"off\")\r\n                    .attr(\"spellcheck\", \"false\")\r\n                    .on(\"change\", function () {\r\n                        let value;\r\n                        try {\r\n                            value = JSON.parse(this.value);\r\n                        } catch (e) {\r\n                            value = this.value;\r\n                        }\r\n                        context.setProperty(widget, param.id, value);\r\n                    })\r\n                    ;\r\n                break;\r\n            default:\r\n                if (param.ext && param.ext.range) {\r\n                    cell.append(\"span\")\r\n                        .classed(\"property-input-span\", true)\r\n                        .attr(\"id\", this.id() + \"_\" + param.id + \"_currentVal\")\r\n                        .text(param.defaultValue)\r\n                        ;\r\n                    cell.append(\"input\")\r\n                        .attr(\"type\", \"range\")\r\n                        .attr(\"step\", param.ext.range.step)\r\n                        .attr(\"min\", param.ext.range.min)\r\n                        .attr(\"max\", param.ext.range.max)\r\n                        .attr(\"id\", this.id() + \"_\" + param.id)\r\n                        .classed(\"property-input\", true)\r\n                        .on(\"input\", function () {\r\n                            context.setProperty(widget, param.id, this.value);\r\n                            d3Select(\"#\" + this.id + \"_currentVal\").text(\"Current Value: \" + this.value);\r\n                        })\r\n                        .on(\"change\", function () {\r\n                            context.setProperty(widget, param.id, this.value);\r\n                            d3Select(\"#\" + this.id + \"_currentVal\").text(\"Current Value: \" + this.value);\r\n                        })\r\n                        ;\r\n                } else {\r\n                    cell.append(param.ext && param.ext.multiline ? \"textarea\" : \"input\")\r\n                        .attr(\"id\", this.id() + \"_\" + param.id)\r\n                        .classed(\"property-input\", true)\r\n                        .attr(\"autocomplete\", \"off\")\r\n                        .attr(\"autocorrect\", \"off\")\r\n                        .attr(\"autocapitalize\", \"off\")\r\n                        .attr(\"spellcheck\", \"false\")\r\n                        .on(\"change\", function () {\r\n                            context.setProperty(widget, param.id, this.value);\r\n                        })\r\n                        ;\r\n                    if (param.type === \"html-color\" && !Platform.isIE) {\r\n                        cell.append(\"input\")\r\n                            .attr(\"id\", this.id() + \"_\" + param.id + \"_2\")\r\n                            .classed(\"property-input\", true)\r\n                            .attr(\"type\", \"color\")\r\n                            .on(\"change\", function () {\r\n                                context.setProperty(widget, param.id, this.value);\r\n                            })\r\n                            ;\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    updateInputs(widget, param) {\r\n        const element = d3SelectAll(\"#\" + this.id() + \"_\" + param.id + \", #\" + this.id() + \"_\" + param.id + \"_2\");\r\n        const val = widget ? widget[param.id]() : \"\";\r\n        element.property(\"disabled\", widget[param.id + \"_disabled\"] && widget[param.id + \"_disabled\"]());\r\n        element.property(\"invalid\", widget[param.id + \"_valid\"] && !widget[param.id + \"_valid\"]());\r\n        switch (param.type) {\r\n            case \"boolean\":\r\n                element.property(\"checked\", val);\r\n                break;\r\n            case \"set\":\r\n                const options = element.selectAll(\"option\").data<string | { value: string, text: string }>(widget[param.id + \"_options\"]());\r\n                options.enter().append(\"option\")\r\n                    .merge(options as any)\r\n                    .attr(\"value\", (d: any) => (d && d.value !== undefined) ? d.value : d)\r\n                    .text((d: any) => (d && d.text !== undefined) ? d.text : d)\r\n                    ;\r\n                options.exit().remove();\r\n                element.property(\"value\", val);\r\n                break;\r\n            case \"array\":\r\n            case \"object\":\r\n                element.property(\"value\", JSON.stringify(val, function replacer(_key, value) {\r\n                    if (value instanceof Widget) {\r\n                        return Persist.serialize(value);\r\n                    }\r\n                    return value;\r\n                }, \"    \"));\r\n                break;\r\n            default:\r\n                if (param.ext && param.ext.range) {\r\n                    d3Select(\"#\" + this.id() + \"_\" + param.id + \"_currentVal\").text(\"Current Value: \" + val);\r\n                }\r\n                element.property(\"value\", val && val.length && val.length > 100000 ? \"...too big to display...\" : val);\r\n                break;\r\n        }\r\n    }\r\n\r\n    showFields: { (): boolean; (_: boolean): PropertyEditor; };\r\n    showData: { (): boolean; (_: boolean): PropertyEditor; };\r\n\r\n    sorting: { (): string; (_: string): PropertyEditor; };\r\n    sorting_options: () => string[];\r\n\r\n    hideNonWidgets: { (): boolean; (_: boolean): PropertyEditor; };\r\n\r\n    label: { (): string; (_: string): PropertyEditor; };\r\n    filterTags: { (): string; (_: string): PropertyEditor; };\r\n    excludeTags: { (): string[]; (_: string[]): PropertyEditor; };\r\n    excludeParams: { (): string[]; (_: string[]): PropertyEditor; };\r\n\r\n    widget: { (): PropertyExt; (_: PropertyExt): PropertyEditor };\r\n}\r\nPropertyEditor.prototype._class += \" other_PropertyEditor\";\r\n\r\nPropertyEditor.prototype.publish(\"showFields\", false, \"boolean\", \"If true, widget.fields() will display as if it was a publish parameter.\", null, { tags: [\"Basic\"] });\r\nPropertyEditor.prototype.publish(\"showData\", false, \"boolean\", \"If true, widget.data() will display as if it was a publish parameter.\", null, { tags: [\"Basic\"] });\r\n\r\nPropertyEditor.prototype.publish(\"sorting\", \"none\", \"set\", \"Specify the sorting type\", [\"none\", \"A-Z\", \"Z-A\", \"type\"], { tags: [\"Basic\"], icons: [\"fa-sort\", \"fa-sort-alpha-asc\", \"fa-sort-alpha-desc\", \"fa-sort-amount-asc\"] });\r\n\r\nPropertyEditor.prototype.publish(\"hideNonWidgets\", false, \"boolean\", \"Hides non-widget params (at this tier only)\", null, { tags: [\"Basic\"] });\r\n\r\nPropertyEditor.prototype.publish(\"label\", \"\", \"string\", \"Label to display in header of property editor table\", null, { tags: [\"Basic\"] });\r\nPropertyEditor.prototype.publish(\"filterTags\", \"\", \"set\", \"Only show Publish Params of this type\", [\"Basic\", \"Intermediate\", \"Advance\", \"\"], {});\r\nPropertyEditor.prototype.publish(\"excludeTags\", [\"Private\"], \"array\", \"Exclude this array of tags\", null, {});\r\nPropertyEditor.prototype.publish(\"excludeParams\", [], \"array\", \"Exclude this array of params (widget.param)\", null, {});\r\n\r\nPropertyEditor.prototype.publish(\"widget\", null, \"widget\", \"Widget\", null, { tags: [\"Basic\"], render: false });\r\n\r\nconst _widgetOrig = PropertyEditor.prototype.widget;\r\n(PropertyEditor.prototype as any).widget = function (_?: Widget): Widget | PropertyEditor {\r\n    if (arguments.length && _widgetOrig.call(this) === _) return this;\r\n    const retVal = _widgetOrig.apply(this, arguments);\r\n    if (arguments.length) {\r\n        this.watchWidget(_);\r\n        if (_ instanceof Grid) {\r\n            const context = this;\r\n            _.postSelectionChange = function () {\r\n                context._selectedItems = _._selectionBag.get().map(function (item) { return item.widget; });\r\n                context.lazyRender();\r\n            };\r\n        }\r\n    }\r\n    return retVal;\r\n};\r\n","import { HTMLWidget } from \"@hpcc-js/common\";\r\nimport { select as d3Select } from \"d3-selection\";\r\n\r\nimport \"../src/RadioCheckbox.css\";\r\n\r\nexport class RadioCheckbox extends HTMLWidget {\r\n    _span;\r\n    _label;\r\n    _Checkbox;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    rcData() {\r\n        if (this.data().length === 0) return [];\r\n        const view = this._db.rollupView([this.textColumn(), this.valueColumn()]);\r\n        let retVal = [];\r\n        retVal = retVal.concat(view.entries().map(function (row) {\r\n            return {\r\n                text: row.key,\r\n                value: row.values.length ? row.values[0].key : \"\",\r\n                origRow: row.values.length && row.values[0].values.length ? row.values[0].values[0] : []\r\n            };\r\n        }, this));\r\n        if (this.sort_exists()) {\r\n            const descending = this.sort() === \"descending\";\r\n            retVal.sort(function (l, r) {\r\n                if (l.text < r.text) return descending ? 1 : -1;\r\n                if (l.text > r.text) return descending ? -1 : 1;\r\n                return 0;\r\n            });\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        this._span = element.append(\"span\");\r\n        this._label = this._span.append(\"label\")\r\n            .attr(\"for\", this.id() + \"_radioCheckbox\")\r\n            ;\r\n        this._Checkbox = this._span.append(\"div\")\r\n            .attr(\"id\", this.id() + \"_radioCheckbox\");\r\n    }\r\n\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n        const context = this;\r\n        this._label\r\n            .text(this.label())\r\n            ;\r\n        const radioCheckbox = this._Checkbox.selectAll(\".dataRow\").data(this.rcData());\r\n        radioCheckbox.enter().append(\"div\")\r\n            .attr(\"class\", \"dataRow\")\r\n            .each(function (row, idx) {\r\n                const checkboxDiv = d3Select(this);\r\n                const id = context.id() + \"_checkbox_\" + idx;\r\n                checkboxDiv.append(\"input\")\r\n                    .attr(\"id\", id)\r\n                    .attr(\"name\", context.id() + \"_radioCheckbox\")\r\n                    .on(\"change\", function (selectedData) {\r\n                        context.handleClick();\r\n                    });\r\n                checkboxDiv.append(\"label\")\r\n                    .attr(\"for\", id);\r\n            });\r\n        radioCheckbox\r\n            .each(function (row, idx) {\r\n                const rcDiv = d3Select(this);\r\n                rcDiv.select(\"input\")\r\n                    .attr(\"type\", context.multiple() ? \"checkbox\" : \"radio\")\r\n                    .attr(\"value\", row.value);\r\n                rcDiv.select(\"label\")\r\n                    .text(row.text);\r\n            });\r\n        radioCheckbox.exit().remove();\r\n        radioCheckbox.order();\r\n    }\r\n\r\n    exit(domNode, element) {\r\n        this._span.remove();\r\n        super.exit(domNode, element);\r\n    }\r\n\r\n    handleClick() {\r\n        const options = [];\r\n        this._Checkbox.selectAll(\".dataRow > input\")\r\n            .each(function (row, idx) {\r\n                const input = d3Select(this);\r\n                if (input.property(\"checked\") && row && row.origRow) {\r\n                    options.push(row.origRow);\r\n                }\r\n            });\r\n        if (options.length) {\r\n            //  TODO Handle Multiple Selections - part of 1.16.x\r\n            this.click(this.rowToObj(options[0]), this.valueColumn(), true);\r\n        } else {\r\n            this.click([], this.valueColumn(), false);\r\n        }\r\n    }\r\n\r\n    click(row, column, selected) {\r\n        console.log(\"Click:  \" + JSON.stringify(row) + \", \" + column + \", \" + selected);\r\n    }\r\n\r\n    label: { (): string; (_: string): RadioCheckbox };\r\n    label_exists: () => boolean;\r\n    valueColumn: { (): string; (_: string): RadioCheckbox };\r\n    valueColumn_exists: () => boolean;\r\n    textColumn: { (): string; (_: string): RadioCheckbox };\r\n    textColumn_exists: () => boolean;\r\n    sort: { (): string; (_: string): RadioCheckbox };\r\n    sort_exists: () => boolean;\r\n    multiple: { (): boolean; (_: boolean): RadioCheckbox };\r\n    multiple_exists: () => boolean;\r\n}\r\nRadioCheckbox.prototype._class += \" other_RadioCheckbox\";\r\n\r\nRadioCheckbox.prototype.publish(\"label\", null, \"string\", \"Label for RadioCheckbox\");\r\nRadioCheckbox.prototype.publish(\"valueColumn\", null, \"set\", \"RadioCheckbox display value\", function () { return this.columns(); }, { optional: true });\r\nRadioCheckbox.prototype.publish(\"textColumn\", null, \"set\", \"RadioCheckbox value(s)\", function () { return this.columns(); }, { optional: true });\r\nRadioCheckbox.prototype.publish(\"sort\", null, \"set\", \"Sort contents\", [\"\", \"ascending\", \"descending\"], { optional: true });\r\nRadioCheckbox.prototype.publish(\"multiple\", false, \"boolean\", \"Multiple selection\");\r\n","import { HTMLWidget } from \"@hpcc-js/common\";\r\nimport { select as d3Select } from \"d3-selection\";\r\n\r\nimport \"../src/Select.css\";\r\n\r\nexport class Select extends HTMLWidget {\r\n    _span;\r\n    _prompt;\r\n    _select;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    selectData() {\r\n        if (this.data().length === 0) return [];\r\n        const view = this._db.rollupView([this.textColumn(), this.valueColumn()]);\r\n        let retVal = [];\r\n        retVal = retVal.concat(view.entries().map(function (row) {\r\n            return {\r\n                text: row.key,\r\n                value: row.values.length ? row.values[0].key : \"\",\r\n                origRow: row.values.length && row.values[0].value.length ? row.values[0].value[0] : []\r\n            };\r\n        }, this));\r\n        if (this.sort_exists()) {\r\n            const descending = this.sort() === \"descending\";\r\n            retVal.sort(function (l, r) {\r\n                if (l.text < r.text) return descending ? 1 : -1;\r\n                if (l.text > r.text) return descending ? -1 : 1;\r\n                return 0;\r\n            });\r\n        }\r\n        if (this.optional()) {\r\n            retVal.unshift({ value: \"\", text: \"\" });\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        this._span = element.append(\"span\");\r\n        this._prompt = this._span.append(\"label\")\r\n            .attr(\"for\", this.id() + \"_select\")\r\n            ;\r\n\r\n        const context = this;\r\n        this._select = this._span.append(\"select\")\r\n            .attr(\"id\", this.id() + \"_select\")\r\n            .on(\"change\", function (d) {\r\n                const options = [];\r\n                const options_dom_node = context._select.node().options;\r\n                for (let i = 0; i < options_dom_node.length; ++i) {\r\n                    const optionNode = options_dom_node[i];\r\n                    if (optionNode.selected) {\r\n                        options.push((d3Select(optionNode).datum() as any).origRow);\r\n                    }\r\n                }\r\n                if (options.length) {\r\n                    context.click(context.rowToObj(options[0]), context.valueColumn(), true); // TODO:  Multiselect not support in HIPIE\r\n                } else {\r\n                    context.click([], context.valueColumn(), false);\r\n                }\r\n            })\r\n            ;\r\n    }\r\n\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n\r\n        this._prompt\r\n            .text(this.label())\r\n            ;\r\n        this._select\r\n            .attr(\"multiple\", this.multiple() ? this.multiple() : null)\r\n            .attr(\"size\", this.multiple() && this.selectSize() ? this.selectSize() : null)\r\n            ;\r\n\r\n        const option = this._select.selectAll(\".dataRow\").data(this.selectData());\r\n        const optionUpdate = option.enter().append(\"option\")\r\n            .attr(\"class\", \"dataRow\")\r\n            .merge(option)\r\n            .attr(\"value\", function (row) { return row.value; })\r\n            .text(function (row) { return row.text; })\r\n            ;\r\n        option.exit().remove();\r\n        optionUpdate.order();\r\n    }\r\n\r\n    exit(domNode, element) {\r\n        this._span.remove();\r\n        super.exit(domNode, element);\r\n    }\r\n\r\n    click(row, column, selected) {\r\n        console.log(\"Click:  \" + JSON.stringify(row) + \", \" + column + \", \" + selected);\r\n    }\r\n    label: { (): string; (_: string): Select };\r\n    label_exists: () => boolean;\r\n    valueColumn: { (): string; (_: string): Select };\r\n    valueColumn_exists: () => boolean;\r\n    textColumn: { (): string; (_: string): Select };\r\n    textColumn_exists: () => boolean;\r\n    optional: { (): boolean; (_: boolean): Select };\r\n    optional_exists: () => boolean;\r\n    sort: { (): string; (_: string): Select };\r\n    sort_exists: () => boolean;\r\n    multiple: { (): boolean; (_: boolean): Select };\r\n    multiple_exists: () => boolean;\r\n    selectSize: { (): number; (_: number): Select };\r\n    selectSize_exists: () => boolean;\r\n}\r\nSelect.prototype._class += \" other_Select\";\r\n\r\nSelect.prototype.publish(\"label\", null, \"string\", \"Label for select\");\r\nSelect.prototype.publish(\"valueColumn\", null, \"set\", \"Select display value\", function () { return this.columns(); }, { optional: true });\r\nSelect.prototype.publish(\"textColumn\", null, \"set\", \"Select value(s)\", function () { return this.columns(); }, { optional: true });\r\nSelect.prototype.publish(\"optional\", true, \"boolean\", \"Optional Select\");\r\nSelect.prototype.publish(\"sort\", null, \"set\", \"Sort contents\", [\"\", \"ascending\", \"descending\"], { optional: true });\r\nSelect.prototype.publish(\"multiple\", false, \"boolean\", \"Multiple selection\");\r\nSelect.prototype.publish(\"selectSize\", 5, \"number\", \"Size of multiselect box\", null, { disable: w => !w.multiple() });\r\n","import { HTMLWidget } from \"@hpcc-js/common\";\r\nimport * as Persist from \"./Persist\";\r\n\r\nimport \"../src/ThemeEditor.css\";\r\n\r\nfunction hasLocalStorage(): boolean {\r\n    const mod = \"@hpcc-js/other\";\r\n    try {\r\n        localStorage.setItem(mod, mod);\r\n        localStorage.removeItem(mod);\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n}\r\n\r\n//  Polyfill for IE in file:// mode  ----\r\nconst _localStorage: { getItem: (id: string) => any; } = hasLocalStorage() ? localStorage : {\r\n    getItem(id: string): any {\r\n        return undefined;\r\n    }\r\n};\r\n\r\nconst getThemes = function (idx?) {\r\n    if (typeof ((window as any).g_defaultThemes) === \"function\") {\r\n        (window as any).g_defaultThemes(idx);\r\n    }\r\n    return JSON.parse(_localStorage.getItem(\"themeEditorThemes\") || \"{}\");\r\n};\r\nconst getSerials = function (idx?) {\r\n    if (typeof ((window as any).g_defaultSerials) === \"function\") {\r\n        (window as any).g_defaultSerials(idx);\r\n    }\r\n    return JSON.parse(_localStorage.getItem(\"themeEditorSerials\") || \"{}\");\r\n};\r\nconst getThemeNames = function (idx?) {\r\n    const loadedThemes = getThemes();\r\n    let themes = [];\r\n    for (const themeName in loadedThemes) {\r\n        themes.push(themeName);\r\n    }\r\n    if (typeof (idx) !== \"undefined\" && typeof (themes[idx]) !== \"undefined\") {\r\n        themes = themes[idx];\r\n    }\r\n    return themes;\r\n};\r\nconst getSerialNames = function (idx?) {\r\n    const loadedSerials = getSerials();\r\n    let serials = [];\r\n    for (const serialName in loadedSerials) {\r\n        serials.push(serialName);\r\n    }\r\n    if (typeof (idx) !== \"undefined\" && typeof (serials[idx]) !== \"undefined\") {\r\n        serials = serials[idx];\r\n    }\r\n    return serials;\r\n};\r\nconst tableNeedsRedraw = function (context) {\r\n    let needsRedraw = false;\r\n    if (typeof (context._current_grouping) === \"undefined\") {\r\n        context._current_grouping = context._group_params_by;\r\n    } else if (context._current_grouping !== context._group_params_by) {\r\n        needsRedraw = true;\r\n    }\r\n    if (typeof (context._showing_columns) === \"undefined\") {\r\n        context._showing_columns = context.showColumns();\r\n    } else if (context._showing_columns !== context.showColumns()) {\r\n        needsRedraw = true;\r\n    }\r\n    if (typeof (context._showing_data) === \"undefined\") {\r\n        context._showing_data = context.showData();\r\n    } else if (context._showing_data !== context.showData()) {\r\n        needsRedraw = true;\r\n    }\r\n    return needsRedraw;\r\n};\r\nconst camelizeString = function (str) {\r\n    const spacedText = str.split(/(?=[0-9A-Z])/).map(function (n) { return n.length > 1 ? n + \" \" : n; }).join(\"\");\r\n    return spacedText.replace(/(?:^|\\s)\\S/g, function (a) { return a.toUpperCase(); });\r\n};\r\n\r\nconst tableInputHtml = function (rowObj, value, widgetArr, idSuffix) {\r\n    let inputHtml = \"\";\r\n    let id = \"te-input-\" + rowObj.id + \"-\" + idSuffix;\r\n\r\n    let inputType;\r\n    if (typeof (rowObj.ext) !== \"undefined\" && typeof (rowObj.ext.inputType) !== \"undefined\") {\r\n        inputType = rowObj.ext.inputType;\r\n    }\r\n\r\n    if (typeof (rowObj.inputID) !== \"undefined\") {\r\n        id = rowObj.inputID;\r\n    }\r\n\r\n    const dataWIDs = \"data-paramid='\" + rowObj.id + \"' data-wids='\" + widgetArr.map(function (w) {\r\n        if (typeof (w.widget) === \"object\") {\r\n            return w.widget._id;\r\n        } else {\r\n            return w;\r\n        }\r\n    }).join(\",\") + \"'\";\r\n    switch (rowObj.type) {\r\n        case \"boolean\":\r\n            const checked = value ? \" checked\" : \"\";\r\n            inputHtml = \"<input id='\" + id + \"' \" + dataWIDs + \" type='checkbox' class='te-checkbox te-input'\" + checked + \">\"; break;\r\n        case \"number\":\r\n            if (typeof (inputType) !== \"undefined\") {\r\n                if (inputType === \"textarea\") {\r\n                    inputHtml = \"<textarea id='\" + id + \"' class='te-textarea te-input' \" + dataWIDs + \">\" + value + \"</textarea>\";\r\n                } else if (inputType === \"range\") {\r\n                    inputHtml = \"<input id='\" + id + \"' class='te-input' type='range' \" + dataWIDs + \" value='\" + value + \"'  min='\" + rowObj.ext.min + \"' max='\" + rowObj.ext.max + \"' step='\" + rowObj.ext.step + \"'>\";\r\n                }\r\n            } else {\r\n                inputHtml = \"<input id='\" + id + \"' type='text' class='te-text te-input' \" + dataWIDs + \" value='\" + value + \"'>\";\r\n            }\r\n            break;\r\n        case \"string\":\r\n            if (typeof (inputType) !== \"undefined\") {\r\n                if (inputType === \"textarea\") {\r\n                    inputHtml = \"<textarea id='\" + id + \"' class='te-textarea te-input' \" + dataWIDs + \">\" + value + \"</textarea>\";\r\n                }\r\n            } else {\r\n                inputHtml = \"<input id='\" + id + \"' type='text' class='te-text te-input' value='\" + value + \"' \" + dataWIDs + \">\";\r\n            }\r\n            break;\r\n        case \"html-color\":\r\n            const valueAttr = value === \"\" ? \"\" : \" value='\" + value + \"'\";\r\n            inputHtml = \"<input id='\" + id + \"' type='text' class='te-html-color-input te-input' \" + dataWIDs + \" \" + valueAttr + \">\";\r\n            inputHtml += \"<input type='color' class='te-html-color-button te-input' \" + dataWIDs + \" \" + valueAttr + \">\";\r\n            break;\r\n        case \"set\":\r\n            const options = _options(rowObj, value);\r\n            inputHtml = \"<select id='\" + id + \"' class='te-select te-input'\" + dataWIDs + \">\" + options + \"</select>\";\r\n            break;\r\n        case \"array\":\r\n            inputHtml = \"<textarea id='\" + id + \"' class='te-textarea te-input' data-type='array' \" + dataWIDs + \">\" + value + \"</textarea>\";\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n    if (typeof (rowObj.ext.saveButton) !== \"undefined\") {\r\n        inputHtml += \"<button id='\" + rowObj.ext.saveButtonID + \"'>\" + rowObj.ext.saveButton + \"</button>\";\r\n    }\r\n    return inputHtml;\r\n\r\n    function _options(obj, val) {\r\n        let options = \"\";\r\n        obj.set.forEach(function (s) {\r\n            const selected = s === val ? \" selected\" : \"\";\r\n            options += \"<option value='\" + s + \"'\" + selected + \">\" + s + \"</option>\";\r\n        });\r\n        return options;\r\n    }\r\n};\r\n\r\nexport class ThemeEditor extends HTMLWidget {\r\n    _current_grouping;\r\n    _showing_columns;\r\n    _showing_data;\r\n    _contentEditors;\r\n    _showSettings;\r\n    _defaultThemes;\r\n    _widgetObjsById;\r\n    _sharedProperties;\r\n    getThemes;\r\n    getSerials;\r\n    getDefaultThemes;\r\n    getDefaultSerials;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this._tag = \"div\";\r\n        this._current_grouping = undefined;\r\n        this._showing_columns = undefined;\r\n        this._showing_data = undefined;\r\n        this.columns([\"Key\", \"Value\"]);\r\n        this._contentEditors = [];\r\n        this._showSettings = true;\r\n\r\n        this._defaultThemes = [];\r\n\r\n        this._widgetObjsById = {};\r\n    }\r\n\r\n    showSettings(_?) {\r\n        if (!arguments.length) {\r\n            return this._showSettings;\r\n        }\r\n        this._showSettings = _;\r\n        return this;\r\n    }\r\n\r\n    onChange(widget, propID) { }\r\n\r\n    enter(domNode, element) {\r\n        super.enter(domNode, element);\r\n        this._placeholderElement.style(\"overflow\", \"auto\");\r\n    }\r\n\r\n    widgetProperty(widget, propID, _?) {\r\n        if (_ === undefined) {\r\n            return widget[propID]();\r\n        }\r\n        return widget[propID](_);\r\n    }\r\n\r\n    load(elmValue) { }\r\n\r\n    save(themeName) { }\r\n\r\n    needsPropTableRedraw() {\r\n        const ret = document.getElementById(\"te-themeEditorOptions\") === null;\r\n        return ret;\r\n    }\r\n\r\n    update(domNode, element) {\r\n        super.update(domNode, element);\r\n        if (tableNeedsRedraw(this)) {\r\n            element.selectAll(\"#\" + this._id + \" > table\").remove();\r\n        }\r\n        this._current_grouping = this.paramGrouping();\r\n        this._widgetObjsById[this._id] = this;\r\n        this._sharedProperties = this.findSharedProperties(this.data());\r\n\r\n        const needsPropertiesTableRedraw = this.needsPropTableRedraw();\r\n        if (needsPropertiesTableRedraw && this.showSettings()) {\r\n            const teParams = Persist.discover(this);\r\n            for (const i in teParams) {\r\n                if (teParams[i].ext.tags.indexOf(this.editorComplexity()) !== -1) {\r\n                    const teParamVal = this[teParams[i].id]();\r\n                    if (teParams[i].id === \"loadedTheme\" || teParams[i].id === \"loadedSerial\") {\r\n                        teParams[i].inputID = \"te-load-theme\";\r\n                    }\r\n                    teParams[i].input = tableInputHtml(teParams[i], teParamVal, [this._id], this._id);\r\n                } else {\r\n                    delete teParams[i];\r\n                }\r\n            }\r\n            domNode.innerHTML = this.propertiesTableHtml(teParams);\r\n            const evt = document.createEvent(\"Events\");\r\n            evt.initEvent(\"TE Properties Ready\", true, true);\r\n            document.dispatchEvent(evt);\r\n        }\r\n\r\n        this.buildTableObjects(domNode, this._sharedProperties);\r\n\r\n        this.initFunctionality(domNode);\r\n    }\r\n\r\n    exit(domNode, element) {\r\n        super.exit(domNode, element);\r\n    }\r\n\r\n    click(d) {\r\n    }\r\n\r\n    propertiesTableHtml(editorParams) {\r\n        const tableObj = {\r\n            id: \"te-themeEditorOptions\",\r\n            label: \"Editor Options\",\r\n            rowArr: []\r\n        };\r\n        const modeTableObj = {\r\n            id: \"te-tableModeOptions\",\r\n            label: this.themeMode() ? \"Save/Load Theme\" : \"Save/Load Serial\",\r\n            rowArr: []\r\n        };\r\n        for (const i in editorParams) {\r\n            if (this.themeMode()) {\r\n                if (editorParams[i].ext.tags.indexOf(\"Theme\") === -1 && editorParams[i].ext.tags.indexOf(\"Serial\") === -1) {\r\n                    tableObj.rowArr.push({\r\n                        th: camelizeString(editorParams[i].id),\r\n                        td: editorParams[i].input,\r\n                        trClass: \"propertyRow\"\r\n                    });\r\n                } else if (editorParams[i].ext.tags.indexOf(\"Theme\") !== -1) {\r\n                    modeTableObj.rowArr.push({\r\n                        th: camelizeString(editorParams[i].id),\r\n                        td: editorParams[i].input,\r\n                        trClass: \"propertyRow\"\r\n                    });\r\n                }\r\n            } else {\r\n                if (editorParams[i].ext.tags.indexOf(\"Serial\") === -1 && editorParams[i].ext.tags.indexOf(\"Theme\") === -1) {\r\n                    tableObj.rowArr.push({\r\n                        th: camelizeString(editorParams[i].id),\r\n                        td: editorParams[i].input,\r\n                        trClass: \"propertyRow\"\r\n                    });\r\n                } else if (editorParams[i].ext.tags.indexOf(\"Serial\") !== -1) {\r\n                    modeTableObj.rowArr.push({\r\n                        th: camelizeString(editorParams[i].id),\r\n                        td: editorParams[i].input,\r\n                        trClass: \"propertyRow\"\r\n                    });\r\n                }\r\n            }\r\n\r\n        }\r\n        let html = \"\";\r\n        if (tableObj.rowArr.length > 0) {\r\n            html += this.tableObjHtml(tableObj);\r\n        }\r\n        if (modeTableObj.rowArr.length > 0) {\r\n            html += this.tableObjHtml(modeTableObj);\r\n        }\r\n        return html;\r\n    }\r\n    buildTableObjects(targetElement, propObjs) {\r\n        let sectionObjs = {};\r\n        if (this.themeMode()) {\r\n            sectionObjs = {\r\n                chartColorSection: {\r\n                    id: \"te-colorOptions\",\r\n                    label: \"Chart Colors\",\r\n                    rowObjArr: []\r\n                },\r\n                surfaceSection: {\r\n                    id: \"te-containerOptions\",\r\n                    label: \"Container Styles/Colors\",\r\n                    rowObjArr: []\r\n                },\r\n                fontSection: {\r\n                    id: \"te-fontOptions\",\r\n                    label: \"Font Styles/Colors\",\r\n                    rowObjArr: []\r\n                }\r\n            };\r\n        } else {\r\n            sectionObjs = {\r\n                nonSurfaceSection: {\r\n                    id: \"te-chartOptions\",\r\n                    label: \"Chart Properties\",\r\n                    rowObjArr: []\r\n                }\r\n            };\r\n        }\r\n        for (const p in propObjs) {\r\n            if (this.themeMode()) {\r\n                if (p.toUpperCase().indexOf(\"FONT\") !== -1 && !(propObjs[p].arr[0].widget._class.indexOf(\"layout_Surface\") !== -1 && p.toUpperCase().indexOf(\"COLOR\") !== -1)) {\r\n                    sectionObjs[\"fontSection\"].rowObjArr.push(propObjs[p]);\r\n                } else if (p === \"paletteID\") {\r\n                    sectionObjs[\"chartColorSection\"].rowObjArr.push(propObjs[p]);\r\n                } else if (propObjs[p].arr[0].widget._class.indexOf(\"layout_Surface\") !== -1) {\r\n                    sectionObjs[\"surfaceSection\"].rowObjArr.push(propObjs[p]);\r\n                }\r\n            } else {\r\n                if (propObjs[p].arr[0].widget._class.indexOf(\"layout_Surface\") === -1) {\r\n                    sectionObjs[\"nonSurfaceSection\"].rowObjArr.push(propObjs[p]);\r\n                }\r\n            }\r\n        }\r\n        let html = \"\";\r\n        for (const i in sectionObjs) {\r\n            html += this.sharedPropertyTableHtml(sectionObjs[i]);\r\n        }\r\n        targetElement.innerHTML += html;\r\n    }\r\n\r\n    initFunctionality(elm) {\r\n        const context = this;\r\n        _expandCollapse(elm);\r\n        _inputOnChange(elm);\r\n        _inputOnClick(elm);\r\n        function _inputOnClick(elm2) {\r\n            if (context.showSettings()) {\r\n                const saveBtn = document.getElementById(\"te-save-button\");\r\n                saveBtn.onclick = function (e) {\r\n                    const clickedElm: any = e.target;\r\n                    const themeName = clickedElm.previousSibling.value;\r\n                    if (themeName.length > 1) {\r\n                        const loadSelect = document.getElementById(\"te-load-theme\");\r\n                        const loadOptions = loadSelect.getElementsByTagName(\"option\");\r\n                        let saveExists = false;\r\n                        for (const i in loadOptions) {\r\n                            const val = loadOptions[i].value;\r\n                            if (val === themeName) {\r\n                                saveExists = true;\r\n                            }\r\n                        }\r\n                        if (!saveExists) {\r\n                            loadSelect.innerHTML += \"<option value='\" + themeName + \"'>\" + themeName + \"</option>\";\r\n                        }\r\n                        clickedElm.previousSibling.value = \"\";\r\n                        (loadSelect as any).value = themeName;\r\n                    } else {\r\n                        alert(\"Save Name cannot be empty.\");\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        function _inputOnChange(elm2) {\r\n            const teInputs = elm2.getElementsByClassName(\"te-input\");\r\n            for (const i in teInputs) {\r\n                if (isNaN(parseInt(i))) break;\r\n                const inputElm = teInputs[i];\r\n                const inputID = inputElm.getAttribute(\"id\");\r\n                if (inputID === \"te-load-theme\") {\r\n                    inputElm.onchange = function (e) {\r\n                        const elm3 = e.srcElement;\r\n                        context.load(elm3.value);\r\n                    };\r\n                } else if (inputID !== null && inputID.indexOf(\"te-input-themeMode\") !== -1) {\r\n                    inputElm.onchange = function (e) {\r\n                        const elm3 = e.srcElement;\r\n                        context.themeMode(elm3.checked);\r\n\r\n                        const name = document.getElementById(\"te-load-theme\");\r\n                        const nameToLoad = name !== null ? (name as any).value : \"Default\";\r\n                        context.load(nameToLoad);\r\n                    };\r\n                } else if (inputElm.tagName === \"INPUT\" || inputElm.tagName === \"SELECT\" || inputElm.tagName === \"TEXTAREA\") {\r\n                    inputElm.onchange = function (e) {\r\n                        const elm3 = e.srcElement;\r\n\r\n                        let id = elm3.getAttribute(\"id\");\r\n\r\n                        if (elm3.className.split(\" \").indexOf(\"te-html-color-button\") !== -1) {\r\n                            id = elm3.previousSibling.getAttribute(\"id\");\r\n                            elm3.previousSibling.value = elm3.value;\r\n                        }\r\n                        const elmType = elm3.getAttribute(\"type\");\r\n                        const splitId = id.split(\"-\");\r\n                        const genericId = splitId.slice(0, splitId.length - 1).join(\"-\") + \"-\";\r\n\r\n                        const widsStr = elm3.getAttribute(\"data-wids\");\r\n                        const paramId = elm3.getAttribute(\"data-paramid\");\r\n                        const widArr = widsStr.split(\",\");\r\n                        widArr.forEach(function (wid) {\r\n                            const individualId = genericId + wid;\r\n                            const indElm = document.getElementById(individualId);\r\n                            if (elmType === \"checkbox\") {\r\n                                (indElm as any).checked = elm3.checked;\r\n                                context._widgetObjsById[wid][paramId](elm3.checked);\r\n                            } else if (elm3.getAttribute(\"data-type\") === \"array\") {\r\n                                (indElm as any).value = elm3.value;\r\n                                try {\r\n                                    context._widgetObjsById[wid][paramId](JSON.parse(elm3.value));\r\n                                } catch (e) { }\r\n                            } else {\r\n                                (indElm as any).value = elm3.value;\r\n                                context._widgetObjsById[wid][paramId](elm3.value);\r\n\r\n                                if (indElm.className.split(\" \").indexOf(\"te-html-color-input\") !== -1) {\r\n                                    (indElm.nextSibling as any).value = elm3.value;\r\n                                } else if (indElm.className.split(\" \").indexOf(\"te-html-color-button\") !== -1) {\r\n                                    (indElm.previousSibling as any).value = elm3.value;\r\n                                }\r\n                            }\r\n                        });\r\n                        context.data().forEach(function (d) {\r\n                            d.render();\r\n                        });\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        function _expandCollapse(elm2) {\r\n            const tableArr = elm2.getElementsByClassName(\"te-section-table\");\r\n            for (const i in tableArr) {\r\n                if (typeof (tableArr[i].getElementsByTagName) === \"function\") {\r\n                    const thead = tableArr[i].getElementsByTagName(\"thead\");\r\n                    thead[0].onclick = function (e) {\r\n                        let elm3 = e.toElement;\r\n                        if (elm3.tagName === \"TH\") {\r\n                            elm3 = elm3.parentElement.parentElement;\r\n                        }\r\n                        const parent = elm3.parentElement;\r\n                        let tbodyClass = \"\";\r\n                        if (parent.className.split(\" \").indexOf(\"expanded\") === -1) {\r\n                            parent.className = \"te-section-table expanded\";\r\n                            tbodyClass = \"shown\";\r\n                        } else {\r\n                            parent.className = \"te-section-table collapsed\";\r\n                            tbodyClass = \"hidden\";\r\n                        }\r\n                        const tbody = parent.getElementsByTagName(\"tbody\");\r\n                        tbody[0].className = tbodyClass;\r\n                    };\r\n                }\r\n            }\r\n            const sharedRowArr = elm2.getElementsByClassName(\"sharedPropertyRow\");\r\n            for (const n in sharedRowArr) {\r\n                if (typeof (sharedRowArr[n].getElementsByClassName) === \"function\") {\r\n                    const label = sharedRowArr[n].getElementsByClassName(\"te-label\");\r\n                    label[0].onclick = function (e) {\r\n                        const elm3 = e.toElement;\r\n                        const parent = elm3.parentElement;\r\n                        let subRowClass = \"\";\r\n                        if (parent.className.split(\" \").indexOf(\"expanded\") === -1) {\r\n                            parent.className = \"sharedPropertyRow expanded\";\r\n                            subRowClass = \"shown\";\r\n                        } else {\r\n                            parent.className = \"sharedPropertyRow collapsed\";\r\n                            subRowClass = \"hidden\";\r\n                        }\r\n                        let nextSib = parent.nextSibling;\r\n                        while (nextSib !== null) {\r\n                            if (nextSib.className.split(\" \").indexOf(\"sharedPropertyRow\") === -1) {\r\n                                nextSib.className = \"propertyRow \" + subRowClass;\r\n                                nextSib = nextSib.nextSibling;\r\n                            } else {\r\n                                nextSib = null;\r\n                            }\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\r\n    sharedPropertyTableHtml(sectionObj) {\r\n        const tableObj = {\r\n            id: sectionObj.id,\r\n            label: sectionObj.label,\r\n            rowArr: []\r\n        };\r\n        sectionObj.rowObjArr.forEach(function (rowObj) {\r\n            rowObj.arr.forEach(function (widgetObj, widgetIdx) {\r\n                if (widgetIdx === 0) {\r\n                    tableObj.rowArr.push({\r\n                        th: _sharedPropertyLabel(rowObj),\r\n                        td: _sharedPropertyInput(rowObj),\r\n                        trClass: \"sharedPropertyRow collapsed\"\r\n                    });\r\n                }\r\n                tableObj.rowArr.push({\r\n                    th: _propertyLabel(widgetObj),\r\n                    td: _propertyInput(rowObj, widgetIdx),\r\n                    trClass: \"propertyRow hidden\"\r\n                });\r\n            });\r\n        });\r\n\r\n        return this.tableObjHtml(tableObj);\r\n\r\n        function _propertyLabel(widgetObj) {\r\n            const splitClass = widgetObj.widget.classID().split(\"_\");\r\n            const displayClass = splitClass.join(\"/\");\r\n            return displayClass + \" <i>[\" + widgetObj.widget._id + \"]</i>\";\r\n        }\r\n        function _sharedPropertyLabel(rowObj) {\r\n            return camelizeString(rowObj.id);\r\n        }\r\n\r\n        function _propertyInput(rowObj, idx) {\r\n            const value = _value(rowObj, idx);\r\n            const html = tableInputHtml(rowObj, value, [rowObj.arr[idx]], rowObj.arr[idx].widget._id);\r\n            return html;\r\n\r\n            function _value(rowObj2, idx2) {\r\n                const value2 = rowObj2.arr[idx2].widget[rowObj2.id]();\r\n                return value2 !== null ? value2 : \"\";\r\n            }\r\n        }\r\n        function _sharedPropertyInput(rowObj) {\r\n            const value = _sharedValue(rowObj);\r\n            const html = tableInputHtml(rowObj, value, rowObj.arr, \"shared\");\r\n            return html;\r\n\r\n            function _sharedValue(rowObj2) {\r\n                const value2 = rowObj2.arr[0].widget[rowObj2.id]();\r\n                rowObj2.arr.forEach(function (w, i) {\r\n                    if (value2 !== w.widget[w.id]()) {\r\n                        return \"\";\r\n                    }\r\n                });\r\n                if (value2 !== null) {\r\n                    if (rowObj2.type === \"array\") {\r\n                        return JSON.stringify(value2);\r\n                    }\r\n                    return value2;\r\n                }\r\n                return \"\";\r\n            }\r\n        }\r\n    }\r\n\r\n    tableObjHtml(tableObj) {\r\n        let html = \"<table id='\" + tableObj.id + \"' class='te-section-table expanded'>\";\r\n        html += \"<thead><tr><th colspan='2'>\" + tableObj.label + \"</th></tr></thead>\";\r\n        html += \"<tbody>\";\r\n        tableObj.rowArr.forEach(function (rowObj) {\r\n            html += this.tableRowObjHtml(rowObj);\r\n        }, this);\r\n        html += \"</tbody>\";\r\n        return html + \"</table>\";\r\n    }\r\n    tableRowObjHtml(rowObj) {\r\n        let html = typeof (rowObj.trClass) !== \"undefined\" ? \"<tr class='\" + rowObj.trClass + \"'>\" : \"<tr>\";\r\n        html += \"<th class='te-label'>\" + rowObj.th + \"</th>\";\r\n        html += \"<td>\" + rowObj.td + \"</td>\";\r\n        return html + \"</tr>\";\r\n    }\r\n\r\n    setWidgetObjsById(widgetProp) {\r\n        const context = this;\r\n        const val = widgetProp.widget[widgetProp.id]();\r\n        if (widgetProp.type === \"widgetArray\") {\r\n            val.forEach(function (widget) {\r\n                context._widgetObjsById[widget._id] = widget;\r\n            });\r\n        } else if (widgetProp.type === \"widget\" && val !== null) {\r\n            this._widgetObjsById[val._id] = val;\r\n        }\r\n    }\r\n    checkTagFilter(tagArr) {\r\n        const allowTags = [\"Basic\"];\r\n        let ret = false;\r\n        tagArr.forEach(function (tag) {\r\n            if (allowTags.indexOf(tag) !== -1) {\r\n                ret = true;\r\n            }\r\n        });\r\n        return ret;\r\n    }\r\n    findSharedProperties(data) {\r\n        const context = this;\r\n        let propsByID;\r\n        if (typeof (data) !== \"undefined\" && data.length > 0) {\r\n            let allProps = [];\r\n            propsByID = {};\r\n            const surfacePropsByID = {};\r\n            const nonSurfacePropsByID = {};\r\n            data.forEach(function (widget) {\r\n                const gpResponse = _getParams(widget, 0);\r\n                allProps = allProps.concat(gpResponse);\r\n            });\r\n            allProps.forEach(function (prop) {\r\n                if ([\"widget\", \"widgetArray\"].indexOf(prop.type) !== -1) {\r\n                    context.setWidgetObjsById(prop);\r\n                } else if (context.checkTagFilter(prop.ext.tags)) {\r\n                    const tempIdx = prop.id;\r\n                    if (prop.widget._class.indexOf(\"Surface\") !== -1) {\r\n                        if (typeof (surfacePropsByID[tempIdx]) === \"undefined\") {\r\n                            surfacePropsByID[tempIdx] = { arr: [] };\r\n                        }\r\n                        surfacePropsByID[tempIdx].id = prop.id;\r\n                        surfacePropsByID[tempIdx].description = prop.description;\r\n                        surfacePropsByID[tempIdx].type = prop.type;\r\n                        surfacePropsByID[tempIdx].set = prop.set;\r\n                        surfacePropsByID[tempIdx].ext = prop.ext;\r\n                        surfacePropsByID[tempIdx].arr.push(prop);\r\n                    } else {\r\n                        if (typeof (nonSurfacePropsByID[tempIdx]) === \"undefined\") {\r\n                            nonSurfacePropsByID[tempIdx] = { arr: [] };\r\n                        }\r\n                        nonSurfacePropsByID[tempIdx].id = prop.id;\r\n                        nonSurfacePropsByID[tempIdx].description = prop.description;\r\n                        nonSurfacePropsByID[tempIdx].type = prop.type;\r\n                        nonSurfacePropsByID[tempIdx].set = prop.set;\r\n                        nonSurfacePropsByID[tempIdx].ext = prop.ext;\r\n                        nonSurfacePropsByID[tempIdx].arr.push(prop);\r\n                    }\r\n                    if (typeof (propsByID[tempIdx]) === \"undefined\") {\r\n                        propsByID[tempIdx] = { arr: [] };\r\n                    }\r\n                    propsByID[tempIdx].id = prop.id;\r\n                    propsByID[tempIdx].description = prop.description;\r\n                    propsByID[tempIdx].type = prop.type;\r\n                    propsByID[tempIdx].set = prop.set;\r\n                    propsByID[tempIdx].ext = prop.ext;\r\n                    propsByID[tempIdx].arr.push(prop);\r\n                }\r\n            });\r\n        }\r\n        return propsByID;\r\n\r\n        function _getParams(widgetObj, depth) {\r\n            let retArr = [];\r\n            if (widgetObj !== null) {\r\n                const paramArr = Persist.discover(widgetObj);\r\n                paramArr.forEach(function (param, i1) {\r\n                    if (typeof (param.ext.tags) !== \"undefined\") {\r\n                        retArr.push({\r\n                            id: param.id,\r\n                            type: param.type,\r\n                            description: param.description,\r\n                            set: param.set,\r\n                            ext: param.ext,\r\n                            widget: widgetObj\r\n                        });\r\n                    }\r\n                    if (param.type === \"widgetArray\") {\r\n                        const childWidgetArray = context.widgetProperty(widgetObj, param.id);\r\n                        childWidgetArray.forEach(function (childWidget) {\r\n                            const cwArr = _getParams(childWidget, depth + 1);\r\n                            retArr = retArr.concat(cwArr);\r\n                        });\r\n                    } else if (param.type === \"widget\") {\r\n                        const childWidget = context.widgetProperty(widgetObj, param.id);\r\n                        const temp = _getParams(childWidget, depth + 1);\r\n                        retArr = retArr.concat(temp);\r\n                    }\r\n                });\r\n            }\r\n            return retArr;\r\n        }\r\n    }\r\n\r\n    themeMode: { (): boolean; (_: boolean): ThemeEditor };\r\n    themeMode_exists: () => boolean;\r\n    saveTheme: { (): string; (_: string): ThemeEditor };\r\n    saveTheme_exists: () => boolean;\r\n    loadedTheme: { (): string; (_: string): ThemeEditor };\r\n    loadedTheme_exists: () => boolean;\r\n    saveSerial: { (): string; (_: string): ThemeEditor };\r\n    saveSerial_exists: () => boolean;\r\n    loadedSerial: { (): string; (_: string): ThemeEditor };\r\n    loadedSerial_exists: () => boolean;\r\n    showColumns: { (): boolean; (_: boolean): ThemeEditor };\r\n    showColumns_exists: () => boolean;\r\n    showData: { (): boolean; (_: boolean): ThemeEditor };\r\n    showData_exists: () => boolean;\r\n    shareCountMin: { (): number; (_: number): ThemeEditor };\r\n    shareCountMin_exists: () => boolean;\r\n    paramGrouping: { (): string; (_: string): ThemeEditor };\r\n    paramGrouping_exists: () => boolean;\r\n    editorComplexity: { (): string; (_: string): ThemeEditor };\r\n    editorComplexity_exists: () => boolean;\r\n    sectionTitle: { (): string; (_: string): ThemeEditor };\r\n    sectionTitle_exists: () => boolean;\r\n    collapsibleSections: { (): boolean; (_: boolean): ThemeEditor };\r\n    collapsibleSections_exists: () => boolean;\r\n}\r\nThemeEditor.prototype._class += \" other_ThemeEditor\";\r\n\r\nThemeEditor.prototype.publish(\"themeMode\", true, \"boolean\", \"Edit default values\", null, { tags: [\"Basic\"] });\r\nThemeEditor.prototype.publish(\"saveTheme\", \"\", \"string\", \"Save Theme\", null, { tags: [\"Basic\", \"Theme\"], saveButton: \"Save\", saveButtonID: \"te-save-button\" });\r\nThemeEditor.prototype.publish(\"loadedTheme\", getThemeNames(1), \"set\", \"Loaded Theme\", getThemeNames(), { tags: [\"Basic\", \"Theme\"] });\r\nThemeEditor.prototype.publish(\"saveSerial\", \"\", \"string\", \"Save Serial\", null, { tags: [\"Basic\", \"Serial\"], saveButton: \"Save\", saveButtonID: \"te-save-button\" });\r\nThemeEditor.prototype.publish(\"loadedSerial\", getSerialNames(0), \"set\", \"Loaded Serial\", getSerialNames(), { tags: [\"Basic\", \"Serial\"] });\r\nThemeEditor.prototype.publish(\"showColumns\", true, \"boolean\", \"Show Columns\", null, { tags: [\"Intermediate\"] });\r\nThemeEditor.prototype.publish(\"showData\", true, \"boolean\", \"Show Data\", null, { tags: [\"Intermediate\"] });\r\nThemeEditor.prototype.publish(\"shareCountMin\", 1, \"number\", \"Share Count Min\", null, { tags: [\"Private\"] });\r\nThemeEditor.prototype.publish(\"paramGrouping\", \"By Param\", \"set\", \"Param Grouping\", [\"By Param\", \"By Widget\"], { tags: [\"Private\"] });\r\nThemeEditor.prototype.publish(\"editorComplexity\", \"Basic\", \"set\", \"Choose what publish properties to display within the editor.\", [\"Basic\", \"Intermediate\", \"Advanced\", \"Private\"], { tags: [\"Private\"] });\r\nThemeEditor.prototype.publish(\"sectionTitle\", \"\", \"string\", \"Section Title\", null, { tags: [\"Private\"] });\r\nThemeEditor.prototype.publish(\"collapsibleSections\", true, \"boolean\", \"Collapsible Sections\", null, { tags: [\"Intermediate\"] });\r\n\r\nThemeEditor.prototype.getThemes = getThemes;\r\nThemeEditor.prototype.getSerials = getSerials;\r\nThemeEditor.prototype.getDefaultThemes = getThemeNames;\r\nThemeEditor.prototype.getDefaultSerials = getSerialNames;\r\n","export const PKG_NAME = \"@hpcc-js/other\";\r\nexport const PKG_VERSION = \"2.13.2\";\r\nexport const BUILD_VERSION = \"2.10.1\";\r\n"]}