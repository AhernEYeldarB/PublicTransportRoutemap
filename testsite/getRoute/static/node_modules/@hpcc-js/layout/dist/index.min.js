!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@hpcc-js/common"),require("@hpcc-js/dgrid"),require("@hpcc-js/api")):"function"==typeof define&&define.amd?define(["exports","@hpcc-js/common","@hpcc-js/dgrid","@hpcc-js/api"],e):e((t=t||self)["@hpcc-js/layout"]={},t["@hpcc-js/common"],t["@hpcc-js/dgrid"],t["@hpcc-js/api"])}(this,function(t,e,n,i){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t,e,n,i){return new(n||(n=Promise))(function(r,o){function a(t){try{s(i.next(t))}catch(t){o(t)}}function l(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,l)}s((i=i.apply(t,e||[])).next())})}function l(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function s(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}s(".layout_AbsoluteSurface{pointer-events:none!important}.layout_AbsoluteSurface>.placeholder{position:relative;overflow:hidden;pointer-events:all}");var c=function(t){function e(){var e=t.call(this)||this;return e._tag="div",e}return o(e,t),e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n)},e.prototype.update=function(e,n){t.prototype.update.call(this,e,n);var i=0,r=0,o=this.clientWidth(),a=this.clientHeight();switch(this.units()){case"pixels":i=this.widgetX(),r=this.widgetY(),o=""===this.widgetWidth()?o-i:Number(this.widgetWidth()),a=""===this.widgetHeight()?a-r:Number(this.widgetHeight());break;case"percent":i=this.widgetX()*o/100,r=this.widgetY()*a/100,o=""===this.widgetWidth()?o-i:Number(this.widgetWidth())*o/100,a=""===this.widgetHeight()?a-r:Number(this.widgetHeight())*a/100}n.style("opacity",this.opacity());var l=n.selectAll("#"+this._id+" > .placeholder").data(this.widget()?[this.widget()]:[],function(t){return t._id});l.enter().append("div").attr("class","placeholder").each(function(t){t.target(this)}).merge(l).style("left",i+"px").style("top",r+"px").style("width",o+"px").style("bottom",a+"px").each(function(t){t.resize({width:o,height:a})}),l.exit().each(function(t){t.target(null)}).remove()},e.prototype.exit=function(e,n){this.widget()&&this.widget().target(null),t.prototype.exit.call(this,e,n)},e}(e.HTMLWidget);c.prototype._class+=" layout_AbsoluteSurface",c.prototype.publish("units","percent","set","Units",["pixels","percent"]),c.prototype.publish("widgetX",0,"number","Widget XPos"),c.prototype.publish("widgetY",0,"number","Widget YPos"),c.prototype.publish("widgetWidth","100","string","Widget Width, omit for full"),c.prototype.publish("widgetHeight","100","string","Widget Height, omit for full"),c.prototype.publish("widget",null,"widget","Widget",null,{tags:["Private"]}),c.prototype.publish("opacity",1,"number","Opacity");s(".layout_Accordion>ul{position:relative}.layout_Accordion.open>span{font-style:italic}.layout_Accordion.closed>ul{height:0;overflow:hidden}.layout_Accordion.open>ul{display:block}.layout_Accordion>.collapsible-icon,.layout_Accordion>.collapsible-title{cursor:pointer;box-sizing:border-box}.layout_Accordion>.collapsible-title{display:block;width:100%;font-size:13px;color:#fff;padding:4px 8px;height:26px;-webkit-box-shadow:inset 0 -1px 1px 0 rgba(0,0,0,.2);-moz-box-shadow:inset 0 -1px 1px 0 rgba(0,0,0,.2);box-shadow:inset 0 -1px 1px 0 rgba(0,0,0,.2)}.layout_Accordion li{background-color:#fff}.layout_Accordion>.collapsible-title,.layout_Accordion>ul{background-color:#333}.layout_Accordion .layout_Accordion>.collapsible-title,.layout_Accordion .layout_Accordion>ul{background-color:#555}.layout_Accordion .layout_Accordion .layout_Accordion>.collapsible-title,.layout_Accordion .layout_Accordion .layout_Accordion>ul{background-color:#777}.layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion>.collapsible-title,.layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion>ul{background-color:#999}.layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion>.collapsible-title,.layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion>ul{background-color:#bbb}.layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion>.collapsible-title,.layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion>ul{background-color:#ccc}.layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion>.collapsible-title,.layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion .layout_Accordion>ul{background-color:#ddd}.layout_Accordion>span,.layout_Accordion>ul{padding-left:0}.layout_Accordion .layout_Accordion>span,.layout_Accordion .layout_Accordion>ul{padding-left:12px}.layout_Accordion>.collapsible-title:before{padding:4px 8px;position:absolute;left:0;top:0}.layout_Accordion>.collapsible-icon{position:absolute;top:0;right:0;width:24px;height:24px;color:#fff}");var u=function(t){function n(){var e=t.call(this)||this;return e._tag="div",e._isClosed=!1,e}return o(n,t),n.prototype.pushListItem=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=this.content();return t._protected=n,e?i.unshift(t):i.push(t),this.content(i),this},n.prototype.clearListItems=function(){var t=[];for(var e in this.content())this.content()[e]._protected&&t.push(this.content()[e]);return this.content(t),this},n.prototype.collapseClick=function(t){t.classed("closed")?(this._isClosed=!1,t.classed("open",!0),t.classed("closed",!1)):(this._isClosed=!0,t.classed("open",!1),t.classed("closed",!0))},n.prototype.enter=function(n,i){t.prototype.enter.call(this,n,i);var r=this;this._isClosed=this.defaultCollapsed(),i.classed(this._isClosed?"closed":"open",!0),this.titleSpan=i.append("span").classed("collapsible-title",!0),this.iconDiv=i.append("div").classed("collapsible-icon",!0),this.ul=i.append("ul"),this.icon=(new e.FAChar).size({height:24,width:24}).target(this.iconDiv.node()),this.iconDiv.on("click",function(){r.collapseClick(i),r.render()}),this.titleSpan.on("click",function(){r.collapseClick(i),r.render()})},n.prototype.update=function(e,n){t.prototype.update.call(this,e,n);var i=this;this.titleSpan.text(i.title().length>0?i.title()+"":"Accordion ["+i._id+"]");var r=this.ul.selectAll("#"+i._id+" > ul > li").data(this.content(),function(t){return t._id});r.enter().append(function(t){var e=document.createElement("li");if(null!==t._target)return t._target;var n=t.size();if(0===n.width||0===n.height){var r=i.size();t.size({width:r.width,height:r.width})}return t.target(e),e}),r.exit().remove(),this.icon.text_colorFill(this.titleFontColor()).char(this._isClosed?this.closedIcon():this.openIcon()).render()},n.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},n}(e.HTMLWidget);u.prototype._class+=" layout_Accordion",u.prototype.publish("content",[],"widgetArray","Array of widgets",null,{tags:["Basic"]}),u.prototype.publish("title","","string","Title of collapsible section",null,{tags:["Private"]}),u.prototype.publish("openIcon","","string","Icon to display when list is open",null,{tags:["Private"]}),u.prototype.publish("closedIcon","","string","Icon to display when list is closed",null,{tags:["Private"]}),u.prototype.publish("titleFontColor","#FFFFFF","html-color","Title font color",null,{tags:["Private"]}),u.prototype.publish("titleBackgroundColor","#333333","html-color","Title background color",null,{tags:["Private"]}),u.prototype.publish("defaultCollapsed",!1,"boolean","Collapsed by default if true",null,{tags:["Private"]});var h={value:function(){}};function d(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new f(i)}function f(t){this._=t}function p(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function g(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=h,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}f.prototype=d.prototype={constructor:f,on:function(t,e){var n,i,r=this._,o=(i=r,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,l=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<l;)if(n=(t=o[a]).type)r[n]=g(r[n],t.name,e);else if(null==e)for(n in r)r[n]=g(r[n],t.name,null);return this}for(;++a<l;)if((n=(t=o[a]).type)&&(n=p(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new f(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};var y="http://www.w3.org/1999/xhtml",b={svg:"http://www.w3.org/2000/svg",xhtml:y,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),b.hasOwnProperty(e)?{space:b[e],local:t}:t}function v(t){var e=_(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===y&&e.documentElement.namespaceURI===y?e.createElement(t):e.createElementNS(n,t)}})(e)}function m(){}function w(t){return null==t?m:function(){return this.querySelector(t)}}function x(){return[]}function C(t){return null==t?x:function(){return this.querySelectorAll(t)}}function S(t){return function(){return this.matches(t)}}function T(t){return new Array(t.length)}function M(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}M.prototype={constructor:M,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var A="$";function B(t,e,n,i,r,o){for(var a,l=0,s=e.length,c=o.length;l<c;++l)(a=e[l])?(a.__data__=o[l],i[l]=a):n[l]=new M(t,o[l]);for(;l<s;++l)(a=e[l])&&(r[l]=a)}function P(t,e,n,i,r,o,a){var l,s,c,u={},h=e.length,d=o.length,f=new Array(h);for(l=0;l<h;++l)(s=e[l])&&(f[l]=c=A+a.call(s,s.__data__,l,e),c in u?r[l]=s:u[c]=s);for(l=0;l<d;++l)(s=u[c=A+a.call(t,o[l],l,o)])?(i[l]=s,s.__data__=o[l],u[c]=null):n[l]=new M(t,o[l]);for(l=0;l<h;++l)(s=e[l])&&u[f[l]]===s&&(r[l]=s)}function z(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function k(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function H(t,e){return t.style.getPropertyValue(e)||k(t).getComputedStyle(t,null).getPropertyValue(e)}function W(t){return t.trim().split(/^|\s+/)}function D(t){return t.classList||new I(t)}function I(t){this._node=t,this._names=W(t.getAttribute("class")||"")}function F(t,e){for(var n=D(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function L(t,e){for(var n=D(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function E(){this.textContent=""}function N(){this.innerHTML=""}function O(){this.nextSibling&&this.parentNode.appendChild(this)}function R(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function U(){return null}function G(){var t=this.parentNode;t&&t.removeChild(this)}function Y(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function j(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}I.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var V={},X=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(V={mouseenter:"mouseover",mouseleave:"mouseout"}));function q(t,e,n){return t=$(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function $(t,e,n){return function(i){var r=X;X=i;try{t.call(this,this.__data__,e,n)}finally{X=r}}}function Z(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function Q(t,e,n){var i=V.hasOwnProperty(t.type)?q:$;return function(r,o,a){var l,s=this.__on,c=i(e,o,a);if(s)for(var u=0,h=s.length;u<h;++u)if((l=s[u]).type===t.type&&l.name===t.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),void(l.value=e);this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(l):this.__on=[l]}}function J(t,e,n,i){var r=X;t.sourceEvent=X,X=t;try{return e.apply(n,i)}finally{X=r}}function K(t,e,n){var i=k(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}var tt=[null];function et(t,e){this._groups=t,this._parents=e}function nt(){return new et([[document.documentElement]],tt)}function it(t){return"string"==typeof t?new et([[document.querySelector(t)]],[document.documentElement]):new et([[t]],tt)}function rt(){for(var t,e=X;t=e.sourceEvent;)e=t;return e}function ot(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(t.getScreenCTM().inverse())).x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function at(t){var e=rt();return e.changedTouches&&(e=e.changedTouches[0]),ot(t,e)}function lt(t){return"string"==typeof t?new et([document.querySelectorAll(t)],[document.documentElement]):new et([null==t?[]:t],tt)}function st(t,e,n){arguments.length<3&&(n=e,e=rt().changedTouches);for(var i,r=0,o=e?e.length:0;r<o;++r)if((i=e[r]).identifier===n)return ot(t,i);return null}function ct(){X.stopImmediatePropagation()}function ut(){X.preventDefault(),X.stopImmediatePropagation()}function ht(t){return function(){return t}}function dt(t,e,n,i,r,o,a,l,s,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=o,this.y=a,this.dx=l,this.dy=s,this._=c}function ft(){return!X.button}function pt(){return this.parentNode}function gt(t){return null==t?{x:X.x,y:X.y}:t}function yt(){return"ontouchstart"in this}function bt(){var t,e,n,i,r=ft,o=pt,a=gt,l=yt,s={},c=d("start","drag","end"),u=0,h=0;function f(t){t.on("mousedown.drag",p).filter(l).on("touchstart.drag",b).on("touchmove.drag",_).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!i&&r.apply(this,arguments)){var a=m("mouse",o.apply(this,arguments),at,this,arguments);a&&(it(X.view).on("mousemove.drag",g,!0).on("mouseup.drag",y,!0),function(t){var e=t.document.documentElement,n=it(t).on("dragstart.drag",ut,!0);"onselectstart"in e?n.on("selectstart.drag",ut,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(X.view),ct(),n=!1,t=X.clientX,e=X.clientY,a("start"))}}function g(){if(ut(),!n){var i=X.clientX-t,r=X.clientY-e;n=i*i+r*r>h}s.mouse("drag")}function y(){it(X.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,i=it(t).on("dragstart.drag",null);e&&(i.on("click.drag",ut,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(X.view,n),ut(),s.mouse("end")}function b(){if(r.apply(this,arguments)){var t,e,n=X.changedTouches,i=o.apply(this,arguments),a=n.length;for(t=0;t<a;++t)(e=m(n[t].identifier,i,st,this,arguments))&&(ct(),e("start"))}}function _(){var t,e,n=X.changedTouches,i=n.length;for(t=0;t<i;++t)(e=s[n[t].identifier])&&(ut(),e("drag"))}function v(){var t,e,n=X.changedTouches,r=n.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),t=0;t<r;++t)(e=s[n[t].identifier])&&(ct(),e("end"))}function m(t,e,n,i,r){var o,l,h,d=n(e,t),p=c.copy();if(J(new dt(f,"beforestart",o,t,u,d[0],d[1],0,0,p),function(){return null!=(X.subject=o=a.apply(i,r))&&(l=o.x-d[0]||0,h=o.y-d[1]||0,!0)}))return function a(c){var g,y=d;switch(c){case"start":s[t]=a,g=u++;break;case"end":delete s[t],--u;case"drag":d=n(e,t),g=u}J(new dt(f,c,o,t,g,d[0]+l,d[1]+h,d[0]-y[0],d[1]-y[1],p),p.apply,p,[c,i,r])}}return f.filter=function(t){return arguments.length?(r="function"==typeof t?t:ht(!!t),f):r},f.container=function(t){return arguments.length?(o="function"==typeof t?t:ht(t),f):o},f.subject=function(t){return arguments.length?(a="function"==typeof t?t:ht(t),f):a},f.touchable=function(t){return arguments.length?(l="function"==typeof t?t:ht(!!t),f):l},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,f):Math.sqrt(h)},f}et.prototype=nt.prototype={constructor:et,select:function(t){"function"!=typeof t&&(t=w(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a,l=e[r],s=l.length,c=i[r]=new Array(s),u=0;u<s;++u)(o=l[u])&&(a=t.call(o,o.__data__,u,l))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new et(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=C(t));for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a,l=e[o],s=l.length,c=0;c<s;++c)(a=l[c])&&(i.push(t.call(a,a.__data__,c,l)),r.push(a));return new et(i,r)},filter:function(t){"function"!=typeof t&&(t=S(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],l=a.length,s=i[r]=[],c=0;c<l;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new et(i,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),u=-1,this.each(function(t){p[++u]=t}),p;var n,i=e?P:B,r=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,l=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var h=r[u],d=o[u],f=d.length,p=t.call(h,h&&h.__data__,u,r),g=p.length,y=s[u]=new Array(g),b=l[u]=new Array(g);i(h,d,y,b,c[u]=new Array(f),p,e);for(var _,v,m=0,w=0;m<g;++m)if(_=y[m]){for(m>=w&&(w=m+1);!(v=b[w])&&++w<g;);_._next=v||null}}return(l=new et(l,r))._enter=s,l._exit=c,l},enter:function(){return new et(this._enter||this._groups.map(T),this._parents)},exit:function(){return new et(this._exit||this._groups.map(T),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),l=0;l<o;++l)for(var s,c=e[l],u=n[l],h=c.length,d=a[l]=new Array(h),f=0;f<h;++f)(s=c[f]||u[f])&&(d[f]=s);for(;l<i;++l)a[l]=e[l];return new et(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=z);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a,l=n[o],s=l.length,c=r[o]=new Array(s),u=0;u<s;++u)(a=l[u])&&(c[u]=a);c.sort(e)}return new et(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,l=o.length;a<l;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,e){var n=_(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):H(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=W(t+"");if(arguments.length<2){for(var i=D(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?F:L)(this,t)}}:e?function(t){return function(){F(this,t)}}:function(t){return function(){L(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?E:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?N:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(O)},lower:function(){return this.each(R)},append:function(t){var e="function"==typeof t?t:v(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:v(t),i=null==e?U:"function"==typeof e?e:w(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(G)},clone:function(t){return this.select(t?j:Y)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(l=e?Q:Z,null==n&&(n=!1),i=0;i<a;++i)this.each(l(o[i],e,n));return this}var l=this.node().__on;if(l)for(var s,c=0,u=l.length;c<u;++c)for(i=0,s=l[c];i<a;++i)if((r=o[i]).type===s.type&&r.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return K(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return K(this,t,e)}})(t,e))}},dt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};s('.layout_Surface{box-sizing:border-box;margin:0;border:1px solid #e5e5e5;overflow:hidden;height:100%;width:100%}.layout_Surface.shadow2{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.layout_Surface>h3{margin:0;padding:2px;background-color:#e5e5e5}.layout_Surface .html-button-container{position:absolute;right:0;top:3px}.layout_Surface>div{padding:8px}.layout_Surface .html-button-container .surface-button{margin-right:5px}.layout_Surface .html-button-container .surface-button i{opacity:.8}.layout_Surface .html-button-container .surface-button:hover{opacity:1}.layout_Surface .html-button-container .surface-button:active{opacity:.5}div[draggable=true].hideDragCellContent.content-icon:before{content:"\\f080";font-family:FontAwesome;position:absolute;top:calc(50% - 74px);left:calc(50% - 56px);font-size:100px}div[draggable=true].hideDragCellContent.content-icon-Line:before{content:"\\f201"}div[draggable=true].hideDragCellContent.content-icon-Pie:before{top:calc(50% - 72px);left:calc(50% - 45px);content:"\\f200"}div[draggable=true].hideDragCellContent.content-icon-Area:before{content:"\\f1fe"}div[draggable=true].hideDragCellContent.content-icon-Gauge:before{content:"\\f0e4"}div[draggable=true].hideDragCellContent.content-icon-Table:before{content:"\\f0ce"}div[draggable=true].hideDragCellContent.content-icon-Form:before{content:"\\f11c"}div[draggable=true].hideDragCellContent.content-icon-Accordion:before,div[draggable=true].hideDragCellContent.content-icon-Border:before,div[draggable=true].hideDragCellContent.content-icon-Graph:before,div[draggable=true].hideDragCellContent.content-icon-Grid:before,div[draggable=true].hideDragCellContent.content-icon-MultiChart:before,div[draggable=true].hideDragCellContent.content-icon-MultiChartSurface:before,div[draggable=true].hideDragCellContent.content-icon-Tabbed:before{content:"\\f247"}div[draggable=true].hideDragCellContent.content-icon-ChoroplethCounties:before,div[draggable=true].hideDragCellContent.content-icon-ChoroplethCountries:before,div[draggable=true].hideDragCellContent.content-icon-ChoroplethStates:before,div[draggable=true].hideDragCellContent.content-icon-ChoroplethStatesHeat:before,div[draggable=true].hideDragCellContent.content-icon-FAChar:before,div[draggable=true].hideDragCellContent.content-icon-GMap:before,div[draggable=true].hideDragCellContent.content-icon-GMapGraph:before,div[draggable=true].hideDragCellContent.content-icon-GMapHeat:before,div[draggable=true].hideDragCellContent.content-icon-Text:before,div[draggable=true].hideDragCellContent.content-icon-TextBox:before{content:"\\f278"}');var _t=function(t){function e(){var e=t.call(this)||this;return e._tag="div",e._surfaceButtons=[],e}return o(e,t),e.prototype.widgetSize=function(t,e){var n=this.clientWidth(),i=this.clientHeight();return this.title()&&(i-=this.calcHeight(t)),i-=this.calcFrameHeight(e),{width:n-=this.calcFrameWidth(e),height:i}},e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n)},e.prototype.update=function(e,n){t.prototype.update.call(this,e,n);var i=this;n.classed("shadow2",this.surfaceShadow()).style("border-width",this.surfaceBorderWidth_exists()?this.surfaceBorderWidth()+"px":null).style("border-color",this.surfaceBorderColor()).style("border-radius",this.surfaceBorderRadius_exists()?this.surfaceBorderRadius()+"px":null).style("background-color",this.surfaceBackgroundColor());var r=n.selectAll(".surfaceTitle").data(this.title()?[this.title()]:[]);r.enter().insert("h3","div").attr("class","surfaceTitle").merge(r).text(function(t){return t}).style("text-align",this.surfaceTitleAlignment()).style("color",this.surfaceTitleFontColor()).style("font-size",this.surfaceTitleFontSize_exists()?this.surfaceTitleFontSize()+"px":null).style("font-family",this.surfaceTitleFontFamily()).style("font-weight",this.surfaceTitleFontBold()?"bold":"normal").style("background-color",this.surfaceTitleBackgroundColor()).style("padding",this.surfaceTitlePadding_exists()?this.surfaceTitlePadding()+"px":null).style("title",this.altText_exists()?this.altText():null),r.exit().remove();var o=n.select(".surfaceTitle").append("div").attr("class","html-button-container").selectAll(".surface-button").data(this.buttonAnnotations());o.enter().append("button").classed("surface-button",!0).each(function(t,e){var n=i._surfaceButtons[e]=it(this).attr("class","surface-button"+(t.class?" "+t.class:"")).attr("id",t.id).style("padding",t.padding).style("width",t.width).style("height",t.height).style("cursor","pointer");"FontAwesome"===t.font?n.style("background","transparent").style("border","none").on("click",function(t){i.click(t)}).append("i").attr("class","fa").text(function(){return t.label}):n.text(function(){return t.label}).on("click",function(t){i.click(t)})}),o.exit().each(function(t,e){var n=it(this);delete i._surfaceButtons[e],n.remove()});var a=n.selectAll("#"+this._id+" > .surfaceWidget").data(this.widget()?[this.widget()]:[],function(t){return t._id});a.enter().append("div").attr("class","surfaceWidget").each(function(t){it(i.element().node().parentElement).classed("content-icon content-icon-"+t.classID().split("_")[1],!0),t.target(this)}).merge(a).style("padding",this.surfacePadding_exists()?this.surfacePadding()+"px":null).each(function(t){var e=i.widgetSize(n.select("h3"),it(this));e.width<0&&(e.width=0),e.height<0&&(e.height=0),t.resize({width:e.width,height:e.height})}),a.exit().each(function(t){t.target(null)}).remove()},e.prototype.exit=function(e,n){this.widget()&&this.widget().target(null),t.prototype.exit.call(this,e,n)},e.prototype.click=function(t){console.log("Clicked: "+t.id)},e}(e.HTMLWidget);_t.prototype._class+=" layout_Surface",_t.prototype.publish("title","","string","Title",null,{tags:["Intermediate"]}),_t.prototype.publish("altText",null,"string","Alt text",null,{optional:!0}),_t.prototype.publish("surfaceTitlePadding",null,"number","Title Padding (px)",null,{tags:["Advanced"],disable:function(t){return!t.title()}}),_t.prototype.publish("surfaceTitleFontSize",null,"number","Title Font Size (px)",null,{tags:["Advanced"],disable:function(t){return!t.title()}}),_t.prototype.publish("surfaceTitleFontColor",null,"html-color","Title Font Color",null,{tags:["Advanced"],disable:function(t){return!t.title()}}),_t.prototype.publish("surfaceTitleFontFamily",null,"string","Title Font Family",null,{tags:["Advanced"],disable:function(t){return!t.title()}}),_t.prototype.publish("surfaceTitleFontBold",!0,"boolean","Enable Bold Title Font",null,{tags:["Advanced"],disable:function(t){return!t.title()}}),_t.prototype.publish("surfaceTitleBackgroundColor",null,"html-color","Title Background Color",null,{tags:["Advanced"],disable:function(t){return!t.title()}}),_t.prototype.publish("surfaceTitleAlignment","center","set","Title Alignment",["left","right","center"],{tags:["Basic"],disable:function(t){return!t.title()}}),_t.prototype.publish("surfaceShadow",!1,"boolean","3D Shadow"),_t.prototype.publish("surfacePadding",null,"string","Surface Padding (px)",null,{tags:["Intermediate"]}),_t.prototype.publish("surfaceBackgroundColor",null,"html-color","Surface Background Color",null,{tags:["Advanced"]}),_t.prototype.publish("surfaceBorderWidth",null,"number","Surface Border Width (px)",null,{tags:["Advanced"]}),_t.prototype.publish("surfaceBorderColor",null,"html-color","Surface Border Color",null,{tags:["Advanced"]}),_t.prototype.publish("surfaceBorderRadius",null,"number","Surface Border Radius (px)",null,{tags:["Advanced"]}),_t.prototype.publish("buttonAnnotations",[],"array","Button Array",null,{tags:["Private"]}),_t.prototype.publish("widget",null,"widget","Widget",null,{tags:["Basic"]});s(".layout_Cell .update-indicator{box-sizing:border-box;position:absolute;top:0;left:0;padding:0;z-index:1000;border-width:0;border-style:solid;pointer-events:none}");var vt=function(t){function e(){var e=t.call(this)||this;return e._indicateTheseIds=[],e}return o(e,t),e.prototype.indicateTheseIds=function(t){return arguments.length?(this._indicateTheseIds=t,this):this._indicateTheseIds},e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n);var i=this;n.classed("layout_Surface",!0).on("mouseenter",function(){i.onMouseEnter()}).on("mouseleave",function(){i.onMouseLeave()})},e.prototype.update=function(e,n){t.prototype.update.call(this,e,n)},e.prototype.onMouseEnter=function(){for(var t=this.indicateTheseIds(),e=this.indicatorOpacity(),n=this.indicatorBorderColor(),i=this.indicatorGlowColor(),r=0;r<t.length;r++){var o=it("#"+t[r]),a=o.datum();o&&a&&o.append("div").attr("class","update-indicator").style("width",a.width()+"px").style("height",a.height()+"px").style("opacity",e).style("border-color",n).style("-webkit-box-shadow","inset 0px 0px 30px 0px "+i).style("-moz-box-shadow","inset 0px 0px 30px 0px "+i).style("box-shadow","inset 0px 0px 30px 0px "+i)}},e.prototype.onMouseLeave=function(){for(var t=this.indicateTheseIds(),e=0;e<t.length;e++)lt("#"+t[e]+" > div.update-indicator").remove()},e}(_t);vt.prototype._class+=" layout_Cell",vt.prototype.publish("gridRow",0,"number","Grid Row Position",null,{tags:["Private"]}),vt.prototype.publish("gridCol",0,"number","Grid Column Position",null,{tags:["Private"]}),vt.prototype.publish("gridRowSpan",1,"number","Grid Row Span",null,{tags:["Private"]}),vt.prototype.publish("gridColSpan",1,"number","Grid Column Span",null,{tags:["Private"]}),vt.prototype.publish("indicatorGlowColor","#EEEE11","html-color","Glow color of update-indicator",null,{tags:["Basic"]}),vt.prototype.publish("indicatorBorderColor","#F48A00","html-color","Border color of update-indicator",null,{tags:["Basic"]}),vt.prototype.publish("indicatorOpacity",.8,"number","Opacity of update-indicator",null,{tags:["Basic"]});s(".layout_Border{width:100%;height:100%}.layout_Border>.border-content{width:100%;height:100%;position:relative}.layout_Border>.borderHandle{width:6px;height:6px;background-color:#444;opacity:.3;position:absolute;visibility:hidden}.layout_Border.design-mode>.borderHandle{visibility:visible}.layout_Border>.borderHandle:hover{background-color:#666}.layout_Border>.borderHandle.borderHandleDisabled{display:none}.layout_Border>.borderHandle_bottom,.layout_Border>.borderHandle_top{cursor:ns-resize}.layout_Border>.borderHandle_left,.layout_Border>.borderHandle_right{cursor:ew-resize}.layout_Border .cell{border-radius:5px;border:1px solid #e5e5e5;display:inline-block;overflow:hidden}.layout_Border .cell h2{margin:0;padding-top:4px;-webkit-margin:0;text-align:center}.layout_Border .layout_BorderCell.over{border:2px dashed #000}.layout_Border .dragItem{z-index:-1;opacity:.33}.layout_Border .notDragItem{z-index:-1;opacity:1}.layout_Border div[draggable=true]{opacity:.75;cursor:default}.layout_Border div[draggable=true] .dragHandle{opacity:1}.layout_Border div[draggable=true] .dragHandle_e,.layout_Border div[draggable=true] .dragHandle_n,.layout_Border div[draggable=true] .dragHandle_s,.layout_Border div[draggable=true] .dragHandle_w{background-color:#aaa}.layout_Border div[draggable=true] .dragHandle_ne,.layout_Border div[draggable=true] .dragHandle_nw,.layout_Border div[draggable=true] .dragHandle_se,.layout_Border div[draggable=true] .dragHandle_sw{background-color:#333}.layout_Border div[draggable=true] .dragHandle_nw{cursor:nw-resize}.layout_Border div[draggable=true] .dragHandle_n{cursor:n-resize}.layout_Border div[draggable=true] .dragHandle_ne{cursor:ne-resize}.layout_Border div[draggable=true] .dragHandle_e{cursor:e-resize}.layout_Border div[draggable=true] .dragHandle_se{cursor:se-resize}.layout_Border div[draggable=true] .dragHandle_s{cursor:s-resize}.layout_Border div[draggable=true] .dragHandle_sw{cursor:sw-resize}.layout_Border div[draggable=true] .dragHandle_w{cursor:w-resize}.layout_Border div[draggable=false]>div>.dragHandle{display:none}.layout_Border .grid-drop-target{position:fixed;box-sizing:border-box;border:2px dashed #7f8c8d;border-radius:0;background:repeating-linear-gradient(-45deg,transparent,transparent 4px,hsla(0,0%,39.2%,.1) 0,hsla(0,0%,39.2%,.1) 8px)}.layout_Border .grid-drop-target.drop-target-over{border:2px dashed #179bd7;background:repeating-linear-gradient(-45deg,transparent,transparent 6px,rgba(17,155,215,.1) 0,rgba(17,155,215,.1) 12px)}");var mt=function(t){function n(){var n=t.call(this)||this;return n.lazyPostUpdate=e.Utility.debounce(function(){this.postUpdate()},100),n._tag="div",n._colCount=0,n._rowCount=0,n._colSize=0,n._rowSize=0,n._shrinkWrapBoxes={},n.content([]),n.sectionTypes([]),n}return o(n,t),n.prototype.watchWidget=function(t){if(void 0===this._watch&&(this._watch={}),this._watch[t.id()]&&(this._watch[t.id()].remove(),delete this._watch[t.id()]),t){var e=this;this._watch[t.id()]=t.monitor(function(t,n,i){i!==n&&e.lazyPostUpdate()})}},n.prototype.applyLayoutType=function(){var t=this.borderLayoutObject();this.content().forEach(function(e,n){e._fixedLeft=t[this.sectionTypes()[n]].left,e._fixedTop=t[this.sectionTypes()[n]].top,e._fixedWidth=t[this.sectionTypes()[n]].width,e._fixedHeight=t[this.sectionTypes()[n]].height,e._dragHandles=this.cellSpecificDragHandles(this.sectionTypes()[n])},this)},n.prototype.cellSpecificDragHandles=function(t){switch(t){case"top":return["s"];case"right":return["w"];case"bottom":return["n"];case"left":return["e"];case"center":return[]}},n.prototype.borderLayoutObject=function(t){var e,n,i,r,o,a,l,s,c,u,h,d,f,p={},g=this,y=this.target().getBoundingClientRect(),b={};return b.top=y.top,b.left=y.left,b.bottom=y.bottom,b.right=y.right,this.target()instanceof SVGElement?(b.width=parseFloat(this.target().getAttribute("width")),b.height=parseFloat(this.target().getAttribute("height"))):(b.width=y.width,b.height=y.height),-1!==this.sectionTypes().indexOf("top")&&(a=this.topSize(),l=this.topPercentage(),void 0!==this._shrinkWrapBoxes.top&&(a=this._shrinkWrapBoxes.top.height+this.gutter(),l=0)),-1!==this.sectionTypes().indexOf("bottom")&&(s=this.bottomSize(),c=this.bottomPercentage(),void 0!==this._shrinkWrapBoxes.bottom&&(s=this._shrinkWrapBoxes.bottom.height+this.gutter(),c=0)),-1!==this.sectionTypes().indexOf("left")&&(u=this.leftSize(),h=this.leftPercentage(),void 0!==this._shrinkWrapBoxes.left&&(u=this._shrinkWrapBoxes.left.width+this.gutter(),h=0)),-1!==this.sectionTypes().indexOf("right")&&(d=this.rightSize(),f=this.rightPercentage(),void 0!==this._shrinkWrapBoxes.right&&(d=this._shrinkWrapBoxes.right.width+this.gutter(),f=0)),e=_({width:{px:0,"%":100},height:{px:a,"%":l},top:{px:0,"%":0},left:{px:0,"%":0}}),(n=_({width:{px:0,"%":100},height:{px:s,"%":c},top:{px:0,"%":100},left:{px:0,"%":0}})).top-=n.height,r=_({width:{px:u,"%":h},height:{px:-e.height-n.height,"%":100},top:{px:e.height,"%":0},left:{px:0,"%":0}}),(i=_({width:{px:d,"%":f},height:{px:-e.height-n.height,"%":100},top:{px:e.height,"%":0},left:{px:0,"%":100}})).left-=i.width,o=_({width:{px:-i.width-r.width,"%":100},height:{px:-e.height-n.height,"%":100},top:{px:e.height,"%":0},left:{px:r.width,"%":0}}),p.top=e,p.bottom=n,p.right=i,p.left=r,p.center=o,p;function _(t){return t.width.px=void 0!==t.width.px?t.width.px:0,t.width["%"]=void 0!==t.width["%"]?t.width["%"]:0,t.height.px=void 0!==t.height.px?t.height.px:0,t.height["%"]=void 0!==t.height["%"]?t.height["%"]:0,{width:t.width.px+t.width["%"]/100*g.width(),height:t.height.px+t.height["%"]/100*g.height(),top:t.top.px+t.top["%"]/100*g.height()+g.gutter()/2,left:t.left.px+t.left["%"]/100*g.width()+g.gutter()/2}}},n.prototype.clearContent=function(t){if(t){var e=this.sectionTypes().indexOf(t);e>=0&&(this._watch&&this.content()[e]&&delete this._watch[this.content()[e].id()],this.content()[e].target(null),it("#"+this.id()+" > div.borderHandle_"+t).classed("borderHandleDisabled",!0),this.content().splice(e,1),this.sectionTypes().splice(e,1))}else this.content().forEach(function(t){return t.target(null),!1}),it("#"+this.id()+" > div.borderHandle").classed("borderHandleDisabled",!0),delete this._watch,this.content([]),this.sectionTypes([])},n.prototype.hasContent=function(t,e,n){return this.sectionTypes().indexOf(t)>=0},n.prototype.setContent=function(t,e,n){if(this.clearContent(t),n=void 0!==n?n:"",e){var i=(new vt).surfaceBorderWidth(0).widget(e).title(n);this.watchWidget(e),this.content().push(i),this.sectionTypes().push(t)}return this},n.prototype.getCell=function(t){var e=this.sectionTypes().indexOf(t);return e>=0?this.content()[e]:null},n.prototype.getContent=function(t){var e=this.sectionTypes().indexOf(t);return e>=0?this.content()[e].widget():null},n.prototype.setLayoutOffsets=function(){this._offsetX=this._element.node().getBoundingClientRect().left+this.gutter()/2,this._offsetY=this._element.node().getBoundingClientRect().top+this.gutter()/2},n.prototype.dragStart=function(t){X.sourceEvent.stopPropagation();this._dragCell=t,this._dragCellStartSize=this[t+"Size"](),this[t+"ShrinkWrap"]()&&(this[t+"Percentage"](0),this[t+"ShrinkWrap"](!1));var e=it("#"+this.id()+" > div.borderHandle_"+t);this._handleTop=parseFloat(e.style("top").split("px")[0]),this._handleLeft=parseFloat(e.style("left").split("px")[0]),this._dragPrevX=X.sourceEvent.clientX,this._dragPrevY=X.sourceEvent.clientY},n.prototype.dragTick=function(t){var e=this,n=this._dragPrevX-X.sourceEvent.clientX,i=this._dragPrevY-X.sourceEvent.clientY;switch(t){case"top":case"bottom":r(t,i);break;case"right":case"left":r(t,n)}function r(t,n){if(0!==n){var i=lt("#"+e.id()+" > div.borderHandle"),r=it("#"+e.id()+" > div.borderHandle_"+t);r.classed("borderHandle_top")?(r.style("top",e._handleTop-n+"px"),e._cellSizes.topHeight=e._handleTop-n,e._cellSizes.leftHeight=e._cellSizes.height,e._cellSizes.leftHeight-=e._cellSizes.topHeight,e._cellSizes.leftHeight-=e._cellSizes.bottomHeight,e._cellSizes.rightHeight=e._cellSizes.leftHeight):r.classed("borderHandle_right")?(r.style("left",e._handleLeft-n+"px"),e._cellSizes.rightWidth=e._cellSizes.width-e._handleLeft+n):r.classed("borderHandle_bottom")?(r.style("top",e._handleTop-n+"px"),e._cellSizes.bottomHeight=e._cellSizes.height-e._handleTop+n,e._cellSizes.leftHeight=e._cellSizes.height,e._cellSizes.leftHeight-=e._cellSizes.bottomHeight,e._cellSizes.leftHeight-=e._cellSizes.topHeight,e._cellSizes.rightHeight=e._cellSizes.leftHeight):r.classed("borderHandle_left")&&(r.style("left",e._handleLeft-n+"px"),e._cellSizes.leftWidth=e._handleLeft-n),i.each(function(){var t=it(this);t.classed("borderHandle_top")?(t.style("width",e._cellSizes.width+"px"),t.style("top",e._cellSizes.topHeight-3+"px")):t.classed("borderHandle_right")?(t.style("left",e._cellSizes.width-e._cellSizes.rightWidth+"px"),t.style("top",e._cellSizes.topHeight+3+"px"),t.style("height",e._cellSizes.rightHeight+"px")):t.classed("borderHandle_bottom")?(t.style("width",e._cellSizes.width+"px"),t.style("top",e._cellSizes.height-e._cellSizes.bottomHeight-3+"px")):t.classed("borderHandle_left")&&(t.style("left",e._cellSizes.leftWidth+"px"),t.style("height",e._cellSizes.leftHeight+"px"),t.style("top",e._cellSizes.topHeight+3+"px"))})}}},n.prototype.dragEnd=function(t){if(t){var e=this._dragPrevX-X.sourceEvent.clientX,n=this._dragPrevY-X.sourceEvent.clientY;switch(t){case"top":0!==n&&(this.topPercentage(0),this.topSize(0===this.topSize()?this.getContent("top").getBBox().height-n:this.topSize()-n));break;case"right":0!==e&&(this.rightPercentage(0),this.rightSize(0===this.rightSize()?this.getContent("right").getBBox().width+e:this.rightSize()+e));break;case"bottom":0!==n&&(this.bottomPercentage(0),this.bottomSize(0===this.bottomSize()?this.getContent("bottom").getBBox().height+n:this.bottomSize()+n));break;case"left":0!==e&&(this.leftPercentage(0),this.leftSize(0===this.leftSize()?this.getContent("left").getBBox().width-e:this.leftSize()-e))}this._dragPrevX=X.sourceEvent.clientX,this._dragPrevY=X.sourceEvent.clientY}this.render()},n.prototype.size=function(t){var n=e.HTMLWidget.prototype.size.apply(this,arguments);return arguments.length&&this.contentDiv&&this.contentDiv.style("width",this._size.width+"px").style("height",this._size.height+"px"),n},n.prototype.enter=function(n,i){t.prototype.enter.call(this,n,i);var r=this;i.style("position","relative"),this.contentDiv=i.append("div").classed("border-content",!0),this._scrollBarWidth=e.Platform.getScrollbarWidth(),this._borderHandles=["top","left","right","bottom"],i.selectAll("div.borderHandle").data(this._borderHandles).enter().append("div").classed("borderHandle",!0).each(function(t){it(this).classed("borderHandle_"+t,!0).classed("borderHandleDisabled",null===r.getContent(t))})},n.prototype.update=function(e,n){t.prototype.update.call(this,e,n),this._sectionTypeArr=this.sectionTypes();var i=this;n.classed("design-mode",this.designMode()),this.setLayoutOffsets();var r=this.contentDiv.selectAll(".cell_"+this._id).data(this.content(),function(t){return t._id}),o=r.enter().append("div").classed("cell_"+this._id,!0).style("position","absolute").each(function(t,e){it(this).classed("border-cell border-cell-"+i._sectionTypeArr[e],!0),t.target(this),it("#"+i.id()+" > div.borderHandle_"+i._sectionTypeArr[e]).classed("borderHandleDisabled",!1)}).merge(r);o.each(function(t,e){var n=i.sectionTypes()[e];void 0!==i[n+"ShrinkWrap"]&&i[n+"ShrinkWrap"]()?(t.render(),i._shrinkWrapBoxes[n]=t.widget().getBBox(!0)):delete i._shrinkWrapBoxes[n]});var a=bt().on("start",function(t,e){i.dragStart.call(i,t,e)}).on("drag",function(t,e){i.dragTick.call(i,t,e)}).on("end",function(t,e){i.dragEnd.call(i,t,e)});this.designMode()?n.selectAll("#"+this.id()+" > div.borderHandle").call(a):n.selectAll("#"+this.id()+" > div.borderHandle").on(".drag",null);var l=this.borderLayoutObject();this.content().forEach(function(t,e){t._fixedLeft=l[this.sectionTypes()[e]].left,t._fixedTop=l[this.sectionTypes()[e]].top,t._fixedWidth=l[this.sectionTypes()[e]].width,t._fixedHeight=l[this.sectionTypes()[e]].height,t._dragHandles=[]},this),o.style("left",function(t){return t._fixedLeft+"px"}).style("top",function(t){return t._fixedTop+"px"}).style("width",function(t){return t._fixedWidth-i.gutter()+"px"}).style("height",function(t){return t._fixedHeight-i.gutter()+"px"}).each(function(t){t._placeholderElement.attr("draggable",i.designMode()).selectAll(".dragHandle").attr("draggable",i.designMode()),t.surfacePadding(i.surfacePadding()).resize()}),r.exit().each(function(t){t.target(null)}).remove(),this.getCellSizes(),n.selectAll("#"+this.id()+" > div.borderHandle").each(function(){var t=it(this);t.classed("borderHandle_top")?(t.style("width",i._cellSizes.width+"px"),t.style("top",i._cellSizes.topHeight-3+"px")):t.classed("borderHandle_right")?(t.style("left",i._cellSizes.width-i._cellSizes.rightWidth+"px"),t.style("top",i._cellSizes.topHeight+3+"px"),t.style("height",i._cellSizes.rightHeight+"px")):t.classed("borderHandle_bottom")?(t.style("width",i._cellSizes.width+"px"),t.style("top",i._cellSizes.height-i._cellSizes.bottomHeight-3+"px")):t.classed("borderHandle_left")&&(t.style("left",i._cellSizes.leftWidth+"px"),t.style("height",i._cellSizes.leftHeight+"px"),t.style("top",i._cellSizes.topHeight+3+"px"))})},n.prototype.getCellSizes=function(){var t=this;t._cellSizes={};var e=this.element().node().getBoundingClientRect();t._cellSizes.width=e.width,t._cellSizes.height=e.height,this.element().selectAll("#"+this.id()+" > div > div.border-cell").each(function(){var e=it(this);if("function"==typeof e.node){var n=e.node().getBoundingClientRect();e.classed("border-cell-top")?t._cellSizes.topHeight=n.height:e.classed("border-cell-left")?(t._cellSizes.leftWidth=n.width,t._cellSizes.leftHeight=n.height):e.classed("border-cell-right")?(t._cellSizes.rightWidth=n.width,t._cellSizes.rightHeight=n.height):e.classed("border-cell-bottom")&&(t._cellSizes.bottomHeight=n.height)}});["height","width","topHeight","bottomHeight","leftHeight","rightHeight","leftWidth","rightWidth"].forEach(function(e){t._cellSizes[e]=void 0===t._cellSizes[e]?0:t._cellSizes[e]})},n.prototype.postUpdate=function(t,e){var n=this;this.content().forEach(function(t){if(null!==t._element.node()&&t.widget()){var e=t.widget().getBBox(!1,!0),i=t.widget().getBBox(!0,!0);e.width===i.width&&e.height===i.height||n.lazyRender()}})},n.prototype.exit=function(e,n){this.content().forEach(function(t){return t.target(null)}),t.prototype.exit.call(this,e,n)},n}(e.HTMLWidget);mt.prototype._class+=" layout_Border",mt.prototype.publish("designMode",!1,"boolean","Design Mode",null,{tags:["Basic"]}),mt.prototype.publish("content",[],"widgetArray","widgets",null,{tags:["Intermediate"]}),mt.prototype.publish("gutter",0,"number","Gap Between Widgets",null,{tags:["Basic"]}),mt.prototype.publish("topShrinkWrap",!1,"boolean","'Top' Cell shrinks to fit content",null,{tags:["Intermediate"]}),mt.prototype.publish("leftShrinkWrap",!1,"boolean","'Left' Cell shrinks to fit content",null,{tags:["Intermediate"]}),mt.prototype.publish("rightShrinkWrap",!1,"boolean","'Right' Cell shrinks to fit content",null,{tags:["Intermediate"]}),mt.prototype.publish("bottomShrinkWrap",!1,"boolean","'Bottom' Cell shrinks to fit content",null,{tags:["Intermediate"]}),mt.prototype.publish("topSize",0,"number","Height of the 'Top' Cell (px)",null,{tags:["Private"]}),mt.prototype.publish("leftSize",0,"number","Width of the 'Left' Cell (px)",null,{tags:["Private"]}),mt.prototype.publish("rightSize",0,"number","Width of the 'Right' Cell (px)",null,{tags:["Private"]}),mt.prototype.publish("bottomSize",0,"number","Height of the 'Bottom' Cell (px)",null,{tags:["Private"]}),mt.prototype.publish("topPercentage",20,"number","Percentage (of parent) Height of the 'Top' Cell",null,{tags:["Private"]}),mt.prototype.publish("leftPercentage",20,"number","Percentage (of parent) Width of the 'Left' Cell",null,{tags:["Private"]}),mt.prototype.publish("rightPercentage",20,"number","Percentage (of parent) Width of the 'Right' Cell",null,{tags:["Private"]}),mt.prototype.publish("bottomPercentage",20,"number","Percentage (of parent) Height of the 'Bottom' Cell",null,{tags:["Private"]}),mt.prototype.publish("surfacePadding",0,"number","Cell Padding (px)",null,{tags:["Intermediate"]}),mt.prototype.publish("sectionTypes",[],"array","Section Types sharing an index with 'content' - Used to determine position/size.",null,{tags:["Private"]});s(".layout_Border2>.body{margin:0;padding:0;display:flex;flex-flow:row}.layout_Border2>.body>.center{flex:3 1 60%;-ms-flex:3 1 auto;order:2}.layout_Border2>.body>.lhs{flex:1 6 20%;-ms-flex:1 6 auto;order:1}.layout_Border2>.body>.rhs{margin-left:4px;flex:1 6 20%;-ms-flex:1 6 auto;order:3}.layout_Border2>.footer,.layout_Border2>.header{display:block}");var wt=function(){function t(t){this._overlay=!1,this._div=t}return t.prototype.overlay=function(t){return arguments.length?(this._overlay=t,this):this._overlay},t.prototype.element=function(){return this._div},t.prototype.node=function(){return this._div.node()},t.prototype.widget=function(t){return arguments.length?(this._widget!==t&&(this._widget&&this._widget.target(null),this._widget=t,this._widget&&this._widget.target(this._div.node())),this):this._widget},t.prototype.resize=function(t){return this._widget&&(this._div.style("height",t.height+"px"),this._widget.resize(t)),this},t.prototype.render=function(t){return a(this,void 0,void 0,function(){var e=this;return l(this,function(n){return this._div.style("height",this.overlay()?"0px":null).style("overflow",this.overlay()?"visible":null),this._widget?[2,this._widget.renderPromise().then(function(n){if(t&&e._widget.visible()){var i=e._widget.getBBox();return i.width+=8,e.overlay()?i.height=0:i.height+=8,i}return t?{x:0,y:0,width:0,height:0}:void 0})]:[2,Promise.resolve(t?{x:0,y:0,width:0,height:0}:void 0)]})})},t}(),xt=function(t){function e(){var e=t.call(this)||this;return e._tag="div",e}return o(e,t),e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._topWA=new wt(n.append("header"));var i=n.append("div").attr("class","body");this._centerWA=new wt(i.append("div").attr("class","center")),this._leftWA=new wt(i.append("div").attr("class","lhs")),this._rightWA=new wt(i.append("div").attr("class","rhs")),this._bottomWA=new wt(n.append("div").attr("class","footer"))},e.prototype.update=function(e,n){t.prototype.update.call(this,e,n)},e.prototype.targetNull=function(t){t&&t.target(null)},e.prototype.exit=function(e,n){this.targetNull(this.center()),this.targetNull(this.bottom()),this.targetNull(this.right()),this.targetNull(this.left()),this.targetNull(this.top()),t.prototype.exit.call(this,e,n)},e.prototype.render=function(e){var n=this;return t.prototype.render.call(this,function(t){n._topWA?n._topWA.widget(n.top()).overlay(n.topOverlay()).render(!0).then(function(t){return a(n,void 0,void 0,function(){var n,i,r,o,a=this;return l(this,function(l){switch(l.label){case 0:return[4,this._leftWA.widget(this.left()).render(!0)];case 1:return n=l.sent(),[4,this._rightWA.widget(this.right()).render(!0)];case 2:return i=l.sent(),[4,this._bottomWA.widget(this.bottom()).render(!0)];case 3:return r=l.sent(),this.bottomHeight_exists()&&(r.height=this.bottomHeight()),o=[this._topWA.resize({width:this.width(),height:t.height}).render(),this._leftWA.resize({width:n.width,height:this.height()-(t.height+r.height)}).render(),this._rightWA.resize({width:i.width,height:this.height()-(t.height+r.height)}).render(),this._centerWA.widget(this.center()).resize({width:this.width()-(n.width+i.width),height:this.height()-(t.height+r.height)}).render(),this._bottomWA.resize({width:this.width(),height:r.height}).render()],Promise.all(o).then(function(t){e&&e(a)}),[2]}})})}):e&&e(n)})},e}(e.HTMLWidget);xt.prototype._class+=" layout_Border2",xt.prototype.publish("top",null,"widget","Top Widget",void 0,{render:!1}),xt.prototype.publish("topOverlay",!1,"boolean","Overlay Top Widget"),xt.prototype.publish("left",null,"widget","Left Widget",void 0,{render:!1}),xt.prototype.publish("center",null,"widget","Center Widget",void 0,{render:!1}),xt.prototype.publish("right",null,"widget","Right Widget",void 0,{render:!1}),xt.prototype.publish("bottom",null,"widget","Bottom Widget",void 0,{render:!1}),xt.prototype.publish("bottomHeight",null,"number","Bottom Fixed Height",void 0,{optional:!0});var Ct,St,Tt=0,Mt=0,At=0,Bt=1e3,Pt=0,zt=0,kt=0,Ht="object"==typeof performance&&performance.now?performance:Date,Wt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Dt(){return zt||(Wt(It),zt=Ht.now()+kt)}function It(){zt=0}function Ft(){this._call=this._time=this._next=null}function Lt(t,e,n){var i=new Ft;return i.restart(t,e,n),i}function Et(){zt=(Pt=Ht.now())+kt,Tt=Mt=0;try{!function(){Dt(),++Tt;for(var t,e=Ct;e;)(t=zt-e._time)>=0&&e._call.call(null,t),e=e._next;--Tt}()}finally{Tt=0,function(){var t,e,n=Ct,i=1/0;for(;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ct=e);St=t,Ot(i)}(),zt=0}}function Nt(){var t=Ht.now(),e=t-Pt;e>Bt&&(kt-=e,Pt=t)}function Ot(t){if(!Tt){Mt&&(Mt=clearTimeout(Mt));var e=t-zt;e>24?(t<1/0&&(Mt=setTimeout(Et,e)),At&&(At=clearInterval(At))):(At||(Pt=zt,At=setInterval(Nt,Bt)),Tt=1,Wt(Et))}}function Rt(t,e,n){var i=new Ft;return e=null==e?0:+e,i.restart(function(n){i.stop(),t(n+e)},e,n),i}Ft.prototype=Lt.prototype={constructor:Ft,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Dt():+n)+(null==e?0:+e),this._next||St===this||(St?St._next=this:Ct=this,St=this),this._call=t,this._time=n,Ot()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ot())}};var Ut=d("start","end","cancel","interrupt"),Gt=[],Yt=0,jt=1,Vt=2,Xt=3,qt=4,$t=5,Zt=6;function Qt(t,e,n,i,r,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(s){var c,u,h,d;if(n.state!==jt)return l();for(c in r)if((d=r[c]).name===n.name){if(d.state===Xt)return Rt(o);d.state===qt?(d.state=Zt,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=Zt,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(Rt(function(){n.state===Xt&&(n.state=qt,n.timer.restart(a,n.delay,n.time),a(s))}),n.state=Vt,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Vt){for(n.state=Xt,i=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++u]=d);i.length=u+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=$t,1),o=-1,a=i.length;++o<a;)i[o].call(t,r);n.state===$t&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var i in n.state=Zt,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=Lt(function(t){n.state=jt,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}(t,n,{name:e,index:i,group:r,on:Ut,tween:Gt,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Yt})}function Jt(t,e){var n=te(t,e);if(n.state>Yt)throw new Error("too late; already scheduled");return n}function Kt(t,e){var n=te(t,e);if(n.state>Xt)throw new Error("too late; already running");return n}function te(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ee(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ne(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ie(){}var re="\\s*([+-]?\\d+)\\s*",oe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ae="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",le=/^#([0-9a-f]{3})$/,se=/^#([0-9a-f]{6})$/,ce=new RegExp("^rgb\\("+[re,re,re]+"\\)$"),ue=new RegExp("^rgb\\("+[ae,ae,ae]+"\\)$"),he=new RegExp("^rgba\\("+[re,re,re,oe]+"\\)$"),de=new RegExp("^rgba\\("+[ae,ae,ae,oe]+"\\)$"),fe=new RegExp("^hsl\\("+[oe,ae,ae]+"\\)$"),pe=new RegExp("^hsla\\("+[oe,ae,ae,oe]+"\\)$"),ge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ye(t){var e;return t=(t+"").trim().toLowerCase(),(e=le.exec(t))?new we((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=se.exec(t))?be(parseInt(e[1],16)):(e=ce.exec(t))?new we(e[1],e[2],e[3],1):(e=ue.exec(t))?new we(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=he.exec(t))?_e(e[1],e[2],e[3],e[4]):(e=de.exec(t))?_e(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=fe.exec(t))?Ce(e[1],e[2]/100,e[3]/100,1):(e=pe.exec(t))?Ce(e[1],e[2]/100,e[3]/100,e[4]):ge.hasOwnProperty(t)?be(ge[t]):"transparent"===t?new we(NaN,NaN,NaN,0):null}function be(t){return new we(t>>16&255,t>>8&255,255&t,1)}function _e(t,e,n,i){return i<=0&&(t=e=n=NaN),new we(t,e,n,i)}function ve(t){return t instanceof ie||(t=ye(t)),t?new we((t=t.rgb()).r,t.g,t.b,t.opacity):new we}function me(t,e,n,i){return 1===arguments.length?ve(t):new we(t,e,n,null==i?1:i)}function we(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function xe(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ce(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Se(t,e,n,i)}function Se(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Te(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}ee(ie,ye,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),ee(we,me,ne(ie,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new we(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new we(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+xe(this.r)+xe(this.g)+xe(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),ee(Se,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Se)return new Se(t.h,t.s,t.l,t.opacity);if(t instanceof ie||(t=ye(t)),!t)return new Se;if(t instanceof Se)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,l=o-r,s=(o+r)/2;return l?(a=e===o?(n-i)/l+6*(n<i):n===o?(i-e)/l+2:(e-n)/l+4,l/=s<.5?o+r:2-o-r,a*=60):l=s>0&&s<1?0:a,new Se(a,l,s,t.opacity)}(t):new Se(t,e,n,null==i?1:i)},ne(ie,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Se(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Se(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new we(Te(t>=240?t-240:t+120,r,i),Te(t,r,i),Te(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Me=Math.PI/180,Ae=180/Math.PI,Be=.96422,Pe=1,ze=.82521,ke=4/29,He=6/29,We=3*He*He,De=He*He*He;function Ie(t){if(t instanceof Fe)return new Fe(t.l,t.a,t.b,t.opacity);if(t instanceof Re){if(isNaN(t.h))return new Fe(t.l,0,0,t.opacity);var e=t.h*Me;return new Fe(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof we||(t=ve(t));var n,i,r=Oe(t.r),o=Oe(t.g),a=Oe(t.b),l=Le((.2225045*r+.7168786*o+.0606169*a)/Pe);return r===o&&o===a?n=i=l:(n=Le((.4360747*r+.3850649*o+.1430804*a)/Be),i=Le((.0139322*r+.0971045*o+.7141733*a)/ze)),new Fe(116*l-16,500*(n-l),200*(l-i),t.opacity)}function Fe(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Le(t){return t>De?Math.pow(t,1/3):t/We+ke}function Ee(t){return t>He?t*t*t:We*(t-ke)}function Ne(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Oe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Re(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}ee(Fe,function(t,e,n,i){return 1===arguments.length?Ie(t):new Fe(t,e,n,null==i?1:i)},ne(ie,{brighter:function(t){return new Fe(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Fe(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new we(Ne(3.1338561*(e=Be*Ee(e))-1.6168667*(t=Pe*Ee(t))-.4906146*(n=ze*Ee(n))),Ne(-.9787684*e+1.9161415*t+.033454*n),Ne(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ee(Re,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Re)return new Re(t.h,t.c,t.l,t.opacity);if(t instanceof Fe||(t=Ie(t)),0===t.a&&0===t.b)return new Re(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Ae;return new Re(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Re(t,e,n,null==i?1:i)},ne(ie,{brighter:function(t){return new Re(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Re(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ie(this).rgb()}}));var Ue=-.14861,Ge=1.78277,Ye=-.29227,je=-.90649,Ve=1.97294,Xe=Ve*je,qe=Ve*Ge,$e=Ge*Ye-je*Ue;function Ze(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Qe)return new Qe(t.h,t.s,t.l,t.opacity);t instanceof we||(t=ve(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=($e*i+Xe*e-qe*n)/($e+Xe-qe),o=i-r,a=(Ve*(n-r)-Ye*o)/je,l=Math.sqrt(a*a+o*o)/(Ve*r*(1-r)),s=l?Math.atan2(a,o)*Ae-120:NaN;return new Qe(s<0?s+360:s,l,r,t.opacity)}(t):new Qe(t,e,n,null==i?1:i)}function Qe(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Je(t){return function(){return t}}function Ke(t,e){return function(n){return t+n*e}}function tn(t){return 1==(t=+t)?en:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Je(isNaN(e)?n:e)}}function en(t,e){var n=e-t;return n?Ke(t,n):Je(isNaN(t)?e:t)}ee(Qe,Ze,ne(ie,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Qe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Me,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new we(255*(e+n*(Ue*i+Ge*r)),255*(e+n*(Ye*i+je*r)),255*(e+n*(Ve*i)),this.opacity)}}));var nn=function t(e){var n=tn(e);function i(t,e){var i=n((t=me(t)).r,(e=me(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),a=en(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function rn(t,e){return e-=t=+t,function(n){return t+e*n}}var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,an=new RegExp(on.source,"g");function ln(t,e){var n,i,r,o=on.lastIndex=an.lastIndex=0,a=-1,l=[],s=[];for(t+="",e+="";(n=on.exec(t))&&(i=an.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),l[a]?l[a]+=r:l[++a]=r),(n=n[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:rn(n,i)})),o=an.lastIndex;return o<e.length&&(r=e.slice(o),l[a]?l[a]+=r:l[++a]=r),l.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,i=0;i<e;++i)l[(n=s[i]).i]=n.x(t);return l.join("")})}function sn(t,e){var n,i=typeof e;return null==e||"boolean"===i?Je(e):("number"===i?rn:"string"===i?(n=ye(e))?(e=n,nn):ln:e instanceof ye?nn:e instanceof Date?function(t,e){var n=new Date;return e-=t=+t,function(i){return n.setTime(t+e*i),n}}:Array.isArray(e)?function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),a=new Array(i);for(n=0;n<r;++n)o[n]=sn(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=o[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=sn(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}:rn)(t,e)}function cn(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}var un,hn,dn,fn,pn=180/Math.PI,gn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yn(t,e,n,i,r,o){var a,l,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*i)&&(n-=t*s,i-=e*s),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,s/=l),t*i<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*pn,skewX:Math.atan(s)*pn,scaleX:a,scaleY:l}}function bn(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,a){var l=[],s=[];return o=t(o),a=t(a),function(t,i,r,o,a,l){if(t!==r||i!==o){var s=a.push("translate(",null,e,null,n);l.push({i:s-4,x:rn(t,r)},{i:s-2,x:rn(i,o)})}else(r||o)&&a.push("translate("+r+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,l,s),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:rn(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,a.rotate,l,s),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:rn(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,a.skewX,l,s),function(t,e,n,i,o,a){if(t!==n||e!==i){var l=o.push(r(o)+"scale(",null,",",null,")");a.push({i:l-4,x:rn(t,n)},{i:l-2,x:rn(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,l,s),o=a=null,function(t){for(var e,n=-1,i=s.length;++n<i;)l[(e=s[n]).i]=e.x(t);return l.join("")}}}var _n=bn(function(t){return"none"===t?gn:(un||(un=document.createElement("DIV"),hn=document.documentElement,dn=document.defaultView),un.style.transform=t,t=dn.getComputedStyle(hn.appendChild(un),null).getPropertyValue("transform"),hn.removeChild(un),yn(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),vn=bn(function(t){return null==t?gn:(fn||(fn=document.createElementNS("http://www.w3.org/2000/svg","g")),fn.setAttribute("transform",t),(t=fn.transform.baseVal.consolidate())?yn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):gn)},", ",")",")");Math.SQRT2;function mn(t){return function e(n){function i(e,i){var r=t((e=Ze(e)).h,(i=Ze(i)).h),o=en(e.s,i.s),a=en(e.l,i.l),l=en(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=l(t),e+""}}return n=+n,i.gamma=e,i}(1)}mn(function(t,e){var n=e-t;return n?Ke(t,n>180||n<-180?n-360*Math.round(n/360):n):Je(isNaN(t)?e:t)});var wn=mn(en);function xn(t,e,n){var i=t._id;return t.each(function(){var t=Kt(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return te(t,i).value[e]}}function Cn(t,e){var n;return("number"==typeof e?rn:e instanceof ye?nn:(n=ye(e))?(e=n,nn):ln)(t,e)}var Sn=nt.prototype.constructor;function Tn(t){return function(){this.style.removeProperty(t)}}var Mn=0;function An(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Bn(){return++Mn}var Pn=nt.prototype;An.prototype=function(t){return nt().transition(t)}.prototype={constructor:An,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=w(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var l,s,c=i[a],u=c.length,h=o[a]=new Array(u),d=0;d<u;++d)(l=c[d])&&(s=t.call(l,l.__data__,d,c))&&("__data__"in l&&(s.__data__=l.__data__),h[d]=s,Qt(h[d],e,n,d,h,te(l,n)));return new An(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=C(t));for(var i=this._groups,r=i.length,o=[],a=[],l=0;l<r;++l)for(var s,c=i[l],u=c.length,h=0;h<u;++h)if(s=c[h]){for(var d,f=t.call(s,s.__data__,h,c),p=te(s,n),g=0,y=f.length;g<y;++g)(d=f[g])&&Qt(d,e,n,g,f,p);o.push(f),a.push(s)}return new An(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=S(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],l=a.length,s=i[r]=[],c=0;c<l;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new An(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),l=0;l<o;++l)for(var s,c=e[l],u=n[l],h=c.length,d=a[l]=new Array(h),f=0;f<h;++f)(s=c[f]||u[f])&&(d[f]=s);for(;l<i;++l)a[l]=e[l];return new An(a,this._parents,this._name,this._id)},selection:function(){return new Sn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Bn(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a,l=i[o],s=l.length,c=0;c<s;++c)if(a=l[c]){var u=te(a,e);Qt(a,t,n,c,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new An(i,this._parents,t,n)},call:Pn.call,nodes:Pn.nodes,node:Pn.node,size:Pn.size,empty:Pn.empty,each:Pn.each,on:function(t,e){var n=this._id;return arguments.length<2?te(this.node(),n).on.on(t):this.each(function(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?Jt:Kt;return function(){var a=o(this,t),l=a.on;l!==i&&(r=(i=l).copy()).on(e,n),a.on=r}}(n,t,e))},attr:function(t,e){var n=_(t),i="transform"===n?vn:Cn;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var i,r,o;return function(){var a,l,s=n(this);if(null!=s)return(a=this.getAttributeNS(t.space,t.local))===(l=s+"")?null:a===i&&l===r?o:(r=l,o=e(i=a,s));this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var i,r,o;return function(){var a,l,s=n(this);if(null!=s)return(a=this.getAttribute(t))===(l=s+"")?null:a===i&&l===r?o:(r=l,o=e(i=a,s));this.removeAttribute(t)}})(n,i,xn(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===i?r:r=e(i=a,n)}}:function(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===i?r:r=e(i=a,n)}})(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=_(t);return this.tween(n,(i.local?function(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e(n))}}(t,r)),n}return r._value=e,r}:function(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&function(t,e){return function(n){this.setAttribute(t,e(n))}}(t,r)),n}return r._value=e,r})(i,e))},style:function(t,e,n){var i="transform"==(t+="")?_n:Cn;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=H(this,t),a=(this.style.removeProperty(t),H(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}(t,i)).on("end.style."+t,Tn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,o;return function(){var a=H(this,t),l=n(this),s=l+"";return null==l&&(this.style.removeProperty(t),s=l=H(this,t)),a===s?null:a===i&&s===r?o:(r=s,o=e(i=a,l))}}(t,i,xn(this,"style."+t,e))).each(function(t,e){var n,i,r,o,a="style."+e,l="end."+a;return function(){var s=Kt(this,t),c=s.on,u=null==s.value[a]?o||(o=Tn(e)):void 0;c===n&&r===u||(i=(n=c).copy()).on(l,r=u),s.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,o=n+"";return function(){var a=H(this,t);return a===o?null:a===i?r:r=e(i=a,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,function(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&function(t,e,n){return function(i){this.style.setProperty(t,e(i),n)}}(t,o,n)),i}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(xn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=te(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?function(t,e){var n,i;return function(){var r=Kt(this,t),o=r.tween;if(o!==n)for(var a=0,l=(i=n=o).length;a<l;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}r.tween=i}}:function(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Kt(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var l={name:e,value:n},s=0,c=r.length;s<c;++s)if(r[s].name===e){r[s]=l;break}s===c&&r.push(l)}o.tween=r}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Jt(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Jt(this,t).delay=e}})(e,t)):te(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Kt(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Kt(this,t).duration=e}})(e,t)):te(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Kt(this,t).ease=e}}(e,t)):te(this.node(),e).ease},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var l={value:a},s={value:function(){0==--r&&o()}};n.each(function(){var n=Kt(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),n.on=e})})}};Math.PI,Math.PI;var zn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function kn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return zn.time=Dt(),zn;return n}nt.prototype.interrupt=function(t){return this.each(function(){!function(t,e){var n,i,r,o=t.__transition,a=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>Vt&&n.state<$t,n.state=Zt,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):a=!1;a&&delete t.__transition}}(this,t)})},nt.prototype.transition=function(t){var e,n;t instanceof An?(e=t._id,t=t._name):(e=Bn(),(n=zn).time=Dt(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,l=i[o],s=l.length,c=0;c<s;++c)(a=l[c])&&Qt(a,t,e,c,l,n||kn(a,e));return new An(i,this._parents,t,e)};s(".layout_Carousel>div{position:relative;overflow:hidden}.layout_Carousel>div>.carouselItem{position:absolute}");var Hn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._prevActive=0,e}return o(e,t),e.prototype.activeWidget=function(){return this.widgets()[this.active()]},e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._root=n.append("div").attr("id",this.id()+"_root")},e.prototype.update=function(e,n){var i=this;t.prototype.update.call(this,e,n);var r=this.active(),o=this.width();this._root.style("width",o+"px").style("height",this.height()+"px");var a=this._root.selectAll("#"+this.id()+"_root > .carouselItem").data(this.widgets(),function(t){return t.id()}),l=a.enter().append("div").attr("class","carouselItem").each(function(t){t.target(this)}).merge(a).style("left",function(t,e){return(e-i._prevActive)*o+"px"}).style("width",o+"px");this._prevActive!==r&&(l.style("display",function(t,e){return e===i._prevActive||e===r?null:"none"}).transition().duration(this.transitionDuration()).style("left",function(t,e){return(e-r)*o+"px"}).on("end",function(t,e){it(this).style("display",function(){return e===r?null:"none"})}),this._prevActive=r),a.exit().each(function(t){t.target(null)}).remove()},e.prototype.exit=function(e,n){this.widgets().forEach(function(t){return t.target(null)}),t.prototype.exit.call(this,e,n)},e.prototype.render=function(e){var n=this;return t.prototype.render.call(this,function(t){!n.visible()||n.isDOMHidden()?e&&e(t):n.activeWidget().resize(n.size()).render(function(n){e&&e(t)})})},e}(e.HTMLWidget);function Wn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}Hn.prototype._class+=" layout_Carousel",Hn.prototype.publish("widgets",[],"widgetArray","Widgets",null,{render:!1}),Hn.prototype.publish("active",0,"number","Active widget"),Hn.prototype.publish("transitionDuration",500,"number","Transition duration");var Dn,In=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fn(t){return new Ln(t)}function Ln(t){if(!(e=In.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function En(t,e){var n=Wn(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Fn.prototype=Ln.prototype,Ln.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Nn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return En(100*t,e)},r:En,s:function(t,e){var n=Wn(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(Dn=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Wn(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function On(t){return t}var Rn,Un,Gn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Yn(t){var e,n,i=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,i){for(var r=t.length,o=[],a=0,l=e[0],s=0;r>0&&l>0&&(s+l+1>i&&(l=Math.max(1,i-s)),o.push(t.substring(r-=l,r+l)),!((s+=l+1)>i));)l=e[a=(a+1)%e.length];return o.reverse().join(n)}):On,r=t.currency,o=t.decimal,a=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):On,l=t.percent||"%";function s(t){var e=(t=Fn(t)).fill,n=t.align,s=t.sign,c=t.symbol,u=t.zero,h=t.width,d=t.comma,f=t.precision,p=t.trim,g=t.type;"n"===g?(d=!0,g="g"):Nn[g]||(null==f&&(f=12),p=!0,g="g"),(u||"0"===e&&"="===n)&&(u=!0,e="0",n="=");var y="$"===c?r[0]:"#"===c&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===c?r[1]:/[%p]/.test(g)?l:"",_=Nn[g],v=/[defgprs%]/.test(g);function m(t){var r,l,c,m=y,w=b;if("c"===g)w=_(t)+w,t="";else{var x=(t=+t)<0;if(t=_(Math.abs(t),f),p&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(r>0){if(!+t[i])break t;r=0}}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),x&&0==+t&&(x=!1),m=(x?"("===s?s:"-":"-"===s||"("===s?"":s)+m,w=("s"===g?Gn[8+Dn/3]:"")+w+(x&&"("===s?")":""),v)for(r=-1,l=t.length;++r<l;)if(48>(c=t.charCodeAt(r))||c>57){w=(46===c?o+t.slice(r+1):t.slice(r))+w,t=t.slice(0,r);break}}d&&!u&&(t=i(t,1/0));var C=m.length+t.length+w.length,S=C<h?new Array(h-C+1).join(e):"";switch(d&&u&&(t=i(S+t,S.length?h-w.length:1/0),S=""),n){case"<":t=m+t+w+S;break;case"=":t=m+S+t+w;break;case"^":t=S.slice(0,C=S.length>>1)+m+t+w+S.slice(C);break;default:t=S+m+t+w}return a(t)}return f=null==f?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),m.toString=function(){return t+""},m}return{format:s,formatPrefix:function(t,e){var n,i=s(((t=Fn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor((n=e,((n=Wn(Math.abs(n)))?n[1]:NaN)/3)))),o=Math.pow(10,-r),a=Gn[8+r/3];return function(t){return i(o*t)+a}}}}function jn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Rn=Yn({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Un=Rn.format,Rn.formatPrefix;var Vn,Xn;1===(Vn=jn).length&&(Xn=Vn,Vn=function(t,e){return jn(Xn(t),e)});function qn(){}function $n(t,e){var n=new qn;if(t instanceof qn)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(null==e)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e(i=t[r],r,t),i)}else if(t)for(var a in t)n.set(a,t[a]);return n}function Zn(){}qn.prototype=$n.prototype={constructor:qn,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Qn=$n.prototype;Zn.prototype=function(t,e){var n=new Zn;if(t instanceof Zn)t.each(function(t){n.add(t)});else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}.prototype={constructor:Zn,has:Qn.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Qn.remove,clear:Qn.clear,values:Qn.keys,size:Qn.size,empty:Qn.empty,each:Qn.each};var Jn=Array.prototype.slice,Kn={name:"implicit"};var ti=new Date,ei=new Date;function ni(t,e,n,i){function r(e){return t(e=new Date(+e)),e}return r.floor=r,r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,o){var a=[];if(n=r.ceil(n),o=null==o?1:Math.floor(o),!(n<i&&o>0))return a;do{a.push(new Date(+n))}while(e(n,o),t(n),n<i);return a},r.filter=function(n){return ni(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(r.count=function(e,i){return ti.setTime(+e),ei.setTime(+i),t(ti),t(ei),Math.floor(n(ti,ei))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var ii=ni(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ii.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ni(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):ii:null};var ri=6e4,oi=6048e5,ai=(ni(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),ni(function(t){t.setTime(Math.floor(t/ri)*ri)},function(t,e){t.setTime(+t+e*ri)},function(t,e){return(e-t)/ri},function(t){return t.getMinutes()}),ni(function(t){var e=t.getTimezoneOffset()*ri%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),ni(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ri)/864e5},function(t){return t.getDate()-1}));function li(t){return ni(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ri)/oi})}var si=li(0),ci=li(1),ui=(li(2),li(3),li(4)),hi=(li(5),li(6),ni(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),ni(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));hi.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ni(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};ni(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*ri)},function(t,e){return(e-t)/ri},function(t){return t.getUTCMinutes()}),ni(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()});var di=ni(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function fi(t){return ni(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/oi})}var pi=fi(0),gi=fi(1),yi=(fi(2),fi(3),fi(4)),bi=(fi(5),fi(6),ni(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),ni(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function _i(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vi(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function mi(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}bi.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ni(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var wi,xi,Ci,Si={"-":"",_:" ",0:"0"},Ti=/^\s*\d+/,Mi=/^%/,Ai=/[\\^$*+?|[\]().{}]/g;function Bi(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function Pi(t){return t.replace(Ai,"\\$&")}function zi(t){return new RegExp("^(?:"+t.map(Pi).join("|")+")","i")}function ki(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Hi(t,e,n){var i=Ti.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Wi(t,e,n){var i=Ti.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Di(t,e,n){var i=Ti.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Ii(t,e,n){var i=Ti.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Fi(t,e,n){var i=Ti.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Li(t,e,n){var i=Ti.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Ei(t,e,n){var i=Ti.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Ni(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Oi(t,e,n){var i=Ti.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Ri(t,e,n){var i=Ti.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Ui(t,e,n){var i=Ti.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Gi(t,e,n){var i=Ti.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Yi(t,e,n){var i=Ti.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function ji(t,e,n){var i=Ti.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Vi(t,e,n){var i=Ti.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Xi(t,e,n){var i=Ti.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function qi(t,e,n){var i=Mi.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function $i(t,e,n){var i=Ti.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function Zi(t,e,n){var i=Ti.exec(e.slice(n));return i?(t.Q=1e3*+i[0],n+i[0].length):-1}function Qi(t,e){return Bi(t.getDate(),e,2)}function Ji(t,e){return Bi(t.getHours(),e,2)}function Ki(t,e){return Bi(t.getHours()%12||12,e,2)}function tr(t,e){return Bi(1+ai.count(hi(t),t),e,3)}function er(t,e){return Bi(t.getMilliseconds(),e,3)}function nr(t,e){return er(t,e)+"000"}function ir(t,e){return Bi(t.getMonth()+1,e,2)}function rr(t,e){return Bi(t.getMinutes(),e,2)}function or(t,e){return Bi(t.getSeconds(),e,2)}function ar(t){var e=t.getDay();return 0===e?7:e}function lr(t,e){return Bi(si.count(hi(t),t),e,2)}function sr(t,e){var n=t.getDay();return t=n>=4||0===n?ui(t):ui.ceil(t),Bi(ui.count(hi(t),t)+(4===hi(t).getDay()),e,2)}function cr(t){return t.getDay()}function ur(t,e){return Bi(ci.count(hi(t),t),e,2)}function hr(t,e){return Bi(t.getFullYear()%100,e,2)}function dr(t,e){return Bi(t.getFullYear()%1e4,e,4)}function fr(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Bi(e/60|0,"0",2)+Bi(e%60,"0",2)}function pr(t,e){return Bi(t.getUTCDate(),e,2)}function gr(t,e){return Bi(t.getUTCHours(),e,2)}function yr(t,e){return Bi(t.getUTCHours()%12||12,e,2)}function br(t,e){return Bi(1+di.count(bi(t),t),e,3)}function _r(t,e){return Bi(t.getUTCMilliseconds(),e,3)}function vr(t,e){return _r(t,e)+"000"}function mr(t,e){return Bi(t.getUTCMonth()+1,e,2)}function wr(t,e){return Bi(t.getUTCMinutes(),e,2)}function xr(t,e){return Bi(t.getUTCSeconds(),e,2)}function Cr(t){var e=t.getUTCDay();return 0===e?7:e}function Sr(t,e){return Bi(pi.count(bi(t),t),e,2)}function Tr(t,e){var n=t.getUTCDay();return t=n>=4||0===n?yi(t):yi.ceil(t),Bi(yi.count(bi(t),t)+(4===bi(t).getUTCDay()),e,2)}function Mr(t){return t.getUTCDay()}function Ar(t,e){return Bi(gi.count(bi(t),t),e,2)}function Br(t,e){return Bi(t.getUTCFullYear()%100,e,2)}function Pr(t,e){return Bi(t.getUTCFullYear()%1e4,e,4)}function zr(){return"+0000"}function kr(){return"%"}function Hr(t){return+t}function Wr(t){return Math.floor(+t/1e3)}!function(t){wi=function(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,l=t.months,s=t.shortMonths,c=zi(r),u=ki(r),h=zi(o),d=ki(o),f=zi(a),p=ki(a),g=zi(l),y=ki(l),b=zi(s),_=ki(s),v={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:Qi,e:Qi,f:nr,H:Ji,I:Ki,j:tr,L:er,m:ir,M:rr,p:function(t){return r[+(t.getHours()>=12)]},Q:Hr,s:Wr,S:or,u:ar,U:lr,V:sr,w:cr,W:ur,x:null,X:null,y:hr,Y:dr,Z:fr,"%":kr},m={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:pr,e:pr,f:vr,H:gr,I:yr,j:br,L:_r,m:mr,M:wr,p:function(t){return r[+(t.getUTCHours()>=12)]},Q:Hr,s:Wr,S:xr,u:Cr,U:Sr,V:Tr,w:Mr,W:Ar,x:null,X:null,y:Br,Y:Pr,Z:zr,"%":kr},w={a:function(t,e,n){var i=f.exec(e.slice(n));return i?(t.w=p[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=d[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=b.exec(e.slice(n));return i?(t.m=_[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=y[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,n,i){return S(t,e,n,i)},d:Ri,e:Ri,f:Xi,H:Gi,I:Gi,j:Ui,L:Vi,m:Oi,M:Yi,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=u[i[0].toLowerCase()],n+i[0].length):-1},Q:$i,s:Zi,S:ji,u:Wi,U:Di,V:Ii,w:Hi,W:Fi,x:function(t,e,i){return S(t,n,e,i)},X:function(t,e,n){return S(t,i,e,n)},y:Ei,Y:Li,Z:Ni,"%":qi};function x(t,e){return function(n){var i,r,o,a=[],l=-1,s=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++l<c;)37===t.charCodeAt(l)&&(a.push(t.slice(s,l)),null!=(r=Si[i=t.charAt(++l)])?i=t.charAt(++l):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),a.push(i),s=l+1);return a.push(t.slice(s,l)),a.join("")}}function C(t,e){return function(n){var i,r,o=mi(1900);if(S(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(i=vi(mi(o.y))).getUTCDay(),i=r>4||0===r?gi.ceil(i):gi(i),i=di.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(r=(i=e(mi(o.y))).getDay(),i=r>4||0===r?ci.ceil(i):ci(i),i=ai.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),r="Z"in o?vi(mi(o.y)).getUTCDay():e(mi(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(r+5)%7:o.w+7*o.U-(r+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,vi(o)):e(o)}}function S(t,e,n,i){for(var r,o,a=0,l=e.length,s=n.length;a<l;){if(i>=s)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(o=w[r in Si?e.charAt(a++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return v.x=x(n,v),v.X=x(i,v),v.c=x(e,v),m.x=x(n,m),m.X=x(i,m),m.c=x(e,m),{format:function(t){var e=x(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=C(t+="",_i);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",m);return e.toString=function(){return t},e},utcParse:function(t){var e=C(t,vi);return e.toString=function(){return t},e}}}(t),wi.format,wi.parse,xi=wi.utcFormat,Ci=wi.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Date.prototype.toISOString||xi("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||Ci("%Y-%m-%dT%H:%M:%S.%LZ");function Dr(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}Dr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Dr("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Dr("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Dr("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),wn(Ze(300,.5,0),Ze(-240,.5,1));wn(Ze(-100,.75,.35),Ze(80,1.5,.8)),wn(Ze(260,.75,.35),Ze(80,1.5,.8)),Ze();function Ir(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Ir(Dr("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));Ir(Dr("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ir(Dr("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Ir(Dr("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Fr=Math.PI,Lr=2*Fr,Er=Lr-1e-6;function Nr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Or(){return new Nr}function Rr(t){return function(){return t}}Nr.prototype=Or.prototype={constructor:Nr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,a=this._y1,l=n-t,s=i-e,c=o-t,u=a-e,h=c*c+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(u*l-s*c)>1e-6&&r){var d=n-o,f=i-a,p=l*l+s*s,g=d*d+f*f,y=Math.sqrt(p),b=Math.sqrt(h),_=r*Math.tan((Fr-Math.acos((p+h-g)/(2*y*b)))/2),v=_/b,m=_/y;Math.abs(v-1)>1e-6&&(this._+="L"+(t+v*c)+","+(e+v*u)),this._+="A"+r+","+r+",0,0,"+ +(u*d>c*f)+","+(this._x1=t+m*l)+","+(this._y1=e+m*s)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,o){t=+t,e=+e;var a=(n=+n)*Math.cos(i),l=n*Math.sin(i),s=t+a,c=e+l,u=1^o,h=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+s+","+c),n&&(h<0&&(h=h%Lr+Lr),h>Er?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-l)+"A"+n+","+n+",0,1,"+u+","+(this._x1=s)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=Fr)+","+u+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Ur=Math.PI,Gr=2*Ur,Yr={draw:function(t,e){var n=Math.sqrt(e/Ur);t.moveTo(n,0),t.arc(0,0,n,0,Gr)}};function jr(t){return t<0?-1:1}function Vr(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(o*r+a*i)/(i+r);return(jr(o)+jr(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function Xr(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function qr(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,l=(o-i)/3;t._context.bezierCurveTo(i+l,r+l*e,o-l,a-l*n,o,a)}function $r(t){this._context=t}function Zr(t){this._context=t}$r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:qr(this,this._t0,Xr(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,qr(this,Xr(this,n=Vr(this,t,e)),n);break;default:qr(this,this._t0,n=Vr(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(function(t){this._context=new Zr(t)}.prototype=Object.create($r.prototype)).point=function(t,e){$r.prototype.point.call(this,e,t)},Zr.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}};var Qr="http://www.w3.org/1999/xhtml",Jr={svg:"http://www.w3.org/2000/svg",xhtml:Qr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Kr(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Jr.hasOwnProperty(e)?{space:Jr[e],local:t}:t}function to(t){var e=Kr(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Qr&&e.documentElement.namespaceURI===Qr?e.createElement(t):e.createElementNS(n,t)}})(e)}var eo=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var no=document.documentElement;if(!no.matches){var io=no.webkitMatchesSelector||no.msMatchesSelector||no.mozMatchesSelector||no.oMatchesSelector;eo=function(t){return function(){return io.call(this,t)}}}}var ro=eo,oo={};"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(oo={mouseenter:"mouseover",mouseleave:"mouseout"}));function ao(t,e,n){return t=lo(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function lo(t,e,n){return function(i){try{t.call(this,this.__data__,e,n)}finally{}}}function so(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function co(t,e,n){var i=oo.hasOwnProperty(t.type)?ao:lo;return function(r,o,a){var l,s=this.__on,c=i(e,o,a);if(s)for(var u=0,h=s.length;u<h;++u)if((l=s[u]).type===t.type&&l.name===t.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),void(l.value=e);this.addEventListener(t.type,c,n),l={type:t.type,name:t.name,value:e,listener:c,capture:n},s?s.push(l):this.__on=[l]}}function uo(){}function ho(t){return null==t?uo:function(){return this.querySelector(t)}}function fo(){return[]}function po(t){return new Array(t.length)}function go(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}go.prototype={constructor:go,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var yo="$";function bo(t,e,n,i,r,o){for(var a,l=0,s=e.length,c=o.length;l<c;++l)(a=e[l])?(a.__data__=o[l],i[l]=a):n[l]=new go(t,o[l]);for(;l<s;++l)(a=e[l])&&(r[l]=a)}function _o(t,e,n,i,r,o,a){var l,s,c,u={},h=e.length,d=o.length,f=new Array(h);for(l=0;l<h;++l)(s=e[l])&&(f[l]=c=yo+a.call(s,s.__data__,l,e),c in u?r[l]=s:u[c]=s);for(l=0;l<d;++l)(s=u[c=yo+a.call(t,o[l],l,o)])?(i[l]=s,s.__data__=o[l],u[c]=null):n[l]=new go(t,o[l]);for(l=0;l<h;++l)(s=e[l])&&u[f[l]]===s&&(r[l]=s)}function vo(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function mo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function wo(t){return t.trim().split(/^|\s+/)}function xo(t){return t.classList||new Co(t)}function Co(t){this._node=t,this._names=wo(t.getAttribute("class")||"")}function So(t,e){for(var n=xo(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function To(t,e){for(var n=xo(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Mo(){this.textContent=""}function Ao(){this.innerHTML=""}function Bo(){this.nextSibling&&this.parentNode.appendChild(this)}function Po(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zo(){return null}function ko(){var t=this.parentNode;t&&t.removeChild(this)}function Ho(t,e,n){var i=mo(t),r=i.CustomEvent;r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}Co.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Wo,Do=[null];function Io(t,e){this._groups=t,this._parents=e}function Fo(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Lo(t){return(t=Fo(Math.abs(t)))?t[1]:NaN}function Eo(t,e){var n=Fo(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}Io.prototype=function(){return new Io([[document.documentElement]],Do)}.prototype={constructor:Io,select:function(t){"function"!=typeof t&&(t=ho(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a,l=e[r],s=l.length,c=i[r]=new Array(s),u=0;u<s;++u)(o=l[u])&&(a=t.call(o,o.__data__,u,l))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new Io(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=function(t){return null==t?fo:function(){return this.querySelectorAll(t)}}(t));for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a,l=e[o],s=l.length,c=0;c<s;++c)(a=l[c])&&(i.push(t.call(a,a.__data__,c,l)),r.push(a));return new Io(i,r)},filter:function(t){"function"!=typeof t&&(t=ro(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],l=a.length,s=i[r]=[],c=0;c<l;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&s.push(o);return new Io(i,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),u=-1,this.each(function(t){p[++u]=t}),p;var n,i=e?_o:bo,r=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,l=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var h=r[u],d=o[u],f=d.length,p=t.call(h,h&&h.__data__,u,r),g=p.length,y=s[u]=new Array(g),b=l[u]=new Array(g);i(h,d,y,b,c[u]=new Array(f),p,e);for(var _,v,m=0,w=0;m<g;++m)if(_=y[m]){for(m>=w&&(w=m+1);!(v=b[w])&&++w<g;);_._next=v||null}}return(l=new Io(l,r))._enter=s,l._exit=c,l},enter:function(){return new Io(this._enter||this._groups.map(po),this._parents)},exit:function(){return new Io(this._exit||this._groups.map(po),this._parents)},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),l=0;l<o;++l)for(var s,c=e[l],u=n[l],h=c.length,d=a[l]=new Array(h),f=0;f<h;++f)(s=c[f]||u[f])&&(d[f]=s);for(;l<i;++l)a[l]=e[l];return new Io(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&a!==i.nextSibling&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=vo);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a,l=n[o],s=l.length,c=r[o]=new Array(s),u=0;u<s;++u)(a=l[u])&&(c[u]=a);c.sort(e)}return new Io(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,l=o.length;a<l;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,e){var n=Kr(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){var i;return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):mo(i=this.node()).getComputedStyle(i,null).getPropertyValue(t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=wo(t+"");if(arguments.length<2){for(var i=xo(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?So:To)(this,t)}}:e?function(t){return function(){So(this,t)}}:function(t){return function(){To(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?Mo:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ao:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Bo)},lower:function(){return this.each(Po)},append:function(t){var e="function"==typeof t?t:to(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:to(t),i=null==e?zo:"function"==typeof e?e:ho(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(ko)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(l=e?co:so,null==n&&(n=!1),i=0;i<a;++i)this.each(l(o[i],e,n));return this}var l=this.node().__on;if(l)for(var s,c=0,u=l.length;c<u;++c)for(i=0,s=l[c];i<a;++i)if((r=o[i]).type===s.type&&r.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return Ho(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Ho(this,t,e)}})(t,e))}};var No={"":function(t,e){t:for(var n,i=(t=t.toPrecision(e)).length,r=1,o=-1;r<i;++r)switch(t[r]){case".":o=n=r;break;case"0":0===o&&(o=r),n=r;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Eo(100*t,e)},r:Eo,s:function(t,e){var n=Fo(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(Wo=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Fo(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Oo=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Ro(t){return new Uo(t)}function Uo(t){if(!(e=Oo.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",r=e[3]||"-",o=e[4]||"",a=!!e[5],l=e[6]&&+e[6],s=!!e[7],c=e[8]&&+e[8].slice(1),u=e[9]||"";"n"===u?(s=!0,u="g"):No[u]||(u=""),(a||"0"===n&&"="===i)&&(a=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=o,this.zero=a,this.width=l,this.comma=s,this.precision=c,this.type=u}Uo.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Go,Yo,jo,Vo=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Xo(t){return t}function qo(t){var e,n,i=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,i){for(var r=t.length,o=[],a=0,l=e[0],s=0;r>0&&l>0&&(s+l+1>i&&(l=Math.max(1,i-s)),o.push(t.substring(r-=l,r+l)),!((s+=l+1)>i));)l=e[a=(a+1)%e.length];return o.reverse().join(n)}):Xo,r=t.currency,o=t.decimal;function a(t){var e=(t=Ro(t)).fill,n=t.align,a=t.sign,l=t.symbol,s=t.zero,c=t.width,u=t.comma,h=t.precision,d=t.type,f="$"===l?r[0]:"#"===l&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",p="$"===l?r[1]:/[%p]/.test(d)?"%":"",g=No[d],y=!d||/[defgprs%]/.test(d);function b(t){var r,l,b,_=f,v=p;if("c"===d)v=g(t)+v,t="";else{var m=((t=+t)<0||1/t<0)&&(t*=-1,!0);if(t=g(t,h),m)for(r=-1,l=t.length,m=!1;++r<l;)if(48<(b=t.charCodeAt(r))&&b<58||"x"===d&&96<b&&b<103||"X"===d&&64<b&&b<71){m=!0;break}if(_=(m?"("===a?a:"-":"-"===a||"("===a?"":a)+_,v=v+("s"===d?Vo[8+Wo/3]:"")+(m&&"("===a?")":""),y)for(r=-1,l=t.length;++r<l;)if(48>(b=t.charCodeAt(r))||b>57){v=(46===b?o+t.slice(r+1):t.slice(r))+v,t=t.slice(0,r);break}}u&&!s&&(t=i(t,1/0));var w=_.length+t.length+v.length,x=w<c?new Array(c-w+1).join(e):"";switch(u&&s&&(t=i(x+t,x.length?c-v.length:1/0),x=""),n){case"<":return _+t+v+x;case"=":return _+x+t+v;case"^":return x.slice(0,w=x.length>>1)+_+t+v+x.slice(w)}return x+_+t+v}return h=null==h?d?6:12:/[gprs]/.test(d)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),b.toString=function(){return t+""},b}return{format:a,formatPrefix:function(t,e){var n=a(((t=Ro(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Lo(e)/3))),r=Math.pow(10,-i),o=Vo[8+i/3];return function(t){return n(r*t)+o}}}}!function(t){Go=qo(t),Yo=Go.format,jo=Go.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var $o={value:function(){}};function Zo(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new Qo(i)}function Qo(t){this._=t}function Jo(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function Ko(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=$o,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}function ta(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Qo.prototype=Zo.prototype={constructor:Qo,on:function(t,e){var n,i,r=this._,o=(i=r,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,l=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<l;)if(n=(t=o[a]).type)r[n]=Ko(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Ko(r[n],t.name,null);return this}for(;++a<l;)if((n=(t=o[a]).type)&&(n=Jo(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Qo(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};var ea=function(t){return 1===t.length&&(t=function(t){return function(e,n){return ta(t(e),n)}}(t)),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}(ta).right;var na=Math.sqrt(50),ia=Math.sqrt(10),ra=Math.sqrt(2);function oa(t,e,n){var i=aa(t,e,n);return function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}(Math.ceil(t/i)*i,Math.floor(e/i)*i+i/2,i)}function aa(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return o>=na?r*=10:o>=ia?r*=5:o>=ra&&(r*=2),e<t?-r:r}var la=Array.prototype,sa=la.map,ca=la.slice;function ua(t){return+t}var ha=[0,1];function da(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=e,function(){return n});var n}function fa(t,e,n,i){var r=t[0],o=t[1],a=e[0],l=e[1];return o<r?(r=n(o,r),a=i(l,a)):(r=n(r,o),a=i(a,l)),function(t){return a(r(t))}}function pa(t,e,n,i){var r=Math.min(t.length,e.length)-1,o=new Array(r),a=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<r;)o[l]=n(t[l],t[l+1]),a[l]=i(e[l],e[l+1]);return function(e){var n=ea(t,e,1,r)-1;return a[n](o[n](e))}}function ga(t,e,n){var i,r=t[0],o=t[t.length-1],a=aa(r,o,null==e?10:e);switch((n=Ro(null==n?",f":n)).type){case"s":var l=Math.max(Math.abs(r),Math.abs(o));return null!=n.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Lo(e)/3)))-Lo(Math.abs(t)))}(a,l))||(n.precision=i),jo(n,l);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Lo(e)-Lo(t))+1}(a,Math.max(Math.abs(r),Math.abs(o))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=function(t){return Math.max(0,-Lo(Math.abs(t)))}(a))||(n.precision=i-2*("%"===n.type))}return Yo(n)}function ya(){var t=function(t,e){var n,i,r,o=ha,a=ha,l=sn,s=!1;function c(){return n=Math.min(o.length,a.length)>2?pa:fa,i=r=null,u}function u(e){return(i||(i=n(o,a,s?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:i(t)}}}(t):t,l)))(+e)}return u.invert=function(t){return(r||(r=n(a,o,da,s?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:i(t)}}}(e):e)))(+t)},u.domain=function(t){return arguments.length?(o=sa.call(t,ua),c()):o.slice()},u.range=function(t){return arguments.length?(a=ca.call(t),c()):a.slice()},u.rangeRound=function(t){return a=ca.call(t),l=cn,c()},u.clamp=function(t){return arguments.length?(s=!!t,c()):s},u.interpolate=function(t){return arguments.length?(l=t,c()):l},c()}(da,rn);return t.copy=function(){return e=t,ya().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp());var e},function(t){var e=t.domain;return t.ticks=function(t){var n=e();return oa(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return ga(e(),t,n)},t.nice=function(n){var i=e(),r=i.length-1,o=null==n?10:n,a=i[0],l=i[r],s=aa(a,l,o);return s&&(s=aa(Math.floor(a/s)*s,Math.ceil(l/s)*s,o),i[0]=Math.floor(a/s)*s,i[r]=Math.ceil(l/s)*s,e(i)),t},t}(t)}function ba(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}ba("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ba("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),ba("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ba("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),wn(Ze(300,.5,0),Ze(-240,.5,1));wn(Ze(-100,.75,.35),Ze(80,1.5,.8)),wn(Ze(260,.75,.35),Ze(80,1.5,.8)),Ze();function _a(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}_a(ba("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));_a(ba("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),_a(ba("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),_a(ba("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma=function(t){return t},wa=function(t){for(var e=[],n=0,i=t.length;n<i;n++)e[n]=t[i-n-1];return e},xa=function(t,e){t.each(function(){for(var t,n=function(t){return"string"==typeof t?new Io([[document.querySelector(t)]],[document.documentElement]):new Io([[t]],Do)}(this),i=n.text().split(/\s+/).reverse(),r=[],o=(n.attr("y"),parseFloat(n.attr("dy"))||0),a=n.text(null).append("tspan").attr("x",0).attr("dy",o+"em");t=i.pop();)r.push(t),a.text(r.join(" ")),a.node().getComputedTextLength()>e&&r.length>1&&(r.pop(),a.text(r.join(" ")),r=[t],a=n.append("tspan").attr("x",0).attr("dy",1.2+o+"em").text(t))})},Ca={d3_drawShapes:function(t,e,n,i,r,o){"rect"===t?e.attr("height",n).attr("width",i):"circle"===t?e.attr("r",r):"line"===t?e.attr("x1",0).attr("x2",i).attr("y1",0).attr("y2",0):"path"===t&&e.attr("d",o)},d3_addText:function(t,e,n,i,r){e.append("text").attr("class",i+"label");var o=t.selectAll("g."+i+"cell text."+i+"label").data(n).text(ma);return r&&t.selectAll("g."+i+"cell text."+i+"label").call(xa,r),o},d3_calcType:function(t,e,n,i,r,o){var a=t.invertExtent?function(t,e,n){var i=t.range().map(function(i){var r=t.invertExtent(i);return e(r[0])+" "+n+" "+e(r[1])});return{data:t.range(),labels:i,feature:ma}}(t,r,o):t.ticks?function(t,e,n){var i=[];if(e.length>1)i=e;else for(var r=t.domain(),o=(r[r.length-1]-r[0])/(e-1),a=0;a<e;a++)i.push(r[0]+a*o);var l=i.map(n);return{data:i,labels:l,feature:function(e){return t(e)}}}(t,n,r):function(t){return{data:t.domain(),labels:t.domain(),feature:function(e){return t(e)}}}(t),l=t.range&&t.range()||t.domain();return a.labels=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments[2],i=arguments[3];if("object"===(void 0===e?"undefined":va(e))){if(0===e.length)return t;for(var r=e.length;r<t.length;r++)e.push(t[r]);return e}if("function"==typeof e){for(var o=[],a=t.length,l=0;l<a;l++)o.push(e({i:l,genLength:a,generatedLabels:t,domain:n,range:i}));return o}return t}(a.labels,i,t.domain(),l),e&&(a.labels=wa(a.labels),a.data=wa(a.data)),a},d3_filterCells:function(t,e){var n=t.data.map(function(e,n){return{data:e,label:t.labels[n]}}).filter(e),i=n.map(function(t){return t.data}),r=n.map(function(t){return t.label});return t.data=t.data.filter(function(t){return-1!==i.indexOf(t)}),t.labels=t.labels.filter(function(t){return-1!==r.indexOf(t)}),t},d3_placement:function(t,e,n,i,r,o){e.attr("transform",n),i.attr("transform",r),"horizontal"===t&&i.style("text-anchor",o)},d3_addEvents:function(t,e){t.on("mouseover.legend",function(t){!function(t,e,n){t.call("cellover",n,e)}(e,t,this)}).on("mouseout.legend",function(t){!function(t,e,n){t.call("cellout",n,e)}(e,t,this)}).on("click.legend",function(t){!function(t,e,n){t.call("cellclick",n,e)}(e,t,this)})},d3_title:function(t,e,n,i){if(""!==e){t.selectAll("text."+n+"legendTitle").data([e]).enter().append("text").attr("class",n+"legendTitle"),t.selectAll("text."+n+"legendTitle").text(e),i&&t.selectAll("text."+n+"legendTitle").call(xa,i);var r=t.select("."+n+"legendCells"),o=t.select("."+n+"legendTitle").nodes().map(function(t){return t.getBBox().height})[0],a=-r.nodes().map(function(t){return t.getBBox().x})[0];r.attr("transform","translate("+a+","+o+")")}},d3_defaultLocale:{format:Yo,formatPrefix:jo},d3_defaultFormatSpecifier:".01f",d3_defaultDelimiter:"to"};var Sa=function(t){function n(e){var n=t.call(this)||this;n._disabled=[],n._owner=e,n._drawStartPos="origin";var i=n;return n._legendOrdinal=function(){var t=ya(),e="rect",n=15,i=15,r=10,o=2,a=[5],l=void 0,s=[],c="",u=!1,h="",d=Ca.d3_defaultLocale,f=Ca.d3_defaultFormatSpecifier,p=10,g="middle",y=Ca.d3_defaultDelimiter,b=void 0,_="vertical",v=!1,m=void 0,w=void 0,x=Zo("cellover","cellout","cellclick");function C(C){var S=Ca.d3_calcType(t,v,a,s,d.format(f),y);C.selectAll("g").data([t]).enter().append("g").attr("class",c+"legendCells"),l&&Ca.d3_filterCells(S,l);var T=C.select("."+c+"legendCells").selectAll("."+c+"cell").data(S.data),M=T.enter().append("g").attr("class",c+"cell");M.append(e).attr("class",c+"swatch");var A=C.selectAll("g."+c+"cell "+e+"."+c+"swatch").data(S.data);Ca.d3_addEvents(M,x),T.exit().transition().style("opacity",0).remove(),A.exit().transition().style("opacity",0).remove(),A=A.merge(A),Ca.d3_drawShapes(e,A,i,n,r,m);var B=Ca.d3_addText(C,M,S.labels,c,b);T=M.merge(T);var P=B.nodes().map(function(t){return t.getBBox()}),z=A.nodes().map(function(t){return t.getBBox()});u?A.attr("class",function(t){return c+"swatch "+S.feature(t)}):"line"==e?A.style("stroke",S.feature):A.style("fill",S.feature);var k,H=void 0,W=void 0,D="start"==g?0:"middle"==g?.5:1;"vertical"===_?(k=P.map(function(t,e){return Math.max(t.height,z[e].height)}),H=function(t,e){return"translate(0, "+(function(t,e){var n,i=0,r=t.length,o=-1;if(null==e)for(;++o<r;)(n=+t[o])&&(i+=n);else for(;++o<r;)(n=+e(t[o],o,t))&&(i+=n);return i}(k.slice(0,e))+e*o)+")"},W=function(t,e){return"translate( "+(z[e].width+z[e].x+p)+", "+(z[e].y+z[e].height/2+5)+")"}):"horizontal"===_&&(H=function(t,e){return"translate("+e*(z[e].width+o)+",0)"},W=function(t,e){return"translate("+(z[e].width*D+z[e].x)+",\n          "+(z[e].height+z[e].y+p+8)+")"}),Ca.d3_placement(_,T,H,B,W,g),Ca.d3_title(C,h,c,w),T.transition().style("opacity",1)}return C.scale=function(e){return arguments.length?(t=e,C):t},C.cells=function(t){return arguments.length?((t.length>1||t>=2)&&(a=t),C):a},C.cellFilter=function(t){return arguments.length?(l=t,C):l},C.shape=function(t,n){return arguments.length?(("rect"==t||"circle"==t||"line"==t||"path"==t&&"string"==typeof n)&&(e=t,m=n),C):e},C.shapeWidth=function(t){return arguments.length?(n=+t,C):n},C.shapeHeight=function(t){return arguments.length?(i=+t,C):i},C.shapeRadius=function(t){return arguments.length?(r=+t,C):r},C.shapePadding=function(t){return arguments.length?(o=+t,C):o},C.labels=function(t){return arguments.length?(s=t,C):s},C.labelAlign=function(t){return arguments.length?("start"!=t&&"end"!=t&&"middle"!=t||(g=t),C):g},C.locale=function(t){return arguments.length?(d=qo(t),C):d},C.labelFormat=function(t){return arguments.length?(f=Ro(t),C):C.locale().format(f)},C.labelOffset=function(t){return arguments.length?(p=+t,C):p},C.labelDelimiter=function(t){return arguments.length?(y=t,C):y},C.labelWrap=function(t){return arguments.length?(b=t,C):b},C.useClass=function(t){return arguments.length?(!0!==t&&!1!==t||(u=t),C):u},C.orient=function(t){return arguments.length?("horizontal"!=(t=t.toLowerCase())&&"vertical"!=t||(_=t),C):_},C.ascending=function(t){return arguments.length?(v=!!t,C):v},C.classPrefix=function(t){return arguments.length?(c=t,C):c},C.title=function(t){return arguments.length?(h=t,C):h},C.titleWidth=function(t){return arguments.length?(w=t,C):w},C.textWrap=function(t){return arguments.length?(textWrap=t,C):textWrap},C.on=function(){var t=x.on.apply(x,arguments);return t===x?C:t},C}().shape("path",function(){var t=Rr(Yr),e=Rr(64),n=null;function i(){var i;if(n||(n=i=Or()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return i.type=function(e){return arguments.length?(t="function"==typeof e?e:Rr(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:Rr(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}().type(Yr).size(150)()).shapePadding(10).shapeRadius(10).on("cellclick",function(t){i.onClick(t,this)}).on("cellover",function(t){i.onOver(t,n)}).on("cellout",function(t){i.onOut(t,n)}),n}return o(n,t),n.prototype.isDisabled=function(t){return void 0!==t&&("string"==typeof t?0===t.indexOf("__")||this._disabled.indexOf(t)>=0:t instanceof e.Database.Field?0===t.id().indexOf("__")||this._disabled.indexOf(t.id())>=0:this._disabled.indexOf(t)>=0)},n.prototype.filteredFields=function(){var t=this;switch(this.dataFamily()){case"2D":return this.fields();case"ND":return this.fields().filter(function(e){return!t.isDisabled(e)})}return this.fields()},n.prototype.filteredColumns=function(){var t=this;switch(this.dataFamily()){case"2D":return this.columns();case"ND":return this.columns().filter(function(e){return!t.isDisabled(e)})}return this.columns()},n.prototype.filteredData=function(){var t=this;switch(this.dataFamily()){case"2D":return this.data().filter(function(e){return!t.isDisabled(e[0])});case"ND":var e={},n=!1;return this.columns().forEach(function(i,r){var o=t.isDisabled(i);e[r]=o,o&&(n=!0)}),n?this.data().map(function(t){return t.filter(function(t,n){return!e[n]})}):this.data()}return this.data()},n.prototype.isRainbow=function(){var t=this.getWidget();return t&&t._palette&&"rainbow"===t._palette.type()},n.prototype.targetWidget=function(t){if(!arguments.length)return this._targetWidget;if(this._targetWidget=t,this._targetWidgetMonitor&&(this._targetWidgetMonitor.remove(),delete this._targetWidgetMonitor),this._targetWidget){var e=this;this._targetWidgetMonitor=this._targetWidget.monitor(function(t,n,i,r){switch(t){case"chart":case"columns":case"data":case"paletteID":e.lazyRender()}})}return this},n.prototype.getWidget=function(){if(this._targetWidget)switch(this._targetWidget.classID()){case"composite_MultiChart":return this._targetWidget.chart()}return this._targetWidget},n.prototype.getPalette=function(){var t=this.getWidget();if(t&&t._palette)switch(t._palette.type()){case"ordinal":return e.Palette.ordinal(t._palette.id());case"rainbow":return e.Palette.rainbow(t._palette.id())}return e.Palette.ordinal("default")},n.prototype.getPaletteType=function(){return this.getPalette().type()},n.prototype.fillColorFunc=function(){var t=this.getWidget();if(t&&t.fillColor)return t._palette&&t.paletteID&&t._palette.name!==t.paletteID()&&(t._palette=t._palette.switch(t.paletteID())),function(e,n,i){return t.fillColor(e,n,i)};var n=e.Palette.ordinal(t&&t.paletteID&&t.paletteID()||"default");return function(t,e,i){return n(e)}},n.prototype.fillColor=function(t,e,n){return this.fillColorFunc()(t,e,n)},n.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._g=n.append("g").attr("class","legendOrdinal")},n.prototype.update=function(e,n){var i=this;t.prototype.update.call(this,e,n);var r=[];if(this._targetWidget)switch(this.getPaletteType()){case"ordinal":var o=this.fillColorFunc();switch(this.dataFamily()){case"2D":r=this.data().map(function(t){return[o(t,t[0],!1),t[0]]},this);break;case"ND":r=this.columns().filter(function(t){return 0!==t.indexOf("__")}).filter(function(t,e){return e>0}).map(function(t){return[o(void 0,t,!1),t]},this);break;default:r=this.columns().map(function(t){return[o(void 0,t,!1),t]},this)}break;case"rainbow":var a=this.getPalette(),l=Un(this.rainbowFormat()),s=this.getWidget(),c=this.rainbowBins(),u=s._dataMinWeight,h=s._dataMaxWeight,d=(h-u)/(c-1);r.push([a(u,u,h),l(u)]);for(var f=1;f<c-1;++f){var p=d*f;Math.floor(p)>parseInt(r[0][1])&&(p=Math.floor(p)),r.push([a(p,u,h),l(p)])}r.push([a(h,u,h),l(h)])}var g=function t(e){var n=$n(),i=[],r=Kn;function o(t){var o=t+"",a=n.get(o);if(!a){if(r!==Kn)return r;n.set(o,a=i.push(t))}return e[(a-1)%e.length]}return e=null==e?[]:Jn.call(e),o.domain=function(t){if(!arguments.length)return i.slice();i=[],n=$n();for(var e,r,a=-1,l=t.length;++a<l;)n.has(r=(e=t[a])+"")||n.set(r,i.push(e));return o},o.range=function(t){return arguments.length?(e=Jn.call(t),o):e.slice()},o.unknown=function(t){return arguments.length?(r=t,o):r},o.copy=function(){return t().domain(i).range(e).unknown(r)},o}().domain(r.map(function(t){return t[1]})).range(r.map(function(t){return t[0]})),y=0,b=this.columns().length;this._legendOrdinal.orient(this.orientation()).title(this.title()).labelWrap(this.labelMaxWidth()).scale(g).labels(function(t){var e=0;switch(i.dataFamily()){case"ND":e=i.data().reduce(function(e,n){return e+n[t.i+1]},0);break;case"2D":e=i.data()[t.i].slice(1,b).reduce(function(t,e){return t+e},0)}var n=i.isDisabled(t.domain[t.i]);return n||(y+=e),t.domain[t.i]+(!n&&i.showSeriesTotal()?" ("+e+")":"")}),this._g.call(this._legendOrdinal),this.updateDisabled(n,r);var _=this.getBBox(!0,!0);this._g.attr("transform","translate(5,8)"),this.pos({x:this.width()/2-_.width/2,y:this.height()/2-_.height/2});var v=this._g.select(".legendCells").node().getBBox(),m=v.height/(r.length||1),w=this._g.selectAll(".legendTotal").data(r.length&&this.showLegendTotal()?[y]:[]),x=this._g.select(".label"),C="translate(0";x.empty()||1===x.attr("transform").split(",").length&&(C=x.attr("transform").split(" "));w.enter().append("text").classed("legendTotal",!0).merge(w).attr("transform",C+", "+(v.height+m/1.5)+")").text("Total: "+y),w.exit().remove()},n.prototype.updateDisabled=function(t,e){var n=this;t.style("cursor","pointer").selectAll("path.swatch").filter(function(t,n){return n<e.length}).style("stroke",function(t,n){return e[n][0]}).style("fill",function(t,i){return n._disabled.indexOf(t)<0?e[i][0]:"white"})},n.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},n.prototype.onClick=function(t,e){switch(this.getPaletteType()){case"ordinal":switch(this.dataFamily()){case"2D":case"ND":var n=this._disabled.indexOf(t);n<0?this._disabled.push(t):this._disabled.splice(n,1),this._owner.refreshColumns(),this._owner.refreshData(),this._owner.render()}}},n.prototype.onOver=function(t,e){if(i.instanceOfIHighlight(this._owner))switch(this.getPaletteType()){case"ordinal":switch(this.dataFamily()){case"2D":case"ND":this._disabled.indexOf(t)<0&&this._owner.highlightColumn(t)}}},n.prototype.onOut=function(t,e){if(i.instanceOfIHighlight(this._owner))switch(this.getPaletteType()){case"ordinal":switch(this.dataFamily()){case"2D":case"ND":this._owner.highlightColumn()}}},n.prototype.onDblClick=function(t,e){console.log("Legend onDblClick method"),console.log("rowData: "+t),console.log("rowIdx: "+e)},n.prototype.onMouseOver=function(t,e){console.log("Legend onMouseOver method"),console.log("rowData: "+t),console.log("rowIdx: "+e)},n}(e.SVGWidget);Sa.prototype._class+=" layout_Legend",Sa.prototype.publish("title","","string","Title"),Sa.prototype.publish("labelMaxWidth",null,"number","Max Label Width (pxiels)",null,{optional:!0}),Sa.prototype.publish("orientation","vertical","set","Orientation of Legend rows",["vertical","horizontal"],{tags:["Private"]}),Sa.prototype.publish("dataFamily","ND","set","Type of data",["1D","2D","ND","map","graph","any"],{tags:["Private"]}),Sa.prototype.publish("rainbowFormat",",","string","Rainbow number formatting",null,{tags:["Private"],optional:!0,disable:function(t){return!t.isRainbow()}}),Sa.prototype.publish("rainbowBins",8,"number","Number of rainbow bins",null,{tags:["Private"],disable:function(t){return!t.isRainbow()}}),Sa.prototype.publish("showSeriesTotal",!1,"boolean","Show value next to series"),Sa.prototype.publish("showLegendTotal",!1,"boolean","Show a total of the series values under the legend",null);s(".layout_Modal-header{background-color:#3f51b5;overflow:hidden}.layout_Modal-body{background-color:#fff;overflow-y:scroll;overflow-x:hidden}.layout_Modal-annotations,.layout_Modal-title{position:absolute}.layout_Modal-closeButton{cursor:pointer}.layout_Modal-closeButton:hover{opacity:.7}.layout_Modal-closeButton:active{opacity:.5}.layout_Modal-fade{position:fixed;background-color:#000;opacity:.5;z-index:10000}.layout_Modal-content{position:fixed;background-color:#fff;z-index:10100}.layout_Modal-fade-hidden{display:none}.layout_Modal-fadeClickable{cursor:pointer}");var Ta=function(t){function e(){var e=t.call(this)||this;return e._tag="div",e}return o(e,t),e.prototype.closeModal=function(){this.visible(!1)},e.prototype.getRelativeTarget=function(){var t;return this.relativeTargetId()&&(t=document.getElementById(this.relativeTargetId()))?t:!t&&(t=this.locateAncestor("layout_Grid"))&&t.element?t.element().node():document.body},e.prototype.setModalSize=function(){null!==this.fixedHeight()&&null!==this.fixedWidth()?this._modal.style("height",this.fixedHeight()).style("width",this.fixedWidth()).style("min-height",null).style("min-width",null).style("max-height",null).style("max-width",null):(this.minHeight()||this.minWidth())&&this._modal.style("min-height",this.minHeight()).style("min-width",this.minWidth()).style("max-height",this.maxHeight()).style("max-width",this.maxWidth());var t=this._modal.node().getBoundingClientRect(),e=this._modalHeader.node().getBoundingClientRect();return this._modalBody.style("height",t.height-e.height+"px").style("width",t.width),t},e.prototype.setFadePosition=function(t){this._fade.style("top",t.top+"px").style("left",t.left+"px").style("width",t.width+"px").style("height",t.height+"px")},e.prototype.setModalPosition=function(t){var e=this.setModalSize();if(null!==this.fixedTop()&&null!==this.fixedLeft())this._modal.style("top","calc("+this.fixedTop()+" + "+t.top+"px)").style("left","calc("+this.fixedLeft()+" + "+t.left+"px)");else if(null!==this.fixedHeight()&&null!==this.fixedWidth())this._modal.style("top",t.top+t.height/2-e.height/2+"px").style("left",t.left+t.width/2-e.width/2+"px");else if(this.minHeight()||this.minWidth()){var n=this._modal.node().getBoundingClientRect();this._modal.style("top",t.top+t.height/2-n.height/2+"px").style("left",t.left+t.width/2-n.width/2+"px")}},e.prototype.resize=function(e){return t.prototype.resize.call(this),this._modal&&this.setModalSize(),this},e.prototype.enter=function(e,n){var i=this;t.prototype.enter.call(this,e,n),this._fade=n.append("div").classed("layout_Modal-fade",!0).classed("layout_Modal-fadeClickable",this.enableClickFadeToClose()).classed("layout_Modal-fade-hidden",!this.showFade());var r=2*this.titleFontSize();this._modal=n.append("div").classed("layout_Modal-content",!0),this._modalHeader=this._modal.append("div").classed("layout_Modal-header",!0).style("color",this.titleFontColor()).style("font-size",this.titleFontSize()+"px").style("height",r+"px"),this._modalBody=this._modal.append("div").classed("layout_Modal-body",!0).style("height","calc( 100% - "+r+"px )").style("overflow-x",this.overflowX()).style("overflow-y",this.overflowY()),this._modalHeader.append("div").classed("layout_Modal-title",!0).style("line-height",this.titleFontSize()+"px").style("top",this.titleFontSize()/2+"px").style("left",this.titleFontSize()/2+"px").text(this.formattedTitle()),this._modalHeaderAnnotations=this._modalHeader.append("div").classed("layout_Modal-annotations",!0),this._modalHeaderCloseButton=this._modalHeaderAnnotations.append("div").classed("layout_Modal-closeButton",!0).html('<i class="fa fa-close"></i>'),this._modalHeaderAnnotations.style("line-height",this.titleFontSize()+"px").style("right",this.titleFontSize()/2+"px").style("top",this.titleFontSize()/2+"px"),this._modalHeaderCloseButton.on("click",function(){i.closeModal()}),this._fade.on("click",function(t){i.enableClickFadeToClose()&&i.closeModal()})},e.prototype.update=function(e,n){t.prototype.update.call(this,e,n),n.style("display",this.show()?null:"none"),this._fade.classed("layout_Modal-fade-hidden",!this.showFade()),this._relativeTarget=this.getRelativeTarget(),this.setModalSize();var i=this._relativeTarget.getBoundingClientRect();this.setFadePosition(i),this.setModalPosition(i),this.show()?(this._widget.target()||this._widget.target(this._modalBody.node()),this._widget.resize().render()):this._widget.target(null).render()},e.prototype.exit=function(e,n){this._widget&&this._widget.target(null),t.prototype.exit.call(this,e,n)},e.prototype.formattedTitle=function(){var t=this.title().trim();return t.length>0&&"("===t.slice(0,1)&&")"===t.slice(-1)?t.slice(1,-1):this.title()},e}(e.HTMLWidget);Ta.prototype._class+=" layout_Modal",Ta.prototype.publish("title",null,"string","title"),Ta.prototype.publish("widget",null,"widget","widget"),Ta.prototype.publish("titleFontSize",18,"number","titleFontSize (in pixels)"),Ta.prototype.publish("titleFontColor","#ffffff","html-color","titleFontColor"),Ta.prototype.publish("relativeTargetId",null,"string","relativeTargetId"),Ta.prototype.publish("show",!0,"boolean","show"),Ta.prototype.publish("showFade",!0,"boolean","showFade"),Ta.prototype.publish("enableClickFadeToClose",!0,"boolean","enableClickFadeToClose"),Ta.prototype.publish("minWidth","400px","string","minWidth"),Ta.prototype.publish("minHeight","400px","string","minHeight"),Ta.prototype.publish("maxWidth","800px","string","maxWidth"),Ta.prototype.publish("maxHeight","800px","string","maxHeight"),Ta.prototype.publish("fixedWidth",null,"string","fixedWidth"),Ta.prototype.publish("fixedHeight",null,"string","fixedHeight"),Ta.prototype.publish("fixedTop",null,"string","fixedTop"),Ta.prototype.publish("fixedLeft",null,"string","fixedLeft"),Ta.prototype.publish("overflowX","hidden","string","overflowX"),Ta.prototype.publish("overflowY","scroll","string","overflowY");s(".layout_ChartPanel .series.highlight{stroke-width:2px;opacity:1}.layout_ChartPanel .series.lowlight{opacity:.3!important}");var Ma=function(t){function i(){var i=t.call(this)||this;return i._legend=new Sa(i).enableOverflow(!0),i._progressBar=new e.ProgressBar,i._autoScale=!1,i._resolutions={tiny:{width:100,height:100},small:{width:300,height:300}},i._modal=new Ta,i._toggleInfo=(new e.ToggleButton).faChar("fa-info-circle").tooltip(".Description").selected(!1).on("enabled",function(){return""!==i.description()}).on("click",function(){if(i._toggleInfo.selected()){i._modal.title(i.title()).widget((new e.Text).text(i.description())).show(!0).render();var t=i._modal._close;i._modal._close=function(){i._toggleInfo.selected(!1).render(),i._modal._close=t}}}).on("mouseMove",function(){}).on("mouseOut",function(){}),i._toggleData=(new e.ToggleButton).faChar("fa-table").tooltip("Data").on("click",function(){i.dataVisible(i._toggleData.selected()),i.render()}),i._buttonDownload=(new e.Button).faChar("fa-download").tooltip("Download").on("click",function(){i.downloadCSV()}),i._buttonDownloadImage=(new e.Button).faChar("fa-image").tooltip("Download Image").on("click",function(){i.downloadPNG()}),i._toggleLegend=(new e.ToggleButton).faChar("fa-list-ul").tooltip("Legend").selected(!1).on("click",function(){i.legendVisible(i._toggleLegend.selected()),i.render()}),i._spacer=new e.Spacer,i._titleBar=(new e.TitleBar).buttons([i._toggleData,i._buttonDownload,i._buttonDownloadImage,i._spacer,i._toggleLegend]),i._carousel=new Hn,i._table=new n.Table,i._hideLegendToggleList=["dgrid_Table"],i._tag="div",i}return o(i,t),i.prototype.fields=function(e){return arguments.length?(t.prototype.fields.call(this,e),this._legend.fields(e),this.refreshFields(),this):t.prototype.fields.call(this)},i.prototype.refreshFields=function(){return this._widget.fields(this._legend.filteredFields()),this._table.fields(this._legend.filteredFields()),this},i.prototype.columns=function(e,n){return arguments.length?(t.prototype.columns.call(this,e,n),this._legend.columns(e,n),this.refreshColumns(),this):t.prototype.columns.call(this)},i.prototype.refreshColumns=function(){return this._widget.columns(this._legend.filteredColumns()),this._table.columns(this._legend.filteredColumns()),this},i.prototype.data=function(e){return arguments.length?(t.prototype.data.call(this,e),this._legend.data(e),this.refreshData(),this):t.prototype.data.call(this)},i.prototype.refreshData=function(){return this._widget.data(this._legend.filteredData()),this._table.data(this._legend.filteredData()),this},i.prototype.highlight=function(t){return arguments.length?(this._highlight=t,this):this._highlight},i.prototype.startProgress=function(){this._progressBar.start()},i.prototype.finishProgress=function(){this._progressBar.finish()},i.prototype.buttons=function(t){return arguments.length?(this._titleBar.buttons(t),this):this._titleBar.buttons()},i.prototype.downloadCSV=function(){var t=this.downloadTitle()?this.downloadTitle():this.title()?this.title():"data",n=this.downloadTimestampSuffix()?"_"+e.Utility.timestamp():"";return e.Utility.downloadString("CSV",this._widget.export("CSV"),t+n),this},i.prototype.downloadPNG=function(){var t=this.widget();return t instanceof e.SVGWidget&&(this.legendVisible()?t.downloadPNG(this.title(),this._legend):t.downloadPNG(this.title())),this},i.prototype.highlightColumn=function(t){if(t){var e="series-"+this.cssTag(t);this._centerWA.element().selectAll(".series").each(function(){var t=it(this),n=t.classed(e);t.classed("highlight",n).classed("lowlight",!n)})}else this._centerWA.element().selectAll(".series").classed("highlight",!1).classed("lowlight",!1);return this},i.prototype.getResponsiveMode=function(){return this.enableAutoscaling()?this._autoScale?this.size().width<=this._resolutions.tiny.width||this.size().height<=this._resolutions.tiny.height?"tiny":this.size().width<=this._resolutions.small.width||this.size().height<=this._resolutions.small.height?"small":"regular":"regular":"none"},i.prototype.setOrigSize=function(){this._orig_size=JSON.parse(JSON.stringify(this.size()))},i.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._modal.target(this.target()).relativeTargetId(this.id()),this.top(this._titleBar),this.center(this._carousel),this.right(this._legend),this._legend.targetWidget(this._widget).orientation("vertical").title("").visible(!1),this._progressBar.enter(e,n),this.setOrigSize()},i.prototype.preUpdateTiny=function(t){t.selectAll("div.body,div.title-text,div.icon-bar").style("display","none")},i.prototype.preUpdateSmall=function(t){var e=this._orig_size.width/this._resolutions.small.width,n=this._orig_size.height/this._resolutions.small.height;this._scale=Math.min(e,n);var i=this._scale===e;this.size({width:i?this._resolutions.small.width:this._orig_size.width*(1/this._scale),height:i?this._orig_size.height*(1/this._scale):this._resolutions.small.height}),t.select("div.title-icon").style("position","static"),t.selectAll("lhs").style("display","none"),t.selectAll("div.body,div.title-text,div.icon-bar").style("display",""),t.selectAll("div.data-count").style("visibility","hidden"),t.style("transform","scale("+this._scale+")")},i.prototype.preUpdateRegular=function(t){t.selectAll("div.body,div.title-text,div.icon-bar").style("display",""),t.selectAll("div.data-count").style("visibility","hidden"),t.select("div.title-icon").style("position","static"),t.style("transform","translate(0px,0px) scale(1)")},i.prototype.update=function(n,i){this._prevdataVisible!==this.dataVisible()&&(this._prevdataVisible=this.dataVisible(),this._toggleData.selected(this._prevdataVisible),this._carousel.active(this._prevdataVisible?1:0)),this._prevlegendVisible!==this.legendVisible()&&(this._prevlegendVisible=this.legendVisible(),this._toggleLegend.selected(this._prevlegendVisible),this._legend.visible(this._prevlegendVisible));var r=this.getResponsiveMode();switch(r){case"tiny":this.preUpdateTiny(i);break;case"small":this.preUpdateSmall(i);break;case"regular":this.preUpdateRegular(i)}var o="composite_MultiChart"===this._widget.classID()?this._widget.chart():this._widget;if(this._legend.dataFamily(o._dataFamily||"any"),this._prevChartDataFamily!==this._legend.dataFamily())switch(this._prevChartDataFamily=this._legend.dataFamily(),this._prevChartDataFamily){case"any":this._toggleLegend.selected(!1),this._legend.visible(!1)}if(i.style("box-shadow",this.highlight()?"inset 0px 0px 0px "+this.highlightSize()+"px "+this.highlightColor():"none"),-1!==this._hideLegendToggleList.indexOf(o.classID())?(this._spacer.visible(!1),this._toggleLegend.visible(!1)):(this._spacer.visible(!0),this._toggleLegend.visible(!0)),this._prevChart!==o){this._prevChart=o;var a=o?o._titleBar||o._iconBar:void 0;if(a&&a instanceof e.IconBar){this._prevButtons=this._prevButtons||this.buttons().slice();var l=a.buttons().concat([new e.Spacer],this._prevButtons);a.buttons([]).render(),this.buttons(l)}else this._prevButtons&&this.buttons(this._prevButtons)}var s=[];switch(this.dataButtonVisible()||s.push(this._toggleData),this.downloadButtonVisible()||s.push(this._buttonDownload),this.downloadImageButtonVisible()||s.push(this._buttonDownloadImage),this.legendButtonVisible()||s.push(this._toggleLegend),this._buttonDownloadImage.enabled(this.widget()instanceof e.SVGWidget),this._titleBar.hiddenButtons(s).visible(this.titleVisible()),this.topOverlay(this.titleOverlay()||!this.titleVisible()),t.prototype.update.call(this,n,i),r){case"tiny":this.postUpdateTiny(i);break;case"small":this.postUpdateSmall(i);break;case"regular":this.postUpdateRegular(i)}},i.prototype.postUpdateTiny=function(t){t.selectAll("div.body,div.title-text,div.icon-bar").style("display","none"),t.selectAll("div.data-count").style("visibility","visible").style("font-size",this.titleIconFontSize()/3+"px").style("line-height",this.titleIconFontSize()/3+"px").style("left",this.titleIconFontSize()+"px").text(this.data().length),t.style("transform","translate(0px,0px) scale(1)");var e=t.selectAll("div.title-icon"),n=e.node(),i=t.node().parentElement.getBoundingClientRect();if(n){var r=e.node().getBoundingClientRect(),o=i.height/2;e.style("position","absolute").style("left","calc(50% - "+r.width/2+"px)").style("top",o-r.height/2+"px"),t.selectAll("div.data-count").style("position","absolute").style("left","calc(50% + "+r.width/2+"px)").style("top",o-r.height/2+"px")}},i.prototype.postUpdateSmall=function(t){t.selectAll("lhs").style("display","none"),t.selectAll("div.title-icon").style("position","static"),t.selectAll("div.body,div.title-text,div.icon-bar").style("display",""),t.selectAll("div.data-count").style("visibility","hidden");var e=t.node().getBoundingClientRect(),n=t.node().parentElement.getBoundingClientRect();t.style("transform","translate("+(n.x-e.x)+"px, "+(n.y-e.y)+"px) scale("+this._scale+")")},i.prototype.postUpdateRegular=function(t){t.selectAll("div.title-icon").style("position","static"),t.selectAll("div.body,div.title-text,div.icon-bar").style("display",""),t.selectAll("div.data-count").style("visibility","hidden")},i.prototype.exit=function(e,n){this._progressBar.exit(e,n),this.right(null),this._legend.target(null),this.center(null),this._carousel.target(null),this.top(null),this._titleBar.target(null),this._modal.target(null),delete this._prevChart,delete this._prevButtons,delete this._prevChartDataFamily,delete this._prevPos,delete this._prevdataVisible,delete this._prevlegendVisible,t.prototype.exit.call(this,e,n)},i.prototype.click=function(t,e,n){},i.prototype.dblclick=function(t,e,n){},i.prototype.vertex_click=function(t,e,n,i){i&&i.vertex},i.prototype.vertex_dblclick=function(t,e,n,i){i&&i.vertex},i.prototype.edge_click=function(t,e,n,i){i&&i.edge},i.prototype.edge_dblclick=function(t,e,n,i){i&&i.edge},i}(xt);Ma.prototype._class+=" layout_ChartPanel",Ma.prototype.publishReset(),Ma.prototype.publishProxy("title","_titleBar"),Ma.prototype.publish("titleVisible",!0,"boolean"),Ma.prototype.publish("titleOverlay",!1,"boolean"),Ma.prototype.publishProxy("titleIcon","_titleBar"),Ma.prototype.publishProxy("titleIconFont","_titleBar"),Ma.prototype.publishProxy("titleFont","_titleBar"),Ma.prototype.publishProxy("titleIconFontSize","_titleBar"),Ma.prototype.publishProxy("titleFontSize","_titleBar"),Ma.prototype.publishProxy("description","_titleBar"),Ma.prototype.publishProxy("descriptionFont","_titleBar"),Ma.prototype.publishProxy("descriptionFontSize","_titleBar"),Ma.prototype.publish("dataVisible",!1,"boolean","Show data table"),Ma.prototype.publish("dataButtonVisible",!0,"boolean","Show data table button"),Ma.prototype.publish("downloadButtonVisible",!0,"boolean","Show data download button"),Ma.prototype.publish("downloadImageButtonVisible",!1,"boolean","Show image download button"),Ma.prototype.publish("downloadTitle","","string","File name when downloaded"),Ma.prototype.publish("downloadTimestampSuffix",!0,"boolean","Use timestamp as file name suffix"),Ma.prototype.publish("legendVisible",!1,"boolean","Show legend"),Ma.prototype.publish("legendButtonVisible",!0,"boolean","Show legend button"),Ma.prototype.publishProxy("legend_labelMaxWidth","_legend","labelMaxWidth"),Ma.prototype.publishProxy("legend_showSeriesTotal","_legend","showSeriesTotal"),Ma.prototype.publishProxy("legend_showLegendTotal","_legend","showLegendTotal"),Ma.prototype.publish("widget",null,"widget","Widget",void 0,{render:!1}),Ma.prototype.publish("enableAutoscaling",!1,"boolean"),Ma.prototype.publish("highlightSize",4,"number"),Ma.prototype.publish("highlightColor","#e67e22","html-color"),Ma.prototype.publishProxy("progress_halfLife","_progressBar","halfLife"),Ma.prototype.publishProxy("progress_decay","_progressBar","decay"),Ma.prototype.publishProxy("progress_size","_progressBar","size"),Ma.prototype.publishProxy("progress_color","_progressBar","color"),Ma.prototype.publishProxy("progress_blurBar","_progressBar","blurBar"),Ma.prototype.publishProxy("progress_blurSize","_progressBar","blurSize"),Ma.prototype.publishProxy("progress_blurColor","_progressBar","blurColor"),Ma.prototype.publishProxy("progress_blurOpacity","_progressBar","blurOpacity"),Ma.prototype.widget=function(t){if(!arguments.length)return this._widget;this._carousel.widgets([t,this._table]),this._widget=t,this._widget.fields(this._legend.filteredFields()).data(this._legend.filteredData());var e=this,n=this._widget;return n.click=function(){e.click.apply(e,arguments)},n.dblclick=function(){e.dblclick.apply(e,arguments)},n.vertex_click=function(){e.vertex_click.apply(e,arguments)},n.vertex_dblclick=function(){e.vertex_dblclick.apply(e,arguments)},n.edge_click=function(){e.edge_click.apply(e,arguments)},n.edge_dblclick=function(){e.edge_dblclick.apply(e,arguments)},this};s(".layout_FlexGrid{display:flex}.FlexGrid-list-item{overflow:hidden;border-style:solid;flex-grow:1}");var Aa=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),it(e.parentNode).style("height","100%").style("width","100%")},e.prototype.update=function(e,n){var i=this;t.prototype.update.call(this,e,n);var r=this,o=[];this.updateFlexParent(n);var a=n.selectAll(".FlexGrid-list-item").data(this.widgets(),function(t){return t.id()});a.enter().append("div").classed("FlexGrid-list-item",!0).each(function(t){t.target(this)}).merge(a).style("min-height",this.itemMinHeight()+"px").style("min-width",this.itemMinWidth()+"px").style("flex-basis",function(t,e){var n=i.widgetsFlexBasis()[e];return void 0!==n?n:i.flexBasis()}).style("flex-grow",function(t,e){var n=i.widgetsFlexGrow()[e];return void 0!==n?n:i.flexGrow()}).style("border-width",this.borderWidth()+"px").style("border-color",this.itemBorderColor()).each(function(){this.firstChild.style.display="none"}).each(function(){var t=this.getBoundingClientRect();o.push([t.width,t.height])}).each(function(t,e){this.firstChild.style.display="block",t.resize({width:o[e][0]-2*r.borderWidth(),height:o[e][1]-2*r.borderWidth()})}),a.exit().remove()},e.prototype.exit=function(e,n){t.prototype.exit.call(this,e,n)},e.prototype.updateFlexParent=function(t){var e=this;t.style("height","100%").style("flex-direction","horizontal"===this.orientation()?"row":"column").style("flex-wrap",this.flexWrap()).style("align-items",this.alignItems()).style("align-content",this.alignContent()).style("overflow-x",function(){return e.forceXScroll()||"horizontal"===e.orientation()&&"nowrap"===e.flexWrap()&&!e.disableScroll()?"scroll":"hidden"}).style("overflow-y",function(){return e.forceYScroll()||"vertical"===e.orientation()&&"nowrap"===e.flexWrap()&&!e.disableScroll()?"scroll":"hidden"})},e}(e.HTMLWidget);Aa.prototype._class+=" layout_FlexGrid",Aa.prototype.publish("itemBorderColor","transparent","html-color","Color of list item borders"),Aa.prototype.publish("borderWidth",0,"number","Width of list item borders (pixels)"),Aa.prototype.publish("orientation","horizontal","set","Controls the flex-direction of the list items",["horizontal","vertical"]),Aa.prototype.publish("flexWrap","wrap","set","Controls the line wrap when overflow occurs",["nowrap","wrap","wrap-reverse"]),Aa.prototype.publish("disableScroll",!1,"boolean","If false, scrollbar will show (when flexWrap is set to 'nowrap')",null,{disable:function(t){return"nowrap"!==t.flexWrap()}}),Aa.prototype.publish("forceXScroll",!1,"boolean","If true, horzontal scrollbar will show"),Aa.prototype.publish("forceYScroll",!1,"boolean","If true, vertical scrollbar will show"),Aa.prototype.publish("itemMinHeight",64,"number","Minimum height of a list item (pixels)"),Aa.prototype.publish("itemMinWidth",64,"number","Minimum width of a list item (pixels)"),Aa.prototype.publish("alignItems","stretch","set","Controls normal alignment of items",["flex-start","center","flex-end","stretch"]),Aa.prototype.publish("alignContent","stretch","set","Controls normal alignment of item rows",["flex-start","center","flex-end","stretch","space-between","space-around"]),Aa.prototype.publish("flexGrow",1,"number","Default flex-grow style for all list items"),Aa.prototype.publish("flexBasis","10%","string","Default flex-basis style for all list items"),Aa.prototype.publish("widgetsFlexGrow",[],"array","Array of flex-grow values keyed on the widgets array"),Aa.prototype.publish("widgetsFlexBasis",[],"array","Array of flex-basis values keyed on the widgets array"),Aa.prototype.publish("widgets",[],"widgetArray","Array of widgets to be rendered as list items");"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Ba=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t,e){t.exports=function(){var t=function(t,e){for(var n in this._options=e,this.defaults)this._options.hasOwnProperty(n)||(this._options[n]=this.defaults[n]);this.items=t,this._adjustSizeOfItems(),this.generateGrid()};t.cloneItems=function(t,e){var n,i;for(void 0===e&&(e=[]),n=0;n<t.length;n++)for(i in e[n]||(e[n]={}),t[n])e[n][i]=t[n][i];return e},t.prototype={defaults:{lanes:5,direction:"horizontal"},toString:function(){var t,e,n,i=this.grid.length,r="\n #|",o="\n --";for(e=0;e<i;e++)r+=" "+this._padNumber(e," "),o+="---";for(r+=o,e=0;e<this._options.lanes;e++)for(r+="\n"+this._padNumber(e," ")+"|",n=0;n<i;n++)r+=" ",t=this.grid[n][e],r+=t?this._padNumber(this.items.indexOf(t),"0"):"--";return r+="\n"},generateGrid:function(){var t;for(this._resetGrid(),t=0;t<this.items.length;t++)this._markItemPositionToGrid(this.items[t])},resizeGrid:function(t){var e=0;this._options.lanes=t,this._adjustSizeOfItems(),this._sortItemsByPosition(),this._resetGrid();for(var n=0;n<this.items.length;n++){var i=this.items[n],r=this._getItemPosition(i);this._updateItemPosition(i,this.findPositionForItem(i,{x:e,y:0})),e=Math.max(e,r.x)}this._pullItemsToLeft()},findPositionForItem:function(t,e,n){var i,r,o;for(i=e.x;i<this.grid.length;i++)if(void 0!==n){if(o=[i,n],this._itemFitsAtPosition(t,o))return o}else for(r=e.y;r<this._options.lanes;r++)if(o=[i,r],this._itemFitsAtPosition(t,o))return o;var a=this.grid.length,l=0;return void 0!==n&&this._itemFitsAtPosition(t,[a,n])&&(l=n),[a,l]},moveItemToPosition:function(t,e){var n=this._getItemPosition({x:e[0],y:e[1],w:t.w,h:t.h});this._updateItemPosition(t,[n.x,n.y]),this._resolveCollisions(t)},resizeItem:function(t,e){var n=e.w||t.w,i=e.h||t.h;this._updateItemSize(t,n,i),this._resolveCollisions(t),this._pullItemsToLeft()},getChangedItems:function(t,e){for(var n=[],i=0;i<t.length;i++){var r=this._getItemByAttribute(e,t[i][e]);r.x===t[i].x&&r.y===t[i].y&&r.w===t[i].w&&r.h===t[i].h||n.push(r)}return n},_sortItemsByPosition:function(){this.items.sort(function(t,e){var n=this._getItemPosition(t),i=this._getItemPosition(e);return n.x!=i.x?n.x-i.x:n.y!=i.y?n.y-i.y:0}.bind(this))},_adjustSizeOfItems:function(){for(var t=0;t<this.items.length;t++){var e=this.items[t];void 0===e.autoSize&&(e.autoSize=0===e.w||0===e.h),e.autoSize&&("horizontal"===this._options.direction?e.h=this._options.lanes:e.w=this._options.lanes)}},_resetGrid:function(){this.grid=[]},_itemFitsAtPosition:function(t,e){var n,i,r=this._getItemPosition(t);if(e[0]<0||e[1]<0)return!1;if(e[1]+r.h>this._options.lanes)return!1;for(n=e[0];n<e[0]+r.w;n++){var o=this.grid[n];if(o)for(i=e[1];i<e[1]+r.h;i++)if(o[i]&&o[i]!==t)return!1}return!0},_updateItemPosition:function(t,e){null!==t.x&&null!==t.y&&this._deleteItemPositionFromGrid(t),this._setItemPosition(t,e),this._markItemPositionToGrid(t)},_updateItemSize:function(t,e,n){null!==t.x&&null!==t.y&&this._deleteItemPositionFromGrid(t),t.w=e,t.h=n,this._markItemPositionToGrid(t)},_markItemPositionToGrid:function(t){var e,n,i=this._getItemPosition(t);for(this._ensureColumns(i.x+i.w),e=i.x;e<i.x+i.w;e++)for(n=i.y;n<i.y+i.h;n++)this.grid[e][n]=t},_deleteItemPositionFromGrid:function(t){var e,n,i=this._getItemPosition(t);for(e=i.x;e<i.x+i.w;e++)if(this.grid[e])for(n=i.y;n<i.y+i.h;n++)this.grid[e][n]==t&&(this.grid[e][n]=null)},_ensureColumns:function(t){var n;for(n=0;n<t;n++)this.grid[n]||this.grid.push(new e(this._options.lanes))},_getItemsCollidingWithItem:function(t){for(var e=[],n=0;n<this.items.length;n++)t!=this.items[n]&&this._itemsAreColliding(t,this.items[n])&&e.push(n);return e},_itemsAreColliding:function(t,e){var n=this._getItemPosition(t),i=this._getItemPosition(e);return!(i.x>=n.x+n.w||i.x+i.w<=n.x||i.y>=n.y+n.h||i.y+i.h<=n.y)},_resolveCollisions:function(t){this._tryToResolveCollisionsLocally(t)||this._pullItemsToLeft(t),this._pullItemsToLeft()},_tryToResolveCollisionsLocally:function(e){var n=this._getItemsCollidingWithItem(e);if(!n.length)return!0;var i,r,o,a,l=new t([],this._options);t.cloneItems(this.items,l.items),l.generateGrid();for(var s=0;s<n.length;s++){var c=l.items[n[s]],u=this._getItemPosition(c),h=this._getItemPosition(e);if(i=[h.x-u.w,u.y],r=[h.x+h.w,u.y],o=[u.x,h.y-u.h],a=[u.x,h.y+h.h],l._itemFitsAtPosition(c,i))l._updateItemPosition(c,i);else if(l._itemFitsAtPosition(c,o))l._updateItemPosition(c,o);else if(l._itemFitsAtPosition(c,a))l._updateItemPosition(c,a);else{if(!l._itemFitsAtPosition(c,r))return!1;l._updateItemPosition(c,r)}}return t.cloneItems(l.items,this.items),this.generateGrid(),!0},_pullItemsToLeft:function(t){if(this._sortItemsByPosition(),this._resetGrid(),t){var e=this._getItemPosition(t);this._updateItemPosition(t,[e.x,e.y])}for(var n=0;n<this.items.length;n++){var i=this.items[n],r=this._getItemPosition(i);if(!t||i!=t){var o=this._findLeftMostPositionForItem(i),a=this.findPositionForItem(i,{x:o,y:0},r.y);this._updateItemPosition(i,a)}}},_findLeftMostPositionForItem:function(t){for(var e=0,n=this._getItemPosition(t),i=0;i<this.grid.length;i++)for(var r=n.y;r<n.y+n.h;r++){var o=this.grid[i][r];if(o){var a=this._getItemPosition(o);this.items.indexOf(o)<this.items.indexOf(t)&&(e=a.x+a.w)}}return e},_getItemByAttribute:function(t,e){for(var n=0;n<this.items.length;n++)if(this.items[n][t]===e)return this.items[n];return null},_padNumber:function(t,e){return t>=10?t:e+t},_getItemPosition:function(t){return"horizontal"===this._options.direction?t:{x:t.y,y:t.x,w:t.h,h:t.w}},_setItemPosition:function(t,e){"horizontal"===this._options.direction?(t.x=e[0],t.y=e[1]):(t.x=e[1],t.y=e[0])}};var e=function(t){for(var e=0;e<t;e++)this.push(null)};return e.prototype=[],t}()}),Pa=Object.freeze({default:Ba,__moduleExports:Ba});s('.layout_Grid>.ddCell{position:absolute}.layout_Grid>.laneBackground{position:absolute;border-style:solid;border-width:1px;background:#f5f5f5}.layout_Grid>.lane{position:absolute;border-style:none;opacity:.25;border-radius:0;pointer-events:none}.layout_Grid>.ddCell.draggable{border-style:solid;border-width:1px;background-color:#f8f8ff;border-radius:0;cursor:move}.layout_Grid>.ddCell.draggable>.resizeHandle{bottom:0;right:0;width:8px;height:8px;border-style:none;position:absolute;cursor:nwse-resize}.layout_Grid>.ddCell.draggable .resizeHandleDisplay{bottom:2px;right:2px;width:4px;height:4px;border-color:#a9a9a9;border-style:solid;border-width:0 2px 2px 0;background-color:none;position:absolute}.layout_Grid>.ddCell.draggable .resizeHandleDisplay:hover{border-color:orange}.layout_Grid>.dragging{background:repeating-linear-gradient(-45deg,transparent,transparent 4px,hsla(0,0%,39.2%,.1) 0,hsla(0,0%,39.2%,.1) 8px)}.layout_Grid>.dragging,.layout_Grid>.resizing{border:1px solid grey;border-radius:0;position:absolute}.layout_Grid>.resizing{background-color:orange;opacity:.3;background:repeating-linear-gradient(-45deg,transparent,transparent 4px,orange 0,orange 8px)}.layout_Grid>.ddCell.draggable .common_Widget.selected{border:1px solid red;background-color:grey;border-radius:0;position:absolute;background:repeating-linear-gradient(-45deg,transparent,transparent 4px,rgba(100,0,0,.1) 0,rgba(100,0,0,.1) 8px)}.layout_Grid #drag-me:before{content:"#" attr(id);font-weight:700}');var za=Pa&&Ba||Pa,ka=function(t){function n(){var n=t.call(this)||this;return n._tag="div",n._selectionBag=new e.Utility.Selection(n),n.content([]),n}return o(n,t),n.prototype.getDimensions=function(){var t={width:0,height:0};return this.content().forEach(function(e){t.width<e.gridCol()+e.gridColSpan()&&(t.width=e.gridCol()+e.gridColSpan()),t.height<e.gridRow()+e.gridRowSpan()&&(t.height=e.gridRow()+e.gridRowSpan())},this),t},n.prototype.clearContent=function(t){this.content(this.content().filter(function(e){if(!t)return e.target(null),!1;for(var n=e;n;){if(t===n)return e.target(null),!1;n=n.widget?n.widget():null}return!0}))},n.prototype.setContent=function(t,e,n,i,r,o){if(r=r||1,o=o||1,i=i||"",this.content(this.content().filter(function(n){return n.gridRow()!==t||n.gridCol()!==e||(n.target(null),!1)})),n){var a=(new vt).gridRow(t).gridCol(e).widget(n).title(i).gridRowSpan(r).gridColSpan(o);this.content().push(a)}return this},n.prototype.sortedContent=function(){return this.content().sort(function(t,e){return t.gridRow()===e.gridRow()?t.gridCol()-e.gridCol():t.gridRow()-e.gridRow()})},n.prototype.getCell=function(t,e){var n=null;return this.content().some(function(i){return t>=i.gridRow()&&t<i.gridRow()+i.gridRowSpan()&&e>=i.gridCol()&&e<i.gridCol()+i.gridColSpan()&&(n=i,!0)}),n},n.prototype.getWidgetCell=function(t){var e=null;return this.content().some(function(n){return n.widget().id()===t&&(e=n,!0)}),e},n.prototype.getContent=function(t){var e=null;return this.content().some(function(n){return n.widget().id()===t&&(e=n.widget(),!0)}),e},n.prototype.cellToGridItem=function(t){return{x:t.gridCol(),y:t.gridRow(),w:t.gridColSpan(),h:t.gridRowSpan(),id:t.id(),cell:t}},n.prototype.gridItemToCell=function(t){t.cell.gridCol(t.x).gridRow(t.y).gridColSpan(t.w).gridRowSpan(t.h)},n.prototype.resetItemsPos=function(){this.origItems.forEach(function(t){var e=this.itemsMap[t.id];e.x=t.x,e.y=t.y},this)},n.prototype.initGridList=function(){this.itemsMap={},this.items=this.content().map(function(t){var e=this.cellToGridItem(t);return this.itemsMap[e.id]=e,e},this),this.origItems=this.content().map(this.cellToGridItem),this.gridList=new za(this.items,{direction:this.snapping(),lanes:"horizontal"===this.snapping()?this.snappingRows():this.snappingColumns()})},n.prototype.killGridList=function(){this.gridList=null,delete this.items,delete this.itemsMap},n.prototype.enter=function(n,i){t.prototype.enter.call(this,n,i),this._scrollBarWidth=e.Platform.getScrollbarWidth();var r=this;this._d3Drag=bt().subject(function(t){var e=r.cellToGridItem(t);return{x:e.x*r.cellWidth,y:e.y*r.cellHeight}}).on("start",function(t){if(r.designMode()){X.sourceEvent.stopPropagation(),r.initGridList();var e=r.itemsMap[t.id()];r.dragItem=i.append("div").attr("class","dragging").style("transform",function(){return"translate("+e.x*r.cellWidth+"px, "+e.y*r.cellHeight+"px)"}).style("width",function(){return e.w*r.cellWidth-r.gutter()+"px"}).style("height",function(){return e.h*r.cellHeight-r.gutter()+"px"}),r.selectionBagClick(t)}}).on("drag",function(t){if(r.designMode()){X.sourceEvent.stopPropagation();var e=r.itemsMap[t.id()];X.x<0&&(X.x=0),X.x+e.w*r.cellWidth>r.snappingColumns()*r.cellWidth&&(X.x=r.snappingColumns()*r.cellWidth-e.w*r.cellWidth),X.y<0&&(X.y=0),X.y+e.h*r.cellWidth>r.snappingRows()*r.cellWidth&&(X.y=r.snappingRows()*r.cellWidth-e.h*r.cellWidth);var n=[Math.max(0,Math.floor((X.x+r.cellWidth/2)/r.cellWidth)),Math.max(0,Math.floor((X.y+r.cellHeight/2)/r.cellHeight))];e.x===n[0]&&e.y===n[1]||("none"!==r.snapping()?(r.resetItemsPos(),r.gridList.moveItemToPosition(e,n)):(e.x=n[0],e.y=n[1]),t.gridCol()===e.x&&t.gridRow()===e.y||(r.items.forEach(r.gridItemToCell),r.updateGrid(!1,100))),r.dragItem.style("transform",function(){return"translate("+X.x+"px, "+X.y+"px)"}).style("width",function(){return e.w*r.cellWidth+"px"}).style("height",function(){return e.h*r.cellHeight+"px"})}}).on("end",function(){r.designMode()&&(X.sourceEvent.stopPropagation(),r.dragItem.remove(),r.dragItem=null,r.killGridList())}),this._d3DragResize=bt().subject(function(t){var e=r.cellToGridItem(t);return{x:(e.x+e.w-1)*r.cellWidth,y:(e.y+e.h-1)*r.cellHeight}}).on("start",function(t){if(r.designMode()){X.sourceEvent.stopPropagation(),r.initGridList();var e=r.itemsMap[t.id()];r.dragItem=i.append("div").attr("class","resizing").style("transform",function(){return"translate("+e.x*r.cellWidth+"px, "+e.y*r.cellHeight+"px)"}).style("width",function(){return e.w*r.cellWidth-r.gutter()+"px"}).style("height",function(){return e.h*r.cellHeight-r.gutter()+"px"}),r.dragItemPos={x:e.x,y:e.y}}}).on("drag",function(t){if(r.designMode()){X.sourceEvent.stopPropagation();var e=r.itemsMap[t.id()],n=[Math.max(0,Math.round(X.x/r.cellWidth)),Math.max(0,Math.round(X.y/r.cellHeight))],i={w:Math.max(1,n[0]-e.x+1),h:Math.max(1,n[1]-e.y+1)};e.w===i.w&&e.h===i.h||("none"!==r.snapping()?(r.resetItemsPos(),r.gridList.resizeItem(e,i)):(e.w=i.w,e.h=i.h),t.gridColSpan()===e.w&&t.gridRowSpan()===e.h||(r.items.forEach(r.gridItemToCell),r.updateGrid(e.id,100))),r.dragItem.style("width",function(){return(1-e.x)*r.cellWidth+X.x-r.gutter()+"px"}).style("height",function(){return(1-e.y)*r.cellHeight+X.y-r.gutter()+"px"})}}).on("end",function(){r.designMode()&&(X.sourceEvent.stopPropagation(),r.dragItem.remove(),r.dragItem=null,r.killGridList())})},n.prototype.updateGrid=function(t,e,n){void 0===e&&(e=0),e=e||0;var i=this;this.divItems.classed("draggable",this.designMode()).transition().duration(e).style("left",function(t){return t.gridCol()*i.cellWidth+i.gutter()/2+"px"}).style("top",function(t){return t.gridRow()*i.cellHeight+i.gutter()/2+"px"}).style("width",function(t){return t.gridColSpan()*i.cellWidth-i.gutter()+"px"}).style("height",function(t){return t.gridRowSpan()*i.cellHeight-i.gutter()+"px"}).on("end",function(e){e.surfaceShadow_default(i.surfaceShadow()).surfacePadding_default(i.surfacePadding()).surfaceBorderWidth_default(i.surfaceBorderWidth()).surfaceBackgroundColor_default(i.surfaceBackgroundColor()),!0!==t&&t!==e.id()||e.resize().lazyRender()})},n.prototype.update=function(e,n){t.prototype.update.call(this,e,n),this._placeholderElement.style("overflow-x","width"===this.fitTo()?"hidden":null),this._placeholderElement.style("overflow-y","width"===this.fitTo()?"scroll":null);var i=this.getDimensions(),r=this.width()-("width"===this.fitTo()?this._scrollBarWidth:0);if(this.cellWidth=r/i.width,this.cellHeight="all"===this.fitTo()?this.height()/i.height:this.cellWidth,this.designMode()){var o=Math.min(this.width()/this.snappingColumns(),this.height()/this.snappingRows()),a=Math.floor(o);this.cellWidth=a,this.cellHeight=this.cellWidth}var l=this,s=n.selectAll("#"+this.id()+" > .ddCell").data(this.content(),function(t){return t.id()});this.divItems=s.enter().append("div").attr("class","ddCell").each(function(t){t.target(this),t.__grid_watch=t.monitor(function(e,n,i){!l._renderCount||"snapping"!==e&&0!==e.indexOf("grid")||n===i||l.gridList||(l.initGridList(),"none"!==l.snapping()&&l.gridList.resizeGrid("horizontal"===l.snapping()?l.snappingRows():l.snappingColumns()),l.items.forEach(l.gridItemToCell),l.updateGrid(t.id(),100),l.killGridList())}),it(this).append("div").attr("class","resizeHandle").call(l._d3DragResize).append("div").attr("class","resizeHandleDisplay")}).merge(s),this.divItems.each(function(t){var e=it(this);l.designMode()?e.call(l._d3Drag):e.on("mousedown.drag",null).on("touchstart.drag",null)}),this.divItems.select(".resizeHandle").style("display",this.designMode()?null:"none"),this.updateGrid(!0),s.exit().each(function(t){t.target(null),t.__grid_watch&&t.__grid_watch.remove()}).remove();var c=n.selectAll("#"+this.id()+" > .laneBackground").data(this.designMode()?[""]:[]);c.enter().insert("div",":first-child").attr("class","laneBackground").style("left","1px").style("top","1px").on("click",function(){l.selectionBagClear()}).merge(c).style("width",this.snappingColumns()*this.cellWidth+"px").style("height",this.snappingRows()*this.cellHeight+"px"),c.exit().each(function(){l.selectionBagClear()}).remove();var u=n.selectAll("#"+this.id()+" > .lane").data(this.designMode()?[""]:[]);u.enter().append("div").attr("class","lane").style("left","1px").style("top","1px"),u.style("display",this.showLanes()?null:"none").style("width",this.snappingColumns()*this.cellWidth+"px").style("height",this.snappingRows()*this.cellHeight+"px").style("background-image","linear-gradient(to right, grey 1px, transparent 1px), linear-gradient(to bottom, grey 1px, transparent 1px)").style("background-size",this.cellWidth+"px "+this.cellHeight+"px"),u.exit().remove()},n.prototype.exit=function(e,n){this.content().forEach(function(t){return t.target(null)}),t.prototype.exit.call(this,e,n)},n.prototype._createSelectionObject=function(t){return{_id:t._id,element:function(){return t._element},widget:t}},n.prototype.selection=function(t){return arguments.length?(this._selectionBag.set(t.map(function(t){return this._createSelectionObject(t)},this)),this):this._selectionBag.get().map(function(t){return t._id})},n.prototype.selectionBagClear=function(){this._selectionBag.isEmpty()||(this._selectionBag.clear(),this.postSelectionChange())},n.prototype.selectionBagClick=function(t){if(null!==t){var e=this._createSelectionObject(t);if(X.sourceEvent.ctrlKey)this._selectionBag.isSelected(e)?(this._selectionBag.remove(e),this.postSelectionChange()):(this._selectionBag.append(e),this.postSelectionChange());else{var n=this._selectionBag.get();1===n.length&&n[0]._id===e._id?this.selectionBagClear():this._selectionBag.set([e]),this.postSelectionChange()}}},n.prototype.postSelectionChange=function(){},n.prototype.applyLayout=function(t){this.divItems.each(function(e,n){if(t[n]){var i=t[n],r=i[0],o=i[1],a=i[2],l=i[3];e.gridCol(r).gridRow(o).gridColSpan(a).gridRowSpan(l)}}),this.updateGrid(!0)},n.prototype.vizActivation=function(t){},n}(e.HTMLWidget);ka.prototype._class+=" layout_Grid",ka.prototype.publish("designMode",!1,"boolean","Design Mode",null,{tags:["Basic"]}),ka.prototype.publish("showLanes",!0,"boolean","Show snapping lanes when in design mode",null,{tags:["Basic"],disable:function(t){return!t.designMode()}}),ka.prototype.publish("fitTo","all","set","Sizing Strategy",["all","width"],{tags:["Basic"]}),ka.prototype.publish("snapping","vertical","set","Snapping Strategy",["vertical","horizontal","none"]),ka.prototype.publish("snappingColumns",12,"number","Snapping Columns"),ka.prototype.publish("snappingRows",16,"number","Snapping Rows"),ka.prototype.publish("gutter",6,"number","Gap Between Widgets",null,{tags:["Basic"]}),ka.prototype.publish("surfaceShadow",!0,"boolean","3D Shadow"),ka.prototype.publish("surfacePadding",null,"string","Cell Padding (px)",null,{tags:["Intermediate"]}),ka.prototype.publish("surfaceBorderWidth",1,"number","Width (px) of Cell Border",null,{tags:["Intermediate"]}),ka.prototype.publish("surfaceBackgroundColor",null,"html-color","Surface Background Color",null,{tags:["Advanced"]}),ka.prototype.publish("content",[],"widgetArray","widgets",null,{tags:["Basic"],render:!1});var Ha=function(t){function e(){var e=t.call(this)||this;return e.orientation_default("horizontal"),e.flexWrap_default("nowrap"),e}return o(e,t),e}(Aa);Ha.prototype._class+=" layout_HorizontalList";s(".layout_Layered{pointer-events:none}.layout_Layered>.container>.content{position:absolute}.layout_Layered>.container>.content>div>.common_Widget,.layout_Layered>.container>.content>div>svg>.common_Widget{pointer-events:all}");var Wa=function(t){function n(){var e=t.call(this)||this;return e._tag="div",e._widgetPlacements=[],e._widgetRatios=[],e}return o(n,t),n.prototype.addLayer=function(t,n,i,r){void 0===n&&(n="default"),void 0===i&&(i=1),void 0===r&&(r=1);var o=this.widgets();return o.push(t||(new e.Text).text("No widget defined for layer.")),this.widgets(o),this._widgetPlacements.push(n),this._widgetRatios.push([i,r]),this},n.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._contentContainer=n.append("div").attr("class","container")},n.prototype.update=function(e,n){t.prototype.update.call(this,e,n);var i=this;n.style("padding",this.surfacePadding()+"px");var r=this._contentContainer.selectAll(".content.id"+this.id()).data(this.widgets(),function(t){return t.id()});r.enter().append("div").attr("class","content id"+this.id()).each(function(t,e){t.target(this)}).merge(r).each(function(t,e){var n={width:i.clientWidth(),height:i.clientHeight()},r=i.widgetSize(e,n),o=i.widgetPosition(e,n,r);console.log("widgetPosition",o),this.style.top=o.y+"px",this.style.left=o.x+"px",t.resize(r).render()}),r.exit().each(function(t,e){t.target(null)}).remove(),r.order()},n.prototype.widgetSize=function(t,e){return this._widgetPlacements[t],{width:e.width*this._widgetRatios[t][0],height:e.height*this._widgetRatios[t][1]}},n.prototype.widgetPosition=function(t,e,n){switch(this._widgetPlacements[t]){default:return{x:0,y:0};case"top":return{x:e.width/2-n.width/2,y:0};case"bottom":return{x:e.width/2-n.width/2,y:e.height-n.height};case"left":return{x:0,y:e.height/2-n.height/2};case"right":return{x:e.width-n.width,y:e.height/2-n.height/2};case"center":return{x:e.width/2-n.width/2,y:e.height/2-n.height/2}}},n}(e.HTMLWidget);Wa.prototype._class+=" layout_Layered",Wa.prototype.publish("surfacePadding",0,"number","Padding"),Wa.prototype.publish("widgets",[],"widgetArray","widgets",null,{tags:["Private"]});var Da=function(t){function e(){var e=t.call(this)||this;return e._tag="div",e._surfaceButtons=[],e}return o(e,t),e.prototype.updateState=function(t){t=t||!this.popupState(),this.popupState(t).render()},e.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this.widget().target(e),this._originalPosition=this.position()},e.prototype.update=function(e,n){t.prototype.update.call(this,e,n),n.style("visibility",this.popupState()?null:"hidden").style("opacity",this.popupState()?null:0).style("width",this.shrinkWrap()?this.widget().width()+"px":this._size.width+"px").style("height",this.shrinkWrap()?this.widget().height()+"px":this._size.height+"px"),0===this.widget().size().height&&this.widget().resize(this.size())},e.prototype.postUpdate=function(e,n){var i,r;switch(this.centerPopup()){case"container":this._placeholderElement&&(i=parseInt(this._placeholderElement.style("width"))/2-this.widget().width()/2,r=parseInt(this._placeholderElement.style("height"))/2-this.widget().height()/2),this.position("absolute");break;case"window":i=window.innerWidth/2-this.widget().width()/2,r=window.innerHeight/2-this.widget().height()/2,this.position("fixed");break;default:i=0,r=0,this.position(this._originalPosition)}this.pos({x:i,y:r}),t.prototype.postUpdate.call(this,e,n),n.style("position",this.position()).style("left",this.left()+"px").style("right",this.right()+"px").style("top",this.top()+"px").style("bottom",this.bottom()+"px")},e.prototype.exit=function(e,n){this.widget()&&this.widget().target(null),t.prototype.exit.call(this,e,n)},e.prototype.click=function(t){console.log("Clicked: "+t.id)},e}(e.HTMLWidget);Da.prototype._class+=" layout_Popup",Da.prototype.publish("popupState",!1,"boolean","State of the popup, visible (true) or hidden (false)",null,{}),Da.prototype.publish("shrinkWrap",!1,"boolean","The popup parent container either shrinks to the size of its contents (true) or expands to fit thge popup's parentDiv (false)",null,{}),Da.prototype.publish("centerPopup","none","set","Center the widget in its container element (target) or in the window",["none","container","window"],{}),Da.prototype.publish("top",null,"number","Top position property of popup",null,{}),Da.prototype.publish("bottom",null,"number","Bottom position property of popup",null,{}),Da.prototype.publish("left",null,"number","Left position property of popup",null,{}),Da.prototype.publish("right",null,"number","Right position property of popup",null,{}),Da.prototype.publish("position","relative","set","Value of the 'position' property",["absolute","relative","fixed","static","initial","inherit"],{tags:["Private"]}),Da.prototype.publish("widget",null,"widget","Widget",null,{tags:["Private"]});s(".layout_Tabbed .tab-button{position:relative;top:1px;display:inline-block;border-left:1px solid #ddd;border-top:1px solid #ddd;border-right:1px solid #ddd;background-color:transparent;margin-right:4px;padding:2px 2px 4px;background-color:#ccc}.layout_Tabbed .tab-button.active{background-color:#fff;z-index:999}.layout_Tabbed .on_bottom .tab-button{border-bottom:1px solid #ddd;border-top:none;top:-1px}");var Ia=function(t){function n(){var e=t.call(this)||this;return e._tag="div",e}return o(n,t),n.prototype.clearTabs=function(){return this.labels([]),this.widgets([]),this},n.prototype.addTab=function(t,n,i,r){var o=t.size();0===o.width&&0===o.height&&t.size({width:"100%",height:"100%"});var a=this.labels(),l=this.widgets();i&&this.activeTabIdx(this.widgets().length),a.push(n);var s=(new _t).widget(t||(new e.Text).text("No widget defined for tab"));return l.push(s),this.labels(a),this.widgets(l),r&&r(s),this},n.prototype.widgetSize=function(t){var e=this.clientWidth(),n=this.clientHeight(),i=this._tabContainer.node().getBoundingClientRect();return void 0!==i.height&&(n-=i.height),{width:e,height:n}},n.prototype.enter=function(e,n){t.prototype.enter.call(this,e,n),this._tabContainer=n.append("div"),this._contentContainer=n.append("div")},n.prototype.update=function(e,n){t.prototype.update.call(this,e,n);var i=this;n.style("padding",this.surfacePadding_exists()?this.surfacePadding()+"px":null);var r=this._tabContainer.selectAll(".tab-button.id"+this.id()).data(this.showTabs()?this.labels():[],function(t){return t});r.enter().append("span").attr("class","tab-button id"+this.id()).style("cursor","pointer").on("click",function(t,e){i.click(i.widgets()[e].widget(),t,e),i.activeTabIdx(e).render()}).merge(r).classed("active",function(t,e){return i.activeTabIdx()===e}).text(function(t){return t}),r.exit().remove();var o=this._contentContainer.selectAll(".tab-content.id"+this.id()).data(this.widgets(),function(t){return t.id()});switch(o.enter().append("div").attr("class","tab-content id"+this.id()).each(function(t,e){t.target(this)}).merge(o).classed("active",function(t,e){return i.activeTabIdx()===e}).style("display",function(t,e){return i.activeTabIdx()===e?"block":"none"}).each(function(t,e){if(t.visible(i.activeTabIdx()===e),i.activeTabIdx()===e){var n=i.widgetSize(it(this));t.surfaceBorderWidth(i.showTabs()?null:0).surfacePadding(i.showTabs()?null:0).resize(n)}}),o.exit().each(function(t,e){t.target(null)}).remove(),this.tabLocation()){case"bottom":this._tabContainer.attr("class","on_bottom").style("top",this._contentContainer.node().offsetHeight+this.surfacePadding()+"px").style("position","absolute"),this._contentContainer.style("top",this.surfacePadding_exists()?this.surfacePadding()+"px":null).style("position","absolute");break;default:this._tabContainer.attr("class","on_top").style("top",null).style("position","relative"),this._contentContainer.style("top",this._tabContainer.node().offsetHeight+this.surfacePadding()+"px").style("position","absolute")}},n.prototype.click=function(t,e,n){},n}(e.HTMLWidget);Ia.prototype._class+=" layout_Tabbed",Ia.prototype.publish("showTabs",!0,"boolean","Show Tabs",null,{}),Ia.prototype.publish("surfacePadding",4,"number","Padding"),Ia.prototype.publish("activeTabIdx",0,"number","Index of active tab",null,{}),Ia.prototype.publish("labels",[],"array","Array of tab labels sharing an index with ",null,{tags:["Private"]}),Ia.prototype.publish("tabLocation","top","set","Position the tabs at the bottom of the widget",["top","bottom"],{tags:["Private"]}),Ia.prototype.publish("widgets",[],"widgetArray","widgets",null,{tags:["Private"]});function Fa(){e.HTMLWidget.call(this),this._tag="div"}s(".layout_Toolbar{height:100%;background-color:#ddd;white-space:nowrap;overflow:hidden}.layout_Toolbar .toolbar-title{display:inline-block;position:relative;top:50%;transform:translateY(-50%);-ms-transform:translateY(-50%);margin-left:4px;font-weight:700;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.layout_Toolbar .toolbar-child{position:relative;top:50%;transform:translateY(-50%);-ms-transform:translateY(-50%);float:right;margin-left:4px;margin-right:4px;line-height:16px}"),Fa.prototype=Object.create(e.HTMLWidget.prototype),Fa.prototype.constructor=Fa,Fa.prototype._class+=" layout_Toolbar",Fa.prototype.publish("title","","string","Title",null,{tags:["Intermediate"]}),Fa.prototype.publish("fontSize",null,"number","Title Font Size (px)",null,{tags:["Advanced"],optional:!0}),Fa.prototype.publish("fontColor",null,"html-color","Title Font Color",null,{tags:["Advanced"],optional:!0}),Fa.prototype.publish("fontFamily",null,"string","Title Font Family",null,{tags:["Advanced"],optional:!0}),Fa.prototype.publish("fontBold",!0,"boolean","Enable Bold Title Font",null,{tags:["Advanced"],optional:!0}),Fa.prototype.publish("backgroundColor",null,"html-color","Background Color",null,{tags:["Intermediate"],optional:!0}),Fa.prototype.publish("responsive",!0,"boolean","Adapts to pixel width",null,{tags:["Basic"]}),Fa.prototype.publish("widgets",[],"widgetArray","Child widgets of the toolbar",null,{tags:["Basic"]}),Fa.prototype.publish("widgetClasses",[],"array","Array of Html Element classes to be assigned to the child widgets (shares index with widgets param)",null,{tags:["Basic"]}),Fa.prototype.enter=function(t,n){e.HTMLWidget.prototype.enter.apply(this,arguments)},Fa.prototype.update=function(t,n){e.HTMLWidget.prototype.update.apply(this,arguments);var i=this;n.attr("title",i.title()).style("background-color",this.backgroundColor());var r=n.selectAll("div.toolbar-title").data(this.title()?[this.title()]:[]);r.enter().append("div").classed("toolbar-title",!0).append("span"),r.selectAll("div.toolbar-title > span").style("font-size",this.fontSize_exists()?this.fontSize()+"px":null).style("color",this.fontColor_exists()?this.fontColor():null).style("font-family",this.fontFamily_exists()?this.fontFamily():null).style("font-weight",this.fontBold_exists()?this.fontBold()?"bold":"normal":null).style("background-color",this.backgroundColor_exists()?this.backgroundColor():null).text(i.title()),r.exit().remove();var o=n.selectAll("div.toolbar-child").data(null!==this.widgets()?this.widgets():[],function(t){return t.id()});o.enter().insert("div","div.toolbar-title").each(function(t,e){var n=i.widgetClasses()[e]?i.widgetClasses()[e]+" toolbar-child":"toolbar-child";it(this).classed(n,!0),t.target(this)}),o.exit().each(function(t){t.target(null)}).remove(),o.order()},Fa.prototype.render=function(t){var n=this;e.HTMLWidget.prototype.render.call(this,function(e){var i=n.element().node().getBoundingClientRect(),r=i.left+i.width;n.element().selectAll("div.toolbar-child").each(function(t,e){var n=this.getBoundingClientRect();r>n.left&&(r=n.left)}),n.element().select(".toolbar-title").style("width",r-i.left-4+"px"),t&&t(e)})},Fa.prototype.exit=function(t,n){e.HTMLWidget.prototype.exit.apply(this,arguments),this.widgets().forEach(function(t){t.target(null)})};var La=function(t){function e(){var e=t.call(this)||this;return e.orientation_default("vertical"),e.flexWrap_default("nowrap"),e}return o(e,t),e}(Aa);La.prototype._class+=" layout_VerticalList",t.AbsoluteSurface=c,t.Accordion=u,t.BUILD_VERSION="2.10.1",t.Border=mt,t.Border2=xt,t.Carousel=Hn,t.Cell=vt,t.ChartPanel=Ma,t.FlexGrid=Aa,t.Grid=ka,t.HorizontalList=Ha,t.Layered=Wa,t.Legend=Sa,t.Modal=Ta,t.PKG_NAME="@hpcc-js/layout",t.PKG_VERSION="2.15.1",t.Popup=Da,t.Surface=_t,t.Tabbed=Ia,t.Toolbar=Fa,t.VerticalList=La,t.WidgetDiv=wt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map